(* Content-type: application/mathematica *)

(*** Wolfram Notebook File ***)
(* http://www.wolfram.com/nb *)

(* CreatedBy='Mathematica 6.0' *)

(*CacheID: 234*)
(* Internal cache information:
NotebookFileLineBreakTest
NotebookFileLineBreakTest
NotebookDataPosition[       145,          7]
NotebookDataLength[    745317,      21844]
NotebookOptionsPosition[    706904,      20855]
NotebookOutlinePosition[    735418,      21533]
CellTagsIndexPosition[    735200,      21523]
WindowFrame->Normal*)

(* Beginning of Notebook Content *)
Notebook[{

Cell[CellGroupData[{
Cell["Braketing Rules", "Section",
 CellTags->"qa:BR.0"],

Cell["Load QuantumAlgebra", "Text",
 CellChangeTimes->{{3.445241782351946*^9, 3.445241789997946*^9}}],

Cell[BoxData[
 RowBox[{"<<", "QuantumAlgebra`QuantumAlgebra`"}]], "InputOnly",
 CellChangeTimes->{{3.4452417944789457`*^9, 3.4452418043759456`*^9}}],

Cell[CellGroupData[{

Cell["Braketing on Single State Spaces", "Subsection",
 CellChangeTimes->{{3.473794767892765*^9, 3.473794772453026*^9}},
 CellTags->"qa:BR.1"],

Cell[TextData[{
 "The inner product between two states of a single state space gives a \
complex number. In ",
 StyleBox["QuantumAlgebra",
  FontSlant->"Italic"],
 " the inner product is represented as a noncommutative product between a bra \
and a ket. In some cases, this is fordward simplified and the result is a \
braket object which represents the complex number. In other instances, the \
product is left unevaluated. Here are two examples:"
}], "Text",
 CellChangeTimes->{{3.4441640107792*^9, 3.4441640364832*^9}, {
   3.4441640918142*^9, 3.4441642429122*^9}, {3.444233129322*^9, 
   3.444233129648*^9}, {3.445240857450946*^9, 3.4452408581459455`*^9}, {
   3.445240889469946*^9, 3.4452408986059456`*^9}, 3.445842391758*^9, {
   3.473794804606865*^9, 3.4737948084810867`*^9}, {3.473881940802287*^9, 
   3.47388197617131*^9}, {3.473882006262031*^9, 3.473882080921301*^9}, {
   3.473882214406936*^9, 3.4738822149859695`*^9}, {3.4738822709761715`*^9, 
   3.4738823130015755`*^9}, {3.473882489799688*^9, 3.4738825183713217`*^9}, {
   3.4738826319498186`*^9, 3.473882642855442*^9}, {3.4738925616627655`*^9, 
   3.4738926268984966`*^9}, {3.473892662205516*^9, 3.473892699496649*^9}, {
   3.473892734452648*^9, 3.473892754499795*^9}, {3.4738969057592335`*^9, 
   3.4738969103644967`*^9}, {3.473896941107255*^9, 3.473896967974792*^9}, {
   3.4738971038405633`*^9, 3.4738971080228024`*^9}, {3.4738972250604963`*^9, 
   3.473897281258711*^9}, {3.47389738229949*^9, 3.473897382611508*^9}, {
   3.473897443053965*^9, 3.4738975668970485`*^9}, {3.473899168628662*^9, 
   3.4738991721828656`*^9}, {3.4738992660442343`*^9, 3.473899478116364*^9}, 
   3.4739509297586184`*^9, {3.473951292123345*^9, 3.473951317708808*^9}, {
   3.5943770261812687`*^9, 3.59437706047723*^9}}],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{
  TagBox[
   RowBox[{"\[LeftAngleBracket]", 
    AdjustmentBox[
     TagBox["n",
      QuantumAlgebra`QuantumAlgebra`BraArgs,
      BaseStyle->"BraKetArg"],
     BoxBaselineShift->0], 
    AdjustmentBox["\[VerticalSeparator]",
     BoxBaselineShift->-0.1,
     BoxMargins->{{0, -0.2}, {0, 0}}]}],
   QuantumAlgebra`QuantumAlgebra`Bra,
   BaseStyle->"BraWrapper"], "\[CenterDot]", 
  TagBox[
   RowBox[{
    AdjustmentBox["\[VerticalSeparator]",
     BoxBaselineShift->-0.1,
     BoxMargins->{{-0.2, 0}, {0, 0}}], 
    AdjustmentBox[
     TagBox["m",
      QuantumAlgebra`QuantumAlgebra`KetArgs,
      BaseStyle->"BraKetArg"],
     BoxBaselineShift->0], "\[RightAngleBracket]"}],
   QuantumAlgebra`QuantumAlgebra`Ket,
   BaseStyle->"KetWrapper"]}]], "Input",
 CellChangeTimes->{{3.4441648944751997`*^9, 3.4441649014102*^9}, {
   3.445245011325946*^9, 3.4452450424099455`*^9}, {3.4738927127184052`*^9, 
   3.4738927183497276`*^9}, {3.4738970147654686`*^9, 
   3.4738970244170203`*^9}, {3.4738999717135963`*^9, 3.4738999725896463`*^9}, 
   3.5943769836758375`*^9}],

Cell[BoxData[
 TagBox[
  RowBox[{"\[LeftAngleBracket]", 
   AdjustmentBox[
    RowBox[{
     TagBox["n",
      QuantumAlgebra`QuantumAlgebra`BraKetArgs,
      BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
     TagBox["m",
      QuantumAlgebra`QuantumAlgebra`BraKetArgs,
      BaseStyle->"BraKetArg"]}],
    BoxBaselineShift->0], "\[RightAngleBracket]"}],
  QuantumAlgebra`QuantumAlgebra`Braket,
  BaseStyle->"BraKetWrapper"]], "Output",
 CellChangeTimes->{3.473899115451621*^9, 3.4738999750627875`*^9, 
  3.473949245085261*^9, 3.5943769839788547`*^9}]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{
  TagBox[
   RowBox[{"\[LeftAngleBracket]", 
    AdjustmentBox[
     TagBox["n",
      QuantumAlgebra`QuantumAlgebra`BraArgs,
      BaseStyle->"BraKetArg"],
     BoxBaselineShift->0], 
    AdjustmentBox["\[VerticalSeparator]",
     BoxBaselineShift->-0.1,
     BoxMargins->{{0, -0.2}, {0, 0}}]}],
   QuantumAlgebra`QuantumAlgebra`Bra,
   BaseStyle->"BraWrapper"], "\[CenterDot]", 
  TagBox[
   SubscriptBox[
    RowBox[{
     AdjustmentBox["\[VerticalSeparator]",
      BoxBaselineShift->-0.1,
      BoxMargins->{{-0.2, 0}, {0, 0}}], 
     AdjustmentBox[
      TagBox["m",
       QuantumAlgebra`QuantumAlgebra`KetArgs,
       BaseStyle->"BraKetArg"],
      BoxBaselineShift->0], "\[RightAngleBracket]"}], 
    TagBox[
     AdjustmentBox[
      TagBox["x",
       QuantumAlgebra`QuantumAlgebra`KetArgs,
       BaseStyle->"BraKetArg"],
      BoxBaselineShift->0],
     QuantumAlgebra`QuantumAlgebra`UDScript,
     BaseStyle->"RIndex"]],
   QuantumAlgebra`QuantumAlgebra`Ket,
   BaseStyle->"KetWrapper"]}]], "Input",
 CellChangeTimes->{{3.473951326901334*^9, 3.4739513315816016`*^9}, {
  3.594376994664466*^9, 3.5943770073931937`*^9}}],

Cell[BoxData[
 RowBox[{
  TagBox[
   RowBox[{"\[LeftAngleBracket]", 
    AdjustmentBox[
     TagBox["n",
      QuantumAlgebra`QuantumAlgebra`BraArgs,
      BaseStyle->"BraKetArg"],
     BoxBaselineShift->0], 
    AdjustmentBox["\[VerticalSeparator]",
     BoxBaselineShift->-0.1,
     BoxMargins->{{0, -0.2}, {0, 0}}]}],
   QuantumAlgebra`QuantumAlgebra`Bra,
   BaseStyle->"BraWrapper"], "\[CenterDot]", 
  TagBox[
   SubscriptBox[
    RowBox[{
     AdjustmentBox["\[VerticalSeparator]",
      BoxBaselineShift->-0.1,
      BoxMargins->{{-0.2, 0}, {0, 0}}], 
     AdjustmentBox[
      TagBox["m",
       QuantumAlgebra`QuantumAlgebra`KetArgs,
       BaseStyle->"BraKetArg"],
      BoxBaselineShift->0], "\[RightAngleBracket]"}], 
    TagBox[
     AdjustmentBox[
      TagBox["x",
       QuantumAlgebra`QuantumAlgebra`KetArgs,
       BaseStyle->"BraKetArg"],
      BoxBaselineShift->0],
     QuantumAlgebra`QuantumAlgebra`UDScript,
     BaseStyle->"RIndex"]],
   QuantumAlgebra`QuantumAlgebra`Ket,
   BaseStyle->"KetWrapper"]}]], "Output",
 CellChangeTimes->{3.473951332322644*^9, 3.594377007862221*^9}]
}, Open  ]],

Cell["\<\
The usefulness of the first behavior is evident if the values of the brakets \
are known or if we want to treat them as variables. For instance, it would be \
desirebale that this simplification takes place for inner products between \
elements of a given basis.\
\>", "Text",
 CellChangeTimes->{{3.4441642981282*^9, 3.4441645219842*^9}, 
   3.4441645555081997`*^9, {3.4441647489652*^9, 3.4441648871052*^9}, {
   3.4441649191142*^9, 3.4441650319672003`*^9}, {3.4441650880892*^9, 
   3.4441651552012*^9}, {3.4441651882292*^9, 3.4441652078482*^9}, {
   3.4442331649960003`*^9, 3.444233166484*^9}, {3.444233213854*^9, 
   3.444233288047*^9}, {3.4452412455349455`*^9, 3.4452412572279453`*^9}, {
   3.473882349238648*^9, 3.473882375311139*^9}, {3.473892777038084*^9, 
   3.473892784410506*^9}, {3.473899542270033*^9, 3.47389961529321*^9}, {
   3.473899663315957*^9, 3.4738996658621025`*^9}, {3.4738997056773796`*^9, 
   3.4738997672949038`*^9}, {3.473899871168845*^9, 3.4738999335514135`*^9}, {
   3.4738999814741545`*^9, 3.4739000002402277`*^9}, {3.4739000644499006`*^9, 
   3.4739001124966483`*^9}, {3.473900242652093*^9, 3.473900262972255*^9}, {
   3.4739002999823723`*^9, 3.473900357612668*^9}, {3.4739493627579913`*^9, 
   3.4739494756184464`*^9}, {3.4739514108261337`*^9, 
   3.4739514114431696`*^9}, {3.4739514980591235`*^9, 3.473951706073021*^9}, {
   3.473951977031519*^9, 3.473952065609586*^9}, {3.47395215398164*^9, 
   3.4739521725147*^9}, 3.594377108696988*^9}],

Cell["\<\
On the other hand, if we want to compute the inner product between to general \
states, this behavior may not be so useful, because as the calculation goes \
on, we would like to eventually replace these states in terms of other states \
or some basis set. \
\>", "Text",
 CellChangeTimes->{{3.473892802443537*^9, 3.473892803666607*^9}, {
   3.473892836508486*^9, 3.473892880807019*^9}, {3.473893092871149*^9, 
   3.4738931239689274`*^9}, {3.473893310885618*^9, 3.47389335566718*^9}, {
   3.4738934023798513`*^9, 3.4738934283383365`*^9}, {3.4738935319092607`*^9, 
   3.4738935588538017`*^9}, {3.4738935908346305`*^9, 3.473893594793857*^9}, {
   3.4738969441184273`*^9, 3.4738969448094673`*^9}, {3.4738970766120057`*^9, 
   3.4738970943270187`*^9}, {3.473897228106671*^9, 3.4738972838998623`*^9}, {
   3.4738973801683683`*^9, 3.4738973805173883`*^9}, {3.473897429645198*^9, 
   3.473897540608545*^9}, 3.4739004662908845`*^9, {3.4739006140063334`*^9, 
   3.473900732962137*^9}, {3.473900824116351*^9, 3.473900878708473*^9}, {
   3.4739493214656296`*^9, 3.473949326003889*^9}, {3.4739522363743525`*^9, 
   3.4739522986209135`*^9}, {3.473953958782869*^9, 3.473953983086259*^9}, {
   3.473954016743184*^9, 3.4739540496970687`*^9}, {3.594377121075696*^9, 
   3.59437713128928*^9}, {3.5943771818721733`*^9, 3.59437725121414*^9}}],

Cell[TextData[{
 "In the next example, we want to replace the states ",
 Cell[BoxData[
  FormBox[
   RowBox[{
    RowBox[{
     AdjustmentBox["|",
      BoxBaselineShift->0.14285714285714285`,
      BoxMargins->{{0., 0.}, {-0.14285714285714285`, 0.14285714285714285`}}], 
     "\[Psi]"}], "\[RightAngleBracket]"}], TraditionalForm]],
  FormatType->"TraditionalForm"],
 " and ",
 Cell[BoxData[
  FormBox[
   RowBox[{
    RowBox[{
     AdjustmentBox["|",
      BoxBaselineShift->0.14285714285714285`,
      BoxMargins->{{0., 0.}, {-0.14285714285714285`, 0.14285714285714285`}}], 
     "\[Phi]"}], "\[RightAngleBracket]"}], TraditionalForm]],
  FormatType->"TraditionalForm"],
 " as superpositions of other two vectors. As you can see, local rules \
don\.b4t work directly because brakets objects are different from kets or \
bras objects."
}], "Text",
 CellChangeTimes->{{3.4441642981282*^9, 3.4441645219842*^9}, 
   3.4441645555081997`*^9, {3.4441647489652*^9, 3.4441648871052*^9}, {
   3.4441649191142*^9, 3.4441650319672003`*^9}, {3.4441650880892*^9, 
   3.4441651552012*^9}, {3.4441651882292*^9, 3.4441652078482*^9}, {
   3.4442331649960003`*^9, 3.444233166484*^9}, {3.444233213854*^9, 
   3.444233288047*^9}, {3.4452412455349455`*^9, 3.4452413294399457`*^9}, {
   3.4452413626859455`*^9, 3.4452414736729455`*^9}, {3.473954229340344*^9, 
   3.4739542879916983`*^9}, {3.4739544433645854`*^9, 3.473954558774186*^9}, {
   3.4739551235484896`*^9, 3.473955143212614*^9}, {3.473955354721712*^9, 
   3.473955356504814*^9}, {3.4739644298502536`*^9, 3.473964433471461*^9}, {
   3.5943773150797925`*^9, 3.5943773614814463`*^9}}],

Cell[BoxData[
 RowBox[{
  RowBox[{"rules", "=", 
   RowBox[{"{", 
    RowBox[{
     RowBox[{
      TagBox[
       RowBox[{
        AdjustmentBox["\[VerticalSeparator]",
         BoxBaselineShift->-0.1,
         BoxMargins->{{-0.2, 0}, {0, 0}}], 
        AdjustmentBox[
         TagBox["\[Psi]",
          QuantumAlgebra`QuantumAlgebra`KetArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0], "\[RightAngleBracket]"}],
       QuantumAlgebra`QuantumAlgebra`Ket,
       BaseStyle->"KetWrapper"], "\[Rule]", 
      RowBox[{
       TagBox[
        RowBox[{
         AdjustmentBox["\[VerticalSeparator]",
          BoxBaselineShift->-0.1,
          BoxMargins->{{-0.2, 0}, {0, 0}}], 
         AdjustmentBox[
          TagBox["m",
           QuantumAlgebra`QuantumAlgebra`KetArgs,
           BaseStyle->"BraKetArg"],
          BoxBaselineShift->0], "\[RightAngleBracket]"}],
        QuantumAlgebra`QuantumAlgebra`Ket,
        BaseStyle->"KetWrapper"], "+", 
       TagBox[
        RowBox[{
         AdjustmentBox["\[VerticalSeparator]",
          BoxBaselineShift->-0.1,
          BoxMargins->{{-0.2, 0}, {0, 0}}], 
         AdjustmentBox[
          TagBox["p",
           QuantumAlgebra`QuantumAlgebra`KetArgs,
           BaseStyle->"BraKetArg"],
          BoxBaselineShift->0], "\[RightAngleBracket]"}],
        QuantumAlgebra`QuantumAlgebra`Ket,
        BaseStyle->"KetWrapper"]}]}], ",", 
     RowBox[{
      TagBox[
       RowBox[{"\[LeftAngleBracket]", 
        AdjustmentBox[
         TagBox["\[Phi]",
          QuantumAlgebra`QuantumAlgebra`BraArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0], 
        AdjustmentBox["\[VerticalSeparator]",
         BoxBaselineShift->-0.1,
         BoxMargins->{{0, -0.2}, {0, 0}}]}],
       QuantumAlgebra`QuantumAlgebra`Bra,
       BaseStyle->"BraWrapper"], "\[Rule]", 
      RowBox[{
       TagBox[
        RowBox[{"\[LeftAngleBracket]", 
         AdjustmentBox[
          TagBox["n",
           QuantumAlgebra`QuantumAlgebra`BraArgs,
           BaseStyle->"BraKetArg"],
          BoxBaselineShift->0], 
         AdjustmentBox["\[VerticalSeparator]",
          BoxBaselineShift->-0.1,
          BoxMargins->{{0, -0.2}, {0, 0}}]}],
        QuantumAlgebra`QuantumAlgebra`Bra,
        BaseStyle->"BraWrapper"], "+", 
       TagBox[
        RowBox[{"\[LeftAngleBracket]", 
         AdjustmentBox[
          TagBox["q",
           QuantumAlgebra`QuantumAlgebra`BraArgs,
           BaseStyle->"BraKetArg"],
          BoxBaselineShift->0], 
         AdjustmentBox["\[VerticalSeparator]",
          BoxBaselineShift->-0.1,
          BoxMargins->{{0, -0.2}, {0, 0}}]}],
        QuantumAlgebra`QuantumAlgebra`Bra,
        BaseStyle->"BraWrapper"]}]}]}], "}"}]}], ";"}]], "InputOnly",
 CellChangeTimes->{{3.473955097375993*^9, 3.473955100441168*^9}, 
   3.594377692353371*^9}],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{
  RowBox[{
   TagBox[
    RowBox[{"\[LeftAngleBracket]", 
     AdjustmentBox[
      TagBox["\[Phi]",
       QuantumAlgebra`QuantumAlgebra`BraArgs,
       BaseStyle->"BraKetArg"],
      BoxBaselineShift->0], 
     AdjustmentBox["\[VerticalSeparator]",
      BoxBaselineShift->-0.1,
      BoxMargins->{{0, -0.2}, {0, 0}}]}],
    QuantumAlgebra`QuantumAlgebra`Bra,
    BaseStyle->"BraWrapper"], "\[CenterDot]", 
   TagBox[
    RowBox[{
     AdjustmentBox["\[VerticalSeparator]",
      BoxBaselineShift->-0.1,
      BoxMargins->{{-0.2, 0}, {0, 0}}], 
     AdjustmentBox[
      TagBox["\[Psi]",
       QuantumAlgebra`QuantumAlgebra`KetArgs,
       BaseStyle->"BraKetArg"],
      BoxBaselineShift->0], "\[RightAngleBracket]"}],
    QuantumAlgebra`QuantumAlgebra`Ket,
    BaseStyle->"KetWrapper"]}], "/.", "rules"}]], "Input",
 CellChangeTimes->{{3.4441653661952*^9, 3.4441653950832*^9}, {
  3.4452450181129456`*^9, 3.445245038773946*^9}, {3.4739007507171526`*^9, 
  3.4739007518832192`*^9}, {3.4739543531164236`*^9, 3.473954419701232*^9}, {
  3.473954579173353*^9, 3.473954606283904*^9}, {3.4739551513620806`*^9, 
  3.473955151823107*^9}, {3.594377695621558*^9, 3.594377705471122*^9}}],

Cell[BoxData[
 TagBox[
  RowBox[{"\[LeftAngleBracket]", 
   AdjustmentBox[
    RowBox[{
     TagBox["\[Phi]",
      QuantumAlgebra`QuantumAlgebra`BraKetArgs,
      BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
     TagBox["\[Psi]",
      QuantumAlgebra`QuantumAlgebra`BraKetArgs,
      BaseStyle->"BraKetArg"]}],
    BoxBaselineShift->0], "\[RightAngleBracket]"}],
  QuantumAlgebra`QuantumAlgebra`Braket,
  BaseStyle->"BraKetWrapper"]], "Output",
 CellChangeTimes->{
  3.4738653594413633`*^9, {3.4739007546523776`*^9, 3.473900784309074*^9}, 
   3.473954373452587*^9, 3.4739544203362684`*^9, 3.4739545117454967`*^9, {
   3.4739546048318205`*^9, 3.473954607703985*^9}, 3.4739551523041344`*^9, 
   3.594377705708135*^9}]
}, Open  ]],

Cell["\<\
One way to go around this problem is to use global rules instead of local \
ones.  However, local rules are so useful and versatile, that we would like \
them to work too. Here are two ways to go around: \
\>", "Text",
 CellChangeTimes->{3.594377713693592*^9}],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{
  RowBox[{"Unevaluated", "[", 
   RowBox[{
    TagBox[
     RowBox[{"\[LeftAngleBracket]", 
      AdjustmentBox[
       TagBox["\[Phi]",
        QuantumAlgebra`QuantumAlgebra`BraArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], 
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{0, -0.2}, {0, 0}}]}],
     QuantumAlgebra`QuantumAlgebra`Bra,
     BaseStyle->"BraWrapper"], "\[CenterDot]", 
    TagBox[
     RowBox[{
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{-0.2, 0}, {0, 0}}], 
      AdjustmentBox[
       TagBox["\[Psi]",
        QuantumAlgebra`QuantumAlgebra`KetArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], "\[RightAngleBracket]"}],
     QuantumAlgebra`QuantumAlgebra`Ket,
     BaseStyle->"KetWrapper"]}], "]"}], "/.", "rules"}]], "Input",
 CellChangeTimes->{{3.4441654184782*^9, 3.4441654363422003`*^9}, {
  3.47390174058177*^9, 3.4739017422478647`*^9}, {3.4739549361297703`*^9, 
  3.4739549406000257`*^9}, {3.4739551596425543`*^9, 3.4739551601125813`*^9}, {
  3.5943777263793173`*^9, 3.5943777269043474`*^9}}],

Cell[BoxData[
 RowBox[{
  TagBox[
   RowBox[{"\[LeftAngleBracket]", 
    AdjustmentBox[
     RowBox[{
      TagBox["n",
       QuantumAlgebra`QuantumAlgebra`BraKetArgs,
       BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
      TagBox["m",
       QuantumAlgebra`QuantumAlgebra`BraKetArgs,
       BaseStyle->"BraKetArg"]}],
     BoxBaselineShift->0], "\[RightAngleBracket]"}],
   QuantumAlgebra`QuantumAlgebra`Braket,
   BaseStyle->"BraKetWrapper"], "+", 
  TagBox[
   RowBox[{"\[LeftAngleBracket]", 
    AdjustmentBox[
     RowBox[{
      TagBox["n",
       QuantumAlgebra`QuantumAlgebra`BraKetArgs,
       BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
      TagBox["p",
       QuantumAlgebra`QuantumAlgebra`BraKetArgs,
       BaseStyle->"BraKetArg"]}],
     BoxBaselineShift->0], "\[RightAngleBracket]"}],
   QuantumAlgebra`QuantumAlgebra`Braket,
   BaseStyle->"BraKetWrapper"], "+", 
  TagBox[
   RowBox[{"\[LeftAngleBracket]", 
    AdjustmentBox[
     RowBox[{
      TagBox["q",
       QuantumAlgebra`QuantumAlgebra`BraKetArgs,
       BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
      TagBox["m",
       QuantumAlgebra`QuantumAlgebra`BraKetArgs,
       BaseStyle->"BraKetArg"]}],
     BoxBaselineShift->0], "\[RightAngleBracket]"}],
   QuantumAlgebra`QuantumAlgebra`Braket,
   BaseStyle->"BraKetWrapper"], "+", 
  TagBox[
   RowBox[{"\[LeftAngleBracket]", 
    AdjustmentBox[
     RowBox[{
      TagBox["q",
       QuantumAlgebra`QuantumAlgebra`BraKetArgs,
       BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
      TagBox["p",
       QuantumAlgebra`QuantumAlgebra`BraKetArgs,
       BaseStyle->"BraKetArg"]}],
     BoxBaselineShift->0], "\[RightAngleBracket]"}],
   QuantumAlgebra`QuantumAlgebra`Braket,
   BaseStyle->"BraKetWrapper"]}]], "Output",
 CellChangeTimes->{
  3.4738653623505297`*^9, {3.4739549211779146`*^9, 3.473954941284065*^9}, 
   3.4739551605236044`*^9, 3.5943777291624765`*^9}]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{
  RowBox[{
   TagBox[
    RowBox[{"\[LeftAngleBracket]", 
     AdjustmentBox[
      TagBox["\[Phi]",
       QuantumAlgebra`QuantumAlgebra`BraArgs,
       BaseStyle->"BraKetArg"],
      BoxBaselineShift->0], 
     AdjustmentBox["\[VerticalSeparator]",
      BoxBaselineShift->-0.1,
      BoxMargins->{{0, -0.2}, {0, 0}}]}],
    QuantumAlgebra`QuantumAlgebra`Bra,
    BaseStyle->"BraWrapper"], "\[CenterDot]", 
   TagBox[
    RowBox[{
     AdjustmentBox["\[VerticalSeparator]",
      BoxBaselineShift->-0.1,
      BoxMargins->{{-0.2, 0}, {0, 0}}], 
     AdjustmentBox[
      TagBox["\[Psi]",
       QuantumAlgebra`QuantumAlgebra`KetArgs,
       BaseStyle->"BraKetArg"],
      BoxBaselineShift->0], "\[RightAngleBracket]"}],
    QuantumAlgebra`QuantumAlgebra`Ket,
    BaseStyle->"KetWrapper"]}], "/.", 
  RowBox[{"{", 
   RowBox[{
    RowBox[{
     TagBox[
      RowBox[{"\[LeftAngleBracket]", 
       AdjustmentBox[
        RowBox[{
         TagBox["\[Phi]",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
         TagBox["\[Psi]",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"]}],
        BoxBaselineShift->0.], "\[RightAngleBracket]"}],
      QuantumAlgebra`QuantumAlgebra`Braket,
      BaseStyle->"BraKetWrapper"], "\[RuleDelayed]", 
     RowBox[{
      TagBox[
       RowBox[{"\[LeftAngleBracket]", 
        AdjustmentBox[
         TagBox["\[Phi]",
          QuantumAlgebra`QuantumAlgebra`BraArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0], 
        AdjustmentBox["\[VerticalSeparator]",
         BoxBaselineShift->-0.1,
         BoxMargins->{{0, -0.2}, {0, 0}}]}],
       QuantumAlgebra`QuantumAlgebra`Bra,
       BaseStyle->"BraWrapper"], "\[CenterDot]", 
      TagBox[
       RowBox[{
        AdjustmentBox["\[VerticalSeparator]",
         BoxBaselineShift->-0.1,
         BoxMargins->{{-0.2, 0}, {0, 0}}], 
        AdjustmentBox[
         TagBox["\[Psi]",
          QuantumAlgebra`QuantumAlgebra`KetArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0], "\[RightAngleBracket]"}],
       QuantumAlgebra`QuantumAlgebra`Ket,
       BaseStyle->"KetWrapper"]}]}], "/.", "rules"}], "}"}]}]], "Input",
 CellChangeTimes->{{3.4739507402857814`*^9, 3.4739508607296705`*^9}, {
   3.473954967356556*^9, 3.473955018062456*^9}, {3.47395517670753*^9, 
   3.4739551897072735`*^9}, 3.473955249392688*^9, {3.594377736073872*^9, 
   3.5943777509597235`*^9}}],

Cell[BoxData[
 RowBox[{
  TagBox[
   RowBox[{"\[LeftAngleBracket]", 
    AdjustmentBox[
     RowBox[{
      TagBox["n",
       QuantumAlgebra`QuantumAlgebra`BraKetArgs,
       BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
      TagBox["m",
       QuantumAlgebra`QuantumAlgebra`BraKetArgs,
       BaseStyle->"BraKetArg"]}],
     BoxBaselineShift->0], "\[RightAngleBracket]"}],
   QuantumAlgebra`QuantumAlgebra`Braket,
   BaseStyle->"BraKetWrapper"], "+", 
  TagBox[
   RowBox[{"\[LeftAngleBracket]", 
    AdjustmentBox[
     RowBox[{
      TagBox["n",
       QuantumAlgebra`QuantumAlgebra`BraKetArgs,
       BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
      TagBox["p",
       QuantumAlgebra`QuantumAlgebra`BraKetArgs,
       BaseStyle->"BraKetArg"]}],
     BoxBaselineShift->0], "\[RightAngleBracket]"}],
   QuantumAlgebra`QuantumAlgebra`Braket,
   BaseStyle->"BraKetWrapper"], "+", 
  TagBox[
   RowBox[{"\[LeftAngleBracket]", 
    AdjustmentBox[
     RowBox[{
      TagBox["q",
       QuantumAlgebra`QuantumAlgebra`BraKetArgs,
       BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
      TagBox["m",
       QuantumAlgebra`QuantumAlgebra`BraKetArgs,
       BaseStyle->"BraKetArg"]}],
     BoxBaselineShift->0], "\[RightAngleBracket]"}],
   QuantumAlgebra`QuantumAlgebra`Braket,
   BaseStyle->"BraKetWrapper"], "+", 
  TagBox[
   RowBox[{"\[LeftAngleBracket]", 
    AdjustmentBox[
     RowBox[{
      TagBox["q",
       QuantumAlgebra`QuantumAlgebra`BraKetArgs,
       BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
      TagBox["p",
       QuantumAlgebra`QuantumAlgebra`BraKetArgs,
       BaseStyle->"BraKetArg"]}],
     BoxBaselineShift->0], "\[RightAngleBracket]"}],
   QuantumAlgebra`QuantumAlgebra`Braket,
   BaseStyle->"BraKetWrapper"]}]], "Output",
 CellChangeTimes->{{3.473954956385928*^9, 3.473954971187775*^9}, 
   3.4739550208456154`*^9, 3.4739551903793125`*^9, 3.4739552500657263`*^9, 
   3.594377751404749*^9}]
}, Open  ]],

Cell[TextData[{
 "As we said before, there are cases in which ",
 StyleBox["QuantumAlgebra",
  FontSlant->"Italic"],
 " doesn't evaluate the inner product. The general rule is as following: ",
 StyleBox["braketing simplification occurs whenever a bra and a ket, with the \
same set of label scripts, encounter each other",
  FontSlant->"Italic"],
 ". This simplification  also applies if a bra and a ket don't have any label \
scripts at all."
}], "Text",
 CellChangeTimes->{{3.444233826454*^9, 3.444233831424*^9}, {3.444233919883*^9,
   3.4442339252*^9}, {3.444233959585*^9, 3.444233975526*^9}, {
  3.445241575304946*^9, 3.4452416358159456`*^9}, {3.4452416681359453`*^9, 
  3.445241670931946*^9}, {3.47390192451829*^9, 3.4739019591462708`*^9}, {
  3.4739021905425057`*^9, 3.473902190544506*^9}, {3.4739023748320465`*^9, 
  3.4739023835475454`*^9}, {3.473940901286023*^9, 3.4739409081874175`*^9}, {
  3.473955770700505*^9, 3.4739557751527596`*^9}, {3.4739558243525734`*^9, 
  3.4739558578674903`*^9}, {3.4739625723610115`*^9, 3.4739626078790426`*^9}, {
  3.4739646390212173`*^9, 3.4739648181044607`*^9}, {3.4739648529024506`*^9, 
  3.4739648999461412`*^9}, {3.473967225041129*^9, 3.473967310405012*^9}, {
  3.4739673718515263`*^9, 3.473967396800954*^9}, {3.5943777970983624`*^9, 
  3.5943778066129065`*^9}, {3.5943780607414417`*^9, 3.594378068184868*^9}}],

Cell[TextData[{
 "In the next example  we compute the inner product between a basis vector \
labeled by ",
 Cell[BoxData[
  FormBox["x", TraditionalForm]]],
 " and a general state ",
 Cell[BoxData[
  FormBox[
   RowBox[{
    RowBox[{
     AdjustmentBox["|",
      BoxBaselineShift->0.14285714285714285`,
      BoxMargins->{{0., 0.}, {-0.14285714285714285`, 0.14285714285714285`}}], 
     "\[Psi]"}], "\[RightAngleBracket]"}], TraditionalForm]],
  FormatType->"TraditionalForm"],
 ", which can potentially written in the ",
 Cell[BoxData[
  FormBox["x", TraditionalForm]]],
 " basis, or in any other basis, which can be related to ",
 Cell[BoxData[
  FormBox["x", TraditionalForm]]],
 ". Even more, ",
 Cell[BoxData[
  FormBox[
   RowBox[{
    RowBox[{
     AdjustmentBox["|",
      BoxBaselineShift->0.14285714285714285`,
      BoxMargins->{{0., 0.}, {-0.14285714285714285`, 0.14285714285714285`}}], 
     "\[Psi]"}], "\[RightAngleBracket]"}], TraditionalForm]],
  FormatType->"TraditionalForm"],
 " could represent a state in a large composite system, in which the basis ",
 Cell[BoxData[
  FormBox["x", TraditionalForm]]],
 " spans just a subspace of it."
}], "Text",
 CellChangeTimes->{{3.4441670698571997`*^9, 3.4441672189002*^9}, {
   3.4441672815011997`*^9, 3.4441675108202*^9}, {3.4441679408562*^9, 
   3.4441679567932*^9}, {3.4441679875292*^9, 3.4441680312222*^9}, 
   3.4442335496800003`*^9, {3.4452416816249456`*^9, 3.4452417582259455`*^9}, {
   3.4458424202469997`*^9, 3.44584244565*^9}, {3.4737951004027834`*^9, 
   3.473795101780862*^9}, {3.47390253766436*^9, 3.473902573737423*^9}, {
   3.473940558263403*^9, 3.473940564286748*^9}, {3.4739674941485214`*^9, 
   3.4739675353408775`*^9}, {3.4739687821791925`*^9, 3.4739689254063845`*^9}, 
   3.4739689582102613`*^9, 3.474236711970282*^9, {3.4742371798810453`*^9, 
   3.4742372148740463`*^9}, {3.4742373956353855`*^9, 3.474237401949747*^9}, {
   3.47423763173789*^9, 3.474237632717946*^9}, {3.594378076867364*^9, 
   3.594378126189185*^9}, {3.5943781772071033`*^9, 3.5943781908678846`*^9}}],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{
  TagBox[
   RowBox[{
    SubscriptBox["\[InvisiblePrefixScriptBase]", 
     TagBox[
      AdjustmentBox[
       TagBox["x",
        QuantumAlgebra`QuantumAlgebra`BraArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0],
      QuantumAlgebra`QuantumAlgebra`UDScript,
      BaseStyle->"LIndex"]], 
    RowBox[{"\[LeftAngleBracket]", 
     AdjustmentBox[
      TagBox["n",
       QuantumAlgebra`QuantumAlgebra`BraArgs,
       BaseStyle->"BraKetArg"],
      BoxBaselineShift->0], 
     AdjustmentBox["\[VerticalSeparator]",
      BoxBaselineShift->-0.1,
      BoxMargins->{{0, -0.2}, {0, 0}}]}]}],
   QuantumAlgebra`QuantumAlgebra`Bra,
   BaseStyle->"BraWrapper"], "\[CenterDot]", 
  TagBox[
   RowBox[{
    AdjustmentBox["\[VerticalSeparator]",
     BoxBaselineShift->-0.1,
     BoxMargins->{{-0.2, 0}, {0, 0}}], 
    AdjustmentBox[
     TagBox["\[Psi]",
      QuantumAlgebra`QuantumAlgebra`KetArgs,
      BaseStyle->"BraKetArg"],
     BoxBaselineShift->0], "\[RightAngleBracket]"}],
   QuantumAlgebra`QuantumAlgebra`Ket,
   BaseStyle->"KetWrapper"]}]], "Input",
 CellChangeTimes->{{3.4441672296191998`*^9, 3.4441672644452*^9}, 
   3.5943781572819633`*^9}],

Cell[BoxData[
 RowBox[{
  TagBox[
   RowBox[{
    SubscriptBox["\[InvisiblePrefixScriptBase]", 
     TagBox[
      AdjustmentBox[
       TagBox["x",
        QuantumAlgebra`QuantumAlgebra`BraArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0],
      QuantumAlgebra`QuantumAlgebra`UDScript,
      BaseStyle->"LIndex"]], 
    RowBox[{"\[LeftAngleBracket]", 
     AdjustmentBox[
      TagBox["n",
       QuantumAlgebra`QuantumAlgebra`BraArgs,
       BaseStyle->"BraKetArg"],
      BoxBaselineShift->0], 
     AdjustmentBox["\[VerticalSeparator]",
      BoxBaselineShift->-0.1,
      BoxMargins->{{0, -0.2}, {0, 0}}]}]}],
   QuantumAlgebra`QuantumAlgebra`Bra,
   BaseStyle->"BraWrapper"], "\[CenterDot]", 
  TagBox[
   RowBox[{
    AdjustmentBox["\[VerticalSeparator]",
     BoxBaselineShift->-0.1,
     BoxMargins->{{-0.2, 0}, {0, 0}}], 
    AdjustmentBox[
     TagBox["\[Psi]",
      QuantumAlgebra`QuantumAlgebra`KetArgs,
      BaseStyle->"BraKetArg"],
     BoxBaselineShift->0], "\[RightAngleBracket]"}],
   QuantumAlgebra`QuantumAlgebra`Ket,
   BaseStyle->"KetWrapper"]}]], "Output",
 CellChangeTimes->{3.473865369100916*^9, 3.4739026179019494`*^9, 
  3.4739690153265276`*^9, 3.4742374269741783`*^9, 3.59437815757098*^9, 
  3.594378446834525*^9}]
}, Open  ]],

Cell["\<\
The inner product is unevaluated because there is no matching between the \
scripts of the bra and the ket. If we know the state \[Psi] in some other \
basis y, we just plug this relation in the calculation using a local rule:\
\>", "Text",
 CellChangeTimes->{{3.4441675301991997`*^9, 3.4441675307702*^9}, {
   3.4441675667692003`*^9, 3.4441676116542*^9}, {3.4441677070282*^9, 
   3.4441677932332*^9}, {3.4442341019560003`*^9, 3.444234144142*^9}, {
   3.473902696081421*^9, 3.4739027345546217`*^9}, {3.4739408818119087`*^9, 
   3.4739408838790274`*^9}, {3.474237182117173*^9, 3.4742371837382655`*^9}, 
   3.4742372385213995`*^9, {3.474237286977171*^9, 3.4742373579732313`*^9}, {
   3.474237433860572*^9, 3.4742374660674143`*^9}, {3.4742376899152174`*^9, 
   3.474237713517567*^9}}],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{
  RowBox[{
   TagBox[
    RowBox[{
     SubscriptBox["\[InvisiblePrefixScriptBase]", 
      TagBox[
       AdjustmentBox[
        TagBox["x",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"LIndex"]], 
     RowBox[{"\[LeftAngleBracket]", 
      AdjustmentBox[
       TagBox["n",
        QuantumAlgebra`QuantumAlgebra`BraArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], 
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{0, -0.2}, {0, 0}}]}]}],
    QuantumAlgebra`QuantumAlgebra`Bra,
    BaseStyle->"BraWrapper"], "\[CenterDot]", 
   TagBox[
    RowBox[{
     AdjustmentBox["\[VerticalSeparator]",
      BoxBaselineShift->-0.1,
      BoxMargins->{{-0.2, 0}, {0, 0}}], 
     AdjustmentBox[
      TagBox["\[Psi]",
       QuantumAlgebra`QuantumAlgebra`KetArgs,
       BaseStyle->"BraKetArg"],
      BoxBaselineShift->0], "\[RightAngleBracket]"}],
    QuantumAlgebra`QuantumAlgebra`Ket,
    BaseStyle->"KetWrapper"]}], "/.", "\[VeryThinSpace]", 
  RowBox[{
   TagBox[
    RowBox[{
     AdjustmentBox["\[VerticalSeparator]",
      BoxBaselineShift->-0.1,
      BoxMargins->{{-0.2, 0}, {0, 0}}], 
     AdjustmentBox[
      TagBox["\[Psi]",
       QuantumAlgebra`QuantumAlgebra`KetArgs,
       BaseStyle->"BraKetArg"],
      BoxBaselineShift->0], "\[RightAngleBracket]"}],
    QuantumAlgebra`QuantumAlgebra`Ket,
    BaseStyle->"KetWrapper"], "\[Rule]", 
   RowBox[{
    TagBox[
     SubscriptBox[
      RowBox[{
       AdjustmentBox["\[VerticalSeparator]",
        BoxBaselineShift->-0.1,
        BoxMargins->{{-0.2, 0}, {0, 0}}], 
       AdjustmentBox[
        TagBox["a",
         QuantumAlgebra`QuantumAlgebra`KetArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0], "\[RightAngleBracket]"}], 
      TagBox[
       AdjustmentBox[
        TagBox["y",
         QuantumAlgebra`QuantumAlgebra`KetArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"RIndex"]],
     QuantumAlgebra`QuantumAlgebra`Ket,
     BaseStyle->"KetWrapper"], "+", 
    TagBox[
     SubscriptBox[
      RowBox[{
       AdjustmentBox["\[VerticalSeparator]",
        BoxBaselineShift->-0.1,
        BoxMargins->{{-0.2, 0}, {0, 0}}], 
       AdjustmentBox[
        TagBox["b",
         QuantumAlgebra`QuantumAlgebra`KetArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0], "\[RightAngleBracket]"}], 
      TagBox[
       AdjustmentBox[
        TagBox["y",
         QuantumAlgebra`QuantumAlgebra`KetArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"RIndex"]],
     QuantumAlgebra`QuantumAlgebra`Ket,
     BaseStyle->"KetWrapper"]}]}]}]], "Input",
 CellChangeTimes->{{3.4441676188682003`*^9, 3.4441676755132*^9}, {
  3.4441687760462*^9, 3.4441687874532003`*^9}, {3.4739026547050543`*^9, 
  3.473902666002701*^9}, {3.474237364754619*^9, 3.4742373685538363`*^9}, {
  3.594378210969034*^9, 3.5943782234797497`*^9}}],

Cell[BoxData[
 RowBox[{
  RowBox[{
   TagBox[
    RowBox[{
     SubscriptBox["\[InvisiblePrefixScriptBase]", 
      TagBox[
       AdjustmentBox[
        TagBox["x",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"LIndex"]], 
     RowBox[{"\[LeftAngleBracket]", 
      AdjustmentBox[
       TagBox["n",
        QuantumAlgebra`QuantumAlgebra`BraArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], 
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{0, -0.2}, {0, 0}}]}]}],
    QuantumAlgebra`QuantumAlgebra`Bra,
    BaseStyle->"BraWrapper"], "\[CenterDot]", 
   TagBox[
    SubscriptBox[
     RowBox[{
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{-0.2, 0}, {0, 0}}], 
      AdjustmentBox[
       TagBox["a",
        QuantumAlgebra`QuantumAlgebra`KetArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], "\[RightAngleBracket]"}], 
     TagBox[
      AdjustmentBox[
       TagBox["y",
        QuantumAlgebra`QuantumAlgebra`KetArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0],
      QuantumAlgebra`QuantumAlgebra`UDScript,
      BaseStyle->"RIndex"]],
    QuantumAlgebra`QuantumAlgebra`Ket,
    BaseStyle->"KetWrapper"]}], "+", 
  RowBox[{
   TagBox[
    RowBox[{
     SubscriptBox["\[InvisiblePrefixScriptBase]", 
      TagBox[
       AdjustmentBox[
        TagBox["x",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"LIndex"]], 
     RowBox[{"\[LeftAngleBracket]", 
      AdjustmentBox[
       TagBox["n",
        QuantumAlgebra`QuantumAlgebra`BraArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], 
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{0, -0.2}, {0, 0}}]}]}],
    QuantumAlgebra`QuantumAlgebra`Bra,
    BaseStyle->"BraWrapper"], "\[CenterDot]", 
   TagBox[
    SubscriptBox[
     RowBox[{
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{-0.2, 0}, {0, 0}}], 
      AdjustmentBox[
       TagBox["b",
        QuantumAlgebra`QuantumAlgebra`KetArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], "\[RightAngleBracket]"}], 
     TagBox[
      AdjustmentBox[
       TagBox["y",
        QuantumAlgebra`QuantumAlgebra`KetArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0],
      QuantumAlgebra`QuantumAlgebra`UDScript,
      BaseStyle->"RIndex"]],
    QuantumAlgebra`QuantumAlgebra`Ket,
    BaseStyle->"KetWrapper"]}]}]], "Output",
 CellChangeTimes->{3.4738653750072536`*^9, 3.4739690222739253`*^9, 
  3.4742373693238807`*^9, 3.4742374684155483`*^9, 3.594378223990779*^9, 
  3.5943784485546236`*^9}]
}, Open  ]],

Cell["\<\
We finish this simple calculation by relating the x basis with the y basis. \
This relation can also be plugged with a simple local rule:\
\>", "Text",
 CellChangeTimes->{{3.474237526578875*^9, 3.4742376112077155`*^9}, 
   3.5943784543409543`*^9}],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"%", "/.", 
  RowBox[{
   TagBox[
    RowBox[{
     SubscriptBox["\[InvisiblePrefixScriptBase]", 
      TagBox[
       AdjustmentBox[
        TagBox["x",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"LIndex"]], 
     RowBox[{"\[LeftAngleBracket]", 
      AdjustmentBox[
       TagBox["n",
        QuantumAlgebra`QuantumAlgebra`BraArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], 
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{0, -0.2}, {0, 0}}]}]}],
    QuantumAlgebra`QuantumAlgebra`Bra,
    BaseStyle->"BraWrapper"], "\[Rule]", 
   RowBox[{
    TagBox[
     RowBox[{
      SubscriptBox["\[InvisiblePrefixScriptBase]", 
       TagBox[
        AdjustmentBox[
         TagBox["y",
          QuantumAlgebra`QuantumAlgebra`BraArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0],
        QuantumAlgebra`QuantumAlgebra`UDScript,
        BaseStyle->"LIndex"]], 
      RowBox[{"\[LeftAngleBracket]", 
       AdjustmentBox[
        TagBox["c",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0], 
       AdjustmentBox["\[VerticalSeparator]",
        BoxBaselineShift->-0.1,
        BoxMargins->{{0, -0.2}, {0, 0}}]}]}],
     QuantumAlgebra`QuantumAlgebra`Bra,
     BaseStyle->"BraWrapper"], "+", 
    TagBox[
     RowBox[{
      SubscriptBox["\[InvisiblePrefixScriptBase]", 
       TagBox[
        AdjustmentBox[
         TagBox["y",
          QuantumAlgebra`QuantumAlgebra`BraArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0],
        QuantumAlgebra`QuantumAlgebra`UDScript,
        BaseStyle->"LIndex"]], 
      RowBox[{"\[LeftAngleBracket]", 
       AdjustmentBox[
        TagBox["d",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0], 
       AdjustmentBox["\[VerticalSeparator]",
        BoxBaselineShift->-0.1,
        BoxMargins->{{0, -0.2}, {0, 0}}]}]}],
     QuantumAlgebra`QuantumAlgebra`Bra,
     BaseStyle->"BraWrapper"]}]}]}]], "Input",
 CellChangeTimes->{{3.4742374759559793`*^9, 3.4742375093488894`*^9}, 
   3.5943784162197742`*^9}],

Cell[BoxData[
 RowBox[{
  TagBox[
   RowBox[{
    SubscriptBox["\[InvisiblePrefixScriptBase]", 
     TagBox[
      AdjustmentBox[
       TagBox["y",
        QuantumAlgebra`QuantumAlgebra`BraArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0],
      QuantumAlgebra`QuantumAlgebra`UDScript,
      BaseStyle->"LIndex"]], 
    SubscriptBox[
     RowBox[{"\[LeftAngleBracket]", 
      AdjustmentBox[
       RowBox[{
        TagBox["c",
         QuantumAlgebra`QuantumAlgebra`BraKetArgs,
         BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
        TagBox["a",
         QuantumAlgebra`QuantumAlgebra`BraKetArgs,
         BaseStyle->"BraKetArg"]}],
       BoxBaselineShift->0], "\[RightAngleBracket]"}], 
     TagBox[
      AdjustmentBox[
       TagBox["y",
        QuantumAlgebra`QuantumAlgebra`BraArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0],
      QuantumAlgebra`QuantumAlgebra`UDScript,
      BaseStyle->"RIndex"]]}],
   QuantumAlgebra`QuantumAlgebra`Braket,
   BaseStyle->"BraKetWrapper"], "+", 
  TagBox[
   RowBox[{
    SubscriptBox["\[InvisiblePrefixScriptBase]", 
     TagBox[
      AdjustmentBox[
       TagBox["y",
        QuantumAlgebra`QuantumAlgebra`BraArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0],
      QuantumAlgebra`QuantumAlgebra`UDScript,
      BaseStyle->"LIndex"]], 
    SubscriptBox[
     RowBox[{"\[LeftAngleBracket]", 
      AdjustmentBox[
       RowBox[{
        TagBox["c",
         QuantumAlgebra`QuantumAlgebra`BraKetArgs,
         BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
        TagBox["b",
         QuantumAlgebra`QuantumAlgebra`BraKetArgs,
         BaseStyle->"BraKetArg"]}],
       BoxBaselineShift->0], "\[RightAngleBracket]"}], 
     TagBox[
      AdjustmentBox[
       TagBox["y",
        QuantumAlgebra`QuantumAlgebra`BraArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0],
      QuantumAlgebra`QuantumAlgebra`UDScript,
      BaseStyle->"RIndex"]]}],
   QuantumAlgebra`QuantumAlgebra`Braket,
   BaseStyle->"BraKetWrapper"], "+", 
  TagBox[
   RowBox[{
    SubscriptBox["\[InvisiblePrefixScriptBase]", 
     TagBox[
      AdjustmentBox[
       TagBox["y",
        QuantumAlgebra`QuantumAlgebra`BraArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0],
      QuantumAlgebra`QuantumAlgebra`UDScript,
      BaseStyle->"LIndex"]], 
    SubscriptBox[
     RowBox[{"\[LeftAngleBracket]", 
      AdjustmentBox[
       RowBox[{
        TagBox["d",
         QuantumAlgebra`QuantumAlgebra`BraKetArgs,
         BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
        TagBox["a",
         QuantumAlgebra`QuantumAlgebra`BraKetArgs,
         BaseStyle->"BraKetArg"]}],
       BoxBaselineShift->0], "\[RightAngleBracket]"}], 
     TagBox[
      AdjustmentBox[
       TagBox["y",
        QuantumAlgebra`QuantumAlgebra`BraArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0],
      QuantumAlgebra`QuantumAlgebra`UDScript,
      BaseStyle->"RIndex"]]}],
   QuantumAlgebra`QuantumAlgebra`Braket,
   BaseStyle->"BraKetWrapper"], "+", 
  TagBox[
   RowBox[{
    SubscriptBox["\[InvisiblePrefixScriptBase]", 
     TagBox[
      AdjustmentBox[
       TagBox["y",
        QuantumAlgebra`QuantumAlgebra`BraArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0],
      QuantumAlgebra`QuantumAlgebra`UDScript,
      BaseStyle->"LIndex"]], 
    SubscriptBox[
     RowBox[{"\[LeftAngleBracket]", 
      AdjustmentBox[
       RowBox[{
        TagBox["d",
         QuantumAlgebra`QuantumAlgebra`BraKetArgs,
         BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
        TagBox["b",
         QuantumAlgebra`QuantumAlgebra`BraKetArgs,
         BaseStyle->"BraKetArg"]}],
       BoxBaselineShift->0], "\[RightAngleBracket]"}], 
     TagBox[
      AdjustmentBox[
       TagBox["y",
        QuantumAlgebra`QuantumAlgebra`BraArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0],
      QuantumAlgebra`QuantumAlgebra`UDScript,
      BaseStyle->"RIndex"]]}],
   QuantumAlgebra`QuantumAlgebra`Braket,
   BaseStyle->"BraKetWrapper"]}]], "Output",
 CellChangeTimes->{3.474237509976926*^9, 3.5943784165507927`*^9, 
  3.5943784498877*^9}]
}, Open  ]],

Cell["\<\
Note that whenever braketing takes place, the new braket object takes their \
script labels from the bra and the ket and puts them in the corresponding \
place (to the bra side or to the ket side). Here are some examples:\
\>", "Text",
 CellChangeTimes->{{3.4441693964152*^9, 3.4441694740202*^9}, {
   3.444397670002*^9, 3.444397764612*^9}, {3.4443978132349997`*^9, 
   3.444397814959*^9}, {3.444397845053*^9, 3.444397915352*^9}, {
   3.445241874837946*^9, 3.4452419154099455`*^9}, {3.4452419462949457`*^9, 
   3.4452419479729457`*^9}, 3.473955834551157*^9, {3.4739690349216485`*^9, 
   3.4739690379088197`*^9}, {3.473969083602433*^9, 3.4739691049586544`*^9}}],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{
   RowBox[{
    TagBox[
     RowBox[{
      SubscriptBox["\[InvisiblePrefixScriptBase]", 
       TagBox[
        AdjustmentBox[
         TagBox["x",
          QuantumAlgebra`QuantumAlgebra`BraArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0],
        QuantumAlgebra`QuantumAlgebra`UDScript,
        BaseStyle->"LIndex"]], 
      RowBox[{"\[LeftAngleBracket]", 
       AdjustmentBox[
        TagBox["\[Phi]",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0], 
       AdjustmentBox["\[VerticalSeparator]",
        BoxBaselineShift->-0.1,
        BoxMargins->{{0, -0.2}, {0, 0}}]}]}],
     QuantumAlgebra`QuantumAlgebra`Bra,
     BaseStyle->"BraWrapper"], "\[CenterDot]", 
    TagBox[
     SubscriptBox[
      RowBox[{
       AdjustmentBox["\[VerticalSeparator]",
        BoxBaselineShift->-0.1,
        BoxMargins->{{-0.2, 0}, {0, 0}}], 
       AdjustmentBox[
        TagBox["\[Psi]",
         QuantumAlgebra`QuantumAlgebra`KetArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0], "\[RightAngleBracket]"}], 
      TagBox[
       AdjustmentBox[
        TagBox["x",
         QuantumAlgebra`QuantumAlgebra`KetArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"RIndex"]],
     QuantumAlgebra`QuantumAlgebra`Ket,
     BaseStyle->"KetWrapper"]}], ",", 
   RowBox[{
    TagBox[
     RowBox[{
      SuperscriptBox["\[InvisiblePrefixScriptBase]", 
       TagBox[
        AdjustmentBox[
         TagBox["y",
          QuantumAlgebra`QuantumAlgebra`BraArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0],
        QuantumAlgebra`QuantumAlgebra`UDScript,
        BaseStyle->"LIndex"]], 
      RowBox[{"\[LeftAngleBracket]", 
       AdjustmentBox[
        TagBox["\[Phi]",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0], 
       AdjustmentBox["\[VerticalSeparator]",
        BoxBaselineShift->-0.1,
        BoxMargins->{{0, -0.2}, {0, 0}}]}]}],
     QuantumAlgebra`QuantumAlgebra`Bra,
     BaseStyle->"BraWrapper"], "\[CenterDot]", 
    TagBox[
     SuperscriptBox[
      RowBox[{
       AdjustmentBox["\[VerticalSeparator]",
        BoxBaselineShift->-0.1,
        BoxMargins->{{-0.2, 0}, {0, 0}}], 
       AdjustmentBox[
        TagBox["\[Phi]",
         QuantumAlgebra`QuantumAlgebra`KetArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0], "\[RightAngleBracket]"}], 
      TagBox[
       AdjustmentBox[
        TagBox["y",
         QuantumAlgebra`QuantumAlgebra`KetArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"RIndex"]],
     QuantumAlgebra`QuantumAlgebra`Ket,
     BaseStyle->"KetWrapper"]}]}], "}"}]], "Input",
 CellChangeTimes->{{3.4440808115769997`*^9, 3.444080906775*^9}, 
   3.4441641113642*^9, 3.4441645425182*^9, 3.5943785241199455`*^9}],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{
   TagBox[
    RowBox[{
     SubscriptBox["\[InvisiblePrefixScriptBase]", 
      TagBox[
       AdjustmentBox[
        TagBox["x",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"LIndex"]], 
     SubscriptBox[
      RowBox[{"\[LeftAngleBracket]", 
       AdjustmentBox[
        RowBox[{
         TagBox["\[Phi]",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
         TagBox["\[Psi]",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"]}],
        BoxBaselineShift->0], "\[RightAngleBracket]"}], 
      TagBox[
       AdjustmentBox[
        TagBox["x",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"RIndex"]]}],
    QuantumAlgebra`QuantumAlgebra`Braket,
    BaseStyle->"BraKetWrapper"], ",", 
   TagBox[
    RowBox[{
     SuperscriptBox["\[InvisiblePrefixScriptBase]", 
      TagBox[
       AdjustmentBox[
        TagBox["y",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"LIndex"]], 
     SuperscriptBox[
      RowBox[{"\[LeftAngleBracket]", 
       AdjustmentBox[
        RowBox[{
         TagBox["\[Phi]",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
         TagBox["\[Phi]",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"]}],
        BoxBaselineShift->0], "\[RightAngleBracket]"}], 
      TagBox[
       AdjustmentBox[
        TagBox["y",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"RIndex"]]}],
    QuantumAlgebra`QuantumAlgebra`Braket,
    BaseStyle->"BraKetWrapper"]}], "}"}]], "Output",
 CellChangeTimes->{3.4738653943273587`*^9, 3.594378524407962*^9}]
}, Open  ]],

Cell[TextData[{
 "If any way you would like to simplify the product of bras and kets even if \
their indices don\[CloseCurlyQuote]t match, we can use the ",
 StyleBox["QAProductExpand",
  FontWeight->"Bold"],
 " command. "
}], "Text",
 CellChangeTimes->{{3.444254234019*^9, 3.444254246271*^9}, {3.444254521826*^9,
    3.4442545861099997`*^9}, {3.444254751215*^9, 3.444254763139*^9}, {
   3.4442547980150003`*^9, 3.444254841825*^9}, {3.4442548819700003`*^9, 
   3.4442550138059998`*^9}, {3.444255260099*^9, 3.444255310413*^9}, {
   3.444255340516*^9, 3.444255375701*^9}, {3.4452419701189456`*^9, 
   3.4452419886599455`*^9}, {3.4739691211725817`*^9, 
   3.4739691261638675`*^9}, {3.4739756141159573`*^9, 3.473975628310769*^9}, {
   3.473975671283227*^9, 3.4739757159807835`*^9}, 3.4739757508817797`*^9, {
   3.5943785862705*^9, 3.5943786440688066`*^9}}],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{
  RowBox[{"{", 
   RowBox[{
    RowBox[{
     TagBox[
      RowBox[{"\[LeftAngleBracket]", 
       AdjustmentBox[
        TagBox["\[Phi]",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0], 
       AdjustmentBox["\[VerticalSeparator]",
        BoxBaselineShift->-0.1,
        BoxMargins->{{0, -0.2}, {0, 0}}]}],
      QuantumAlgebra`QuantumAlgebra`Bra,
      BaseStyle->"BraWrapper"], "\[CenterDot]", 
     TagBox[
      SubscriptBox[
       RowBox[{
        AdjustmentBox["\[VerticalSeparator]",
         BoxBaselineShift->-0.1,
         BoxMargins->{{-0.2, 0}, {0, 0}}], 
        AdjustmentBox[
         TagBox["\[Psi]",
          QuantumAlgebra`QuantumAlgebra`KetArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0], "\[RightAngleBracket]"}], 
       TagBox[
        AdjustmentBox[
         TagBox["x",
          QuantumAlgebra`QuantumAlgebra`KetArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0],
        QuantumAlgebra`QuantumAlgebra`UDScript,
        BaseStyle->"RIndex"]],
      QuantumAlgebra`QuantumAlgebra`Ket,
      BaseStyle->"KetWrapper"]}], ",", 
    RowBox[{
     TagBox[
      RowBox[{
       SubscriptBox["\[InvisiblePrefixScriptBase]", 
        TagBox[
         AdjustmentBox[
          TagBox["x",
           QuantumAlgebra`QuantumAlgebra`BraArgs,
           BaseStyle->"BraKetArg"],
          BoxBaselineShift->0],
         QuantumAlgebra`QuantumAlgebra`UDScript,
         BaseStyle->"LIndex"]], 
       RowBox[{"\[LeftAngleBracket]", 
        AdjustmentBox[
         TagBox["\[Phi]",
          QuantumAlgebra`QuantumAlgebra`BraArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0], 
        AdjustmentBox["\[VerticalSeparator]",
         BoxBaselineShift->-0.1,
         BoxMargins->{{0, -0.2}, {0, 0}}]}]}],
      QuantumAlgebra`QuantumAlgebra`Bra,
      BaseStyle->"BraWrapper"], "\[CenterDot]", 
     TagBox[
      SubscriptBox[
       RowBox[{
        AdjustmentBox["\[VerticalSeparator]",
         BoxBaselineShift->-0.1,
         BoxMargins->{{-0.2, 0}, {0, 0}}], 
        AdjustmentBox[
         TagBox["\[Psi]",
          QuantumAlgebra`QuantumAlgebra`KetArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0], "\[RightAngleBracket]"}], 
       TagBox[
        AdjustmentBox[
         TagBox["y",
          QuantumAlgebra`QuantumAlgebra`KetArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0],
        QuantumAlgebra`QuantumAlgebra`UDScript,
        BaseStyle->"RIndex"]],
      QuantumAlgebra`QuantumAlgebra`Ket,
      BaseStyle->"KetWrapper"]}], ",", 
    RowBox[{
     TagBox[
      RowBox[{
       SuperscriptBox["\[InvisiblePrefixScriptBase]", 
        TagBox[
         AdjustmentBox[
          TagBox["y",
           QuantumAlgebra`QuantumAlgebra`BraArgs,
           BaseStyle->"BraKetArg"],
          BoxBaselineShift->0],
         QuantumAlgebra`QuantumAlgebra`UDScript,
         BaseStyle->"LIndex"]], 
       RowBox[{"\[LeftAngleBracket]", 
        AdjustmentBox[
         TagBox["\[Phi]",
          QuantumAlgebra`QuantumAlgebra`BraArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0], 
        AdjustmentBox["\[VerticalSeparator]",
         BoxBaselineShift->-0.1,
         BoxMargins->{{0, -0.2}, {0, 0}}]}]}],
      QuantumAlgebra`QuantumAlgebra`Bra,
      BaseStyle->"BraWrapper"], "\[CenterDot]", 
     TagBox[
      SubscriptBox[
       RowBox[{
        AdjustmentBox["\[VerticalSeparator]",
         BoxBaselineShift->-0.1,
         BoxMargins->{{-0.2, 0}, {0, 0}}], 
        AdjustmentBox[
         TagBox["\[Psi]",
          QuantumAlgebra`QuantumAlgebra`KetArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0], "\[RightAngleBracket]"}], 
       TagBox[
        AdjustmentBox[
         TagBox["y",
          QuantumAlgebra`QuantumAlgebra`KetArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0],
        QuantumAlgebra`QuantumAlgebra`UDScript,
        BaseStyle->"RIndex"]],
      QuantumAlgebra`QuantumAlgebra`Ket,
      BaseStyle->"KetWrapper"]}]}], "}"}], "//", "QAProductExpand"}]], "Input",
 CellChangeTimes->{{3.444254258389*^9, 3.444254399921*^9}, {
   3.4442544568050003`*^9, 3.4442544914309998`*^9}, {3.444254603488*^9, 
   3.4442546264969997`*^9}, {3.4442546583789997`*^9, 3.444254726824*^9}, 
   3.444256074676*^9, {3.444256115601*^9, 3.444256117172*^9}, {
   3.473970315506894*^9, 3.4739703226683035`*^9}, {3.4739709314281225`*^9, 
   3.473970933551244*^9}, {3.4739710543181515`*^9, 3.473971062754634*^9}, 
   3.5943786256587534`*^9}],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{
   TagBox[
    SubscriptBox[
     RowBox[{"\[LeftAngleBracket]", 
      AdjustmentBox[
       RowBox[{
        TagBox["\[Phi]",
         QuantumAlgebra`QuantumAlgebra`BraKetArgs,
         BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
        TagBox["\[Psi]",
         QuantumAlgebra`QuantumAlgebra`BraKetArgs,
         BaseStyle->"BraKetArg"]}],
       BoxBaselineShift->0], "\[RightAngleBracket]"}], 
     TagBox[
      AdjustmentBox[
       TagBox["x",
        QuantumAlgebra`QuantumAlgebra`KetArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0],
      QuantumAlgebra`QuantumAlgebra`UDScript,
      BaseStyle->"RIndex"]],
    QuantumAlgebra`QuantumAlgebra`Braket,
    BaseStyle->"BraKetWrapper"], ",", 
   TagBox[
    RowBox[{
     SubscriptBox["\[InvisiblePrefixScriptBase]", 
      TagBox[
       AdjustmentBox[
        TagBox["x",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"LIndex"]], 
     SubscriptBox[
      RowBox[{"\[LeftAngleBracket]", 
       AdjustmentBox[
        RowBox[{
         TagBox["\[Phi]",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
         TagBox["\[Psi]",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"]}],
        BoxBaselineShift->0], "\[RightAngleBracket]"}], 
      TagBox[
       AdjustmentBox[
        TagBox["y",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"RIndex"]]}],
    QuantumAlgebra`QuantumAlgebra`Braket,
    BaseStyle->"BraKetWrapper"], ",", 
   TagBox[
    RowBox[{
     SuperscriptBox["\[InvisiblePrefixScriptBase]", 
      TagBox[
       AdjustmentBox[
        TagBox["y",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"LIndex"]], 
     SubscriptBox[
      RowBox[{"\[LeftAngleBracket]", 
       AdjustmentBox[
        RowBox[{
         TagBox["\[Phi]",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
         TagBox["\[Psi]",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"]}],
        BoxBaselineShift->0], "\[RightAngleBracket]"}], 
      TagBox[
       AdjustmentBox[
        TagBox["y",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"RIndex"]]}],
    QuantumAlgebra`QuantumAlgebra`Braket,
    BaseStyle->"BraKetWrapper"]}], "}"}]], "Output",
 CellChangeTimes->{3.473865402786843*^9, 3.4738654773421073`*^9, 
  3.47397106548379*^9, 3.4739755922427063`*^9, 3.5943786263407927`*^9}]
}, Open  ]]
}, Open  ]],

Cell[CellGroupData[{

Cell["Products of Outer Products", "Subsection",
 CellChangeTimes->{
  3.4738138013563237`*^9, {3.474058396401902*^9, 3.4740583996030855`*^9}},
 CellTags->"qa:BR.2"],

Cell[TextData[{
 "The outer product between a ket and a bra can be written using the non \
commutative product. The outer product can be seen as an operator and any \
operator can be put in this form. See the tutorial section about ",
 StyleBox[ButtonBox["Operator Representation",
  BaseStyle->"Hyperlink",
  ButtonData->{"Operator Representations.nb", None}],
  FontSlant->"Italic"],
 "."
}], "Text",
 CellChangeTimes->{{3.4442402165030003`*^9, 3.444240267869*^9}, {
   3.444240300552*^9, 3.444240338618*^9}, {3.44424053244*^9, 
   3.444240564495*^9}, {3.4442405964639997`*^9, 3.444240605752*^9}, {
   3.4442406587799997`*^9, 3.444240703692*^9}, {3.444240744189*^9, 
   3.4442407873710003`*^9}, {3.444240979491*^9, 3.4442410235810003`*^9}, {
   3.4442416576540003`*^9, 3.4442416925369997`*^9}, {3.444242033441*^9, 
   3.444242033815*^9}, {3.4452420892909455`*^9, 3.4452421046529455`*^9}, {
   3.445242144021946*^9, 3.4452421440229454`*^9}, {3.4452425695149455`*^9, 
   3.445242627759946*^9}, 3.4738138013573236`*^9, {3.5943788477614565`*^9, 
   3.594378848147479*^9}}],

Cell["\<\
What is of interest now is the fact that when we perform a product of two \
operators which are expressed in their outer form, the result can be \
simplified using braketing rules. Let's see some examples:\
\>", "Text",
 CellChangeTimes->{{3.444241123448*^9, 3.444241151131*^9}, {3.444241224453*^9,
    3.444241231926*^9}, {3.444241408663*^9, 3.444241449207*^9}, {
   3.444241516835*^9, 3.444241528565*^9}, {3.444242549516*^9, 
   3.444242660391*^9}, {3.4442441720290003`*^9, 3.444244198199*^9}, {
   3.444244953317*^9, 3.444245036337*^9}, {3.444245141394*^9, 
   3.444245158602*^9}, {3.4442452034309998`*^9, 3.444245210815*^9}, 
   3.444245404939*^9, {3.4442465103929996`*^9, 3.444246530028*^9}, {
   3.444246664882*^9, 3.444246675151*^9}, {3.444246789049*^9, 
   3.4442467946470003`*^9}, {3.444247267613*^9, 3.444247274977*^9}, {
   3.445242663483946*^9, 3.4452426834429455`*^9}, 3.4738138013573236`*^9, 
   3.4739788273857455`*^9, {3.474057542786078*^9, 3.474057553560694*^9}}],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{
  RowBox[{"(", 
   RowBox[{
    TagBox[
     RowBox[{
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{-0.2, 0}, {0, 0}}], 
      AdjustmentBox[
       TagBox["\[Psi]",
        QuantumAlgebra`QuantumAlgebra`KetArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], "\[RightAngleBracket]"}],
     QuantumAlgebra`QuantumAlgebra`Ket,
     BaseStyle->"KetWrapper"], "\[CenterDot]", 
    TagBox[
     RowBox[{"\[LeftAngleBracket]", 
      AdjustmentBox[
       TagBox["\[Phi]",
        QuantumAlgebra`QuantumAlgebra`BraArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], 
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{0, -0.2}, {0, 0}}]}],
     QuantumAlgebra`QuantumAlgebra`Bra,
     BaseStyle->"BraWrapper"]}], ")"}], "\[CenterDot]", 
  RowBox[{"(", 
   RowBox[{
    TagBox[
     RowBox[{
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{-0.2, 0}, {0, 0}}], 
      AdjustmentBox[
       TagBox["\[Rho]",
        QuantumAlgebra`QuantumAlgebra`KetArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], "\[RightAngleBracket]"}],
     QuantumAlgebra`QuantumAlgebra`Ket,
     BaseStyle->"KetWrapper"], "\[CenterDot]", 
    TagBox[
     RowBox[{"\[LeftAngleBracket]", 
      AdjustmentBox[
       TagBox["\[Tau]",
        QuantumAlgebra`QuantumAlgebra`BraArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], 
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{0, -0.2}, {0, 0}}]}],
     QuantumAlgebra`QuantumAlgebra`Bra,
     BaseStyle->"BraWrapper"]}], ")"}]}]], "Input",
 CellChangeTimes->{{3.444240849752*^9, 3.4442409541099997`*^9}, {
   3.4442415352539997`*^9, 3.444241547849*^9}, {3.444242234216*^9, 
   3.444242299317*^9}, 3.473813801358324*^9, {3.473814371128913*^9, 
   3.473814376080196*^9}, {3.5943788633683496`*^9, 3.5943788724268675`*^9}}],

Cell[BoxData[
 RowBox[{
  TagBox[
   RowBox[{"\[LeftAngleBracket]", 
    AdjustmentBox[
     RowBox[{
      TagBox["\[Phi]",
       QuantumAlgebra`QuantumAlgebra`BraKetArgs,
       BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
      TagBox["\[Rho]",
       QuantumAlgebra`QuantumAlgebra`BraKetArgs,
       BaseStyle->"BraKetArg"]}],
     BoxBaselineShift->0], "\[RightAngleBracket]"}],
   QuantumAlgebra`QuantumAlgebra`Braket,
   BaseStyle->"BraKetWrapper"], " ", 
  RowBox[{
   TagBox[
    RowBox[{
     AdjustmentBox["\[VerticalSeparator]",
      BoxBaselineShift->-0.1,
      BoxMargins->{{-0.2, 0}, {0, 0}}], 
     AdjustmentBox[
      TagBox["\[Psi]",
       QuantumAlgebra`QuantumAlgebra`KetArgs,
       BaseStyle->"BraKetArg"],
      BoxBaselineShift->0], "\[RightAngleBracket]"}],
    QuantumAlgebra`QuantumAlgebra`Ket,
    BaseStyle->"KetWrapper"], "\[CenterDot]", 
   TagBox[
    RowBox[{"\[LeftAngleBracket]", 
     AdjustmentBox[
      TagBox["\[Tau]",
       QuantumAlgebra`QuantumAlgebra`BraArgs,
       BaseStyle->"BraKetArg"],
      BoxBaselineShift->0], 
     AdjustmentBox["\[VerticalSeparator]",
      BoxBaselineShift->-0.1,
      BoxMargins->{{0, -0.2}, {0, 0}}]}],
    QuantumAlgebra`QuantumAlgebra`Bra,
    BaseStyle->"BraWrapper"]}]}]], "Output",
 GeneratedCell->False,
 CellChangeTimes->{
  3.444240884837*^9, {3.444240928133*^9, 3.444240955915*^9}, 
   3.444242248686*^9, 3.444242300493*^9, 3.444305391271*^9, 3.444430601091*^9,
    3.444432622442*^9, 3.444469973842*^9, 3.4444932636219997`*^9, 
   3.444673566101*^9, 3.4452426867689457`*^9, 3.473795386428143*^9, 
   3.4738138013593235`*^9, 3.473849407965645*^9, {3.4738494509749203`*^9, 
   3.4738494827989764`*^9}, 3.4738654125344005`*^9, 3.473865480225272*^9, 
   3.473865546067038*^9, 3.474057569413601*^9, 3.594378872710884*^9}]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{
  RowBox[{"(", 
   RowBox[{
    TagBox[
     RowBox[{
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{-0.2, 0}, {0, 0}}], 
      AdjustmentBox[
       TagBox["\[Psi]",
        QuantumAlgebra`QuantumAlgebra`KetArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], "\[RightAngleBracket]"}],
     QuantumAlgebra`QuantumAlgebra`Ket,
     BaseStyle->"KetWrapper"], "\[CenterDot]", 
    TagBox[
     RowBox[{
      SubscriptBox["\[InvisiblePrefixScriptBase]", 
       TagBox[
        AdjustmentBox[
         TagBox["x",
          QuantumAlgebra`QuantumAlgebra`BraArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0],
        QuantumAlgebra`QuantumAlgebra`UDScript,
        BaseStyle->"LIndex"]], 
      RowBox[{"\[LeftAngleBracket]", 
       AdjustmentBox[
        TagBox["\[Phi]",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0], 
       AdjustmentBox["\[VerticalSeparator]",
        BoxBaselineShift->-0.1,
        BoxMargins->{{0, -0.2}, {0, 0}}]}]}],
     QuantumAlgebra`QuantumAlgebra`Bra,
     BaseStyle->"BraWrapper"]}], ")"}], "\[CenterDot]", 
  RowBox[{"(", 
   RowBox[{
    TagBox[
     RowBox[{
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{-0.2, 0}, {0, 0}}], 
      AdjustmentBox[
       TagBox["\[Rho]",
        QuantumAlgebra`QuantumAlgebra`KetArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], "\[RightAngleBracket]"}],
     QuantumAlgebra`QuantumAlgebra`Ket,
     BaseStyle->"KetWrapper"], "\[CenterDot]", 
    TagBox[
     RowBox[{
      SubscriptBox["\[InvisiblePrefixScriptBase]", 
       TagBox[
        AdjustmentBox[
         TagBox["x",
          QuantumAlgebra`QuantumAlgebra`BraArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0],
        QuantumAlgebra`QuantumAlgebra`UDScript,
        BaseStyle->"LIndex"]], 
      RowBox[{"\[LeftAngleBracket]", 
       AdjustmentBox[
        TagBox["\[Tau]",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0], 
       AdjustmentBox["\[VerticalSeparator]",
        BoxBaselineShift->-0.1,
        BoxMargins->{{0, -0.2}, {0, 0}}]}]}],
     QuantumAlgebra`QuantumAlgebra`Bra,
     BaseStyle->"BraWrapper"]}], ")"}]}]], "Input",
 CellChangeTimes->{{3.444240849752*^9, 3.4442409541099997`*^9}, {
   3.4442415352539997`*^9, 3.444241547849*^9}, {3.444242234216*^9, 
   3.444242299317*^9}, {3.444246721797*^9, 3.44424673615*^9}, {
   3.444246768184*^9, 3.444246774105*^9}, 3.473813801360324*^9, {
   3.4739490627028294`*^9, 3.4739490657140017`*^9}, {3.5943788760790763`*^9, 
   3.594378885526617*^9}}],

Cell[BoxData[
 RowBox[{
  TagBox[
   RowBox[{
    AdjustmentBox["\[VerticalSeparator]",
     BoxBaselineShift->-0.1,
     BoxMargins->{{-0.2, 0}, {0, 0}}], 
    AdjustmentBox[
     TagBox["\[Psi]",
      QuantumAlgebra`QuantumAlgebra`KetArgs,
      BaseStyle->"BraKetArg"],
     BoxBaselineShift->0], "\[RightAngleBracket]"}],
   QuantumAlgebra`QuantumAlgebra`Ket,
   BaseStyle->"KetWrapper"], "\[CenterDot]", 
  TagBox[
   RowBox[{
    SubscriptBox["\[InvisiblePrefixScriptBase]", 
     TagBox[
      AdjustmentBox[
       TagBox["x",
        QuantumAlgebra`QuantumAlgebra`BraArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0],
      QuantumAlgebra`QuantumAlgebra`UDScript,
      BaseStyle->"LIndex"]], 
    RowBox[{"\[LeftAngleBracket]", 
     AdjustmentBox[
      TagBox["\[Phi]",
       QuantumAlgebra`QuantumAlgebra`BraArgs,
       BaseStyle->"BraKetArg"],
      BoxBaselineShift->0], 
     AdjustmentBox["\[VerticalSeparator]",
      BoxBaselineShift->-0.1,
      BoxMargins->{{0, -0.2}, {0, 0}}]}]}],
   QuantumAlgebra`QuantumAlgebra`Bra,
   BaseStyle->"BraWrapper"], "\[CenterDot]", 
  TagBox[
   RowBox[{
    AdjustmentBox["\[VerticalSeparator]",
     BoxBaselineShift->-0.1,
     BoxMargins->{{-0.2, 0}, {0, 0}}], 
    AdjustmentBox[
     TagBox["\[Rho]",
      QuantumAlgebra`QuantumAlgebra`KetArgs,
      BaseStyle->"BraKetArg"],
     BoxBaselineShift->0], "\[RightAngleBracket]"}],
   QuantumAlgebra`QuantumAlgebra`Ket,
   BaseStyle->"KetWrapper"], "\[CenterDot]", 
  TagBox[
   RowBox[{
    SubscriptBox["\[InvisiblePrefixScriptBase]", 
     TagBox[
      AdjustmentBox[
       TagBox["x",
        QuantumAlgebra`QuantumAlgebra`BraArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0],
      QuantumAlgebra`QuantumAlgebra`UDScript,
      BaseStyle->"LIndex"]], 
    RowBox[{"\[LeftAngleBracket]", 
     AdjustmentBox[
      TagBox["\[Tau]",
       QuantumAlgebra`QuantumAlgebra`BraArgs,
       BaseStyle->"BraKetArg"],
      BoxBaselineShift->0], 
     AdjustmentBox["\[VerticalSeparator]",
      BoxBaselineShift->-0.1,
      BoxMargins->{{0, -0.2}, {0, 0}}]}]}],
   QuantumAlgebra`QuantumAlgebra`Bra,
   BaseStyle->"BraWrapper"]}]], "Output",
 CellChangeTimes->{{3.4738654297973876`*^9, 3.4738654315764894`*^9}, 
   3.4738654817743607`*^9, 3.473865547528122*^9, 3.4740575719027433`*^9, 
   3.594378885996644*^9}]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"%", "//", "QAProductExpand"}]], "Input",
 CellChangeTimes->{{3.4740575739978633`*^9, 3.474057586132557*^9}}],

Cell[BoxData[
 RowBox[{
  TagBox[
   RowBox[{
    SubscriptBox["\[InvisiblePrefixScriptBase]", 
     TagBox[
      AdjustmentBox[
       TagBox["x",
        QuantumAlgebra`QuantumAlgebra`BraArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0],
      QuantumAlgebra`QuantumAlgebra`UDScript,
      BaseStyle->"LIndex"]], 
    RowBox[{"\[LeftAngleBracket]", 
     AdjustmentBox[
      RowBox[{
       TagBox["\[Phi]",
        QuantumAlgebra`QuantumAlgebra`BraKetArgs,
        BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
       TagBox["\[Rho]",
        QuantumAlgebra`QuantumAlgebra`BraKetArgs,
        BaseStyle->"BraKetArg"]}],
      BoxBaselineShift->0], "\[RightAngleBracket]"}]}],
   QuantumAlgebra`QuantumAlgebra`Braket,
   BaseStyle->"BraKetWrapper"], " ", 
  RowBox[{
   TagBox[
    RowBox[{
     AdjustmentBox["\[VerticalSeparator]",
      BoxBaselineShift->-0.1,
      BoxMargins->{{-0.2, 0}, {0, 0}}], 
     AdjustmentBox[
      TagBox["\[Psi]",
       QuantumAlgebra`QuantumAlgebra`KetArgs,
       BaseStyle->"BraKetArg"],
      BoxBaselineShift->0], "\[RightAngleBracket]"}],
    QuantumAlgebra`QuantumAlgebra`Ket,
    BaseStyle->"KetWrapper"], "\[CenterDot]", 
   TagBox[
    RowBox[{
     SubscriptBox["\[InvisiblePrefixScriptBase]", 
      TagBox[
       AdjustmentBox[
        TagBox["x",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"LIndex"]], 
     RowBox[{"\[LeftAngleBracket]", 
      AdjustmentBox[
       TagBox["\[Tau]",
        QuantumAlgebra`QuantumAlgebra`BraArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], 
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{0, -0.2}, {0, 0}}]}]}],
    QuantumAlgebra`QuantumAlgebra`Bra,
    BaseStyle->"BraWrapper"]}]}]], "Output",
 CellChangeTimes->{3.474057586785595*^9, 3.5943788871487093`*^9}]
}, Open  ]],

Cell[TextData[{
 "In the first example, ",
 StyleBox["QuantumAlgebra",
  FontSlant->"Italic"],
 " evaluates the brakets and the result is a new operator in its outer form. \
In the second one no transformation applies and the quantum objects could \
potentially be replaced by new ones, but in this case we forced braketing \
using the command ",
 StyleBox["QAProductExpand",
  FontWeight->"Bold"],
 ". "
}], "Text",
 CellChangeTimes->{{3.4442349225*^9, 3.4442349385220003`*^9}, {
   3.444234993856*^9, 3.444235028273*^9}, 3.444236440842*^9, {
   3.444246798557*^9, 3.444247035811*^9}, {3.4442473370620003`*^9, 
   3.4442473430629997`*^9}, {3.444247384594*^9, 3.444247403909*^9}, {
   3.444247438422*^9, 3.444247475071*^9}, {3.444247517374*^9, 
   3.4442475196540003`*^9}, {3.4442475783789997`*^9, 3.444247581238*^9}, {
   3.444247683613*^9, 3.4442476841210003`*^9}, {3.444247729227*^9, 
   3.444247760023*^9}, {3.4442958460555506`*^9, 3.4442958717965508`*^9}, {
   3.4452427752209454`*^9, 3.4452427982989454`*^9}, {3.4452428473209457`*^9, 
   3.4452428764379454`*^9}, 3.4738138013613243`*^9, {3.4740576038905725`*^9, 
   3.4740576843971777`*^9}, {3.594378916805406*^9, 3.594378953957531*^9}}],

Cell["\<\
The number of operators in the product can be of any size. Note that \
parenthize is not really necesary.\
\>", "Text",
 CellChangeTimes->{{3.4442349225*^9, 3.4442349385220003`*^9}, {
   3.444234993856*^9, 3.444235028273*^9}, 3.444236440842*^9, {
   3.444246798557*^9, 3.444247035811*^9}, {3.4442473370620003`*^9, 
   3.4442473430629997`*^9}, {3.444247384594*^9, 3.444247403909*^9}, {
   3.444247438422*^9, 3.444247475071*^9}, {3.444247517374*^9, 
   3.4442475196540003`*^9}, {3.4442475783789997`*^9, 3.444247581238*^9}, {
   3.444247683613*^9, 3.4442476841210003`*^9}, {3.444247729227*^9, 
   3.444247760023*^9}, {3.4442958460555506`*^9, 3.4442958717965508`*^9}, {
   3.4452427752209454`*^9, 3.4452427982989454`*^9}, {3.4452428473209457`*^9, 
   3.4452428764379454`*^9}, 3.4738138013613243`*^9, {3.4740576038905725`*^9, 
   3.4740576843971777`*^9}, {3.474057810941416*^9, 3.474057813898585*^9}}],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{
  RowBox[{"(", 
   RowBox[{
    TagBox[
     RowBox[{
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{-0.2, 0}, {0, 0}}], 
      AdjustmentBox[
       TagBox["0",
        QuantumAlgebra`QuantumAlgebra`KetArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], "\[RightAngleBracket]"}],
     QuantumAlgebra`QuantumAlgebra`Ket,
     BaseStyle->"KetWrapper"], "\[CenterDot]", 
    TagBox[
     RowBox[{"\[LeftAngleBracket]", 
      AdjustmentBox[
       TagBox["1",
        QuantumAlgebra`QuantumAlgebra`BraArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], 
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{0, -0.2}, {0, 0}}]}],
     QuantumAlgebra`QuantumAlgebra`Bra,
     BaseStyle->"BraWrapper"]}], ")"}], "\[CenterDot]", 
  RowBox[{"(", 
   RowBox[{
    TagBox[
     RowBox[{
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{-0.2, 0}, {0, 0}}], 
      AdjustmentBox[
       TagBox["1",
        QuantumAlgebra`QuantumAlgebra`KetArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], "\[RightAngleBracket]"}],
     QuantumAlgebra`QuantumAlgebra`Ket,
     BaseStyle->"KetWrapper"], "\[CenterDot]", 
    TagBox[
     RowBox[{"\[LeftAngleBracket]", 
      AdjustmentBox[
       TagBox["0",
        QuantumAlgebra`QuantumAlgebra`BraArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], 
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{0, -0.2}, {0, 0}}]}],
     QuantumAlgebra`QuantumAlgebra`Bra,
     BaseStyle->"BraWrapper"]}], ")"}], "\[CenterDot]", 
  RowBox[{"(", 
   RowBox[{
    TagBox[
     RowBox[{
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{-0.2, 0}, {0, 0}}], 
      AdjustmentBox[
       TagBox["0",
        QuantumAlgebra`QuantumAlgebra`KetArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], "\[RightAngleBracket]"}],
     QuantumAlgebra`QuantumAlgebra`Ket,
     BaseStyle->"KetWrapper"], "\[CenterDot]", 
    TagBox[
     RowBox[{"\[LeftAngleBracket]", 
      AdjustmentBox[
       TagBox["1",
        QuantumAlgebra`QuantumAlgebra`BraArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], 
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{0, -0.2}, {0, 0}}]}],
     QuantumAlgebra`QuantumAlgebra`Bra,
     BaseStyle->"BraWrapper"]}], ")"}], "\[CenterDot]", 
  RowBox[{"(", 
   RowBox[{
    TagBox[
     RowBox[{
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{-0.2, 0}, {0, 0}}], 
      AdjustmentBox[
       TagBox["1",
        QuantumAlgebra`QuantumAlgebra`KetArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], "\[RightAngleBracket]"}],
     QuantumAlgebra`QuantumAlgebra`Ket,
     BaseStyle->"KetWrapper"], "\[CenterDot]", 
    TagBox[
     RowBox[{"\[LeftAngleBracket]", 
      AdjustmentBox[
       TagBox["1",
        QuantumAlgebra`QuantumAlgebra`BraArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], 
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{0, -0.2}, {0, 0}}]}],
     QuantumAlgebra`QuantumAlgebra`Bra,
     BaseStyle->"BraWrapper"]}], ")"}]}]], "Input",
 CellChangeTimes->{{3.444235074666*^9, 3.44423516277*^9}, 3.444236440843*^9, 
   3.4738138013623238`*^9, {3.473865571001464*^9, 3.4738655835971847`*^9}, {
   3.474057828482419*^9, 3.474057830793551*^9}, {3.47405796313212*^9, 
   3.4740580242496157`*^9}, 3.5943789805550523`*^9}],

Cell[BoxData[
 RowBox[{
  TagBox[
   RowBox[{"\[LeftAngleBracket]", 
    AdjustmentBox[
     RowBox[{
      TagBox["0",
       QuantumAlgebra`QuantumAlgebra`BraKetArgs,
       BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
      TagBox["0",
       QuantumAlgebra`QuantumAlgebra`BraKetArgs,
       BaseStyle->"BraKetArg"]}],
     BoxBaselineShift->0], "\[RightAngleBracket]"}],
   QuantumAlgebra`QuantumAlgebra`Braket,
   BaseStyle->"BraKetWrapper"], " ", 
  SuperscriptBox[
   TagBox[
    RowBox[{"\[LeftAngleBracket]", 
     AdjustmentBox[
      RowBox[{
       TagBox["1",
        QuantumAlgebra`QuantumAlgebra`BraKetArgs,
        BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
       TagBox["1",
        QuantumAlgebra`QuantumAlgebra`BraKetArgs,
        BaseStyle->"BraKetArg"]}],
      BoxBaselineShift->0], "\[RightAngleBracket]"}],
    QuantumAlgebra`QuantumAlgebra`Braket,
    BaseStyle->"BraKetWrapper"], "2"], " ", 
  RowBox[{
   TagBox[
    RowBox[{
     AdjustmentBox["\[VerticalSeparator]",
      BoxBaselineShift->-0.1,
      BoxMargins->{{-0.2, 0}, {0, 0}}], 
     AdjustmentBox[
      TagBox["0",
       QuantumAlgebra`QuantumAlgebra`KetArgs,
       BaseStyle->"BraKetArg"],
      BoxBaselineShift->0], "\[RightAngleBracket]"}],
    QuantumAlgebra`QuantumAlgebra`Ket,
    BaseStyle->"KetWrapper"], "\[CenterDot]", 
   TagBox[
    RowBox[{"\[LeftAngleBracket]", 
     AdjustmentBox[
      TagBox["1",
       QuantumAlgebra`QuantumAlgebra`BraArgs,
       BaseStyle->"BraKetArg"],
      BoxBaselineShift->0], 
     AdjustmentBox["\[VerticalSeparator]",
      BoxBaselineShift->-0.1,
      BoxMargins->{{0, -0.2}, {0, 0}}]}],
    QuantumAlgebra`QuantumAlgebra`Bra,
    BaseStyle->"BraWrapper"]}]}]], "Output",
 CellChangeTimes->{{3.473865567642272*^9, 3.473865587246393*^9}, 
   3.474057836702889*^9, {3.4740579796780667`*^9, 3.4740579916677523`*^9}, 
   3.474058027152782*^9, 3.5943789810480804`*^9}]
}, Open  ]],

Cell["\<\
The following example combine the linear properties of the non commutative \
product together with the rules of braketing to do the calculation.\
\>", "Text",
 CellChangeTimes->{{3.4442471144110003`*^9, 3.444247123551*^9}, 
   3.4442472171140003`*^9, {3.444303488366*^9, 3.444303588433*^9}, {
   3.47379544984277*^9, 3.4737954512318497`*^9}, 3.473813801363324*^9}],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{
  SuperscriptBox[
   RowBox[{"(", 
    RowBox[{
     RowBox[{"\[Alpha]", " ", 
      RowBox[{
       TagBox[
        RowBox[{
         AdjustmentBox["\[VerticalSeparator]",
          BoxBaselineShift->-0.1,
          BoxMargins->{{-0.2, 0}, {0, 0}}], 
         AdjustmentBox[
          TagBox["0",
           QuantumAlgebra`QuantumAlgebra`KetArgs,
           BaseStyle->"BraKetArg"],
          BoxBaselineShift->0], "\[RightAngleBracket]"}],
        QuantumAlgebra`QuantumAlgebra`Ket,
        BaseStyle->"KetWrapper"], "\[CenterDot]", 
       TagBox[
        RowBox[{"\[LeftAngleBracket]", 
         AdjustmentBox[
          TagBox["1",
           QuantumAlgebra`QuantumAlgebra`BraArgs,
           BaseStyle->"BraKetArg"],
          BoxBaselineShift->0], 
         AdjustmentBox["\[VerticalSeparator]",
          BoxBaselineShift->-0.1,
          BoxMargins->{{0, -0.2}, {0, 0}}]}],
        QuantumAlgebra`QuantumAlgebra`Bra,
        BaseStyle->"BraWrapper"]}]}], "+", 
     RowBox[{"\[Beta]", " ", 
      RowBox[{
       TagBox[
        RowBox[{
         AdjustmentBox["\[VerticalSeparator]",
          BoxBaselineShift->-0.1,
          BoxMargins->{{-0.2, 0}, {0, 0}}], 
         AdjustmentBox[
          TagBox["0",
           QuantumAlgebra`QuantumAlgebra`KetArgs,
           BaseStyle->"BraKetArg"],
          BoxBaselineShift->0], "\[RightAngleBracket]"}],
        QuantumAlgebra`QuantumAlgebra`Ket,
        BaseStyle->"KetWrapper"], "\[CenterDot]", 
       TagBox[
        RowBox[{"\[LeftAngleBracket]", 
         AdjustmentBox[
          TagBox["1",
           QuantumAlgebra`QuantumAlgebra`BraArgs,
           BaseStyle->"BraKetArg"],
          BoxBaselineShift->0], 
         AdjustmentBox["\[VerticalSeparator]",
          BoxBaselineShift->-0.1,
          BoxMargins->{{0, -0.2}, {0, 0}}]}],
        QuantumAlgebra`QuantumAlgebra`Bra,
        BaseStyle->"BraWrapper"]}]}], "+", 
     RowBox[{"\[Gamma]", " ", 
      RowBox[{
       TagBox[
        RowBox[{
         AdjustmentBox["\[VerticalSeparator]",
          BoxBaselineShift->-0.1,
          BoxMargins->{{-0.2, 0}, {0, 0}}], 
         AdjustmentBox[
          TagBox["1",
           QuantumAlgebra`QuantumAlgebra`KetArgs,
           BaseStyle->"BraKetArg"],
          BoxBaselineShift->0], "\[RightAngleBracket]"}],
        QuantumAlgebra`QuantumAlgebra`Ket,
        BaseStyle->"KetWrapper"], "\[CenterDot]", 
       TagBox[
        RowBox[{"\[LeftAngleBracket]", 
         AdjustmentBox[
          TagBox["1",
           QuantumAlgebra`QuantumAlgebra`BraArgs,
           BaseStyle->"BraKetArg"],
          BoxBaselineShift->0], 
         AdjustmentBox["\[VerticalSeparator]",
          BoxBaselineShift->-0.1,
          BoxMargins->{{0, -0.2}, {0, 0}}]}],
        QuantumAlgebra`QuantumAlgebra`Bra,
        BaseStyle->"BraWrapper"]}]}]}], ")"}], "2"], "//", 
  "QAPowerExpand"}]], "Input",
 CellChangeTimes->{{3.444247052631*^9, 3.4442470618780003`*^9}, {
   3.4442470924700003`*^9, 3.444247107716*^9}, 3.444247144454*^9, {
   3.444250551986*^9, 3.44425075927*^9}, {3.444251184571*^9, 
   3.444251258811*^9}, {3.444251292776*^9, 3.444251400398*^9}, {
   3.4452429744999456`*^9, 3.4452429747949457`*^9}, {3.473795501697736*^9, 
   3.4737956082908325`*^9}, 3.473813801364324*^9, {3.473949073081423*^9, 
   3.4739490981468563`*^9}, 3.474057866547596*^9, 3.594379004576426*^9}],

Cell[BoxData[
 RowBox[{
  RowBox[{
   SuperscriptBox["\[Alpha]", "2"], " ", 
   TagBox[
    RowBox[{"\[LeftAngleBracket]", 
     AdjustmentBox[
      RowBox[{
       TagBox["1",
        QuantumAlgebra`QuantumAlgebra`BraKetArgs,
        BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
       TagBox["0",
        QuantumAlgebra`QuantumAlgebra`BraKetArgs,
        BaseStyle->"BraKetArg"]}],
      BoxBaselineShift->0], "\[RightAngleBracket]"}],
    QuantumAlgebra`QuantumAlgebra`Braket,
    BaseStyle->"BraKetWrapper"], " ", 
   RowBox[{
    TagBox[
     RowBox[{
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{-0.2, 0}, {0, 0}}], 
      AdjustmentBox[
       TagBox["0",
        QuantumAlgebra`QuantumAlgebra`KetArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], "\[RightAngleBracket]"}],
     QuantumAlgebra`QuantumAlgebra`Ket,
     BaseStyle->"KetWrapper"], "\[CenterDot]", 
    TagBox[
     RowBox[{"\[LeftAngleBracket]", 
      AdjustmentBox[
       TagBox["1",
        QuantumAlgebra`QuantumAlgebra`BraArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], 
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{0, -0.2}, {0, 0}}]}],
     QuantumAlgebra`QuantumAlgebra`Bra,
     BaseStyle->"BraWrapper"]}]}], "+", 
  RowBox[{"2", " ", "\[Alpha]", " ", "\[Beta]", " ", 
   TagBox[
    RowBox[{"\[LeftAngleBracket]", 
     AdjustmentBox[
      RowBox[{
       TagBox["1",
        QuantumAlgebra`QuantumAlgebra`BraKetArgs,
        BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
       TagBox["0",
        QuantumAlgebra`QuantumAlgebra`BraKetArgs,
        BaseStyle->"BraKetArg"]}],
      BoxBaselineShift->0], "\[RightAngleBracket]"}],
    QuantumAlgebra`QuantumAlgebra`Braket,
    BaseStyle->"BraKetWrapper"], " ", 
   RowBox[{
    TagBox[
     RowBox[{
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{-0.2, 0}, {0, 0}}], 
      AdjustmentBox[
       TagBox["0",
        QuantumAlgebra`QuantumAlgebra`KetArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], "\[RightAngleBracket]"}],
     QuantumAlgebra`QuantumAlgebra`Ket,
     BaseStyle->"KetWrapper"], "\[CenterDot]", 
    TagBox[
     RowBox[{"\[LeftAngleBracket]", 
      AdjustmentBox[
       TagBox["1",
        QuantumAlgebra`QuantumAlgebra`BraArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], 
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{0, -0.2}, {0, 0}}]}],
     QuantumAlgebra`QuantumAlgebra`Bra,
     BaseStyle->"BraWrapper"]}]}], "+", 
  RowBox[{
   SuperscriptBox["\[Beta]", "2"], " ", 
   TagBox[
    RowBox[{"\[LeftAngleBracket]", 
     AdjustmentBox[
      RowBox[{
       TagBox["1",
        QuantumAlgebra`QuantumAlgebra`BraKetArgs,
        BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
       TagBox["0",
        QuantumAlgebra`QuantumAlgebra`BraKetArgs,
        BaseStyle->"BraKetArg"]}],
      BoxBaselineShift->0], "\[RightAngleBracket]"}],
    QuantumAlgebra`QuantumAlgebra`Braket,
    BaseStyle->"BraKetWrapper"], " ", 
   RowBox[{
    TagBox[
     RowBox[{
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{-0.2, 0}, {0, 0}}], 
      AdjustmentBox[
       TagBox["0",
        QuantumAlgebra`QuantumAlgebra`KetArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], "\[RightAngleBracket]"}],
     QuantumAlgebra`QuantumAlgebra`Ket,
     BaseStyle->"KetWrapper"], "\[CenterDot]", 
    TagBox[
     RowBox[{"\[LeftAngleBracket]", 
      AdjustmentBox[
       TagBox["1",
        QuantumAlgebra`QuantumAlgebra`BraArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], 
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{0, -0.2}, {0, 0}}]}],
     QuantumAlgebra`QuantumAlgebra`Bra,
     BaseStyle->"BraWrapper"]}]}], "+", 
  RowBox[{"\[Alpha]", " ", "\[Gamma]", " ", 
   TagBox[
    RowBox[{"\[LeftAngleBracket]", 
     AdjustmentBox[
      RowBox[{
       TagBox["1",
        QuantumAlgebra`QuantumAlgebra`BraKetArgs,
        BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
       TagBox["1",
        QuantumAlgebra`QuantumAlgebra`BraKetArgs,
        BaseStyle->"BraKetArg"]}],
      BoxBaselineShift->0], "\[RightAngleBracket]"}],
    QuantumAlgebra`QuantumAlgebra`Braket,
    BaseStyle->"BraKetWrapper"], " ", 
   RowBox[{
    TagBox[
     RowBox[{
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{-0.2, 0}, {0, 0}}], 
      AdjustmentBox[
       TagBox["0",
        QuantumAlgebra`QuantumAlgebra`KetArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], "\[RightAngleBracket]"}],
     QuantumAlgebra`QuantumAlgebra`Ket,
     BaseStyle->"KetWrapper"], "\[CenterDot]", 
    TagBox[
     RowBox[{"\[LeftAngleBracket]", 
      AdjustmentBox[
       TagBox["1",
        QuantumAlgebra`QuantumAlgebra`BraArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], 
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{0, -0.2}, {0, 0}}]}],
     QuantumAlgebra`QuantumAlgebra`Bra,
     BaseStyle->"BraWrapper"]}]}], "+", 
  RowBox[{"\[Beta]", " ", "\[Gamma]", " ", 
   TagBox[
    RowBox[{"\[LeftAngleBracket]", 
     AdjustmentBox[
      RowBox[{
       TagBox["1",
        QuantumAlgebra`QuantumAlgebra`BraKetArgs,
        BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
       TagBox["1",
        QuantumAlgebra`QuantumAlgebra`BraKetArgs,
        BaseStyle->"BraKetArg"]}],
      BoxBaselineShift->0], "\[RightAngleBracket]"}],
    QuantumAlgebra`QuantumAlgebra`Braket,
    BaseStyle->"BraKetWrapper"], " ", 
   RowBox[{
    TagBox[
     RowBox[{
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{-0.2, 0}, {0, 0}}], 
      AdjustmentBox[
       TagBox["0",
        QuantumAlgebra`QuantumAlgebra`KetArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], "\[RightAngleBracket]"}],
     QuantumAlgebra`QuantumAlgebra`Ket,
     BaseStyle->"KetWrapper"], "\[CenterDot]", 
    TagBox[
     RowBox[{"\[LeftAngleBracket]", 
      AdjustmentBox[
       TagBox["1",
        QuantumAlgebra`QuantumAlgebra`BraArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], 
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{0, -0.2}, {0, 0}}]}],
     QuantumAlgebra`QuantumAlgebra`Bra,
     BaseStyle->"BraWrapper"]}]}], "+", 
  RowBox[{"\[Alpha]", " ", "\[Gamma]", " ", 
   TagBox[
    RowBox[{"\[LeftAngleBracket]", 
     AdjustmentBox[
      RowBox[{
       TagBox["1",
        QuantumAlgebra`QuantumAlgebra`BraKetArgs,
        BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
       TagBox["0",
        QuantumAlgebra`QuantumAlgebra`BraKetArgs,
        BaseStyle->"BraKetArg"]}],
      BoxBaselineShift->0], "\[RightAngleBracket]"}],
    QuantumAlgebra`QuantumAlgebra`Braket,
    BaseStyle->"BraKetWrapper"], " ", 
   RowBox[{
    TagBox[
     RowBox[{
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{-0.2, 0}, {0, 0}}], 
      AdjustmentBox[
       TagBox["1",
        QuantumAlgebra`QuantumAlgebra`KetArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], "\[RightAngleBracket]"}],
     QuantumAlgebra`QuantumAlgebra`Ket,
     BaseStyle->"KetWrapper"], "\[CenterDot]", 
    TagBox[
     RowBox[{"\[LeftAngleBracket]", 
      AdjustmentBox[
       TagBox["1",
        QuantumAlgebra`QuantumAlgebra`BraArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], 
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{0, -0.2}, {0, 0}}]}],
     QuantumAlgebra`QuantumAlgebra`Bra,
     BaseStyle->"BraWrapper"]}]}], "+", 
  RowBox[{"\[Beta]", " ", "\[Gamma]", " ", 
   TagBox[
    RowBox[{"\[LeftAngleBracket]", 
     AdjustmentBox[
      RowBox[{
       TagBox["1",
        QuantumAlgebra`QuantumAlgebra`BraKetArgs,
        BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
       TagBox["0",
        QuantumAlgebra`QuantumAlgebra`BraKetArgs,
        BaseStyle->"BraKetArg"]}],
      BoxBaselineShift->0], "\[RightAngleBracket]"}],
    QuantumAlgebra`QuantumAlgebra`Braket,
    BaseStyle->"BraKetWrapper"], " ", 
   RowBox[{
    TagBox[
     RowBox[{
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{-0.2, 0}, {0, 0}}], 
      AdjustmentBox[
       TagBox["1",
        QuantumAlgebra`QuantumAlgebra`KetArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], "\[RightAngleBracket]"}],
     QuantumAlgebra`QuantumAlgebra`Ket,
     BaseStyle->"KetWrapper"], "\[CenterDot]", 
    TagBox[
     RowBox[{"\[LeftAngleBracket]", 
      AdjustmentBox[
       TagBox["1",
        QuantumAlgebra`QuantumAlgebra`BraArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], 
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{0, -0.2}, {0, 0}}]}],
     QuantumAlgebra`QuantumAlgebra`Bra,
     BaseStyle->"BraWrapper"]}]}], "+", 
  RowBox[{
   SuperscriptBox["\[Gamma]", "2"], " ", 
   TagBox[
    RowBox[{"\[LeftAngleBracket]", 
     AdjustmentBox[
      RowBox[{
       TagBox["1",
        QuantumAlgebra`QuantumAlgebra`BraKetArgs,
        BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
       TagBox["1",
        QuantumAlgebra`QuantumAlgebra`BraKetArgs,
        BaseStyle->"BraKetArg"]}],
      BoxBaselineShift->0], "\[RightAngleBracket]"}],
    QuantumAlgebra`QuantumAlgebra`Braket,
    BaseStyle->"BraKetWrapper"], " ", 
   RowBox[{
    TagBox[
     RowBox[{
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{-0.2, 0}, {0, 0}}], 
      AdjustmentBox[
       TagBox["1",
        QuantumAlgebra`QuantumAlgebra`KetArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], "\[RightAngleBracket]"}],
     QuantumAlgebra`QuantumAlgebra`Ket,
     BaseStyle->"KetWrapper"], "\[CenterDot]", 
    TagBox[
     RowBox[{"\[LeftAngleBracket]", 
      AdjustmentBox[
       TagBox["1",
        QuantumAlgebra`QuantumAlgebra`BraArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], 
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{0, -0.2}, {0, 0}}]}],
     QuantumAlgebra`QuantumAlgebra`Bra,
     BaseStyle->"BraWrapper"]}]}]}]], "Output",
 CellChangeTimes->{{3.4738655962399073`*^9, 3.473865599570098*^9}, 
   3.4740578682716947`*^9, 3.594379004905445*^9}]
}, Open  ]],

Cell[TextData[{
 "Braketing rules can be very useful when doing calculations of matrix \
elements using operators in their outer form. For instance, suppose we have \
two operators ",
 Cell[BoxData[
  FormBox[
   OverscriptBox["\[ScriptCapitalA]", "^"], TraditionalForm]]],
 " and ",
 Cell[BoxData[
  FormBox[
   OverscriptBox["\[ScriptCapitalB]", "^"], TraditionalForm]]],
 " in their outer form in some basis ",
 Cell[BoxData[
  FormBox["x", TraditionalForm]]]
}], "Text",
 CellChangeTimes->{{3.4441685114332*^9, 3.4441686031212*^9}, {
   3.4441688461292*^9, 3.4441688793972*^9}, {3.444234189365*^9, 
   3.4442342243389997`*^9}, {3.4442342678050003`*^9, 
   3.4442342752650003`*^9}, {3.444234307293*^9, 3.444234345355*^9}, {
   3.444251486241*^9, 3.44425151558*^9}, {3.44425351745*^9, 
   3.444253554366*^9}, {3.444253585263*^9, 3.444253608538*^9}, {
   3.444253640426*^9, 3.4442536581689997`*^9}, {3.4442537027790003`*^9, 
   3.4442537816289997`*^9}, {3.444253832361*^9, 3.4442538637320004`*^9}, {
   3.444253905416*^9, 3.444253907068*^9}, {3.4442554176140003`*^9, 
   3.444255435205*^9}, {3.444256274994*^9, 3.44425630826*^9}, {
   3.44425634427*^9, 3.444256372597*^9}, {3.4442564347209997`*^9, 
   3.444256489289*^9}, {3.4442566433719997`*^9, 3.444256686019*^9}, {
   3.4452429915659456`*^9, 3.4452431031779456`*^9}, {3.4452431426839457`*^9, 
   3.4452431853819456`*^9}, {3.445842915708*^9, 3.445842923755*^9}, {
   3.4737957382302647`*^9, 3.473795739666347*^9}, {3.4737962983133*^9, 
   3.4737963083948765`*^9}, 3.4738138013693247`*^9, {3.4740578865677414`*^9, 
   3.4740578884288473`*^9}, 3.4740580812838783`*^9, {3.4740581118156247`*^9, 
   3.47405811278668*^9}, {3.4740581887760267`*^9, 3.4740582467913446`*^9}, {
   3.4740583552025456`*^9, 3.474058380744006*^9}, {3.474058445560714*^9, 
   3.4740584646028028`*^9}, {3.47405856753769*^9, 3.4740585997495327`*^9}, {
   3.4740586374926915`*^9, 3.4740586519195166`*^9}, {3.47405869131677*^9, 
   3.4740587469569526`*^9}, {3.474058886046908*^9, 3.474058890136142*^9}, 
   3.4740589578500147`*^9}],

Cell[BoxData[
 RowBox[{
  RowBox[{"ABRules", "=", 
   RowBox[{"{", "\[IndentingNewLine]", 
    RowBox[{
     RowBox[{
      OverscriptBox["\[ScriptCapitalA]", "^"], "\[Rule]", 
      RowBox[{
       RowBox[{
        TagBox[
         SubscriptBox[
          RowBox[{
           AdjustmentBox["\[VerticalSeparator]",
            BoxBaselineShift->-0.1,
            BoxMargins->{{-0.2, 0}, {0, 0}}], 
           AdjustmentBox[
            TagBox["p",
             QuantumAlgebra`QuantumAlgebra`KetArgs,
             BaseStyle->"BraKetArg"],
            BoxBaselineShift->0], "\[RightAngleBracket]"}], 
          TagBox[
           AdjustmentBox[
            TagBox["x",
             QuantumAlgebra`QuantumAlgebra`KetArgs,
             BaseStyle->"BraKetArg"],
            BoxBaselineShift->0],
           QuantumAlgebra`QuantumAlgebra`UDScript,
           BaseStyle->"RIndex"]],
         QuantumAlgebra`QuantumAlgebra`Ket,
         BaseStyle->"KetWrapper"], "\[CenterDot]", 
        TagBox[
         RowBox[{
          SubscriptBox["\[InvisiblePrefixScriptBase]", 
           TagBox[
            AdjustmentBox[
             TagBox["x",
              QuantumAlgebra`QuantumAlgebra`BraArgs,
              BaseStyle->"BraKetArg"],
             BoxBaselineShift->0],
            QuantumAlgebra`QuantumAlgebra`UDScript,
            BaseStyle->"LIndex"]], 
          RowBox[{"\[LeftAngleBracket]", 
           AdjustmentBox[
            TagBox["q",
             QuantumAlgebra`QuantumAlgebra`BraArgs,
             BaseStyle->"BraKetArg"],
            BoxBaselineShift->0], 
           AdjustmentBox["\[VerticalSeparator]",
            BoxBaselineShift->-0.1,
            BoxMargins->{{0, -0.2}, {0, 0}}]}]}],
         QuantumAlgebra`QuantumAlgebra`Bra,
         BaseStyle->"BraWrapper"]}], "+", 
       RowBox[{
        TagBox[
         SubscriptBox[
          RowBox[{
           AdjustmentBox["\[VerticalSeparator]",
            BoxBaselineShift->-0.1,
            BoxMargins->{{-0.2, 0}, {0, 0}}], 
           AdjustmentBox[
            TagBox["q",
             QuantumAlgebra`QuantumAlgebra`KetArgs,
             BaseStyle->"BraKetArg"],
            BoxBaselineShift->0], "\[RightAngleBracket]"}], 
          TagBox[
           AdjustmentBox[
            TagBox["x",
             QuantumAlgebra`QuantumAlgebra`KetArgs,
             BaseStyle->"BraKetArg"],
            BoxBaselineShift->0],
           QuantumAlgebra`QuantumAlgebra`UDScript,
           BaseStyle->"RIndex"]],
         QuantumAlgebra`QuantumAlgebra`Ket,
         BaseStyle->"KetWrapper"], "\[CenterDot]", 
        TagBox[
         RowBox[{
          SubscriptBox["\[InvisiblePrefixScriptBase]", 
           TagBox[
            AdjustmentBox[
             TagBox["x",
              QuantumAlgebra`QuantumAlgebra`BraArgs,
              BaseStyle->"BraKetArg"],
             BoxBaselineShift->0],
            QuantumAlgebra`QuantumAlgebra`UDScript,
            BaseStyle->"LIndex"]], 
          RowBox[{"\[LeftAngleBracket]", 
           AdjustmentBox[
            TagBox["p",
             QuantumAlgebra`QuantumAlgebra`BraArgs,
             BaseStyle->"BraKetArg"],
            BoxBaselineShift->0], 
           AdjustmentBox["\[VerticalSeparator]",
            BoxBaselineShift->-0.1,
            BoxMargins->{{0, -0.2}, {0, 0}}]}]}],
         QuantumAlgebra`QuantumAlgebra`Bra,
         BaseStyle->"BraWrapper"]}]}]}], ",", 
     RowBox[{
      OverscriptBox["\[ScriptCapitalB]", "^"], "\[Rule]", 
      RowBox[{
       RowBox[{
        TagBox[
         SubscriptBox[
          RowBox[{
           AdjustmentBox["\[VerticalSeparator]",
            BoxBaselineShift->-0.1,
            BoxMargins->{{-0.2, 0}, {0, 0}}], 
           AdjustmentBox[
            TagBox["q",
             QuantumAlgebra`QuantumAlgebra`KetArgs,
             BaseStyle->"BraKetArg"],
            BoxBaselineShift->0], "\[RightAngleBracket]"}], 
          TagBox[
           AdjustmentBox[
            TagBox["x",
             QuantumAlgebra`QuantumAlgebra`KetArgs,
             BaseStyle->"BraKetArg"],
            BoxBaselineShift->0],
           QuantumAlgebra`QuantumAlgebra`UDScript,
           BaseStyle->"RIndex"]],
         QuantumAlgebra`QuantumAlgebra`Ket,
         BaseStyle->"KetWrapper"], "\[CenterDot]", 
        TagBox[
         RowBox[{
          SubscriptBox["\[InvisiblePrefixScriptBase]", 
           TagBox[
            AdjustmentBox[
             TagBox["x",
              QuantumAlgebra`QuantumAlgebra`BraArgs,
              BaseStyle->"BraKetArg"],
             BoxBaselineShift->0],
            QuantumAlgebra`QuantumAlgebra`UDScript,
            BaseStyle->"LIndex"]], 
          RowBox[{"\[LeftAngleBracket]", 
           AdjustmentBox[
            TagBox["p",
             QuantumAlgebra`QuantumAlgebra`BraArgs,
             BaseStyle->"BraKetArg"],
            BoxBaselineShift->0], 
           AdjustmentBox["\[VerticalSeparator]",
            BoxBaselineShift->-0.1,
            BoxMargins->{{0, -0.2}, {0, 0}}]}]}],
         QuantumAlgebra`QuantumAlgebra`Bra,
         BaseStyle->"BraWrapper"]}], "-", 
       RowBox[{
        TagBox[
         SubscriptBox[
          RowBox[{
           AdjustmentBox["\[VerticalSeparator]",
            BoxBaselineShift->-0.1,
            BoxMargins->{{-0.2, 0}, {0, 0}}], 
           AdjustmentBox[
            TagBox["p",
             QuantumAlgebra`QuantumAlgebra`KetArgs,
             BaseStyle->"BraKetArg"],
            BoxBaselineShift->0], "\[RightAngleBracket]"}], 
          TagBox[
           AdjustmentBox[
            TagBox["x",
             QuantumAlgebra`QuantumAlgebra`KetArgs,
             BaseStyle->"BraKetArg"],
            BoxBaselineShift->0],
           QuantumAlgebra`QuantumAlgebra`UDScript,
           BaseStyle->"RIndex"]],
         QuantumAlgebra`QuantumAlgebra`Ket,
         BaseStyle->"KetWrapper"], "\[CenterDot]", 
        TagBox[
         RowBox[{
          SubscriptBox["\[InvisiblePrefixScriptBase]", 
           TagBox[
            AdjustmentBox[
             TagBox["x",
              QuantumAlgebra`QuantumAlgebra`BraArgs,
              BaseStyle->"BraKetArg"],
             BoxBaselineShift->0],
            QuantumAlgebra`QuantumAlgebra`UDScript,
            BaseStyle->"LIndex"]], 
          RowBox[{"\[LeftAngleBracket]", 
           AdjustmentBox[
            TagBox["q",
             QuantumAlgebra`QuantumAlgebra`BraArgs,
             BaseStyle->"BraKetArg"],
            BoxBaselineShift->0], 
           AdjustmentBox["\[VerticalSeparator]",
            BoxBaselineShift->-0.1,
            BoxMargins->{{0, -0.2}, {0, 0}}]}]}],
         QuantumAlgebra`QuantumAlgebra`Bra,
         BaseStyle->"BraWrapper"]}]}]}]}], "}"}]}], ";"}]], "InputOnly",
 CellChangeTimes->{{3.4740586111261835`*^9, 3.4740586217837934`*^9}, 
   3.474058665053268*^9, {3.5943790358792167`*^9, 3.5943790768755617`*^9}}],

Cell[TextData[{
 "The expectation value of the product of these two operators when the system \
is in the state ",
 Cell[BoxData[
  FormBox[
   RowBox[{
    RowBox[{
     AdjustmentBox["|",
      BoxBaselineShift->0.14285714285714285`,
      BoxMargins->{{0., 0.}, {-0.14285714285714285`, 0.14285714285714285`}}], 
     "\[Psi]"}], "\[RightAngleBracket]"}], TraditionalForm]],
  FormatType->"TraditionalForm"],
 " can be computed as:"
}], "Text",
 CellChangeTimes->{{3.4441685114332*^9, 3.4441686031212*^9}, {
   3.4441688461292*^9, 3.4441688793972*^9}, {3.444234189365*^9, 
   3.4442342243389997`*^9}, {3.4442342678050003`*^9, 
   3.4442342752650003`*^9}, {3.444234307293*^9, 3.444234345355*^9}, {
   3.444251486241*^9, 3.44425151558*^9}, {3.44425351745*^9, 
   3.444253554366*^9}, {3.444253585263*^9, 3.444253608538*^9}, {
   3.444253640426*^9, 3.4442536581689997`*^9}, {3.4442537027790003`*^9, 
   3.4442537816289997`*^9}, {3.444253832361*^9, 3.4442538637320004`*^9}, {
   3.444253905416*^9, 3.444253907068*^9}, {3.4442554176140003`*^9, 
   3.444255435205*^9}, {3.444256274994*^9, 3.44425630826*^9}, {
   3.44425634427*^9, 3.444256372597*^9}, {3.4442564347209997`*^9, 
   3.444256489289*^9}, {3.4442566433719997`*^9, 3.444256686019*^9}, {
   3.4452429915659456`*^9, 3.4452431031779456`*^9}, {3.4452431426839457`*^9, 
   3.4452431853819456`*^9}, {3.445842915708*^9, 3.445842923755*^9}, {
   3.4737957382302647`*^9, 3.473795739666347*^9}, {3.4737962983133*^9, 
   3.4737963083948765`*^9}, 3.4738138013693247`*^9, {3.4740578865677414`*^9, 
   3.4740578884288473`*^9}, 3.4740580812838783`*^9, {3.4740581118156247`*^9, 
   3.47405811278668*^9}, {3.4740581887760267`*^9, 3.4740582467913446`*^9}, {
   3.4740583552025456`*^9, 3.474058380744006*^9}, {3.474058445560714*^9, 
   3.4740584646028028`*^9}, {3.47405856753769*^9, 3.4740585721819563`*^9}, {
   3.47405867313373*^9, 3.4740586870215244`*^9}, {3.474058762004813*^9, 
   3.4740587914524975`*^9}, {3.4740588436734843`*^9, 
   3.4740588751782866`*^9}, {3.4740589864816523`*^9, 3.474059050217298*^9}, {
   3.474059084475258*^9, 3.4740590855433187`*^9}, {3.474059141828538*^9, 
   3.4740591723292823`*^9}, {3.5943791230822043`*^9, 3.594379128289502*^9}}],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"\[ScriptCapitalE]", "=", 
  RowBox[{
   RowBox[{
    TagBox[
     RowBox[{"\[LeftAngleBracket]", 
      AdjustmentBox[
       TagBox["\[Psi]",
        QuantumAlgebra`QuantumAlgebra`BraArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], 
      AdjustmentBox["\[VerticalSeparator]",
       BoxMargins->{{0, -0.2}, {0, 0}}]}],
     QuantumAlgebra`QuantumAlgebra`Bra,
     BaseStyle->"BraWrapper"], "\[CenterDot]", 
    OverscriptBox["\[ScriptCapitalA]", "^"], "\[CenterDot]", 
    OverscriptBox["\[ScriptCapitalB]", "^"], "\[CenterDot]", 
    TagBox[
     RowBox[{
      AdjustmentBox["\[VerticalSeparator]",
       BoxMargins->{{-0.4, 0.}, {0., 0.}}], 
      AdjustmentBox[
       TagBox["\[Psi]",
        QuantumAlgebra`QuantumAlgebra`KetArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], "\[RightAngleBracket]"}],
     QuantumAlgebra`QuantumAlgebra`Ket,
     BaseStyle->"KetWrapper"]}], "/.", "ABRules"}]}]], "Input",
 CellChangeTimes->{{3.4441681081672*^9, 3.4441681329992*^9}, {
   3.4442557933719997`*^9, 3.444255797717*^9}, {3.444255842282*^9, 
   3.4442558507320004`*^9}, {3.473795743657575*^9, 3.4737957502509527`*^9}, {
   3.473796311671064*^9, 3.473796324224782*^9}, 3.473813801370324*^9, {
   3.4740587965117865`*^9, 3.4740588003560066`*^9}, {3.4740592835816455`*^9, 
   3.4740592860917892`*^9}}],

Cell[BoxData[
 RowBox[{
  RowBox[{
   TagBox[
    RowBox[{
     SubscriptBox["\[InvisiblePrefixScriptBase]", 
      TagBox[
       AdjustmentBox[
        TagBox["x",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"LIndex"]], 
     SubscriptBox[
      RowBox[{"\[LeftAngleBracket]", 
       AdjustmentBox[
        RowBox[{
         TagBox["q",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
         TagBox["q",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"]}],
        BoxBaselineShift->0], "\[RightAngleBracket]"}], 
      TagBox[
       AdjustmentBox[
        TagBox["x",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"RIndex"]]}],
    QuantumAlgebra`QuantumAlgebra`Braket,
    BaseStyle->"BraKetWrapper"], " ", 
   RowBox[{
    TagBox[
     RowBox[{"\[LeftAngleBracket]", 
      AdjustmentBox[
       TagBox["\[Psi]",
        QuantumAlgebra`QuantumAlgebra`BraArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], 
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{0, -0.2}, {0, 0}}]}],
     QuantumAlgebra`QuantumAlgebra`Bra,
     BaseStyle->"BraWrapper"], "\[CenterDot]", 
    TagBox[
     SubscriptBox[
      RowBox[{
       AdjustmentBox["\[VerticalSeparator]",
        BoxBaselineShift->-0.1,
        BoxMargins->{{-0.2, 0}, {0, 0}}], 
       AdjustmentBox[
        TagBox["p",
         QuantumAlgebra`QuantumAlgebra`KetArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0], "\[RightAngleBracket]"}], 
      TagBox[
       AdjustmentBox[
        TagBox["x",
         QuantumAlgebra`QuantumAlgebra`KetArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"RIndex"]],
     QuantumAlgebra`QuantumAlgebra`Ket,
     BaseStyle->"KetWrapper"], "\[CenterDot]", 
    TagBox[
     RowBox[{
      SubscriptBox["\[InvisiblePrefixScriptBase]", 
       TagBox[
        AdjustmentBox[
         TagBox["x",
          QuantumAlgebra`QuantumAlgebra`BraArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0],
        QuantumAlgebra`QuantumAlgebra`UDScript,
        BaseStyle->"LIndex"]], 
      RowBox[{"\[LeftAngleBracket]", 
       AdjustmentBox[
        TagBox["p",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0], 
       AdjustmentBox["\[VerticalSeparator]",
        BoxBaselineShift->-0.1,
        BoxMargins->{{0, -0.2}, {0, 0}}]}]}],
     QuantumAlgebra`QuantumAlgebra`Bra,
     BaseStyle->"BraWrapper"], "\[CenterDot]", 
    TagBox[
     RowBox[{
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{-0.2, 0}, {0, 0}}], 
      AdjustmentBox[
       TagBox["\[Psi]",
        QuantumAlgebra`QuantumAlgebra`KetArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], "\[RightAngleBracket]"}],
     QuantumAlgebra`QuantumAlgebra`Ket,
     BaseStyle->"KetWrapper"]}]}], "-", 
  RowBox[{
   TagBox[
    RowBox[{
     SubscriptBox["\[InvisiblePrefixScriptBase]", 
      TagBox[
       AdjustmentBox[
        TagBox["x",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"LIndex"]], 
     SubscriptBox[
      RowBox[{"\[LeftAngleBracket]", 
       AdjustmentBox[
        RowBox[{
         TagBox["q",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
         TagBox["p",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"]}],
        BoxBaselineShift->0], "\[RightAngleBracket]"}], 
      TagBox[
       AdjustmentBox[
        TagBox["x",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"RIndex"]]}],
    QuantumAlgebra`QuantumAlgebra`Braket,
    BaseStyle->"BraKetWrapper"], " ", 
   RowBox[{
    TagBox[
     RowBox[{"\[LeftAngleBracket]", 
      AdjustmentBox[
       TagBox["\[Psi]",
        QuantumAlgebra`QuantumAlgebra`BraArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], 
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{0, -0.2}, {0, 0}}]}],
     QuantumAlgebra`QuantumAlgebra`Bra,
     BaseStyle->"BraWrapper"], "\[CenterDot]", 
    TagBox[
     SubscriptBox[
      RowBox[{
       AdjustmentBox["\[VerticalSeparator]",
        BoxBaselineShift->-0.1,
        BoxMargins->{{-0.2, 0}, {0, 0}}], 
       AdjustmentBox[
        TagBox["p",
         QuantumAlgebra`QuantumAlgebra`KetArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0], "\[RightAngleBracket]"}], 
      TagBox[
       AdjustmentBox[
        TagBox["x",
         QuantumAlgebra`QuantumAlgebra`KetArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"RIndex"]],
     QuantumAlgebra`QuantumAlgebra`Ket,
     BaseStyle->"KetWrapper"], "\[CenterDot]", 
    TagBox[
     RowBox[{
      SubscriptBox["\[InvisiblePrefixScriptBase]", 
       TagBox[
        AdjustmentBox[
         TagBox["x",
          QuantumAlgebra`QuantumAlgebra`BraArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0],
        QuantumAlgebra`QuantumAlgebra`UDScript,
        BaseStyle->"LIndex"]], 
      RowBox[{"\[LeftAngleBracket]", 
       AdjustmentBox[
        TagBox["q",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0], 
       AdjustmentBox["\[VerticalSeparator]",
        BoxBaselineShift->-0.1,
        BoxMargins->{{0, -0.2}, {0, 0}}]}]}],
     QuantumAlgebra`QuantumAlgebra`Bra,
     BaseStyle->"BraWrapper"], "\[CenterDot]", 
    TagBox[
     RowBox[{
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{-0.2, 0}, {0, 0}}], 
      AdjustmentBox[
       TagBox["\[Psi]",
        QuantumAlgebra`QuantumAlgebra`KetArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], "\[RightAngleBracket]"}],
     QuantumAlgebra`QuantumAlgebra`Ket,
     BaseStyle->"KetWrapper"]}]}], "+", 
  RowBox[{
   TagBox[
    RowBox[{
     SubscriptBox["\[InvisiblePrefixScriptBase]", 
      TagBox[
       AdjustmentBox[
        TagBox["x",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"LIndex"]], 
     SubscriptBox[
      RowBox[{"\[LeftAngleBracket]", 
       AdjustmentBox[
        RowBox[{
         TagBox["p",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
         TagBox["q",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"]}],
        BoxBaselineShift->0], "\[RightAngleBracket]"}], 
      TagBox[
       AdjustmentBox[
        TagBox["x",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"RIndex"]]}],
    QuantumAlgebra`QuantumAlgebra`Braket,
    BaseStyle->"BraKetWrapper"], " ", 
   RowBox[{
    TagBox[
     RowBox[{"\[LeftAngleBracket]", 
      AdjustmentBox[
       TagBox["\[Psi]",
        QuantumAlgebra`QuantumAlgebra`BraArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], 
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{0, -0.2}, {0, 0}}]}],
     QuantumAlgebra`QuantumAlgebra`Bra,
     BaseStyle->"BraWrapper"], "\[CenterDot]", 
    TagBox[
     SubscriptBox[
      RowBox[{
       AdjustmentBox["\[VerticalSeparator]",
        BoxBaselineShift->-0.1,
        BoxMargins->{{-0.2, 0}, {0, 0}}], 
       AdjustmentBox[
        TagBox["q",
         QuantumAlgebra`QuantumAlgebra`KetArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0], "\[RightAngleBracket]"}], 
      TagBox[
       AdjustmentBox[
        TagBox["x",
         QuantumAlgebra`QuantumAlgebra`KetArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"RIndex"]],
     QuantumAlgebra`QuantumAlgebra`Ket,
     BaseStyle->"KetWrapper"], "\[CenterDot]", 
    TagBox[
     RowBox[{
      SubscriptBox["\[InvisiblePrefixScriptBase]", 
       TagBox[
        AdjustmentBox[
         TagBox["x",
          QuantumAlgebra`QuantumAlgebra`BraArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0],
        QuantumAlgebra`QuantumAlgebra`UDScript,
        BaseStyle->"LIndex"]], 
      RowBox[{"\[LeftAngleBracket]", 
       AdjustmentBox[
        TagBox["p",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0], 
       AdjustmentBox["\[VerticalSeparator]",
        BoxBaselineShift->-0.1,
        BoxMargins->{{0, -0.2}, {0, 0}}]}]}],
     QuantumAlgebra`QuantumAlgebra`Bra,
     BaseStyle->"BraWrapper"], "\[CenterDot]", 
    TagBox[
     RowBox[{
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{-0.2, 0}, {0, 0}}], 
      AdjustmentBox[
       TagBox["\[Psi]",
        QuantumAlgebra`QuantumAlgebra`KetArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], "\[RightAngleBracket]"}],
     QuantumAlgebra`QuantumAlgebra`Ket,
     BaseStyle->"KetWrapper"]}]}], "-", 
  RowBox[{
   TagBox[
    RowBox[{
     SubscriptBox["\[InvisiblePrefixScriptBase]", 
      TagBox[
       AdjustmentBox[
        TagBox["x",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"LIndex"]], 
     SubscriptBox[
      RowBox[{"\[LeftAngleBracket]", 
       AdjustmentBox[
        RowBox[{
         TagBox["p",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
         TagBox["p",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"]}],
        BoxBaselineShift->0], "\[RightAngleBracket]"}], 
      TagBox[
       AdjustmentBox[
        TagBox["x",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"RIndex"]]}],
    QuantumAlgebra`QuantumAlgebra`Braket,
    BaseStyle->"BraKetWrapper"], " ", 
   RowBox[{
    TagBox[
     RowBox[{"\[LeftAngleBracket]", 
      AdjustmentBox[
       TagBox["\[Psi]",
        QuantumAlgebra`QuantumAlgebra`BraArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], 
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{0, -0.2}, {0, 0}}]}],
     QuantumAlgebra`QuantumAlgebra`Bra,
     BaseStyle->"BraWrapper"], "\[CenterDot]", 
    TagBox[
     SubscriptBox[
      RowBox[{
       AdjustmentBox["\[VerticalSeparator]",
        BoxBaselineShift->-0.1,
        BoxMargins->{{-0.2, 0}, {0, 0}}], 
       AdjustmentBox[
        TagBox["q",
         QuantumAlgebra`QuantumAlgebra`KetArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0], "\[RightAngleBracket]"}], 
      TagBox[
       AdjustmentBox[
        TagBox["x",
         QuantumAlgebra`QuantumAlgebra`KetArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"RIndex"]],
     QuantumAlgebra`QuantumAlgebra`Ket,
     BaseStyle->"KetWrapper"], "\[CenterDot]", 
    TagBox[
     RowBox[{
      SubscriptBox["\[InvisiblePrefixScriptBase]", 
       TagBox[
        AdjustmentBox[
         TagBox["x",
          QuantumAlgebra`QuantumAlgebra`BraArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0],
        QuantumAlgebra`QuantumAlgebra`UDScript,
        BaseStyle->"LIndex"]], 
      RowBox[{"\[LeftAngleBracket]", 
       AdjustmentBox[
        TagBox["q",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0], 
       AdjustmentBox["\[VerticalSeparator]",
        BoxBaselineShift->-0.1,
        BoxMargins->{{0, -0.2}, {0, 0}}]}]}],
     QuantumAlgebra`QuantumAlgebra`Bra,
     BaseStyle->"BraWrapper"], "\[CenterDot]", 
    TagBox[
     RowBox[{
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{-0.2, 0}, {0, 0}}], 
      AdjustmentBox[
       TagBox["\[Psi]",
        QuantumAlgebra`QuantumAlgebra`KetArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], "\[RightAngleBracket]"}],
     QuantumAlgebra`QuantumAlgebra`Ket,
     BaseStyle->"KetWrapper"]}]}]}]], "Output",
 CellChangeTimes->{{3.473865608041583*^9, 3.4738656093606577`*^9}, 
   3.4740581155718393`*^9, {3.474058794401666*^9, 3.4740588009140387`*^9}, 
   3.4740591754744625`*^9, 3.474059287562874*^9, 3.5943791317426996`*^9}]
}, Open  ]],

Cell["\<\
As you see, braketing has took place for elements of the basis, that appeared \
in bra-ket pairs, reducing them to brakets objects. However, brakets between \
the state of the system and the basis elements are not simplified. Of course \
they can be forced as in:\
\>", "Text",
 CellChangeTimes->{{3.4441690549941998`*^9, 3.4441691667382*^9}, {
   3.4441692318612003`*^9, 3.4441692911071997`*^9}, {3.4441695791532*^9, 
   3.4441695956682*^9}, {3.4442541780810003`*^9, 3.4442541794110003`*^9}, {
   3.444255577285*^9, 3.44425578421*^9}, {3.444255943178*^9, 
   3.444255970119*^9}, {3.4452432630519457`*^9, 3.4452432982679453`*^9}, {
   3.4737957843869047`*^9, 3.4737958142626133`*^9}, {3.473796005806569*^9, 
   3.4737960502521114`*^9}, {3.4737960848180885`*^9, 3.473796133010845*^9}, {
   3.4737962338886147`*^9, 3.473796273177862*^9}, {3.4737964663029084`*^9, 
   3.473796537739994*^9}, 3.4738138013753247`*^9, {3.4738656803267174`*^9, 
   3.4738656901242776`*^9}, {3.4740592077873106`*^9, 
   3.4740592390570993`*^9}, {3.474059309866149*^9, 3.474059511192664*^9}, {
   3.474059741250823*^9, 3.4740597564566927`*^9}, {3.474059795204909*^9, 
   3.4740597956819363`*^9}, {3.4740607114953175`*^9, 
   3.4740608212725964`*^9}, {3.594379169600865*^9, 3.594379190706072*^9}}],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"\[ScriptCapitalE]2", "=", 
  RowBox[{"\[ScriptCapitalE]", "//", "QAProductExpand"}]}]], "Input",
 CellChangeTimes->{{3.474059523421364*^9, 3.4740595275756016`*^9}, {
  3.4740595664938273`*^9, 3.47405972703701*^9}, {3.4740602781955347`*^9, 
  3.474060282102758*^9}}],

Cell[BoxData[
 RowBox[{
  RowBox[{
   TagBox[
    SubscriptBox[
     RowBox[{"\[LeftAngleBracket]", 
      AdjustmentBox[
       RowBox[{
        TagBox["\[Psi]",
         QuantumAlgebra`QuantumAlgebra`BraKetArgs,
         BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
        TagBox["q",
         QuantumAlgebra`QuantumAlgebra`BraKetArgs,
         BaseStyle->"BraKetArg"]}],
       BoxBaselineShift->0], "\[RightAngleBracket]"}], 
     TagBox[
      AdjustmentBox[
       TagBox["x",
        QuantumAlgebra`QuantumAlgebra`KetArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0],
      QuantumAlgebra`QuantumAlgebra`UDScript,
      BaseStyle->"RIndex"]],
    QuantumAlgebra`QuantumAlgebra`Braket,
    BaseStyle->"BraKetWrapper"], " ", 
   TagBox[
    RowBox[{
     SubscriptBox["\[InvisiblePrefixScriptBase]", 
      TagBox[
       AdjustmentBox[
        TagBox["x",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"LIndex"]], 
     RowBox[{"\[LeftAngleBracket]", 
      AdjustmentBox[
       RowBox[{
        TagBox["p",
         QuantumAlgebra`QuantumAlgebra`BraKetArgs,
         BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
        TagBox["\[Psi]",
         QuantumAlgebra`QuantumAlgebra`BraKetArgs,
         BaseStyle->"BraKetArg"]}],
       BoxBaselineShift->0], "\[RightAngleBracket]"}]}],
    QuantumAlgebra`QuantumAlgebra`Braket,
    BaseStyle->"BraKetWrapper"], " ", 
   TagBox[
    RowBox[{
     SubscriptBox["\[InvisiblePrefixScriptBase]", 
      TagBox[
       AdjustmentBox[
        TagBox["x",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"LIndex"]], 
     SubscriptBox[
      RowBox[{"\[LeftAngleBracket]", 
       AdjustmentBox[
        RowBox[{
         TagBox["p",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
         TagBox["q",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"]}],
        BoxBaselineShift->0], "\[RightAngleBracket]"}], 
      TagBox[
       AdjustmentBox[
        TagBox["x",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"RIndex"]]}],
    QuantumAlgebra`QuantumAlgebra`Braket,
    BaseStyle->"BraKetWrapper"]}], "-", 
  RowBox[{
   TagBox[
    SubscriptBox[
     RowBox[{"\[LeftAngleBracket]", 
      AdjustmentBox[
       RowBox[{
        TagBox["\[Psi]",
         QuantumAlgebra`QuantumAlgebra`BraKetArgs,
         BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
        TagBox["q",
         QuantumAlgebra`QuantumAlgebra`BraKetArgs,
         BaseStyle->"BraKetArg"]}],
       BoxBaselineShift->0], "\[RightAngleBracket]"}], 
     TagBox[
      AdjustmentBox[
       TagBox["x",
        QuantumAlgebra`QuantumAlgebra`KetArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0],
      QuantumAlgebra`QuantumAlgebra`UDScript,
      BaseStyle->"RIndex"]],
    QuantumAlgebra`QuantumAlgebra`Braket,
    BaseStyle->"BraKetWrapper"], " ", 
   TagBox[
    RowBox[{
     SubscriptBox["\[InvisiblePrefixScriptBase]", 
      TagBox[
       AdjustmentBox[
        TagBox["x",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"LIndex"]], 
     SubscriptBox[
      RowBox[{"\[LeftAngleBracket]", 
       AdjustmentBox[
        RowBox[{
         TagBox["p",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
         TagBox["p",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"]}],
        BoxBaselineShift->0], "\[RightAngleBracket]"}], 
      TagBox[
       AdjustmentBox[
        TagBox["x",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"RIndex"]]}],
    QuantumAlgebra`QuantumAlgebra`Braket,
    BaseStyle->"BraKetWrapper"], " ", 
   TagBox[
    RowBox[{
     SubscriptBox["\[InvisiblePrefixScriptBase]", 
      TagBox[
       AdjustmentBox[
        TagBox["x",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"LIndex"]], 
     RowBox[{"\[LeftAngleBracket]", 
      AdjustmentBox[
       RowBox[{
        TagBox["q",
         QuantumAlgebra`QuantumAlgebra`BraKetArgs,
         BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
        TagBox["\[Psi]",
         QuantumAlgebra`QuantumAlgebra`BraKetArgs,
         BaseStyle->"BraKetArg"]}],
       BoxBaselineShift->0], "\[RightAngleBracket]"}]}],
    QuantumAlgebra`QuantumAlgebra`Braket,
    BaseStyle->"BraKetWrapper"]}], "-", 
  RowBox[{
   TagBox[
    SubscriptBox[
     RowBox[{"\[LeftAngleBracket]", 
      AdjustmentBox[
       RowBox[{
        TagBox["\[Psi]",
         QuantumAlgebra`QuantumAlgebra`BraKetArgs,
         BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
        TagBox["p",
         QuantumAlgebra`QuantumAlgebra`BraKetArgs,
         BaseStyle->"BraKetArg"]}],
       BoxBaselineShift->0], "\[RightAngleBracket]"}], 
     TagBox[
      AdjustmentBox[
       TagBox["x",
        QuantumAlgebra`QuantumAlgebra`KetArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0],
      QuantumAlgebra`QuantumAlgebra`UDScript,
      BaseStyle->"RIndex"]],
    QuantumAlgebra`QuantumAlgebra`Braket,
    BaseStyle->"BraKetWrapper"], " ", 
   TagBox[
    RowBox[{
     SubscriptBox["\[InvisiblePrefixScriptBase]", 
      TagBox[
       AdjustmentBox[
        TagBox["x",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"LIndex"]], 
     RowBox[{"\[LeftAngleBracket]", 
      AdjustmentBox[
       RowBox[{
        TagBox["q",
         QuantumAlgebra`QuantumAlgebra`BraKetArgs,
         BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
        TagBox["\[Psi]",
         QuantumAlgebra`QuantumAlgebra`BraKetArgs,
         BaseStyle->"BraKetArg"]}],
       BoxBaselineShift->0], "\[RightAngleBracket]"}]}],
    QuantumAlgebra`QuantumAlgebra`Braket,
    BaseStyle->"BraKetWrapper"], " ", 
   TagBox[
    RowBox[{
     SubscriptBox["\[InvisiblePrefixScriptBase]", 
      TagBox[
       AdjustmentBox[
        TagBox["x",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"LIndex"]], 
     SubscriptBox[
      RowBox[{"\[LeftAngleBracket]", 
       AdjustmentBox[
        RowBox[{
         TagBox["q",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
         TagBox["p",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"]}],
        BoxBaselineShift->0], "\[RightAngleBracket]"}], 
      TagBox[
       AdjustmentBox[
        TagBox["x",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"RIndex"]]}],
    QuantumAlgebra`QuantumAlgebra`Braket,
    BaseStyle->"BraKetWrapper"]}], "+", 
  RowBox[{
   TagBox[
    SubscriptBox[
     RowBox[{"\[LeftAngleBracket]", 
      AdjustmentBox[
       RowBox[{
        TagBox["\[Psi]",
         QuantumAlgebra`QuantumAlgebra`BraKetArgs,
         BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
        TagBox["p",
         QuantumAlgebra`QuantumAlgebra`BraKetArgs,
         BaseStyle->"BraKetArg"]}],
       BoxBaselineShift->0], "\[RightAngleBracket]"}], 
     TagBox[
      AdjustmentBox[
       TagBox["x",
        QuantumAlgebra`QuantumAlgebra`KetArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0],
      QuantumAlgebra`QuantumAlgebra`UDScript,
      BaseStyle->"RIndex"]],
    QuantumAlgebra`QuantumAlgebra`Braket,
    BaseStyle->"BraKetWrapper"], " ", 
   TagBox[
    RowBox[{
     SubscriptBox["\[InvisiblePrefixScriptBase]", 
      TagBox[
       AdjustmentBox[
        TagBox["x",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"LIndex"]], 
     RowBox[{"\[LeftAngleBracket]", 
      AdjustmentBox[
       RowBox[{
        TagBox["p",
         QuantumAlgebra`QuantumAlgebra`BraKetArgs,
         BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
        TagBox["\[Psi]",
         QuantumAlgebra`QuantumAlgebra`BraKetArgs,
         BaseStyle->"BraKetArg"]}],
       BoxBaselineShift->0], "\[RightAngleBracket]"}]}],
    QuantumAlgebra`QuantumAlgebra`Braket,
    BaseStyle->"BraKetWrapper"], " ", 
   TagBox[
    RowBox[{
     SubscriptBox["\[InvisiblePrefixScriptBase]", 
      TagBox[
       AdjustmentBox[
        TagBox["x",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"LIndex"]], 
     SubscriptBox[
      RowBox[{"\[LeftAngleBracket]", 
       AdjustmentBox[
        RowBox[{
         TagBox["q",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
         TagBox["q",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"]}],
        BoxBaselineShift->0], "\[RightAngleBracket]"}], 
      TagBox[
       AdjustmentBox[
        TagBox["x",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"RIndex"]]}],
    QuantumAlgebra`QuantumAlgebra`Braket,
    BaseStyle->"BraKetWrapper"]}]}]], "Output",
 CellChangeTimes->{
  3.474059528338645*^9, {3.474059668241647*^9, 3.474059727551039*^9}, 
   3.474060287276054*^9, 3.5943792218638544`*^9}]
}, Open  ]],

Cell[TextData[{
 "The fact that ",
 StyleBox["QuantumAlgebra",
  FontSlant->"Italic"],
 " do not evaluate them, because of the unmatching labels, can be used to \
carry on further calculations. For example, we can express the state of the \
system in the same basis, and plug it directly into the calculation:"
}], "Text",
 CellChangeTimes->{{3.4441690549941998`*^9, 3.4441691667382*^9}, {
   3.4441692318612003`*^9, 3.4441692911071997`*^9}, {3.4441695791532*^9, 
   3.4441695956682*^9}, {3.4442541780810003`*^9, 3.4442541794110003`*^9}, {
   3.444255577285*^9, 3.44425578421*^9}, {3.444255943178*^9, 
   3.444255970119*^9}, {3.4452432630519457`*^9, 3.4452432982679453`*^9}, {
   3.4737957843869047`*^9, 3.4737958142626133`*^9}, {3.473796005806569*^9, 
   3.4737960502521114`*^9}, {3.4737960848180885`*^9, 3.473796133010845*^9}, {
   3.4737962338886147`*^9, 3.473796273177862*^9}, {3.4737964663029084`*^9, 
   3.473796537739994*^9}, 3.4738138013753247`*^9, {3.4738656803267174`*^9, 
   3.4738656901242776`*^9}, {3.4740592077873106`*^9, 
   3.4740592390570993`*^9}, {3.474059309866149*^9, 3.4740594743045545`*^9}, {
   3.4740597860923877`*^9, 3.4740598789666996`*^9}, {3.474059963346526*^9, 
   3.47406009105383*^9}}],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"\[Psi]Rule", "=", 
  RowBox[{"{", "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{
     TagBox[
      RowBox[{
       AdjustmentBox["\[VerticalSeparator]",
        BoxBaselineShift->-0.1,
        BoxMargins->{{-0.2, 0}, {0, 0}}], 
       AdjustmentBox[
        TagBox["\[Psi]",
         QuantumAlgebra`QuantumAlgebra`KetArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0], "\[RightAngleBracket]"}],
      QuantumAlgebra`QuantumAlgebra`Ket,
      BaseStyle->"KetWrapper"], "\[Rule]", 
     RowBox[{
      TagBox[
       SubscriptBox[
        RowBox[{
         AdjustmentBox["\[VerticalSeparator]",
          BoxBaselineShift->-0.1,
          BoxMargins->{{-0.2, 0}, {0, 0}}], 
         AdjustmentBox[
          TagBox["p",
           QuantumAlgebra`QuantumAlgebra`KetArgs,
           BaseStyle->"BraKetArg"],
          BoxBaselineShift->0], "\[RightAngleBracket]"}], 
        TagBox[
         AdjustmentBox[
          TagBox["x",
           QuantumAlgebra`QuantumAlgebra`KetArgs,
           BaseStyle->"BraKetArg"],
          BoxBaselineShift->0],
         QuantumAlgebra`QuantumAlgebra`UDScript,
         BaseStyle->"RIndex"]],
       QuantumAlgebra`QuantumAlgebra`Ket,
       BaseStyle->"KetWrapper"], "+", 
      TagBox[
       SubscriptBox[
        RowBox[{
         AdjustmentBox["\[VerticalSeparator]",
          BoxBaselineShift->-0.1,
          BoxMargins->{{-0.2, 0}, {0, 0}}], 
         AdjustmentBox[
          TagBox["q",
           QuantumAlgebra`QuantumAlgebra`KetArgs,
           BaseStyle->"BraKetArg"],
          BoxBaselineShift->0], "\[RightAngleBracket]"}], 
        TagBox[
         AdjustmentBox[
          TagBox["x",
           QuantumAlgebra`QuantumAlgebra`KetArgs,
           BaseStyle->"BraKetArg"],
          BoxBaselineShift->0],
         QuantumAlgebra`QuantumAlgebra`UDScript,
         BaseStyle->"RIndex"]],
       QuantumAlgebra`QuantumAlgebra`Ket,
       BaseStyle->"KetWrapper"]}]}], ",", "\[IndentingNewLine]", 
    RowBox[{
     TagBox[
      RowBox[{"\[LeftAngleBracket]", 
       AdjustmentBox[
        TagBox["\[Psi]",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0], 
       AdjustmentBox["\[VerticalSeparator]",
        BoxBaselineShift->-0.1,
        BoxMargins->{{0, -0.2}, {0, 0}}]}],
      QuantumAlgebra`QuantumAlgebra`Bra,
      BaseStyle->"BraWrapper"], "\[Rule]", 
     RowBox[{
      TagBox[
       RowBox[{
        SubscriptBox["\[InvisiblePrefixScriptBase]", 
         TagBox[
          AdjustmentBox[
           TagBox["x",
            QuantumAlgebra`QuantumAlgebra`BraArgs,
            BaseStyle->"BraKetArg"],
           BoxBaselineShift->0],
          QuantumAlgebra`QuantumAlgebra`UDScript,
          BaseStyle->"LIndex"]], 
        RowBox[{"\[LeftAngleBracket]", 
         AdjustmentBox[
          TagBox["p",
           QuantumAlgebra`QuantumAlgebra`BraArgs,
           BaseStyle->"BraKetArg"],
          BoxBaselineShift->0], 
         AdjustmentBox["\[VerticalSeparator]",
          BoxBaselineShift->-0.1,
          BoxMargins->{{0, -0.2}, {0, 0}}]}]}],
       QuantumAlgebra`QuantumAlgebra`Bra,
       BaseStyle->"BraWrapper"], "+", 
      TagBox[
       RowBox[{
        SubscriptBox["\[InvisiblePrefixScriptBase]", 
         TagBox[
          AdjustmentBox[
           TagBox["x",
            QuantumAlgebra`QuantumAlgebra`BraArgs,
            BaseStyle->"BraKetArg"],
           BoxBaselineShift->0],
          QuantumAlgebra`QuantumAlgebra`UDScript,
          BaseStyle->"LIndex"]], 
        RowBox[{"\[LeftAngleBracket]", 
         AdjustmentBox[
          TagBox["q",
           QuantumAlgebra`QuantumAlgebra`BraArgs,
           BaseStyle->"BraKetArg"],
          BoxBaselineShift->0], 
         AdjustmentBox["\[VerticalSeparator]",
          BoxBaselineShift->-0.1,
          BoxMargins->{{0, -0.2}, {0, 0}}]}]}],
       QuantumAlgebra`QuantumAlgebra`Bra,
       BaseStyle->"BraWrapper"]}]}]}], "}"}]}]], "Input",
 CellChangeTimes->{{3.4740592579721813`*^9, 3.474059273441066*^9}, 
   3.474060842925835*^9, {3.47423934163069*^9, 3.474239342470738*^9}, {
   3.594379298556241*^9, 3.59437931619725*^9}}],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{
   RowBox[{
    TagBox[
     RowBox[{
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{-0.2, 0}, {0, 0}}], 
      AdjustmentBox[
       TagBox["\[Psi]",
        QuantumAlgebra`QuantumAlgebra`KetArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], "\[RightAngleBracket]"}],
     QuantumAlgebra`QuantumAlgebra`Ket,
     BaseStyle->"KetWrapper"], "\[Rule]", 
    RowBox[{
     TagBox[
      SubscriptBox[
       RowBox[{
        AdjustmentBox["\[VerticalSeparator]",
         BoxBaselineShift->-0.1,
         BoxMargins->{{-0.2, 0}, {0, 0}}], 
        AdjustmentBox[
         TagBox["p",
          QuantumAlgebra`QuantumAlgebra`KetArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0], "\[RightAngleBracket]"}], 
       TagBox[
        AdjustmentBox[
         TagBox["x",
          QuantumAlgebra`QuantumAlgebra`KetArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0],
        QuantumAlgebra`QuantumAlgebra`UDScript,
        BaseStyle->"RIndex"]],
      QuantumAlgebra`QuantumAlgebra`Ket,
      BaseStyle->"KetWrapper"], "+", 
     TagBox[
      SubscriptBox[
       RowBox[{
        AdjustmentBox["\[VerticalSeparator]",
         BoxBaselineShift->-0.1,
         BoxMargins->{{-0.2, 0}, {0, 0}}], 
        AdjustmentBox[
         TagBox["q",
          QuantumAlgebra`QuantumAlgebra`KetArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0], "\[RightAngleBracket]"}], 
       TagBox[
        AdjustmentBox[
         TagBox["x",
          QuantumAlgebra`QuantumAlgebra`KetArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0],
        QuantumAlgebra`QuantumAlgebra`UDScript,
        BaseStyle->"RIndex"]],
      QuantumAlgebra`QuantumAlgebra`Ket,
      BaseStyle->"KetWrapper"]}]}], ",", 
   RowBox[{
    TagBox[
     RowBox[{"\[LeftAngleBracket]", 
      AdjustmentBox[
       TagBox["\[Psi]",
        QuantumAlgebra`QuantumAlgebra`BraArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], 
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{0, -0.2}, {0, 0}}]}],
     QuantumAlgebra`QuantumAlgebra`Bra,
     BaseStyle->"BraWrapper"], "\[Rule]", 
    RowBox[{
     TagBox[
      RowBox[{
       SubscriptBox["\[InvisiblePrefixScriptBase]", 
        TagBox[
         AdjustmentBox[
          TagBox["x",
           QuantumAlgebra`QuantumAlgebra`BraArgs,
           BaseStyle->"BraKetArg"],
          BoxBaselineShift->0],
         QuantumAlgebra`QuantumAlgebra`UDScript,
         BaseStyle->"LIndex"]], 
       RowBox[{"\[LeftAngleBracket]", 
        AdjustmentBox[
         TagBox["p",
          QuantumAlgebra`QuantumAlgebra`BraArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0], 
        AdjustmentBox["\[VerticalSeparator]",
         BoxBaselineShift->-0.1,
         BoxMargins->{{0, -0.2}, {0, 0}}]}]}],
      QuantumAlgebra`QuantumAlgebra`Bra,
      BaseStyle->"BraWrapper"], "+", 
     TagBox[
      RowBox[{
       SubscriptBox["\[InvisiblePrefixScriptBase]", 
        TagBox[
         AdjustmentBox[
          TagBox["x",
           QuantumAlgebra`QuantumAlgebra`BraArgs,
           BaseStyle->"BraKetArg"],
          BoxBaselineShift->0],
         QuantumAlgebra`QuantumAlgebra`UDScript,
         BaseStyle->"LIndex"]], 
       RowBox[{"\[LeftAngleBracket]", 
        AdjustmentBox[
         TagBox["q",
          QuantumAlgebra`QuantumAlgebra`BraArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0], 
        AdjustmentBox["\[VerticalSeparator]",
         BoxBaselineShift->-0.1,
         BoxMargins->{{0, -0.2}, {0, 0}}]}]}],
      QuantumAlgebra`QuantumAlgebra`Bra,
      BaseStyle->"BraWrapper"]}]}]}], "}"}]], "Output",
 CellChangeTimes->{3.4740592789643817`*^9, 3.4740600974711976`*^9, 
  3.594379317165305*^9}]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{
  RowBox[{"\[ScriptCapitalE]", "/.", "\[Psi]Rule"}], "//", 
  "Expand"}]], "Input",
 CellChangeTimes->{{3.4441683597392*^9, 3.4441684462902*^9}, {
   3.4441692680652*^9, 3.4441692736302*^9}, {3.4441693103241997`*^9, 
   3.4441693115852003`*^9}, {3.4442207099135485`*^9, 
   3.4442207286165485`*^9}, {3.4442207602655487`*^9, 
   3.4442207640735483`*^9}, {3.4442558957060003`*^9, 3.444255910123*^9}, {
   3.4737965449994097`*^9, 3.473796573600045*^9}, 3.4738138013783245`*^9, {
   3.473849062371438*^9, 3.4738491172367344`*^9}, 3.473849229670932*^9, {
   3.4738492741174097`*^9, 3.473849275162612*^9}, 3.4740592552520256`*^9, {
   3.474059294057245*^9, 3.4740592983544908`*^9}, {3.474239346734982*^9, 
   3.4742393474430227`*^9}}],

Cell[BoxData[
 RowBox[{
  RowBox[{
   TagBox[
    RowBox[{
     SubscriptBox["\[InvisiblePrefixScriptBase]", 
      TagBox[
       AdjustmentBox[
        TagBox["x",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"LIndex"]], 
     SubscriptBox[
      RowBox[{"\[LeftAngleBracket]", 
       AdjustmentBox[
        RowBox[{
         TagBox["p",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
         TagBox["p",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"]}],
        BoxBaselineShift->0], "\[RightAngleBracket]"}], 
      TagBox[
       AdjustmentBox[
        TagBox["x",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"RIndex"]]}],
    QuantumAlgebra`QuantumAlgebra`Braket,
    BaseStyle->"BraKetWrapper"], " ", 
   SuperscriptBox[
    TagBox[
     RowBox[{
      SubscriptBox["\[InvisiblePrefixScriptBase]", 
       TagBox[
        AdjustmentBox[
         TagBox["x",
          QuantumAlgebra`QuantumAlgebra`BraArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0],
        QuantumAlgebra`QuantumAlgebra`UDScript,
        BaseStyle->"LIndex"]], 
      SubscriptBox[
       RowBox[{"\[LeftAngleBracket]", 
        AdjustmentBox[
         RowBox[{
          TagBox["p",
           QuantumAlgebra`QuantumAlgebra`BraKetArgs,
           BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
          TagBox["q",
           QuantumAlgebra`QuantumAlgebra`BraKetArgs,
           BaseStyle->"BraKetArg"]}],
         BoxBaselineShift->0], "\[RightAngleBracket]"}], 
       TagBox[
        AdjustmentBox[
         TagBox["x",
          QuantumAlgebra`QuantumAlgebra`BraArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0],
        QuantumAlgebra`QuantumAlgebra`UDScript,
        BaseStyle->"RIndex"]]}],
     QuantumAlgebra`QuantumAlgebra`Braket,
     BaseStyle->"BraKetWrapper"], "2"]}], "+", 
  SuperscriptBox[
   TagBox[
    RowBox[{
     SubscriptBox["\[InvisiblePrefixScriptBase]", 
      TagBox[
       AdjustmentBox[
        TagBox["x",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"LIndex"]], 
     SubscriptBox[
      RowBox[{"\[LeftAngleBracket]", 
       AdjustmentBox[
        RowBox[{
         TagBox["p",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
         TagBox["q",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"]}],
        BoxBaselineShift->0], "\[RightAngleBracket]"}], 
      TagBox[
       AdjustmentBox[
        TagBox["x",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"RIndex"]]}],
    QuantumAlgebra`QuantumAlgebra`Braket,
    BaseStyle->"BraKetWrapper"], "3"], "-", 
  RowBox[{
   TagBox[
    RowBox[{
     SubscriptBox["\[InvisiblePrefixScriptBase]", 
      TagBox[
       AdjustmentBox[
        TagBox["x",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"LIndex"]], 
     SubscriptBox[
      RowBox[{"\[LeftAngleBracket]", 
       AdjustmentBox[
        RowBox[{
         TagBox["p",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
         TagBox["p",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"]}],
        BoxBaselineShift->0], "\[RightAngleBracket]"}], 
      TagBox[
       AdjustmentBox[
        TagBox["x",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"RIndex"]]}],
    QuantumAlgebra`QuantumAlgebra`Braket,
    BaseStyle->"BraKetWrapper"], " ", 
   TagBox[
    RowBox[{
     SubscriptBox["\[InvisiblePrefixScriptBase]", 
      TagBox[
       AdjustmentBox[
        TagBox["x",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"LIndex"]], 
     SubscriptBox[
      RowBox[{"\[LeftAngleBracket]", 
       AdjustmentBox[
        RowBox[{
         TagBox["p",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
         TagBox["q",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"]}],
        BoxBaselineShift->0], "\[RightAngleBracket]"}], 
      TagBox[
       AdjustmentBox[
        TagBox["x",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"RIndex"]]}],
    QuantumAlgebra`QuantumAlgebra`Braket,
    BaseStyle->"BraKetWrapper"], " ", 
   TagBox[
    RowBox[{
     SubscriptBox["\[InvisiblePrefixScriptBase]", 
      TagBox[
       AdjustmentBox[
        TagBox["x",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"LIndex"]], 
     SubscriptBox[
      RowBox[{"\[LeftAngleBracket]", 
       AdjustmentBox[
        RowBox[{
         TagBox["q",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
         TagBox["p",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"]}],
        BoxBaselineShift->0], "\[RightAngleBracket]"}], 
      TagBox[
       AdjustmentBox[
        TagBox["x",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"RIndex"]]}],
    QuantumAlgebra`QuantumAlgebra`Braket,
    BaseStyle->"BraKetWrapper"]}], "-", 
  RowBox[{
   TagBox[
    RowBox[{
     SubscriptBox["\[InvisiblePrefixScriptBase]", 
      TagBox[
       AdjustmentBox[
        TagBox["x",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"LIndex"]], 
     SubscriptBox[
      RowBox[{"\[LeftAngleBracket]", 
       AdjustmentBox[
        RowBox[{
         TagBox["p",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
         TagBox["p",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"]}],
        BoxBaselineShift->0], "\[RightAngleBracket]"}], 
      TagBox[
       AdjustmentBox[
        TagBox["x",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"RIndex"]]}],
    QuantumAlgebra`QuantumAlgebra`Braket,
    BaseStyle->"BraKetWrapper"], " ", 
   SuperscriptBox[
    TagBox[
     RowBox[{
      SubscriptBox["\[InvisiblePrefixScriptBase]", 
       TagBox[
        AdjustmentBox[
         TagBox["x",
          QuantumAlgebra`QuantumAlgebra`BraArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0],
        QuantumAlgebra`QuantumAlgebra`UDScript,
        BaseStyle->"LIndex"]], 
      SubscriptBox[
       RowBox[{"\[LeftAngleBracket]", 
        AdjustmentBox[
         RowBox[{
          TagBox["q",
           QuantumAlgebra`QuantumAlgebra`BraKetArgs,
           BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
          TagBox["p",
           QuantumAlgebra`QuantumAlgebra`BraKetArgs,
           BaseStyle->"BraKetArg"]}],
         BoxBaselineShift->0], "\[RightAngleBracket]"}], 
       TagBox[
        AdjustmentBox[
         TagBox["x",
          QuantumAlgebra`QuantumAlgebra`BraArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0],
        QuantumAlgebra`QuantumAlgebra`UDScript,
        BaseStyle->"RIndex"]]}],
     QuantumAlgebra`QuantumAlgebra`Braket,
     BaseStyle->"BraKetWrapper"], "2"]}], "-", 
  SuperscriptBox[
   TagBox[
    RowBox[{
     SubscriptBox["\[InvisiblePrefixScriptBase]", 
      TagBox[
       AdjustmentBox[
        TagBox["x",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"LIndex"]], 
     SubscriptBox[
      RowBox[{"\[LeftAngleBracket]", 
       AdjustmentBox[
        RowBox[{
         TagBox["q",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
         TagBox["p",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"]}],
        BoxBaselineShift->0], "\[RightAngleBracket]"}], 
      TagBox[
       AdjustmentBox[
        TagBox["x",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"RIndex"]]}],
    QuantumAlgebra`QuantumAlgebra`Braket,
    BaseStyle->"BraKetWrapper"], "3"], "+", 
  RowBox[{
   SuperscriptBox[
    TagBox[
     RowBox[{
      SubscriptBox["\[InvisiblePrefixScriptBase]", 
       TagBox[
        AdjustmentBox[
         TagBox["x",
          QuantumAlgebra`QuantumAlgebra`BraArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0],
        QuantumAlgebra`QuantumAlgebra`UDScript,
        BaseStyle->"LIndex"]], 
      SubscriptBox[
       RowBox[{"\[LeftAngleBracket]", 
        AdjustmentBox[
         RowBox[{
          TagBox["p",
           QuantumAlgebra`QuantumAlgebra`BraKetArgs,
           BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
          TagBox["p",
           QuantumAlgebra`QuantumAlgebra`BraKetArgs,
           BaseStyle->"BraKetArg"]}],
         BoxBaselineShift->0], "\[RightAngleBracket]"}], 
       TagBox[
        AdjustmentBox[
         TagBox["x",
          QuantumAlgebra`QuantumAlgebra`BraArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0],
        QuantumAlgebra`QuantumAlgebra`UDScript,
        BaseStyle->"RIndex"]]}],
     QuantumAlgebra`QuantumAlgebra`Braket,
     BaseStyle->"BraKetWrapper"], "2"], " ", 
   TagBox[
    RowBox[{
     SubscriptBox["\[InvisiblePrefixScriptBase]", 
      TagBox[
       AdjustmentBox[
        TagBox["x",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"LIndex"]], 
     SubscriptBox[
      RowBox[{"\[LeftAngleBracket]", 
       AdjustmentBox[
        RowBox[{
         TagBox["q",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
         TagBox["q",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"]}],
        BoxBaselineShift->0], "\[RightAngleBracket]"}], 
      TagBox[
       AdjustmentBox[
        TagBox["x",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"RIndex"]]}],
    QuantumAlgebra`QuantumAlgebra`Braket,
    BaseStyle->"BraKetWrapper"]}], "+", 
  RowBox[{
   TagBox[
    RowBox[{
     SubscriptBox["\[InvisiblePrefixScriptBase]", 
      TagBox[
       AdjustmentBox[
        TagBox["x",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"LIndex"]], 
     SubscriptBox[
      RowBox[{"\[LeftAngleBracket]", 
       AdjustmentBox[
        RowBox[{
         TagBox["p",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
         TagBox["p",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"]}],
        BoxBaselineShift->0], "\[RightAngleBracket]"}], 
      TagBox[
       AdjustmentBox[
        TagBox["x",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"RIndex"]]}],
    QuantumAlgebra`QuantumAlgebra`Braket,
    BaseStyle->"BraKetWrapper"], " ", 
   TagBox[
    RowBox[{
     SubscriptBox["\[InvisiblePrefixScriptBase]", 
      TagBox[
       AdjustmentBox[
        TagBox["x",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"LIndex"]], 
     SubscriptBox[
      RowBox[{"\[LeftAngleBracket]", 
       AdjustmentBox[
        RowBox[{
         TagBox["p",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
         TagBox["q",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"]}],
        BoxBaselineShift->0], "\[RightAngleBracket]"}], 
      TagBox[
       AdjustmentBox[
        TagBox["x",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"RIndex"]]}],
    QuantumAlgebra`QuantumAlgebra`Braket,
    BaseStyle->"BraKetWrapper"], " ", 
   TagBox[
    RowBox[{
     SubscriptBox["\[InvisiblePrefixScriptBase]", 
      TagBox[
       AdjustmentBox[
        TagBox["x",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"LIndex"]], 
     SubscriptBox[
      RowBox[{"\[LeftAngleBracket]", 
       AdjustmentBox[
        RowBox[{
         TagBox["q",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
         TagBox["q",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"]}],
        BoxBaselineShift->0], "\[RightAngleBracket]"}], 
      TagBox[
       AdjustmentBox[
        TagBox["x",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"RIndex"]]}],
    QuantumAlgebra`QuantumAlgebra`Braket,
    BaseStyle->"BraKetWrapper"]}], "+", 
  RowBox[{
   SuperscriptBox[
    TagBox[
     RowBox[{
      SubscriptBox["\[InvisiblePrefixScriptBase]", 
       TagBox[
        AdjustmentBox[
         TagBox["x",
          QuantumAlgebra`QuantumAlgebra`BraArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0],
        QuantumAlgebra`QuantumAlgebra`UDScript,
        BaseStyle->"LIndex"]], 
      SubscriptBox[
       RowBox[{"\[LeftAngleBracket]", 
        AdjustmentBox[
         RowBox[{
          TagBox["p",
           QuantumAlgebra`QuantumAlgebra`BraKetArgs,
           BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
          TagBox["q",
           QuantumAlgebra`QuantumAlgebra`BraKetArgs,
           BaseStyle->"BraKetArg"]}],
         BoxBaselineShift->0], "\[RightAngleBracket]"}], 
       TagBox[
        AdjustmentBox[
         TagBox["x",
          QuantumAlgebra`QuantumAlgebra`BraArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0],
        QuantumAlgebra`QuantumAlgebra`UDScript,
        BaseStyle->"RIndex"]]}],
     QuantumAlgebra`QuantumAlgebra`Braket,
     BaseStyle->"BraKetWrapper"], "2"], " ", 
   TagBox[
    RowBox[{
     SubscriptBox["\[InvisiblePrefixScriptBase]", 
      TagBox[
       AdjustmentBox[
        TagBox["x",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"LIndex"]], 
     SubscriptBox[
      RowBox[{"\[LeftAngleBracket]", 
       AdjustmentBox[
        RowBox[{
         TagBox["q",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
         TagBox["q",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"]}],
        BoxBaselineShift->0], "\[RightAngleBracket]"}], 
      TagBox[
       AdjustmentBox[
        TagBox["x",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"RIndex"]]}],
    QuantumAlgebra`QuantumAlgebra`Braket,
    BaseStyle->"BraKetWrapper"]}], "-", 
  RowBox[{
   TagBox[
    RowBox[{
     SubscriptBox["\[InvisiblePrefixScriptBase]", 
      TagBox[
       AdjustmentBox[
        TagBox["x",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"LIndex"]], 
     SubscriptBox[
      RowBox[{"\[LeftAngleBracket]", 
       AdjustmentBox[
        RowBox[{
         TagBox["p",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
         TagBox["p",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"]}],
        BoxBaselineShift->0], "\[RightAngleBracket]"}], 
      TagBox[
       AdjustmentBox[
        TagBox["x",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"RIndex"]]}],
    QuantumAlgebra`QuantumAlgebra`Braket,
    BaseStyle->"BraKetWrapper"], " ", 
   TagBox[
    RowBox[{
     SubscriptBox["\[InvisiblePrefixScriptBase]", 
      TagBox[
       AdjustmentBox[
        TagBox["x",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"LIndex"]], 
     SubscriptBox[
      RowBox[{"\[LeftAngleBracket]", 
       AdjustmentBox[
        RowBox[{
         TagBox["q",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
         TagBox["p",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"]}],
        BoxBaselineShift->0], "\[RightAngleBracket]"}], 
      TagBox[
       AdjustmentBox[
        TagBox["x",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"RIndex"]]}],
    QuantumAlgebra`QuantumAlgebra`Braket,
    BaseStyle->"BraKetWrapper"], " ", 
   TagBox[
    RowBox[{
     SubscriptBox["\[InvisiblePrefixScriptBase]", 
      TagBox[
       AdjustmentBox[
        TagBox["x",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"LIndex"]], 
     SubscriptBox[
      RowBox[{"\[LeftAngleBracket]", 
       AdjustmentBox[
        RowBox[{
         TagBox["q",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
         TagBox["q",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"]}],
        BoxBaselineShift->0], "\[RightAngleBracket]"}], 
      TagBox[
       AdjustmentBox[
        TagBox["x",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"RIndex"]]}],
    QuantumAlgebra`QuantumAlgebra`Braket,
    BaseStyle->"BraKetWrapper"]}], "+", 
  RowBox[{
   TagBox[
    RowBox[{
     SubscriptBox["\[InvisiblePrefixScriptBase]", 
      TagBox[
       AdjustmentBox[
        TagBox["x",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"LIndex"]], 
     SubscriptBox[
      RowBox[{"\[LeftAngleBracket]", 
       AdjustmentBox[
        RowBox[{
         TagBox["p",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
         TagBox["q",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"]}],
        BoxBaselineShift->0], "\[RightAngleBracket]"}], 
      TagBox[
       AdjustmentBox[
        TagBox["x",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"RIndex"]]}],
    QuantumAlgebra`QuantumAlgebra`Braket,
    BaseStyle->"BraKetWrapper"], " ", 
   TagBox[
    RowBox[{
     SubscriptBox["\[InvisiblePrefixScriptBase]", 
      TagBox[
       AdjustmentBox[
        TagBox["x",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"LIndex"]], 
     SubscriptBox[
      RowBox[{"\[LeftAngleBracket]", 
       AdjustmentBox[
        RowBox[{
         TagBox["q",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
         TagBox["p",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"]}],
        BoxBaselineShift->0], "\[RightAngleBracket]"}], 
      TagBox[
       AdjustmentBox[
        TagBox["x",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"RIndex"]]}],
    QuantumAlgebra`QuantumAlgebra`Braket,
    BaseStyle->"BraKetWrapper"], " ", 
   TagBox[
    RowBox[{
     SubscriptBox["\[InvisiblePrefixScriptBase]", 
      TagBox[
       AdjustmentBox[
        TagBox["x",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"LIndex"]], 
     SubscriptBox[
      RowBox[{"\[LeftAngleBracket]", 
       AdjustmentBox[
        RowBox[{
         TagBox["q",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
         TagBox["q",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"]}],
        BoxBaselineShift->0], "\[RightAngleBracket]"}], 
      TagBox[
       AdjustmentBox[
        TagBox["x",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"RIndex"]]}],
    QuantumAlgebra`QuantumAlgebra`Braket,
    BaseStyle->"BraKetWrapper"]}], "-", 
  RowBox[{
   SuperscriptBox[
    TagBox[
     RowBox[{
      SubscriptBox["\[InvisiblePrefixScriptBase]", 
       TagBox[
        AdjustmentBox[
         TagBox["x",
          QuantumAlgebra`QuantumAlgebra`BraArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0],
        QuantumAlgebra`QuantumAlgebra`UDScript,
        BaseStyle->"LIndex"]], 
      SubscriptBox[
       RowBox[{"\[LeftAngleBracket]", 
        AdjustmentBox[
         RowBox[{
          TagBox["q",
           QuantumAlgebra`QuantumAlgebra`BraKetArgs,
           BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
          TagBox["p",
           QuantumAlgebra`QuantumAlgebra`BraKetArgs,
           BaseStyle->"BraKetArg"]}],
         BoxBaselineShift->0], "\[RightAngleBracket]"}], 
       TagBox[
        AdjustmentBox[
         TagBox["x",
          QuantumAlgebra`QuantumAlgebra`BraArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0],
        QuantumAlgebra`QuantumAlgebra`UDScript,
        BaseStyle->"RIndex"]]}],
     QuantumAlgebra`QuantumAlgebra`Braket,
     BaseStyle->"BraKetWrapper"], "2"], " ", 
   TagBox[
    RowBox[{
     SubscriptBox["\[InvisiblePrefixScriptBase]", 
      TagBox[
       AdjustmentBox[
        TagBox["x",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"LIndex"]], 
     SubscriptBox[
      RowBox[{"\[LeftAngleBracket]", 
       AdjustmentBox[
        RowBox[{
         TagBox["q",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
         TagBox["q",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"]}],
        BoxBaselineShift->0], "\[RightAngleBracket]"}], 
      TagBox[
       AdjustmentBox[
        TagBox["x",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"RIndex"]]}],
    QuantumAlgebra`QuantumAlgebra`Braket,
    BaseStyle->"BraKetWrapper"]}], "-", 
  RowBox[{
   TagBox[
    RowBox[{
     SubscriptBox["\[InvisiblePrefixScriptBase]", 
      TagBox[
       AdjustmentBox[
        TagBox["x",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"LIndex"]], 
     SubscriptBox[
      RowBox[{"\[LeftAngleBracket]", 
       AdjustmentBox[
        RowBox[{
         TagBox["p",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
         TagBox["p",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"]}],
        BoxBaselineShift->0], "\[RightAngleBracket]"}], 
      TagBox[
       AdjustmentBox[
        TagBox["x",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"RIndex"]]}],
    QuantumAlgebra`QuantumAlgebra`Braket,
    BaseStyle->"BraKetWrapper"], " ", 
   SuperscriptBox[
    TagBox[
     RowBox[{
      SubscriptBox["\[InvisiblePrefixScriptBase]", 
       TagBox[
        AdjustmentBox[
         TagBox["x",
          QuantumAlgebra`QuantumAlgebra`BraArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0],
        QuantumAlgebra`QuantumAlgebra`UDScript,
        BaseStyle->"LIndex"]], 
      SubscriptBox[
       RowBox[{"\[LeftAngleBracket]", 
        AdjustmentBox[
         RowBox[{
          TagBox["q",
           QuantumAlgebra`QuantumAlgebra`BraKetArgs,
           BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
          TagBox["q",
           QuantumAlgebra`QuantumAlgebra`BraKetArgs,
           BaseStyle->"BraKetArg"]}],
         BoxBaselineShift->0], "\[RightAngleBracket]"}], 
       TagBox[
        AdjustmentBox[
         TagBox["x",
          QuantumAlgebra`QuantumAlgebra`BraArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0],
        QuantumAlgebra`QuantumAlgebra`UDScript,
        BaseStyle->"RIndex"]]}],
     QuantumAlgebra`QuantumAlgebra`Braket,
     BaseStyle->"BraKetWrapper"], "2"]}]}]], "Output",
 CellChangeTimes->{{3.4738657161767673`*^9, 3.4738657220011005`*^9}, 
   3.4740593007666287`*^9, 3.4740600996303215`*^9, 3.594379319786455*^9}]
}, Open  ]],

Cell["\<\
If we use the simplified expression \[ScriptCapitalE]2 to complete the same \
calculation, the local rules that we need to define are more involved, \
because we have to do it for brakets which contain the \[Psi] state and not \
only for the \[Psi] state.\
\>", "Text",
 CellChangeTimes->{{3.47406054631287*^9, 3.4740606668177624`*^9}, {
  3.474060867264227*^9, 3.4740609472168*^9}, {3.4740609795196476`*^9, 
  3.4740610268223534`*^9}, {3.5943793471400194`*^9, 3.594379347737054*^9}}],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"\[Psi]BraketRules", "=", 
  RowBox[{
   RowBox[{"{", 
    RowBox[{
     RowBox[{
      TagBox[
       RowBox[{
        SubscriptBox["\[InvisiblePrefixScriptBase]", 
         TagBox[
          AdjustmentBox[
           TagBox["x",
            QuantumAlgebra`QuantumAlgebra`BraArgs,
            BaseStyle->"BraKetArg"],
           BoxBaselineShift->0],
          QuantumAlgebra`QuantumAlgebra`UDScript,
          BaseStyle->"LIndex"]], 
        RowBox[{"\[LeftAngleBracket]", 
         AdjustmentBox[
          RowBox[{
           TagBox["m_",
            QuantumAlgebra`QuantumAlgebra`BraKetArgs,
            BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
           TagBox["\[Psi]",
            QuantumAlgebra`QuantumAlgebra`BraKetArgs,
            BaseStyle->"BraKetArg"]}],
          BoxBaselineShift->0], "\[RightAngleBracket]"}]}],
       QuantumAlgebra`QuantumAlgebra`Braket,
       BaseStyle->"BraKetWrapper"], "\[RuleDelayed]", 
      RowBox[{
       TagBox[
        RowBox[{
         SubscriptBox["\[InvisiblePrefixScriptBase]", 
          TagBox[
           AdjustmentBox[
            TagBox["x",
             QuantumAlgebra`QuantumAlgebra`BraArgs,
             BaseStyle->"BraKetArg"],
            BoxBaselineShift->0],
           QuantumAlgebra`QuantumAlgebra`UDScript,
           BaseStyle->"LIndex"]], 
         RowBox[{"\[LeftAngleBracket]", 
          AdjustmentBox[
           TagBox["m",
            QuantumAlgebra`QuantumAlgebra`BraArgs,
            BaseStyle->"BraKetArg"],
           BoxBaselineShift->0], 
          AdjustmentBox["\[VerticalSeparator]",
           BoxBaselineShift->-0.1,
           BoxMargins->{{0, -0.2}, {0, 0}}]}]}],
        QuantumAlgebra`QuantumAlgebra`Bra,
        BaseStyle->"BraWrapper"], "\[CenterDot]", 
       TagBox[
        RowBox[{
         AdjustmentBox["\[VerticalSeparator]",
          BoxBaselineShift->-0.1,
          BoxMargins->{{-0.2, 0}, {0, 0}}], 
         AdjustmentBox[
          TagBox["\[Psi]",
           QuantumAlgebra`QuantumAlgebra`KetArgs,
           BaseStyle->"BraKetArg"],
          BoxBaselineShift->0], "\[RightAngleBracket]"}],
        QuantumAlgebra`QuantumAlgebra`Ket,
        BaseStyle->"KetWrapper"]}]}], ",", 
     RowBox[{
      TagBox[
       SubscriptBox[
        RowBox[{"\[LeftAngleBracket]", 
         AdjustmentBox[
          RowBox[{
           TagBox["\[Psi]",
            QuantumAlgebra`QuantumAlgebra`BraKetArgs,
            BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
           TagBox["m_",
            QuantumAlgebra`QuantumAlgebra`BraKetArgs,
            BaseStyle->"BraKetArg"]}],
          BoxBaselineShift->0], "\[RightAngleBracket]"}], 
        TagBox[
         AdjustmentBox[
          TagBox["x",
           QuantumAlgebra`QuantumAlgebra`KetArgs,
           BaseStyle->"BraKetArg"],
          BoxBaselineShift->0],
         QuantumAlgebra`QuantumAlgebra`UDScript,
         BaseStyle->"RIndex"]],
       QuantumAlgebra`QuantumAlgebra`Braket,
       BaseStyle->"BraKetWrapper"], "\[RuleDelayed]", 
      RowBox[{
       TagBox[
        RowBox[{"\[LeftAngleBracket]", 
         AdjustmentBox[
          TagBox["\[Psi]",
           QuantumAlgebra`QuantumAlgebra`BraArgs,
           BaseStyle->"BraKetArg"],
          BoxBaselineShift->0], 
         AdjustmentBox["\[VerticalSeparator]",
          BoxBaselineShift->-0.1,
          BoxMargins->{{0, -0.2}, {0, 0}}]}],
        QuantumAlgebra`QuantumAlgebra`Bra,
        BaseStyle->"BraWrapper"], "\[CenterDot]", 
       TagBox[
        SubscriptBox[
         RowBox[{
          AdjustmentBox["\[VerticalSeparator]",
           BoxBaselineShift->-0.1,
           BoxMargins->{{-0.2, 0}, {0, 0}}], 
          AdjustmentBox[
           TagBox["m",
            QuantumAlgebra`QuantumAlgebra`KetArgs,
            BaseStyle->"BraKetArg"],
           BoxBaselineShift->0], "\[RightAngleBracket]"}], 
         TagBox[
          AdjustmentBox[
           TagBox["x",
            QuantumAlgebra`QuantumAlgebra`KetArgs,
            BaseStyle->"BraKetArg"],
           BoxBaselineShift->0],
          QuantumAlgebra`QuantumAlgebra`UDScript,
          BaseStyle->"RIndex"]],
        QuantumAlgebra`QuantumAlgebra`Ket,
        BaseStyle->"KetWrapper"]}]}]}], "}"}], "/.", 
   "\[Psi]Rule"}]}]], "Input",
 CellChangeTimes->{{3.4740610522858095`*^9, 3.4740610853066983`*^9}, {
  3.594379378493813*^9, 3.5943794087795453`*^9}}],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{
   RowBox[{
    TagBox[
     RowBox[{
      SubscriptBox["\[InvisiblePrefixScriptBase]", 
       TagBox[
        AdjustmentBox[
         TagBox["x",
          QuantumAlgebra`QuantumAlgebra`BraArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0],
        QuantumAlgebra`QuantumAlgebra`UDScript,
        BaseStyle->"LIndex"]], 
      RowBox[{"\[LeftAngleBracket]", 
       AdjustmentBox[
        RowBox[{
         TagBox["m_",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
         TagBox["\[Psi]",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"]}],
        BoxBaselineShift->0], "\[RightAngleBracket]"}]}],
     QuantumAlgebra`QuantumAlgebra`Braket,
     BaseStyle->"BraKetWrapper"], "\[RuleDelayed]", 
    RowBox[{
     TagBox[
      RowBox[{
       SubscriptBox["\[InvisiblePrefixScriptBase]", 
        TagBox[
         AdjustmentBox[
          TagBox["x",
           QuantumAlgebra`QuantumAlgebra`BraArgs,
           BaseStyle->"BraKetArg"],
          BoxBaselineShift->0],
         QuantumAlgebra`QuantumAlgebra`UDScript,
         BaseStyle->"LIndex"]], 
       RowBox[{"\[LeftAngleBracket]", 
        AdjustmentBox[
         TagBox["m",
          QuantumAlgebra`QuantumAlgebra`BraArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0], 
        AdjustmentBox["\[VerticalSeparator]",
         BoxBaselineShift->-0.1,
         BoxMargins->{{0, -0.2}, {0, 0}}]}]}],
      QuantumAlgebra`QuantumAlgebra`Bra,
      BaseStyle->"BraWrapper"], "\[CenterDot]", 
     RowBox[{"(", 
      RowBox[{
       TagBox[
        SubscriptBox[
         RowBox[{
          AdjustmentBox["\[VerticalSeparator]",
           BoxBaselineShift->-0.1,
           BoxMargins->{{-0.2, 0}, {0, 0}}], 
          AdjustmentBox[
           TagBox["p",
            QuantumAlgebra`QuantumAlgebra`KetArgs,
            BaseStyle->"BraKetArg"],
           BoxBaselineShift->0], "\[RightAngleBracket]"}], 
         TagBox[
          AdjustmentBox[
           TagBox["x",
            QuantumAlgebra`QuantumAlgebra`KetArgs,
            BaseStyle->"BraKetArg"],
           BoxBaselineShift->0],
          QuantumAlgebra`QuantumAlgebra`UDScript,
          BaseStyle->"RIndex"]],
        QuantumAlgebra`QuantumAlgebra`Ket,
        BaseStyle->"KetWrapper"], "+", 
       TagBox[
        SubscriptBox[
         RowBox[{
          AdjustmentBox["\[VerticalSeparator]",
           BoxBaselineShift->-0.1,
           BoxMargins->{{-0.2, 0}, {0, 0}}], 
          AdjustmentBox[
           TagBox["q",
            QuantumAlgebra`QuantumAlgebra`KetArgs,
            BaseStyle->"BraKetArg"],
           BoxBaselineShift->0], "\[RightAngleBracket]"}], 
         TagBox[
          AdjustmentBox[
           TagBox["x",
            QuantumAlgebra`QuantumAlgebra`KetArgs,
            BaseStyle->"BraKetArg"],
           BoxBaselineShift->0],
          QuantumAlgebra`QuantumAlgebra`UDScript,
          BaseStyle->"RIndex"]],
        QuantumAlgebra`QuantumAlgebra`Ket,
        BaseStyle->"KetWrapper"]}], ")"}]}]}], ",", 
   RowBox[{
    TagBox[
     SubscriptBox[
      RowBox[{"\[LeftAngleBracket]", 
       AdjustmentBox[
        RowBox[{
         TagBox["\[Psi]",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
         TagBox["m_",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"]}],
        BoxBaselineShift->0], "\[RightAngleBracket]"}], 
      TagBox[
       AdjustmentBox[
        TagBox["x",
         QuantumAlgebra`QuantumAlgebra`KetArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"RIndex"]],
     QuantumAlgebra`QuantumAlgebra`Braket,
     BaseStyle->"BraKetWrapper"], "\[RuleDelayed]", 
    RowBox[{
     RowBox[{"(", 
      RowBox[{
       TagBox[
        RowBox[{
         SubscriptBox["\[InvisiblePrefixScriptBase]", 
          TagBox[
           AdjustmentBox[
            TagBox["x",
             QuantumAlgebra`QuantumAlgebra`BraArgs,
             BaseStyle->"BraKetArg"],
            BoxBaselineShift->0],
           QuantumAlgebra`QuantumAlgebra`UDScript,
           BaseStyle->"LIndex"]], 
         RowBox[{"\[LeftAngleBracket]", 
          AdjustmentBox[
           TagBox["p",
            QuantumAlgebra`QuantumAlgebra`BraArgs,
            BaseStyle->"BraKetArg"],
           BoxBaselineShift->0], 
          AdjustmentBox["\[VerticalSeparator]",
           BoxBaselineShift->-0.1,
           BoxMargins->{{0, -0.2}, {0, 0}}]}]}],
        QuantumAlgebra`QuantumAlgebra`Bra,
        BaseStyle->"BraWrapper"], "+", 
       TagBox[
        RowBox[{
         SubscriptBox["\[InvisiblePrefixScriptBase]", 
          TagBox[
           AdjustmentBox[
            TagBox["x",
             QuantumAlgebra`QuantumAlgebra`BraArgs,
             BaseStyle->"BraKetArg"],
            BoxBaselineShift->0],
           QuantumAlgebra`QuantumAlgebra`UDScript,
           BaseStyle->"LIndex"]], 
         RowBox[{"\[LeftAngleBracket]", 
          AdjustmentBox[
           TagBox["q",
            QuantumAlgebra`QuantumAlgebra`BraArgs,
            BaseStyle->"BraKetArg"],
           BoxBaselineShift->0], 
          AdjustmentBox["\[VerticalSeparator]",
           BoxBaselineShift->-0.1,
           BoxMargins->{{0, -0.2}, {0, 0}}]}]}],
        QuantumAlgebra`QuantumAlgebra`Bra,
        BaseStyle->"BraWrapper"]}], ")"}], "\[CenterDot]", 
     TagBox[
      SubscriptBox[
       RowBox[{
        AdjustmentBox["\[VerticalSeparator]",
         BoxBaselineShift->-0.1,
         BoxMargins->{{-0.2, 0}, {0, 0}}], 
        AdjustmentBox[
         TagBox["m",
          QuantumAlgebra`QuantumAlgebra`KetArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0], "\[RightAngleBracket]"}], 
       TagBox[
        AdjustmentBox[
         TagBox["x",
          QuantumAlgebra`QuantumAlgebra`KetArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0],
        QuantumAlgebra`QuantumAlgebra`UDScript,
        BaseStyle->"RIndex"]],
      QuantumAlgebra`QuantumAlgebra`Ket,
      BaseStyle->"KetWrapper"]}]}]}], "}"}]], "Output",
 CellChangeTimes->{{3.4740610704118466`*^9, 3.4740610882498665`*^9}, {
  3.5943793823500338`*^9, 3.594379409820605*^9}}]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{
  RowBox[{"\[ScriptCapitalE]2", "/.", "\[Psi]BraketRules"}], "//", 
  "Expand"}]], "Input",
 CellChangeTimes->{{3.474060251928032*^9, 3.4740602691750183`*^9}, {
  3.474060316864746*^9, 3.4740605163681574`*^9}, {3.4740610660395966`*^9, 
  3.4740610915820575`*^9}}],

Cell[BoxData[
 RowBox[{
  RowBox[{
   TagBox[
    RowBox[{
     SubscriptBox["\[InvisiblePrefixScriptBase]", 
      TagBox[
       AdjustmentBox[
        TagBox["x",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"LIndex"]], 
     SubscriptBox[
      RowBox[{"\[LeftAngleBracket]", 
       AdjustmentBox[
        RowBox[{
         TagBox["p",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
         TagBox["p",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"]}],
        BoxBaselineShift->0], "\[RightAngleBracket]"}], 
      TagBox[
       AdjustmentBox[
        TagBox["x",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"RIndex"]]}],
    QuantumAlgebra`QuantumAlgebra`Braket,
    BaseStyle->"BraKetWrapper"], " ", 
   SuperscriptBox[
    TagBox[
     RowBox[{
      SubscriptBox["\[InvisiblePrefixScriptBase]", 
       TagBox[
        AdjustmentBox[
         TagBox["x",
          QuantumAlgebra`QuantumAlgebra`BraArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0],
        QuantumAlgebra`QuantumAlgebra`UDScript,
        BaseStyle->"LIndex"]], 
      SubscriptBox[
       RowBox[{"\[LeftAngleBracket]", 
        AdjustmentBox[
         RowBox[{
          TagBox["p",
           QuantumAlgebra`QuantumAlgebra`BraKetArgs,
           BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
          TagBox["q",
           QuantumAlgebra`QuantumAlgebra`BraKetArgs,
           BaseStyle->"BraKetArg"]}],
         BoxBaselineShift->0], "\[RightAngleBracket]"}], 
       TagBox[
        AdjustmentBox[
         TagBox["x",
          QuantumAlgebra`QuantumAlgebra`BraArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0],
        QuantumAlgebra`QuantumAlgebra`UDScript,
        BaseStyle->"RIndex"]]}],
     QuantumAlgebra`QuantumAlgebra`Braket,
     BaseStyle->"BraKetWrapper"], "2"]}], "+", 
  SuperscriptBox[
   TagBox[
    RowBox[{
     SubscriptBox["\[InvisiblePrefixScriptBase]", 
      TagBox[
       AdjustmentBox[
        TagBox["x",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"LIndex"]], 
     SubscriptBox[
      RowBox[{"\[LeftAngleBracket]", 
       AdjustmentBox[
        RowBox[{
         TagBox["p",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
         TagBox["q",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"]}],
        BoxBaselineShift->0], "\[RightAngleBracket]"}], 
      TagBox[
       AdjustmentBox[
        TagBox["x",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"RIndex"]]}],
    QuantumAlgebra`QuantumAlgebra`Braket,
    BaseStyle->"BraKetWrapper"], "3"], "-", 
  RowBox[{
   TagBox[
    RowBox[{
     SubscriptBox["\[InvisiblePrefixScriptBase]", 
      TagBox[
       AdjustmentBox[
        TagBox["x",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"LIndex"]], 
     SubscriptBox[
      RowBox[{"\[LeftAngleBracket]", 
       AdjustmentBox[
        RowBox[{
         TagBox["p",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
         TagBox["p",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"]}],
        BoxBaselineShift->0], "\[RightAngleBracket]"}], 
      TagBox[
       AdjustmentBox[
        TagBox["x",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"RIndex"]]}],
    QuantumAlgebra`QuantumAlgebra`Braket,
    BaseStyle->"BraKetWrapper"], " ", 
   TagBox[
    RowBox[{
     SubscriptBox["\[InvisiblePrefixScriptBase]", 
      TagBox[
       AdjustmentBox[
        TagBox["x",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"LIndex"]], 
     SubscriptBox[
      RowBox[{"\[LeftAngleBracket]", 
       AdjustmentBox[
        RowBox[{
         TagBox["p",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
         TagBox["q",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"]}],
        BoxBaselineShift->0], "\[RightAngleBracket]"}], 
      TagBox[
       AdjustmentBox[
        TagBox["x",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"RIndex"]]}],
    QuantumAlgebra`QuantumAlgebra`Braket,
    BaseStyle->"BraKetWrapper"], " ", 
   TagBox[
    RowBox[{
     SubscriptBox["\[InvisiblePrefixScriptBase]", 
      TagBox[
       AdjustmentBox[
        TagBox["x",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"LIndex"]], 
     SubscriptBox[
      RowBox[{"\[LeftAngleBracket]", 
       AdjustmentBox[
        RowBox[{
         TagBox["q",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
         TagBox["p",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"]}],
        BoxBaselineShift->0], "\[RightAngleBracket]"}], 
      TagBox[
       AdjustmentBox[
        TagBox["x",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"RIndex"]]}],
    QuantumAlgebra`QuantumAlgebra`Braket,
    BaseStyle->"BraKetWrapper"]}], "-", 
  RowBox[{
   TagBox[
    RowBox[{
     SubscriptBox["\[InvisiblePrefixScriptBase]", 
      TagBox[
       AdjustmentBox[
        TagBox["x",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"LIndex"]], 
     SubscriptBox[
      RowBox[{"\[LeftAngleBracket]", 
       AdjustmentBox[
        RowBox[{
         TagBox["p",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
         TagBox["p",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"]}],
        BoxBaselineShift->0], "\[RightAngleBracket]"}], 
      TagBox[
       AdjustmentBox[
        TagBox["x",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"RIndex"]]}],
    QuantumAlgebra`QuantumAlgebra`Braket,
    BaseStyle->"BraKetWrapper"], " ", 
   SuperscriptBox[
    TagBox[
     RowBox[{
      SubscriptBox["\[InvisiblePrefixScriptBase]", 
       TagBox[
        AdjustmentBox[
         TagBox["x",
          QuantumAlgebra`QuantumAlgebra`BraArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0],
        QuantumAlgebra`QuantumAlgebra`UDScript,
        BaseStyle->"LIndex"]], 
      SubscriptBox[
       RowBox[{"\[LeftAngleBracket]", 
        AdjustmentBox[
         RowBox[{
          TagBox["q",
           QuantumAlgebra`QuantumAlgebra`BraKetArgs,
           BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
          TagBox["p",
           QuantumAlgebra`QuantumAlgebra`BraKetArgs,
           BaseStyle->"BraKetArg"]}],
         BoxBaselineShift->0], "\[RightAngleBracket]"}], 
       TagBox[
        AdjustmentBox[
         TagBox["x",
          QuantumAlgebra`QuantumAlgebra`BraArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0],
        QuantumAlgebra`QuantumAlgebra`UDScript,
        BaseStyle->"RIndex"]]}],
     QuantumAlgebra`QuantumAlgebra`Braket,
     BaseStyle->"BraKetWrapper"], "2"]}], "-", 
  SuperscriptBox[
   TagBox[
    RowBox[{
     SubscriptBox["\[InvisiblePrefixScriptBase]", 
      TagBox[
       AdjustmentBox[
        TagBox["x",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"LIndex"]], 
     SubscriptBox[
      RowBox[{"\[LeftAngleBracket]", 
       AdjustmentBox[
        RowBox[{
         TagBox["q",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
         TagBox["p",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"]}],
        BoxBaselineShift->0], "\[RightAngleBracket]"}], 
      TagBox[
       AdjustmentBox[
        TagBox["x",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"RIndex"]]}],
    QuantumAlgebra`QuantumAlgebra`Braket,
    BaseStyle->"BraKetWrapper"], "3"], "+", 
  RowBox[{
   SuperscriptBox[
    TagBox[
     RowBox[{
      SubscriptBox["\[InvisiblePrefixScriptBase]", 
       TagBox[
        AdjustmentBox[
         TagBox["x",
          QuantumAlgebra`QuantumAlgebra`BraArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0],
        QuantumAlgebra`QuantumAlgebra`UDScript,
        BaseStyle->"LIndex"]], 
      SubscriptBox[
       RowBox[{"\[LeftAngleBracket]", 
        AdjustmentBox[
         RowBox[{
          TagBox["p",
           QuantumAlgebra`QuantumAlgebra`BraKetArgs,
           BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
          TagBox["p",
           QuantumAlgebra`QuantumAlgebra`BraKetArgs,
           BaseStyle->"BraKetArg"]}],
         BoxBaselineShift->0], "\[RightAngleBracket]"}], 
       TagBox[
        AdjustmentBox[
         TagBox["x",
          QuantumAlgebra`QuantumAlgebra`BraArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0],
        QuantumAlgebra`QuantumAlgebra`UDScript,
        BaseStyle->"RIndex"]]}],
     QuantumAlgebra`QuantumAlgebra`Braket,
     BaseStyle->"BraKetWrapper"], "2"], " ", 
   TagBox[
    RowBox[{
     SubscriptBox["\[InvisiblePrefixScriptBase]", 
      TagBox[
       AdjustmentBox[
        TagBox["x",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"LIndex"]], 
     SubscriptBox[
      RowBox[{"\[LeftAngleBracket]", 
       AdjustmentBox[
        RowBox[{
         TagBox["q",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
         TagBox["q",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"]}],
        BoxBaselineShift->0], "\[RightAngleBracket]"}], 
      TagBox[
       AdjustmentBox[
        TagBox["x",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"RIndex"]]}],
    QuantumAlgebra`QuantumAlgebra`Braket,
    BaseStyle->"BraKetWrapper"]}], "+", 
  RowBox[{
   TagBox[
    RowBox[{
     SubscriptBox["\[InvisiblePrefixScriptBase]", 
      TagBox[
       AdjustmentBox[
        TagBox["x",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"LIndex"]], 
     SubscriptBox[
      RowBox[{"\[LeftAngleBracket]", 
       AdjustmentBox[
        RowBox[{
         TagBox["p",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
         TagBox["p",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"]}],
        BoxBaselineShift->0], "\[RightAngleBracket]"}], 
      TagBox[
       AdjustmentBox[
        TagBox["x",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"RIndex"]]}],
    QuantumAlgebra`QuantumAlgebra`Braket,
    BaseStyle->"BraKetWrapper"], " ", 
   TagBox[
    RowBox[{
     SubscriptBox["\[InvisiblePrefixScriptBase]", 
      TagBox[
       AdjustmentBox[
        TagBox["x",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"LIndex"]], 
     SubscriptBox[
      RowBox[{"\[LeftAngleBracket]", 
       AdjustmentBox[
        RowBox[{
         TagBox["p",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
         TagBox["q",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"]}],
        BoxBaselineShift->0], "\[RightAngleBracket]"}], 
      TagBox[
       AdjustmentBox[
        TagBox["x",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"RIndex"]]}],
    QuantumAlgebra`QuantumAlgebra`Braket,
    BaseStyle->"BraKetWrapper"], " ", 
   TagBox[
    RowBox[{
     SubscriptBox["\[InvisiblePrefixScriptBase]", 
      TagBox[
       AdjustmentBox[
        TagBox["x",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"LIndex"]], 
     SubscriptBox[
      RowBox[{"\[LeftAngleBracket]", 
       AdjustmentBox[
        RowBox[{
         TagBox["q",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
         TagBox["q",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"]}],
        BoxBaselineShift->0], "\[RightAngleBracket]"}], 
      TagBox[
       AdjustmentBox[
        TagBox["x",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"RIndex"]]}],
    QuantumAlgebra`QuantumAlgebra`Braket,
    BaseStyle->"BraKetWrapper"]}], "+", 
  RowBox[{
   SuperscriptBox[
    TagBox[
     RowBox[{
      SubscriptBox["\[InvisiblePrefixScriptBase]", 
       TagBox[
        AdjustmentBox[
         TagBox["x",
          QuantumAlgebra`QuantumAlgebra`BraArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0],
        QuantumAlgebra`QuantumAlgebra`UDScript,
        BaseStyle->"LIndex"]], 
      SubscriptBox[
       RowBox[{"\[LeftAngleBracket]", 
        AdjustmentBox[
         RowBox[{
          TagBox["p",
           QuantumAlgebra`QuantumAlgebra`BraKetArgs,
           BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
          TagBox["q",
           QuantumAlgebra`QuantumAlgebra`BraKetArgs,
           BaseStyle->"BraKetArg"]}],
         BoxBaselineShift->0], "\[RightAngleBracket]"}], 
       TagBox[
        AdjustmentBox[
         TagBox["x",
          QuantumAlgebra`QuantumAlgebra`BraArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0],
        QuantumAlgebra`QuantumAlgebra`UDScript,
        BaseStyle->"RIndex"]]}],
     QuantumAlgebra`QuantumAlgebra`Braket,
     BaseStyle->"BraKetWrapper"], "2"], " ", 
   TagBox[
    RowBox[{
     SubscriptBox["\[InvisiblePrefixScriptBase]", 
      TagBox[
       AdjustmentBox[
        TagBox["x",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"LIndex"]], 
     SubscriptBox[
      RowBox[{"\[LeftAngleBracket]", 
       AdjustmentBox[
        RowBox[{
         TagBox["q",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
         TagBox["q",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"]}],
        BoxBaselineShift->0], "\[RightAngleBracket]"}], 
      TagBox[
       AdjustmentBox[
        TagBox["x",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"RIndex"]]}],
    QuantumAlgebra`QuantumAlgebra`Braket,
    BaseStyle->"BraKetWrapper"]}], "-", 
  RowBox[{
   TagBox[
    RowBox[{
     SubscriptBox["\[InvisiblePrefixScriptBase]", 
      TagBox[
       AdjustmentBox[
        TagBox["x",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"LIndex"]], 
     SubscriptBox[
      RowBox[{"\[LeftAngleBracket]", 
       AdjustmentBox[
        RowBox[{
         TagBox["p",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
         TagBox["p",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"]}],
        BoxBaselineShift->0], "\[RightAngleBracket]"}], 
      TagBox[
       AdjustmentBox[
        TagBox["x",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"RIndex"]]}],
    QuantumAlgebra`QuantumAlgebra`Braket,
    BaseStyle->"BraKetWrapper"], " ", 
   TagBox[
    RowBox[{
     SubscriptBox["\[InvisiblePrefixScriptBase]", 
      TagBox[
       AdjustmentBox[
        TagBox["x",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"LIndex"]], 
     SubscriptBox[
      RowBox[{"\[LeftAngleBracket]", 
       AdjustmentBox[
        RowBox[{
         TagBox["q",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
         TagBox["p",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"]}],
        BoxBaselineShift->0], "\[RightAngleBracket]"}], 
      TagBox[
       AdjustmentBox[
        TagBox["x",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"RIndex"]]}],
    QuantumAlgebra`QuantumAlgebra`Braket,
    BaseStyle->"BraKetWrapper"], " ", 
   TagBox[
    RowBox[{
     SubscriptBox["\[InvisiblePrefixScriptBase]", 
      TagBox[
       AdjustmentBox[
        TagBox["x",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"LIndex"]], 
     SubscriptBox[
      RowBox[{"\[LeftAngleBracket]", 
       AdjustmentBox[
        RowBox[{
         TagBox["q",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
         TagBox["q",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"]}],
        BoxBaselineShift->0], "\[RightAngleBracket]"}], 
      TagBox[
       AdjustmentBox[
        TagBox["x",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"RIndex"]]}],
    QuantumAlgebra`QuantumAlgebra`Braket,
    BaseStyle->"BraKetWrapper"]}], "+", 
  RowBox[{
   TagBox[
    RowBox[{
     SubscriptBox["\[InvisiblePrefixScriptBase]", 
      TagBox[
       AdjustmentBox[
        TagBox["x",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"LIndex"]], 
     SubscriptBox[
      RowBox[{"\[LeftAngleBracket]", 
       AdjustmentBox[
        RowBox[{
         TagBox["p",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
         TagBox["q",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"]}],
        BoxBaselineShift->0], "\[RightAngleBracket]"}], 
      TagBox[
       AdjustmentBox[
        TagBox["x",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"RIndex"]]}],
    QuantumAlgebra`QuantumAlgebra`Braket,
    BaseStyle->"BraKetWrapper"], " ", 
   TagBox[
    RowBox[{
     SubscriptBox["\[InvisiblePrefixScriptBase]", 
      TagBox[
       AdjustmentBox[
        TagBox["x",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"LIndex"]], 
     SubscriptBox[
      RowBox[{"\[LeftAngleBracket]", 
       AdjustmentBox[
        RowBox[{
         TagBox["q",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
         TagBox["p",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"]}],
        BoxBaselineShift->0], "\[RightAngleBracket]"}], 
      TagBox[
       AdjustmentBox[
        TagBox["x",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"RIndex"]]}],
    QuantumAlgebra`QuantumAlgebra`Braket,
    BaseStyle->"BraKetWrapper"], " ", 
   TagBox[
    RowBox[{
     SubscriptBox["\[InvisiblePrefixScriptBase]", 
      TagBox[
       AdjustmentBox[
        TagBox["x",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"LIndex"]], 
     SubscriptBox[
      RowBox[{"\[LeftAngleBracket]", 
       AdjustmentBox[
        RowBox[{
         TagBox["q",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
         TagBox["q",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"]}],
        BoxBaselineShift->0], "\[RightAngleBracket]"}], 
      TagBox[
       AdjustmentBox[
        TagBox["x",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"RIndex"]]}],
    QuantumAlgebra`QuantumAlgebra`Braket,
    BaseStyle->"BraKetWrapper"]}], "-", 
  RowBox[{
   SuperscriptBox[
    TagBox[
     RowBox[{
      SubscriptBox["\[InvisiblePrefixScriptBase]", 
       TagBox[
        AdjustmentBox[
         TagBox["x",
          QuantumAlgebra`QuantumAlgebra`BraArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0],
        QuantumAlgebra`QuantumAlgebra`UDScript,
        BaseStyle->"LIndex"]], 
      SubscriptBox[
       RowBox[{"\[LeftAngleBracket]", 
        AdjustmentBox[
         RowBox[{
          TagBox["q",
           QuantumAlgebra`QuantumAlgebra`BraKetArgs,
           BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
          TagBox["p",
           QuantumAlgebra`QuantumAlgebra`BraKetArgs,
           BaseStyle->"BraKetArg"]}],
         BoxBaselineShift->0], "\[RightAngleBracket]"}], 
       TagBox[
        AdjustmentBox[
         TagBox["x",
          QuantumAlgebra`QuantumAlgebra`BraArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0],
        QuantumAlgebra`QuantumAlgebra`UDScript,
        BaseStyle->"RIndex"]]}],
     QuantumAlgebra`QuantumAlgebra`Braket,
     BaseStyle->"BraKetWrapper"], "2"], " ", 
   TagBox[
    RowBox[{
     SubscriptBox["\[InvisiblePrefixScriptBase]", 
      TagBox[
       AdjustmentBox[
        TagBox["x",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"LIndex"]], 
     SubscriptBox[
      RowBox[{"\[LeftAngleBracket]", 
       AdjustmentBox[
        RowBox[{
         TagBox["q",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
         TagBox["q",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"]}],
        BoxBaselineShift->0], "\[RightAngleBracket]"}], 
      TagBox[
       AdjustmentBox[
        TagBox["x",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"RIndex"]]}],
    QuantumAlgebra`QuantumAlgebra`Braket,
    BaseStyle->"BraKetWrapper"]}], "-", 
  RowBox[{
   TagBox[
    RowBox[{
     SubscriptBox["\[InvisiblePrefixScriptBase]", 
      TagBox[
       AdjustmentBox[
        TagBox["x",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"LIndex"]], 
     SubscriptBox[
      RowBox[{"\[LeftAngleBracket]", 
       AdjustmentBox[
        RowBox[{
         TagBox["p",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
         TagBox["p",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"]}],
        BoxBaselineShift->0], "\[RightAngleBracket]"}], 
      TagBox[
       AdjustmentBox[
        TagBox["x",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"RIndex"]]}],
    QuantumAlgebra`QuantumAlgebra`Braket,
    BaseStyle->"BraKetWrapper"], " ", 
   SuperscriptBox[
    TagBox[
     RowBox[{
      SubscriptBox["\[InvisiblePrefixScriptBase]", 
       TagBox[
        AdjustmentBox[
         TagBox["x",
          QuantumAlgebra`QuantumAlgebra`BraArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0],
        QuantumAlgebra`QuantumAlgebra`UDScript,
        BaseStyle->"LIndex"]], 
      SubscriptBox[
       RowBox[{"\[LeftAngleBracket]", 
        AdjustmentBox[
         RowBox[{
          TagBox["q",
           QuantumAlgebra`QuantumAlgebra`BraKetArgs,
           BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
          TagBox["q",
           QuantumAlgebra`QuantumAlgebra`BraKetArgs,
           BaseStyle->"BraKetArg"]}],
         BoxBaselineShift->0], "\[RightAngleBracket]"}], 
       TagBox[
        AdjustmentBox[
         TagBox["x",
          QuantumAlgebra`QuantumAlgebra`BraArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0],
        QuantumAlgebra`QuantumAlgebra`UDScript,
        BaseStyle->"RIndex"]]}],
     QuantumAlgebra`QuantumAlgebra`Braket,
     BaseStyle->"BraKetWrapper"], "2"]}]}]], "Output",
 CellChangeTimes->{{3.474060381294431*^9, 3.4740603955052443`*^9}, {
   3.4740604581878295`*^9, 3.474060517568226*^9}, 3.4740610918570733`*^9, 
   3.5943794196781683`*^9}]
}, Open  ]]
}, Open  ]],

Cell[CellGroupData[{

Cell["Braketing in Composite State Spaces", "Subsection",
 CellTags->"qa:BR.3"],

Cell[TextData[{
 "For composite systems ",
 StyleBox["QuantumAlgebra",
  FontSlant->"Italic"],
 " uses two kind of products: the tensor product to express a composite \
system from single state spaces and the non commutative product to do inner \
products, outer products, products of operators, etc."
}], "Text",
 CellChangeTimes->{{3.4442130438475485`*^9, 3.4442131164745483`*^9}, 
   3.4442136937025485`*^9, {3.444215274726548*^9, 3.444215460299548*^9}, {
   3.444215751344548*^9, 3.4442157607605486`*^9}, {3.4452437078929453`*^9, 
   3.4452438248009453`*^9}, {3.4741100776801915`*^9, 3.474110301346985*^9}, {
   3.474110355877104*^9, 3.4741103920541725`*^9}, {3.4741105393886003`*^9, 
   3.4741105531273856`*^9}, {3.4742233426623898`*^9, 3.474223353722022*^9}, 
   3.5943794619365854`*^9, 3.5943795069561605`*^9}],

Cell[TextData[{
 "The tensor infix notation ",
 Cell[BoxData[
  FormBox[
   RowBox[{"(", "\[CircleTimes]", ")"}], TraditionalForm]]],
 " has higher precedence",
 StyleBox[" ",
  FontSlant->"Italic"],
 "than the non commuative infix notation (",
 Cell[BoxData[
  FormBox["\[CenterDot]", TraditionalForm]]],
 "). In this case, no parenthesis are necessary to make non commutative \
products with composite kets, bras or operators. However, if the infix \
notation (",
 Cell[BoxData[
  FormBox["**", TraditionalForm]]],
 ") is used for non commutative products, the tensor product has lower \
precedence and parenthesis are necesary. "
}], "Text",
 CellChangeTimes->{{3.4442130438475485`*^9, 3.4442131164745483`*^9}, 
   3.4442136937025485`*^9, {3.444215274726548*^9, 3.444215460299548*^9}, {
   3.444215751344548*^9, 3.4442157607605486`*^9}, {3.4452437078929453`*^9, 
   3.4452438532469454`*^9}, {3.4741103108525286`*^9, 3.474110318608972*^9}, {
   3.474110409118149*^9, 3.4741104587819896`*^9}, {3.4741105297140465`*^9, 
   3.4741105444248877`*^9}, {3.474110599400032*^9, 3.4741106515910177`*^9}, {
   3.4742233782964277`*^9, 3.4742234893097773`*^9}, {3.5943795211869745`*^9, 
   3.594379521703004*^9}}],

Cell["\<\
The rules to evaluate the brakets are very simple. Whenever a tensor product \
of bras (or a simple bra) encounters a tensor product of kets (or a simple \
ket), the bras an kets that has the same set of indices leave from both \
products as a braket object. \
\>", "Text",
 CellChangeTimes->{{3.4441698904572*^9, 3.4441699056412*^9}, {
   3.4441699835442*^9, 3.4441700844962*^9}, {3.4441711933361998`*^9, 
   3.4441712377462*^9}, {3.4442155039625483`*^9, 3.4442157395205483`*^9}, 
   3.4452438795719457`*^9, {3.4452441125939455`*^9, 3.4452441130159454`*^9}, {
   3.4742326864180336`*^9, 3.4742327253312597`*^9}, 3.474236293917371*^9}],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{
  RowBox[{
   TagBox[
    RowBox[{
     SubscriptBox["\[InvisiblePrefixScriptBase]", 
      TagBox[
       AdjustmentBox[
        TagBox["1",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"LIndex"]], 
     RowBox[{"\[LeftAngleBracket]", 
      AdjustmentBox[
       TagBox["\[Alpha]",
        QuantumAlgebra`QuantumAlgebra`BraArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], 
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{0, -0.2}, {0, 0}}]}]}],
    QuantumAlgebra`QuantumAlgebra`Bra,
    BaseStyle->"BraWrapper"], "\[CircleTimes]", 
   TagBox[
    RowBox[{
     SuperscriptBox["\[InvisiblePrefixScriptBase]", 
      TagBox[
       AdjustmentBox[
        TagBox["2",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"LIndex"]], 
     RowBox[{"\[LeftAngleBracket]", 
      AdjustmentBox[
       TagBox["\[Beta]",
        QuantumAlgebra`QuantumAlgebra`BraArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], 
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{0, -0.2}, {0, 0}}]}]}],
    QuantumAlgebra`QuantumAlgebra`Bra,
    BaseStyle->"BraWrapper"], "\[CircleTimes]", 
   TagBox[
    RowBox[{
     SubscriptBox["\[InvisiblePrefixScriptBase]", 
      TagBox[
       AdjustmentBox[
        TagBox["3",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"LIndex"]], 
     RowBox[{"\[LeftAngleBracket]", 
      AdjustmentBox[
       TagBox["\[Gamma]",
        QuantumAlgebra`QuantumAlgebra`BraArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], 
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{0, -0.2}, {0, 0}}]}]}],
    QuantumAlgebra`QuantumAlgebra`Bra,
    BaseStyle->"BraWrapper"]}], "\[CenterDot]", 
  RowBox[{
   TagBox[
    SubscriptBox[
     RowBox[{
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{-0.2, 0}, {0, 0}}], 
      AdjustmentBox[
       TagBox["\[Delta]",
        QuantumAlgebra`QuantumAlgebra`KetArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], "\[RightAngleBracket]"}], 
     TagBox[
      AdjustmentBox[
       TagBox["1",
        QuantumAlgebra`QuantumAlgebra`KetArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0],
      QuantumAlgebra`QuantumAlgebra`UDScript,
      BaseStyle->"RIndex"]],
    QuantumAlgebra`QuantumAlgebra`Ket,
    BaseStyle->"KetWrapper"], "\[CircleTimes]", 
   TagBox[
    SuperscriptBox[
     RowBox[{
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{-0.2, 0}, {0, 0}}], 
      AdjustmentBox[
       TagBox["\[Delta]",
        QuantumAlgebra`QuantumAlgebra`KetArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], "\[RightAngleBracket]"}], 
     TagBox[
      AdjustmentBox[
       TagBox["2",
        QuantumAlgebra`QuantumAlgebra`KetArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0],
      QuantumAlgebra`QuantumAlgebra`UDScript,
      BaseStyle->"RIndex"]],
    QuantumAlgebra`QuantumAlgebra`Ket,
    BaseStyle->"KetWrapper"], "\[CircleTimes]", 
   TagBox[
    SubscriptBox[
     RowBox[{
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{-0.2, 0}, {0, 0}}], 
      AdjustmentBox[
       TagBox["\[Delta]",
        QuantumAlgebra`QuantumAlgebra`KetArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], "\[RightAngleBracket]"}], 
     TagBox[
      AdjustmentBox[
       TagBox["3",
        QuantumAlgebra`QuantumAlgebra`KetArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0],
      QuantumAlgebra`QuantumAlgebra`UDScript,
      BaseStyle->"RIndex"]],
    QuantumAlgebra`QuantumAlgebra`Ket,
    BaseStyle->"KetWrapper"]}]}]], "Input",
 CellChangeTimes->{{3.4441495002642*^9, 3.4441495173342*^9}, {
   3.4441711082552*^9, 3.4441711727572002`*^9}, 3.444379923472*^9, 
   3.444428041508*^9, {3.4742337558402014`*^9, 3.474233808747227*^9}, 
   3.5943795765311403`*^9}],

Cell[BoxData[
 RowBox[{
  TagBox[
   RowBox[{
    SubscriptBox["\[InvisiblePrefixScriptBase]", 
     TagBox[
      AdjustmentBox[
       TagBox["1",
        QuantumAlgebra`QuantumAlgebra`BraArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0],
      QuantumAlgebra`QuantumAlgebra`UDScript,
      BaseStyle->"LIndex"]], 
    SubscriptBox[
     RowBox[{"\[LeftAngleBracket]", 
      AdjustmentBox[
       RowBox[{
        TagBox["\[Alpha]",
         QuantumAlgebra`QuantumAlgebra`BraKetArgs,
         BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
        TagBox["\[Delta]",
         QuantumAlgebra`QuantumAlgebra`BraKetArgs,
         BaseStyle->"BraKetArg"]}],
       BoxBaselineShift->0], "\[RightAngleBracket]"}], 
     TagBox[
      AdjustmentBox[
       TagBox["1",
        QuantumAlgebra`QuantumAlgebra`BraArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0],
      QuantumAlgebra`QuantumAlgebra`UDScript,
      BaseStyle->"RIndex"]]}],
   QuantumAlgebra`QuantumAlgebra`Braket,
   BaseStyle->"BraKetWrapper"], " ", 
  TagBox[
   RowBox[{
    SuperscriptBox["\[InvisiblePrefixScriptBase]", 
     TagBox[
      AdjustmentBox[
       TagBox["2",
        QuantumAlgebra`QuantumAlgebra`BraArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0],
      QuantumAlgebra`QuantumAlgebra`UDScript,
      BaseStyle->"LIndex"]], 
    SuperscriptBox[
     RowBox[{"\[LeftAngleBracket]", 
      AdjustmentBox[
       RowBox[{
        TagBox["\[Beta]",
         QuantumAlgebra`QuantumAlgebra`BraKetArgs,
         BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
        TagBox["\[Delta]",
         QuantumAlgebra`QuantumAlgebra`BraKetArgs,
         BaseStyle->"BraKetArg"]}],
       BoxBaselineShift->0], "\[RightAngleBracket]"}], 
     TagBox[
      AdjustmentBox[
       TagBox["2",
        QuantumAlgebra`QuantumAlgebra`BraArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0],
      QuantumAlgebra`QuantumAlgebra`UDScript,
      BaseStyle->"RIndex"]]}],
   QuantumAlgebra`QuantumAlgebra`Braket,
   BaseStyle->"BraKetWrapper"], " ", 
  TagBox[
   RowBox[{
    SubscriptBox["\[InvisiblePrefixScriptBase]", 
     TagBox[
      AdjustmentBox[
       TagBox["3",
        QuantumAlgebra`QuantumAlgebra`BraArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0],
      QuantumAlgebra`QuantumAlgebra`UDScript,
      BaseStyle->"LIndex"]], 
    SubscriptBox[
     RowBox[{"\[LeftAngleBracket]", 
      AdjustmentBox[
       RowBox[{
        TagBox["\[Gamma]",
         QuantumAlgebra`QuantumAlgebra`BraKetArgs,
         BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
        TagBox["\[Delta]",
         QuantumAlgebra`QuantumAlgebra`BraKetArgs,
         BaseStyle->"BraKetArg"]}],
       BoxBaselineShift->0], "\[RightAngleBracket]"}], 
     TagBox[
      AdjustmentBox[
       TagBox["3",
        QuantumAlgebra`QuantumAlgebra`BraArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0],
      QuantumAlgebra`QuantumAlgebra`UDScript,
      BaseStyle->"RIndex"]]}],
   QuantumAlgebra`QuantumAlgebra`Braket,
   BaseStyle->"BraKetWrapper"]}]], "Output",
 CellChangeTimes->{
  3.4742236191802053`*^9, {3.474233760733481*^9, 3.474233776575387*^9}, 
   3.4742338097302837`*^9, 3.5943795768471584`*^9}]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{
  RowBox[{
   TagBox[
    RowBox[{
     SubscriptBox["\[InvisiblePrefixScriptBase]", 
      TagBox[
       AdjustmentBox[
        TagBox["1",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"LIndex"]], 
     RowBox[{"\[LeftAngleBracket]", 
      AdjustmentBox[
       TagBox["\[Alpha]",
        QuantumAlgebra`QuantumAlgebra`BraArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], 
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{0, -0.2}, {0, 0}}]}]}],
    QuantumAlgebra`QuantumAlgebra`Bra,
    BaseStyle->"BraWrapper"], "\[CircleTimes]", 
   TagBox[
    RowBox[{
     SubscriptBox["\[InvisiblePrefixScriptBase]", 
      TagBox[
       AdjustmentBox[
        TagBox["2",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"LIndex"]], 
     RowBox[{"\[LeftAngleBracket]", 
      AdjustmentBox[
       TagBox["\[Beta]",
        QuantumAlgebra`QuantumAlgebra`BraArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], 
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{0, -0.2}, {0, 0}}]}]}],
    QuantumAlgebra`QuantumAlgebra`Bra,
    BaseStyle->"BraWrapper"], "\[CircleTimes]", 
   TagBox[
    RowBox[{
     SubscriptBox["\[InvisiblePrefixScriptBase]", 
      TagBox[
       AdjustmentBox[
        TagBox["3",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"LIndex"]], 
     RowBox[{"\[LeftAngleBracket]", 
      AdjustmentBox[
       TagBox["\[Gamma]",
        QuantumAlgebra`QuantumAlgebra`BraArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], 
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{0, -0.2}, {0, 0}}]}]}],
    QuantumAlgebra`QuantumAlgebra`Bra,
    BaseStyle->"BraWrapper"]}], "\[CenterDot]", 
  RowBox[{
   TagBox[
    SubscriptBox[
     RowBox[{
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{-0.2, 0}, {0, 0}}], 
      AdjustmentBox[
       TagBox["\[Nu]",
        QuantumAlgebra`QuantumAlgebra`KetArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], "\[RightAngleBracket]"}], 
     TagBox[
      AdjustmentBox[
       TagBox[
        RowBox[{"1", ",", "x"}],
        QuantumAlgebra`QuantumAlgebra`KetArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0],
      QuantumAlgebra`QuantumAlgebra`UDScript,
      BaseStyle->"RIndex"]],
    QuantumAlgebra`QuantumAlgebra`Ket,
    BaseStyle->"KetWrapper"], "\[CircleTimes]", 
   TagBox[
    SubscriptBox[
     RowBox[{
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{-0.2, 0}, {0, 0}}], 
      AdjustmentBox[
       TagBox["\[Mu]",
        QuantumAlgebra`QuantumAlgebra`KetArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], "\[RightAngleBracket]"}], 
     TagBox[
      AdjustmentBox[
       TagBox["2",
        QuantumAlgebra`QuantumAlgebra`KetArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0],
      QuantumAlgebra`QuantumAlgebra`UDScript,
      BaseStyle->"RIndex"]],
    QuantumAlgebra`QuantumAlgebra`Ket,
    BaseStyle->"KetWrapper"], "\[CircleTimes]", 
   TagBox[
    SubscriptBox[
     RowBox[{
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{-0.2, 0}, {0, 0}}], 
      AdjustmentBox[
       TagBox["\[Rho]",
        QuantumAlgebra`QuantumAlgebra`KetArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], "\[RightAngleBracket]"}], 
     TagBox[
      AdjustmentBox[
       TagBox["3",
        QuantumAlgebra`QuantumAlgebra`KetArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0],
      QuantumAlgebra`QuantumAlgebra`UDScript,
      BaseStyle->"RIndex"]],
    QuantumAlgebra`QuantumAlgebra`Ket,
    BaseStyle->"KetWrapper"]}]}]], "Input",
 CellChangeTimes->{{3.4442158002455482`*^9, 3.4442158874635487`*^9}, {
   3.4442159509515486`*^9, 3.4442159511395483`*^9}, {3.444260963208*^9, 
   3.4442609695959997`*^9}, 3.444379999008*^9, 3.444428044777*^9, {
   3.4742338174437246`*^9, 3.4742338404710417`*^9}, {3.5943795803563585`*^9, 
   3.5943795916990075`*^9}}],

Cell[BoxData[
 RowBox[{
  TagBox[
   RowBox[{
    SubscriptBox["\[InvisiblePrefixScriptBase]", 
     TagBox[
      AdjustmentBox[
       TagBox["2",
        QuantumAlgebra`QuantumAlgebra`BraArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0],
      QuantumAlgebra`QuantumAlgebra`UDScript,
      BaseStyle->"LIndex"]], 
    SubscriptBox[
     RowBox[{"\[LeftAngleBracket]", 
      AdjustmentBox[
       RowBox[{
        TagBox["\[Beta]",
         QuantumAlgebra`QuantumAlgebra`BraKetArgs,
         BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
        TagBox["\[Mu]",
         QuantumAlgebra`QuantumAlgebra`BraKetArgs,
         BaseStyle->"BraKetArg"]}],
       BoxBaselineShift->0], "\[RightAngleBracket]"}], 
     TagBox[
      AdjustmentBox[
       TagBox["2",
        QuantumAlgebra`QuantumAlgebra`BraArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0],
      QuantumAlgebra`QuantumAlgebra`UDScript,
      BaseStyle->"RIndex"]]}],
   QuantumAlgebra`QuantumAlgebra`Braket,
   BaseStyle->"BraKetWrapper"], " ", 
  TagBox[
   RowBox[{
    SubscriptBox["\[InvisiblePrefixScriptBase]", 
     TagBox[
      AdjustmentBox[
       TagBox["3",
        QuantumAlgebra`QuantumAlgebra`BraArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0],
      QuantumAlgebra`QuantumAlgebra`UDScript,
      BaseStyle->"LIndex"]], 
    SubscriptBox[
     RowBox[{"\[LeftAngleBracket]", 
      AdjustmentBox[
       RowBox[{
        TagBox["\[Gamma]",
         QuantumAlgebra`QuantumAlgebra`BraKetArgs,
         BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
        TagBox["\[Rho]",
         QuantumAlgebra`QuantumAlgebra`BraKetArgs,
         BaseStyle->"BraKetArg"]}],
       BoxBaselineShift->0], "\[RightAngleBracket]"}], 
     TagBox[
      AdjustmentBox[
       TagBox["3",
        QuantumAlgebra`QuantumAlgebra`BraArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0],
      QuantumAlgebra`QuantumAlgebra`UDScript,
      BaseStyle->"RIndex"]]}],
   QuantumAlgebra`QuantumAlgebra`Braket,
   BaseStyle->"BraKetWrapper"], " ", 
  RowBox[{
   TagBox[
    RowBox[{
     SubscriptBox["\[InvisiblePrefixScriptBase]", 
      TagBox[
       AdjustmentBox[
        TagBox["1",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"LIndex"]], 
     RowBox[{"\[LeftAngleBracket]", 
      AdjustmentBox[
       TagBox["\[Alpha]",
        QuantumAlgebra`QuantumAlgebra`BraArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], 
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{0, -0.2}, {0, 0}}]}]}],
    QuantumAlgebra`QuantumAlgebra`Bra,
    BaseStyle->"BraWrapper"], "\[CenterDot]", 
   TagBox[
    SubscriptBox[
     RowBox[{
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{-0.2, 0}, {0, 0}}], 
      AdjustmentBox[
       TagBox["\[Nu]",
        QuantumAlgebra`QuantumAlgebra`KetArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], "\[RightAngleBracket]"}], 
     TagBox[
      AdjustmentBox[
       TagBox[
        RowBox[{"1", ",", "x"}],
        QuantumAlgebra`QuantumAlgebra`KetArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0],
      QuantumAlgebra`QuantumAlgebra`UDScript,
      BaseStyle->"RIndex"]],
    QuantumAlgebra`QuantumAlgebra`Ket,
    BaseStyle->"KetWrapper"]}]}]], "Output",
 CellChangeTimes->{3.4742236258995895`*^9, 3.4742338409880714`*^9, 
  3.5943795922200375`*^9}]
}, Open  ]],

Cell["\<\
As we saw before, the fact that not matching bras and kets are left \
unevaluated is very useful to do forward calculations. In the last example, \
the last two terms could represent the product of two states in the same \
space, and each one could be replaced in terms of other states or basis \
states. Even more, one of them (or both) could be a state in a higher \
dimensional space, and could be replaced later in the calculation.\
\>", "Text",
 CellChangeTimes->{{3.4441712654222*^9, 3.4441712724112*^9}, {
   3.4442161780775485`*^9, 3.4442163645665483`*^9}, 3.4442169790435486`*^9, {
   3.4442170111595483`*^9, 3.4442170867725487`*^9}, {3.4442180906585484`*^9, 
   3.4442181002255487`*^9}, 3.444260928516*^9, {3.444261177316*^9, 
   3.444261178744*^9}, {3.444261213324*^9, 3.444261215105*^9}, {
   3.4452441302119455`*^9, 3.4452441605059457`*^9}, {3.4742237440853496`*^9, 
   3.474223757672127*^9}, {3.4742238020146627`*^9, 3.474223824882971*^9}, {
   3.4742238814542065`*^9, 3.4742239558954644`*^9}, {3.4742239967358007`*^9, 
   3.4742240747052603`*^9}, {3.4742241103472986`*^9, 
   3.4742243275567226`*^9}, {3.4742327429592676`*^9, 3.474232766202597*^9}, {
   3.47423281381032*^9, 3.474232841407899*^9}, {3.4742329062676086`*^9, 
   3.474232911213891*^9}, {3.474232957648547*^9, 3.4742329887483263`*^9}, {
   3.4742339009325*^9, 3.4742339609919353`*^9}}],

Cell[TextData[{
 "An important fact about braketing tensors is that bra/ket matching is not \
based on the position of the elements in the tensor product, i.e. first bra \
with first ket, second bra with second ket, and so on. ",
 StyleBox["Mathematica",
  FontSlant->"Italic"],
 " orders the tensor product before using the braketing rules, and so there \
is not guarantee to have them in the desired order. "
}], "Text",
 CellChangeTimes->{{3.4442165360015483`*^9, 3.4442166301665487`*^9}, {
   3.444216662061548*^9, 3.4442167572365484`*^9}, {3.4442168034335485`*^9, 
   3.4442168241775484`*^9}, {3.444216855851548*^9, 3.4442168643965483`*^9}, {
   3.444217100943548*^9, 3.4442171015675488`*^9}, {3.4442180169595485`*^9, 
   3.444218019898548*^9}, {3.4442181506395483`*^9, 3.4442183021335487`*^9}, {
   3.4442183562045484`*^9, 3.4442185507225485`*^9}, {3.4452441704869456`*^9, 
   3.4452441899489455`*^9}, 3.4742243485519233`*^9, {3.4742243921674175`*^9, 
   3.4742243927374506`*^9}, {3.474224591763834*^9, 3.4742246083057804`*^9}, {
   3.4742246415156794`*^9, 3.4742247672898736`*^9}, {3.474228161356824*^9, 
   3.4742281893754263`*^9}, 3.4742282767714252`*^9, {3.474228319935894*^9, 
   3.474228339216997*^9}, {3.4742291774379406`*^9, 3.4742291832452726`*^9}, {
   3.4742333352451444`*^9, 3.4742333613346367`*^9}, {3.4742334449004164`*^9, 
   3.4742334729060183`*^9}, {3.47423351139922*^9, 3.4742335238739333`*^9}, {
   3.4742335846004066`*^9, 3.4742336468519673`*^9}, 3.474233870889782*^9, {
   3.4742339698894444`*^9, 3.474234099837877*^9}, 3.4742341931982164`*^9, {
   3.5943796346044617`*^9, 3.594379635037486*^9}}],

Cell["\<\
In the next example, the script labels of the second bra is reversed after \
evaluation. However, braketing is done by matching the same label scripts \
between bras and kets:\
\>", "Text",
 CellChangeTimes->{{3.4442165360015483`*^9, 3.4442166301665487`*^9}, {
   3.444216662061548*^9, 3.4442167572365484`*^9}, {3.4442168034335485`*^9, 
   3.4442168241775484`*^9}, {3.444216855851548*^9, 3.4442168643965483`*^9}, {
   3.444217100943548*^9, 3.4442171015675488`*^9}, {3.4442180169595485`*^9, 
   3.444218019898548*^9}, {3.4442181506395483`*^9, 3.4442183021335487`*^9}, {
   3.4442183562045484`*^9, 3.4442185507225485`*^9}, {3.4452441704869456`*^9, 
   3.4452441899489455`*^9}, 3.4742243485519233`*^9, {3.4742243921674175`*^9, 
   3.4742243927374506`*^9}, {3.474224591763834*^9, 3.4742246083057804`*^9}, {
   3.4742246415156794`*^9, 3.4742247672898736`*^9}, {3.474228161356824*^9, 
   3.4742281893754263`*^9}, 3.4742282767714252`*^9, {3.474228319935894*^9, 
   3.474228339216997*^9}, {3.4742291774379406`*^9, 3.4742291832452726`*^9}, {
   3.4742333352451444`*^9, 3.4742333613346367`*^9}, {3.4742334449004164`*^9, 
   3.4742334729060183`*^9}, {3.47423351139922*^9, 3.4742335238739333`*^9}, {
   3.4742335846004066`*^9, 3.4742336468519673`*^9}, 3.474233870889782*^9, {
   3.4742339698894444`*^9, 3.474234099837877*^9}, {3.4742341931982164`*^9, 
   3.474234237122729*^9}, {3.4742342746668763`*^9, 3.4742342944480076`*^9}, {
   3.4742363341946745`*^9, 3.4742363615882416`*^9}}],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{
   RowBox[{
    TagBox[
     RowBox[{
      SubscriptBox["\[InvisiblePrefixScriptBase]", 
       TagBox[
        AdjustmentBox[
         TagBox["1",
          QuantumAlgebra`QuantumAlgebra`BraArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0],
        QuantumAlgebra`QuantumAlgebra`UDScript,
        BaseStyle->"LIndex"]], 
      RowBox[{"\[LeftAngleBracket]", 
       AdjustmentBox[
        TagBox["0",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0], 
       AdjustmentBox["\[VerticalSeparator]",
        BoxBaselineShift->-0.1,
        BoxMargins->{{0, -0.2}, {0, 0}}]}]}],
     QuantumAlgebra`QuantumAlgebra`Bra,
     BaseStyle->"BraWrapper"], "\[CircleTimes]", 
    TagBox[
     RowBox[{
      SubscriptBox["\[InvisiblePrefixScriptBase]", 
       TagBox[
        AdjustmentBox[
         TagBox["2",
          QuantumAlgebra`QuantumAlgebra`BraArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0],
        QuantumAlgebra`QuantumAlgebra`UDScript,
        BaseStyle->"LIndex"]], 
      RowBox[{"\[LeftAngleBracket]", 
       AdjustmentBox[
        TagBox["0",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0], 
       AdjustmentBox["\[VerticalSeparator]",
        BoxBaselineShift->-0.1,
        BoxMargins->{{0, -0.2}, {0, 0}}]}]}],
     QuantumAlgebra`QuantumAlgebra`Bra,
     BaseStyle->"BraWrapper"]}], ",", 
   RowBox[{
    TagBox[
     RowBox[{
      SubscriptBox["\[InvisiblePrefixScriptBase]", 
       TagBox[
        AdjustmentBox[
         TagBox["1",
          QuantumAlgebra`QuantumAlgebra`BraArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0],
        QuantumAlgebra`QuantumAlgebra`UDScript,
        BaseStyle->"LIndex"]], 
      RowBox[{"\[LeftAngleBracket]", 
       AdjustmentBox[
        TagBox["1",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0], 
       AdjustmentBox["\[VerticalSeparator]",
        BoxBaselineShift->-0.1,
        BoxMargins->{{0, -0.2}, {0, 0}}]}]}],
     QuantumAlgebra`QuantumAlgebra`Bra,
     BaseStyle->"BraWrapper"], "\[CircleTimes]", 
    TagBox[
     RowBox[{
      SubscriptBox["\[InvisiblePrefixScriptBase]", 
       TagBox[
        AdjustmentBox[
         TagBox["2",
          QuantumAlgebra`QuantumAlgebra`BraArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0],
        QuantumAlgebra`QuantumAlgebra`UDScript,
        BaseStyle->"LIndex"]], 
      RowBox[{"\[LeftAngleBracket]", 
       AdjustmentBox[
        TagBox["0",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0], 
       AdjustmentBox["\[VerticalSeparator]",
        BoxBaselineShift->-0.1,
        BoxMargins->{{0, -0.2}, {0, 0}}]}]}],
     QuantumAlgebra`QuantumAlgebra`Bra,
     BaseStyle->"BraWrapper"]}]}], "}"}]], "Input",
 CellChangeTimes->{{3.4742331265302067`*^9, 3.4742331859386044`*^9}, {
   3.4742332364514937`*^9, 3.4742333305128736`*^9}, 3.474233428030452*^9, {
   3.4742363464043727`*^9, 3.474236347996464*^9}, 3.594379671352564*^9}],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{
   RowBox[{
    TagBox[
     RowBox[{
      SubscriptBox["\[InvisiblePrefixScriptBase]", 
       TagBox[
        AdjustmentBox[
         TagBox["1",
          QuantumAlgebra`QuantumAlgebra`BraArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0],
        QuantumAlgebra`QuantumAlgebra`UDScript,
        BaseStyle->"LIndex"]], 
      RowBox[{"\[LeftAngleBracket]", 
       AdjustmentBox[
        TagBox["0",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0], 
       AdjustmentBox["\[VerticalSeparator]",
        BoxBaselineShift->-0.1,
        BoxMargins->{{0, -0.2}, {0, 0}}]}]}],
     QuantumAlgebra`QuantumAlgebra`Bra,
     BaseStyle->"BraWrapper"], "\[CircleTimes]", 
    TagBox[
     RowBox[{
      SubscriptBox["\[InvisiblePrefixScriptBase]", 
       TagBox[
        AdjustmentBox[
         TagBox["2",
          QuantumAlgebra`QuantumAlgebra`BraArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0],
        QuantumAlgebra`QuantumAlgebra`UDScript,
        BaseStyle->"LIndex"]], 
      RowBox[{"\[LeftAngleBracket]", 
       AdjustmentBox[
        TagBox["0",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0], 
       AdjustmentBox["\[VerticalSeparator]",
        BoxBaselineShift->-0.1,
        BoxMargins->{{0, -0.2}, {0, 0}}]}]}],
     QuantumAlgebra`QuantumAlgebra`Bra,
     BaseStyle->"BraWrapper"]}], ",", 
   RowBox[{
    TagBox[
     RowBox[{
      SubscriptBox["\[InvisiblePrefixScriptBase]", 
       TagBox[
        AdjustmentBox[
         TagBox["2",
          QuantumAlgebra`QuantumAlgebra`BraArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0],
        QuantumAlgebra`QuantumAlgebra`UDScript,
        BaseStyle->"LIndex"]], 
      RowBox[{"\[LeftAngleBracket]", 
       AdjustmentBox[
        TagBox["0",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0], 
       AdjustmentBox["\[VerticalSeparator]",
        BoxBaselineShift->-0.1,
        BoxMargins->{{0, -0.2}, {0, 0}}]}]}],
     QuantumAlgebra`QuantumAlgebra`Bra,
     BaseStyle->"BraWrapper"], "\[CircleTimes]", 
    TagBox[
     RowBox[{
      SubscriptBox["\[InvisiblePrefixScriptBase]", 
       TagBox[
        AdjustmentBox[
         TagBox["1",
          QuantumAlgebra`QuantumAlgebra`BraArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0],
        QuantumAlgebra`QuantumAlgebra`UDScript,
        BaseStyle->"LIndex"]], 
      RowBox[{"\[LeftAngleBracket]", 
       AdjustmentBox[
        TagBox["1",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0], 
       AdjustmentBox["\[VerticalSeparator]",
        BoxBaselineShift->-0.1,
        BoxMargins->{{0, -0.2}, {0, 0}}]}]}],
     QuantumAlgebra`QuantumAlgebra`Bra,
     BaseStyle->"BraWrapper"]}]}], "}"}]], "Output",
 CellChangeTimes->{3.4742336519442587`*^9, 3.474234324437723*^9, 
  3.59437967164058*^9, 3.5943797034333982`*^9}]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{
  RowBox[{
   RowBox[{"#1", "\[CenterDot]", 
    RowBox[{
     TagBox[
      SubscriptBox[
       RowBox[{
        AdjustmentBox["\[VerticalSeparator]",
         BoxBaselineShift->-0.1,
         BoxMargins->{{-0.2, 0}, {0, 0}}], 
        AdjustmentBox[
         TagBox["0",
          QuantumAlgebra`QuantumAlgebra`KetArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0], "\[RightAngleBracket]"}], 
       TagBox[
        AdjustmentBox[
         TagBox["1",
          QuantumAlgebra`QuantumAlgebra`KetArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0],
        QuantumAlgebra`QuantumAlgebra`UDScript,
        BaseStyle->"RIndex"]],
      QuantumAlgebra`QuantumAlgebra`Ket,
      BaseStyle->"KetWrapper"], "\[CircleTimes]", 
     TagBox[
      SubscriptBox[
       RowBox[{
        AdjustmentBox["\[VerticalSeparator]",
         BoxBaselineShift->-0.1,
         BoxMargins->{{-0.2, 0}, {0, 0}}], 
        AdjustmentBox[
         TagBox["1",
          QuantumAlgebra`QuantumAlgebra`KetArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0], "\[RightAngleBracket]"}], 
       TagBox[
        AdjustmentBox[
         TagBox["2",
          QuantumAlgebra`QuantumAlgebra`KetArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0],
        QuantumAlgebra`QuantumAlgebra`UDScript,
        BaseStyle->"RIndex"]],
      QuantumAlgebra`QuantumAlgebra`Ket,
      BaseStyle->"KetWrapper"]}]}], "&"}], "/@", "%"}]], "Input",
 CellChangeTimes->{{3.474228389881895*^9, 3.4742283909419556`*^9}, {
   3.4742333777505755`*^9, 3.474233408663344*^9}, {3.4742334920491133`*^9, 
   3.474233494078229*^9}, {3.4742342595420113`*^9, 3.474234262403175*^9}, {
   3.4742343048846045`*^9, 3.474234321691566*^9}, 3.594379695497945*^9}],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{
   RowBox[{
    TagBox[
     RowBox[{
      SubscriptBox["\[InvisiblePrefixScriptBase]", 
       TagBox[
        AdjustmentBox[
         TagBox["1",
          QuantumAlgebra`QuantumAlgebra`BraArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0],
        QuantumAlgebra`QuantumAlgebra`UDScript,
        BaseStyle->"LIndex"]], 
      SubscriptBox[
       RowBox[{"\[LeftAngleBracket]", 
        AdjustmentBox[
         RowBox[{
          TagBox["0",
           QuantumAlgebra`QuantumAlgebra`BraKetArgs,
           BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
          TagBox["0",
           QuantumAlgebra`QuantumAlgebra`BraKetArgs,
           BaseStyle->"BraKetArg"]}],
         BoxBaselineShift->0], "\[RightAngleBracket]"}], 
       TagBox[
        AdjustmentBox[
         TagBox["1",
          QuantumAlgebra`QuantumAlgebra`BraArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0],
        QuantumAlgebra`QuantumAlgebra`UDScript,
        BaseStyle->"RIndex"]]}],
     QuantumAlgebra`QuantumAlgebra`Braket,
     BaseStyle->"BraKetWrapper"], " ", 
    TagBox[
     RowBox[{
      SubscriptBox["\[InvisiblePrefixScriptBase]", 
       TagBox[
        AdjustmentBox[
         TagBox["2",
          QuantumAlgebra`QuantumAlgebra`BraArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0],
        QuantumAlgebra`QuantumAlgebra`UDScript,
        BaseStyle->"LIndex"]], 
      SubscriptBox[
       RowBox[{"\[LeftAngleBracket]", 
        AdjustmentBox[
         RowBox[{
          TagBox["0",
           QuantumAlgebra`QuantumAlgebra`BraKetArgs,
           BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
          TagBox["1",
           QuantumAlgebra`QuantumAlgebra`BraKetArgs,
           BaseStyle->"BraKetArg"]}],
         BoxBaselineShift->0], "\[RightAngleBracket]"}], 
       TagBox[
        AdjustmentBox[
         TagBox["2",
          QuantumAlgebra`QuantumAlgebra`BraArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0],
        QuantumAlgebra`QuantumAlgebra`UDScript,
        BaseStyle->"RIndex"]]}],
     QuantumAlgebra`QuantumAlgebra`Braket,
     BaseStyle->"BraKetWrapper"]}], ",", 
   RowBox[{
    TagBox[
     RowBox[{
      SubscriptBox["\[InvisiblePrefixScriptBase]", 
       TagBox[
        AdjustmentBox[
         TagBox["2",
          QuantumAlgebra`QuantumAlgebra`BraArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0],
        QuantumAlgebra`QuantumAlgebra`UDScript,
        BaseStyle->"LIndex"]], 
      SubscriptBox[
       RowBox[{"\[LeftAngleBracket]", 
        AdjustmentBox[
         RowBox[{
          TagBox["0",
           QuantumAlgebra`QuantumAlgebra`BraKetArgs,
           BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
          TagBox["1",
           QuantumAlgebra`QuantumAlgebra`BraKetArgs,
           BaseStyle->"BraKetArg"]}],
         BoxBaselineShift->0], "\[RightAngleBracket]"}], 
       TagBox[
        AdjustmentBox[
         TagBox["2",
          QuantumAlgebra`QuantumAlgebra`BraArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0],
        QuantumAlgebra`QuantumAlgebra`UDScript,
        BaseStyle->"RIndex"]]}],
     QuantumAlgebra`QuantumAlgebra`Braket,
     BaseStyle->"BraKetWrapper"], " ", 
    TagBox[
     RowBox[{
      SubscriptBox["\[InvisiblePrefixScriptBase]", 
       TagBox[
        AdjustmentBox[
         TagBox["1",
          QuantumAlgebra`QuantumAlgebra`BraArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0],
        QuantumAlgebra`QuantumAlgebra`UDScript,
        BaseStyle->"LIndex"]], 
      SubscriptBox[
       RowBox[{"\[LeftAngleBracket]", 
        AdjustmentBox[
         RowBox[{
          TagBox["1",
           QuantumAlgebra`QuantumAlgebra`BraKetArgs,
           BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
          TagBox["0",
           QuantumAlgebra`QuantumAlgebra`BraKetArgs,
           BaseStyle->"BraKetArg"]}],
         BoxBaselineShift->0], "\[RightAngleBracket]"}], 
       TagBox[
        AdjustmentBox[
         TagBox["1",
          QuantumAlgebra`QuantumAlgebra`BraArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0],
        QuantumAlgebra`QuantumAlgebra`UDScript,
        BaseStyle->"RIndex"]]}],
     QuantumAlgebra`QuantumAlgebra`Braket,
     BaseStyle->"BraKetWrapper"]}]}], "}"}]], "Output",
 CellChangeTimes->{
  3.4742283915009875`*^9, {3.474233404882128*^9, 3.474233432530709*^9}, 
   3.4742334945402555`*^9, 3.474234325227768*^9, {3.5943797001462107`*^9, 
   3.5943797041084375`*^9}}]
}, Open  ]],

Cell["\<\
If several kets or bras do not encounter a matching pair, they are held \
unevaluated conserving the correct tensor structure. For example, this \
clearly happens if the bra and ket tensors don't have the same length. \
\>", "Text",
 CellChangeTimes->{{3.444261243024*^9, 3.4442613390699997`*^9}, {
  3.444261370778*^9, 3.444261378992*^9}, {3.4442614260360003`*^9, 
  3.444261472234*^9}, {3.4452442707569456`*^9, 3.4452442752449455`*^9}, {
  3.474224533047476*^9, 3.474224538471786*^9}, {3.474233679348826*^9, 
  3.4742336830050354`*^9}, {3.4742343560465307`*^9, 3.474234374803604*^9}, {
  3.4742344570243063`*^9, 3.4742345250351963`*^9}, {3.474234940936985*^9, 
  3.4742350264628763`*^9}, {3.474236059461961*^9, 3.4742361788707905`*^9}, {
  3.4742363697077055`*^9, 3.474236414761283*^9}, {3.474236447978183*^9, 
  3.47423644863422*^9}, {3.47423650615851*^9, 3.4742365482969203`*^9}, {
  3.4742365916544003`*^9, 3.4742365964826765`*^9}}],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{
  TagBox[
   RowBox[{
    SubscriptBox["\[InvisiblePrefixScriptBase]", 
     TagBox[
      AdjustmentBox[
       TagBox["3",
        QuantumAlgebra`QuantumAlgebra`BraArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0],
      QuantumAlgebra`QuantumAlgebra`UDScript,
      BaseStyle->"LIndex"]], 
    RowBox[{"\[LeftAngleBracket]", 
     AdjustmentBox[
      TagBox["\[Gamma]",
       QuantumAlgebra`QuantumAlgebra`BraArgs,
       BaseStyle->"BraKetArg"],
      BoxBaselineShift->0], 
     AdjustmentBox["\[VerticalSeparator]",
      BoxBaselineShift->-0.1,
      BoxMargins->{{0, -0.2}, {0, 0}}]}]}],
   QuantumAlgebra`QuantumAlgebra`Bra,
   BaseStyle->"BraWrapper"], "\[CenterDot]", 
  RowBox[{
   TagBox[
    RowBox[{
     AdjustmentBox["\[VerticalSeparator]",
      BoxBaselineShift->-0.1,
      BoxMargins->{{-0.2, 0}, {0, 0}}], 
     AdjustmentBox[
      TagBox[
       SubscriptBox["\[Upsilon]", "z"],
       QuantumAlgebra`QuantumAlgebra`KetArgs,
       BaseStyle->"BraKetArg"],
      BoxBaselineShift->0], "\[RightAngleBracket]"}],
    QuantumAlgebra`QuantumAlgebra`Ket,
    BaseStyle->"KetWrapper"], "\[CircleTimes]", 
   TagBox[
    SubscriptBox[
     RowBox[{
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{-0.2, 0}, {0, 0}}], 
      AdjustmentBox[
       TagBox["\[Nu]",
        QuantumAlgebra`QuantumAlgebra`KetArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], "\[RightAngleBracket]"}], 
     TagBox[
      AdjustmentBox[
       TagBox["y",
        QuantumAlgebra`QuantumAlgebra`KetArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0],
      QuantumAlgebra`QuantumAlgebra`UDScript,
      BaseStyle->"RIndex"]],
    QuantumAlgebra`QuantumAlgebra`Ket,
    BaseStyle->"KetWrapper"], "\[CircleTimes]", 
   TagBox[
    SubscriptBox[
     RowBox[{
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{-0.2, 0}, {0, 0}}], 
      AdjustmentBox[
       TagBox["\[Rho]",
        QuantumAlgebra`QuantumAlgebra`KetArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], "\[RightAngleBracket]"}], 
     TagBox[
      AdjustmentBox[
       TagBox["3",
        QuantumAlgebra`QuantumAlgebra`KetArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0],
      QuantumAlgebra`QuantumAlgebra`UDScript,
      BaseStyle->"RIndex"]],
    QuantumAlgebra`QuantumAlgebra`Ket,
    BaseStyle->"KetWrapper"]}]}]], "Input",
 CellChangeTimes->{{3.444380440525*^9, 3.444380450608*^9}, 
   3.444380746025*^9, {3.4742345359448204`*^9, 3.4742345758031006`*^9}, {
   3.4742349949070716`*^9, 3.474234996033136*^9}, {3.474235051638316*^9, 
   3.4742350524653635`*^9}, {3.594380059643772*^9, 3.594380069613343*^9}}],

Cell[BoxData[
 RowBox[{
  TagBox[
   RowBox[{
    SubscriptBox["\[InvisiblePrefixScriptBase]", 
     TagBox[
      AdjustmentBox[
       TagBox["3",
        QuantumAlgebra`QuantumAlgebra`BraArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0],
      QuantumAlgebra`QuantumAlgebra`UDScript,
      BaseStyle->"LIndex"]], 
    SubscriptBox[
     RowBox[{"\[LeftAngleBracket]", 
      AdjustmentBox[
       RowBox[{
        TagBox["\[Gamma]",
         QuantumAlgebra`QuantumAlgebra`BraKetArgs,
         BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
        TagBox["\[Rho]",
         QuantumAlgebra`QuantumAlgebra`BraKetArgs,
         BaseStyle->"BraKetArg"]}],
       BoxBaselineShift->0], "\[RightAngleBracket]"}], 
     TagBox[
      AdjustmentBox[
       TagBox["3",
        QuantumAlgebra`QuantumAlgebra`BraArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0],
      QuantumAlgebra`QuantumAlgebra`UDScript,
      BaseStyle->"RIndex"]]}],
   QuantumAlgebra`QuantumAlgebra`Braket,
   BaseStyle->"BraKetWrapper"], " ", 
  RowBox[{
   TagBox[
    RowBox[{
     AdjustmentBox["\[VerticalSeparator]",
      BoxBaselineShift->-0.1,
      BoxMargins->{{-0.2, 0}, {0, 0}}], 
     AdjustmentBox[
      TagBox[
       SubscriptBox["\[Upsilon]", "z"],
       QuantumAlgebra`QuantumAlgebra`KetArgs,
       BaseStyle->"BraKetArg"],
      BoxBaselineShift->0], "\[RightAngleBracket]"}],
    QuantumAlgebra`QuantumAlgebra`Ket,
    BaseStyle->"KetWrapper"], "\[CircleTimes]", 
   TagBox[
    SubscriptBox[
     RowBox[{
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{-0.2, 0}, {0, 0}}], 
      AdjustmentBox[
       TagBox["\[Nu]",
        QuantumAlgebra`QuantumAlgebra`KetArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], "\[RightAngleBracket]"}], 
     TagBox[
      AdjustmentBox[
       TagBox["y",
        QuantumAlgebra`QuantumAlgebra`KetArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0],
      QuantumAlgebra`QuantumAlgebra`UDScript,
      BaseStyle->"RIndex"]],
    QuantumAlgebra`QuantumAlgebra`Ket,
    BaseStyle->"KetWrapper"]}]}]], "Output",
 CellChangeTimes->{
  3.474224519438697*^9, {3.474234538325957*^9, 3.474234576464138*^9}, 
   3.4742362547781324`*^9, 3.5943800698863583`*^9}]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{
  RowBox[{
   TagBox[
    RowBox[{
     SubscriptBox["\[InvisiblePrefixScriptBase]", 
      TagBox[
       AdjustmentBox[
        TagBox["1",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"LIndex"]], 
     RowBox[{"\[LeftAngleBracket]", 
      AdjustmentBox[
       TagBox["\[Alpha]",
        QuantumAlgebra`QuantumAlgebra`BraArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], 
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{0, -0.2}, {0, 0}}]}]}],
    QuantumAlgebra`QuantumAlgebra`Bra,
    BaseStyle->"BraWrapper"], "\[CircleTimes]", 
   TagBox[
    RowBox[{
     SubscriptBox["\[InvisiblePrefixScriptBase]", 
      TagBox[
       AdjustmentBox[
        TagBox["2",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"LIndex"]], 
     RowBox[{"\[LeftAngleBracket]", 
      AdjustmentBox[
       TagBox["\[Beta]",
        QuantumAlgebra`QuantumAlgebra`BraArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], 
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{0, -0.2}, {0, 0}}]}]}],
    QuantumAlgebra`QuantumAlgebra`Bra,
    BaseStyle->"BraWrapper"], "\[CircleTimes]", 
   TagBox[
    RowBox[{
     SubscriptBox["\[InvisiblePrefixScriptBase]", 
      TagBox[
       AdjustmentBox[
        TagBox["3",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"LIndex"]], 
     RowBox[{"\[LeftAngleBracket]", 
      AdjustmentBox[
       TagBox["\[Gamma]",
        QuantumAlgebra`QuantumAlgebra`BraArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], 
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{0, -0.2}, {0, 0}}]}]}],
    QuantumAlgebra`QuantumAlgebra`Bra,
    BaseStyle->"BraWrapper"]}], "\[CenterDot]", 
  TagBox[
   SubscriptBox[
    RowBox[{
     AdjustmentBox["\[VerticalSeparator]",
      BoxBaselineShift->-0.1,
      BoxMargins->{{-0.2, 0}, {0, 0}}], 
     AdjustmentBox[
      TagBox["\[Mu]",
       QuantumAlgebra`QuantumAlgebra`KetArgs,
       BaseStyle->"BraKetArg"],
      BoxBaselineShift->0], "\[RightAngleBracket]"}], 
    TagBox[
     AdjustmentBox[
      TagBox["2",
       QuantumAlgebra`QuantumAlgebra`KetArgs,
       BaseStyle->"BraKetArg"],
      BoxBaselineShift->0],
     QuantumAlgebra`QuantumAlgebra`UDScript,
     BaseStyle->"RIndex"]],
   QuantumAlgebra`QuantumAlgebra`Ket,
   BaseStyle->"KetWrapper"]}]], "Input",
 CellChangeTimes->{{3.4742362215942345`*^9, 3.474236229503687*^9}, {
  3.5943800722824955`*^9, 3.5943800824270754`*^9}}],

Cell[BoxData[
 RowBox[{
  TagBox[
   RowBox[{
    SubscriptBox["\[InvisiblePrefixScriptBase]", 
     TagBox[
      AdjustmentBox[
       TagBox["2",
        QuantumAlgebra`QuantumAlgebra`BraArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0],
      QuantumAlgebra`QuantumAlgebra`UDScript,
      BaseStyle->"LIndex"]], 
    SubscriptBox[
     RowBox[{"\[LeftAngleBracket]", 
      AdjustmentBox[
       RowBox[{
        TagBox["\[Beta]",
         QuantumAlgebra`QuantumAlgebra`BraKetArgs,
         BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
        TagBox["\[Mu]",
         QuantumAlgebra`QuantumAlgebra`BraKetArgs,
         BaseStyle->"BraKetArg"]}],
       BoxBaselineShift->0], "\[RightAngleBracket]"}], 
     TagBox[
      AdjustmentBox[
       TagBox["2",
        QuantumAlgebra`QuantumAlgebra`BraArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0],
      QuantumAlgebra`QuantumAlgebra`UDScript,
      BaseStyle->"RIndex"]]}],
   QuantumAlgebra`QuantumAlgebra`Braket,
   BaseStyle->"BraKetWrapper"], " ", 
  RowBox[{
   TagBox[
    RowBox[{
     SubscriptBox["\[InvisiblePrefixScriptBase]", 
      TagBox[
       AdjustmentBox[
        TagBox["1",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"LIndex"]], 
     RowBox[{"\[LeftAngleBracket]", 
      AdjustmentBox[
       TagBox["\[Alpha]",
        QuantumAlgebra`QuantumAlgebra`BraArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], 
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{0, -0.2}, {0, 0}}]}]}],
    QuantumAlgebra`QuantumAlgebra`Bra,
    BaseStyle->"BraWrapper"], "\[CircleTimes]", 
   TagBox[
    RowBox[{
     SubscriptBox["\[InvisiblePrefixScriptBase]", 
      TagBox[
       AdjustmentBox[
        TagBox["3",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"LIndex"]], 
     RowBox[{"\[LeftAngleBracket]", 
      AdjustmentBox[
       TagBox["\[Gamma]",
        QuantumAlgebra`QuantumAlgebra`BraArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], 
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{0, -0.2}, {0, 0}}]}]}],
    QuantumAlgebra`QuantumAlgebra`Bra,
    BaseStyle->"BraWrapper"]}]}]], "Output",
 CellChangeTimes->{3.474236257063263*^9, 3.5943800826910906`*^9}]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{
  RowBox[{
   TagBox[
    RowBox[{
     SubscriptBox["\[InvisiblePrefixScriptBase]", 
      TagBox[
       AdjustmentBox[
        TagBox["1",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"LIndex"]], 
     RowBox[{"\[LeftAngleBracket]", 
      AdjustmentBox[
       TagBox["\[Alpha]",
        QuantumAlgebra`QuantumAlgebra`BraArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], 
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{0, -0.2}, {0, 0}}]}]}],
    QuantumAlgebra`QuantumAlgebra`Bra,
    BaseStyle->"BraWrapper"], "\[CircleTimes]", 
   TagBox[
    RowBox[{
     SubscriptBox["\[InvisiblePrefixScriptBase]", 
      TagBox[
       AdjustmentBox[
        TagBox["2",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"LIndex"]], 
     RowBox[{"\[LeftAngleBracket]", 
      AdjustmentBox[
       TagBox["\[Beta]",
        QuantumAlgebra`QuantumAlgebra`BraArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], 
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{0, -0.2}, {0, 0}}]}]}],
    QuantumAlgebra`QuantumAlgebra`Bra,
    BaseStyle->"BraWrapper"], "\[CircleTimes]", 
   TagBox[
    RowBox[{
     SubscriptBox["\[InvisiblePrefixScriptBase]", 
      TagBox[
       AdjustmentBox[
        TagBox["3",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"LIndex"]], 
     RowBox[{"\[LeftAngleBracket]", 
      AdjustmentBox[
       TagBox["\[Gamma]",
        QuantumAlgebra`QuantumAlgebra`BraArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], 
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{0, -0.2}, {0, 0}}]}]}],
    QuantumAlgebra`QuantumAlgebra`Bra,
    BaseStyle->"BraWrapper"]}], "\[CenterDot]", 
  RowBox[{
   TagBox[
    SubscriptBox[
     RowBox[{
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{-0.2, 0}, {0, 0}}], 
      AdjustmentBox[
       TagBox["\[Mu]",
        QuantumAlgebra`QuantumAlgebra`KetArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], "\[RightAngleBracket]"}], 
     TagBox[
      AdjustmentBox[
       TagBox["1",
        QuantumAlgebra`QuantumAlgebra`KetArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0],
      QuantumAlgebra`QuantumAlgebra`UDScript,
      BaseStyle->"RIndex"]],
    QuantumAlgebra`QuantumAlgebra`Ket,
    BaseStyle->"KetWrapper"], "\[CircleTimes]", 
   TagBox[
    SubscriptBox[
     RowBox[{
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{-0.2, 0}, {0, 0}}], 
      AdjustmentBox[
       TagBox["\[Nu]",
        QuantumAlgebra`QuantumAlgebra`KetArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], "\[RightAngleBracket]"}], 
     TagBox[
      AdjustmentBox[
       TagBox["y",
        QuantumAlgebra`QuantumAlgebra`KetArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0],
      QuantumAlgebra`QuantumAlgebra`UDScript,
      BaseStyle->"RIndex"]],
    QuantumAlgebra`QuantumAlgebra`Ket,
    BaseStyle->"KetWrapper"], "\[CircleTimes]", 
   TagBox[
    SubscriptBox[
     RowBox[{
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{-0.2, 0}, {0, 0}}], 
      AdjustmentBox[
       TagBox["\[Rho]",
        QuantumAlgebra`QuantumAlgebra`KetArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], "\[RightAngleBracket]"}], 
     TagBox[
      AdjustmentBox[
       TagBox["z",
        QuantumAlgebra`QuantumAlgebra`KetArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0],
      QuantumAlgebra`QuantumAlgebra`UDScript,
      BaseStyle->"RIndex"]],
    QuantumAlgebra`QuantumAlgebra`Ket,
    BaseStyle->"KetWrapper"]}]}]], "Input",
 CellChangeTimes->{{3.4442158002455482`*^9, 3.4442158874635487`*^9}, {
   3.4442159509515486`*^9, 3.4442159511395483`*^9}, {3.444260963208*^9, 
   3.444260995314*^9}, {3.444305760199*^9, 3.4443057678190002`*^9}, {
   3.4443800590950003`*^9, 3.444380149512*^9}, 3.44438031898*^9, {
   3.4443803806549997`*^9, 3.444380406307*^9}, {3.4443805307390003`*^9, 
   3.444380533435*^9}, {3.444380599549*^9, 3.444380609299*^9}, 
   3.444380644734*^9, 3.444428068277*^9, {3.474234393004645*^9, 
   3.474234394860751*^9}, {3.4742344282306595`*^9, 3.4742344386992583`*^9}, {
   3.4742362676848707`*^9, 3.4742362678778815`*^9}, {3.594380085802269*^9, 
   3.5943800980889716`*^9}}],

Cell[BoxData[
 RowBox[{
  TagBox[
   RowBox[{
    SubscriptBox["\[InvisiblePrefixScriptBase]", 
     TagBox[
      AdjustmentBox[
       TagBox["1",
        QuantumAlgebra`QuantumAlgebra`BraArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0],
      QuantumAlgebra`QuantumAlgebra`UDScript,
      BaseStyle->"LIndex"]], 
    SubscriptBox[
     RowBox[{"\[LeftAngleBracket]", 
      AdjustmentBox[
       RowBox[{
        TagBox["\[Alpha]",
         QuantumAlgebra`QuantumAlgebra`BraKetArgs,
         BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
        TagBox["\[Mu]",
         QuantumAlgebra`QuantumAlgebra`BraKetArgs,
         BaseStyle->"BraKetArg"]}],
       BoxBaselineShift->0], "\[RightAngleBracket]"}], 
     TagBox[
      AdjustmentBox[
       TagBox["1",
        QuantumAlgebra`QuantumAlgebra`BraArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0],
      QuantumAlgebra`QuantumAlgebra`UDScript,
      BaseStyle->"RIndex"]]}],
   QuantumAlgebra`QuantumAlgebra`Braket,
   BaseStyle->"BraKetWrapper"], " ", 
  RowBox[{
   RowBox[{
    TagBox[
     RowBox[{
      SubscriptBox["\[InvisiblePrefixScriptBase]", 
       TagBox[
        AdjustmentBox[
         TagBox["2",
          QuantumAlgebra`QuantumAlgebra`BraArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0],
        QuantumAlgebra`QuantumAlgebra`UDScript,
        BaseStyle->"LIndex"]], 
      RowBox[{"\[LeftAngleBracket]", 
       AdjustmentBox[
        TagBox["\[Beta]",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0], 
       AdjustmentBox["\[VerticalSeparator]",
        BoxBaselineShift->-0.1,
        BoxMargins->{{0, -0.2}, {0, 0}}]}]}],
     QuantumAlgebra`QuantumAlgebra`Bra,
     BaseStyle->"BraWrapper"], "\[CircleTimes]", 
    TagBox[
     RowBox[{
      SubscriptBox["\[InvisiblePrefixScriptBase]", 
       TagBox[
        AdjustmentBox[
         TagBox["3",
          QuantumAlgebra`QuantumAlgebra`BraArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0],
        QuantumAlgebra`QuantumAlgebra`UDScript,
        BaseStyle->"LIndex"]], 
      RowBox[{"\[LeftAngleBracket]", 
       AdjustmentBox[
        TagBox["\[Gamma]",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0], 
       AdjustmentBox["\[VerticalSeparator]",
        BoxBaselineShift->-0.1,
        BoxMargins->{{0, -0.2}, {0, 0}}]}]}],
     QuantumAlgebra`QuantumAlgebra`Bra,
     BaseStyle->"BraWrapper"]}], "\[CenterDot]", 
   RowBox[{
    TagBox[
     SubscriptBox[
      RowBox[{
       AdjustmentBox["\[VerticalSeparator]",
        BoxBaselineShift->-0.1,
        BoxMargins->{{-0.2, 0}, {0, 0}}], 
       AdjustmentBox[
        TagBox["\[Nu]",
         QuantumAlgebra`QuantumAlgebra`KetArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0], "\[RightAngleBracket]"}], 
      TagBox[
       AdjustmentBox[
        TagBox["y",
         QuantumAlgebra`QuantumAlgebra`KetArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"RIndex"]],
     QuantumAlgebra`QuantumAlgebra`Ket,
     BaseStyle->"KetWrapper"], "\[CircleTimes]", 
    TagBox[
     SubscriptBox[
      RowBox[{
       AdjustmentBox["\[VerticalSeparator]",
        BoxBaselineShift->-0.1,
        BoxMargins->{{-0.2, 0}, {0, 0}}], 
       AdjustmentBox[
        TagBox["\[Rho]",
         QuantumAlgebra`QuantumAlgebra`KetArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0], "\[RightAngleBracket]"}], 
      TagBox[
       AdjustmentBox[
        TagBox["z",
         QuantumAlgebra`QuantumAlgebra`KetArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"RIndex"]],
     QuantumAlgebra`QuantumAlgebra`Ket,
     BaseStyle->"KetWrapper"]}]}]}]], "Output",
 CellChangeTimes->{
  3.474224517852607*^9, {3.4742344356090813`*^9, 3.474234439283292*^9}, {
   3.4742362620905504`*^9, 3.4742362685789213`*^9}, 3.5943800983609867`*^9}]
}, Open  ]],

Cell["\<\
In the next example, we want to compute the inner product of a basis vector \
and a general state, for a system of two particles whose state space is \
formed by the tensor product of two single ones.\
\>", "Text",
 CellChangeTimes->{{3.4441670698571997`*^9, 3.4441672189002*^9}, {
   3.4441672815011997`*^9, 3.4441675108202*^9}, {3.4441679408562*^9, 
   3.4441679567932*^9}, {3.4441679875292*^9, 3.4441680312222*^9}, 
   3.4442335496800003`*^9, {3.444258343979*^9, 3.444258408124*^9}, {
   3.4442584392720003`*^9, 3.444258583116*^9}, {3.444259104374*^9, 
   3.444259128984*^9}, {3.444259308072*^9, 3.44425931954*^9}, {
   3.444259359074*^9, 3.444259384764*^9}, {3.444259769109*^9, 
   3.444259805651*^9}, {3.444260246907*^9, 3.444260284258*^9}, {
   3.4442603378120003`*^9, 3.4442603672320004`*^9}, {3.44426050985*^9, 
   3.44426051192*^9}, {3.4452444046699457`*^9, 3.4452444519399457`*^9}, {
   3.474238340015401*^9, 3.474238347707841*^9}, {3.4742390557143364`*^9, 
   3.474239104000098*^9}, {3.474319835672838*^9, 3.474319835947854*^9}, {
   3.474319871602894*^9, 3.474319890230959*^9}, 3.4743199688794575`*^9, {
   3.4743200648729477`*^9, 3.4743201010260158`*^9}, {3.4743202320155077`*^9, 
   3.4743203243847914`*^9}, {3.4743204406114388`*^9, 3.474320446442773*^9}}],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{
  RowBox[{
   TagBox[
    RowBox[{
     SubsuperscriptBox["\[InvisiblePrefixScriptBase]", 
      TagBox[
       AdjustmentBox[
        TagBox["1",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"LIndex"], 
      TagBox[
       AdjustmentBox[
        TagBox["x",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"LIndex"]], 
     RowBox[{"\[LeftAngleBracket]", 
      AdjustmentBox[
       TagBox["p",
        QuantumAlgebra`QuantumAlgebra`BraArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], 
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{0, -0.2}, {0, 0}}]}]}],
    QuantumAlgebra`QuantumAlgebra`Bra,
    BaseStyle->"BraWrapper"], "\[CircleTimes]", 
   TagBox[
    RowBox[{
     SubsuperscriptBox["\[InvisiblePrefixScriptBase]", 
      TagBox[
       AdjustmentBox[
        TagBox["2",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"LIndex"], 
      TagBox[
       AdjustmentBox[
        TagBox["x",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"LIndex"]], 
     RowBox[{"\[LeftAngleBracket]", 
      AdjustmentBox[
       TagBox["q",
        QuantumAlgebra`QuantumAlgebra`BraArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], 
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{0, -0.2}, {0, 0}}]}]}],
    QuantumAlgebra`QuantumAlgebra`Bra,
    BaseStyle->"BraWrapper"]}], "\[CenterDot]", 
  TagBox[
   RowBox[{
    AdjustmentBox["\[VerticalSeparator]",
     BoxBaselineShift->-0.1,
     BoxMargins->{{-0.2, 0}, {0, 0}}], 
    AdjustmentBox[
     TagBox["\[Psi]",
      QuantumAlgebra`QuantumAlgebra`KetArgs,
      BaseStyle->"BraKetArg"],
     BoxBaselineShift->0], "\[RightAngleBracket]"}],
   QuantumAlgebra`QuantumAlgebra`Ket,
   BaseStyle->"KetWrapper"]}]], "Input",
 CellChangeTimes->{{3.4441676188682003`*^9, 3.4441676755132*^9}, {
  3.4441687760462*^9, 3.4441687874532003`*^9}, {3.444259351233*^9, 
  3.444259357314*^9}, {3.444259395396*^9, 3.444259478624*^9}, {
  3.4442603966800003`*^9, 3.444260478613*^9}, {3.5943801943944798`*^9, 
  3.594380201616893*^9}}],

Cell[BoxData[
 RowBox[{
  RowBox[{
   TagBox[
    RowBox[{
     SubsuperscriptBox["\[InvisiblePrefixScriptBase]", 
      TagBox[
       AdjustmentBox[
        TagBox["1",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"LIndex"], 
      TagBox[
       AdjustmentBox[
        TagBox["x",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"LIndex"]], 
     RowBox[{"\[LeftAngleBracket]", 
      AdjustmentBox[
       TagBox["p",
        QuantumAlgebra`QuantumAlgebra`BraArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], 
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{0, -0.2}, {0, 0}}]}]}],
    QuantumAlgebra`QuantumAlgebra`Bra,
    BaseStyle->"BraWrapper"], "\[CircleTimes]", 
   TagBox[
    RowBox[{
     SubsuperscriptBox["\[InvisiblePrefixScriptBase]", 
      TagBox[
       AdjustmentBox[
        TagBox["2",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"LIndex"], 
      TagBox[
       AdjustmentBox[
        TagBox["x",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"LIndex"]], 
     RowBox[{"\[LeftAngleBracket]", 
      AdjustmentBox[
       TagBox["q",
        QuantumAlgebra`QuantumAlgebra`BraArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], 
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{0, -0.2}, {0, 0}}]}]}],
    QuantumAlgebra`QuantumAlgebra`Bra,
    BaseStyle->"BraWrapper"]}], "\[CenterDot]", 
  TagBox[
   RowBox[{
    AdjustmentBox["\[VerticalSeparator]",
     BoxBaselineShift->-0.1,
     BoxMargins->{{-0.2, 0}, {0, 0}}], 
    AdjustmentBox[
     TagBox["\[Psi]",
      QuantumAlgebra`QuantumAlgebra`KetArgs,
      BaseStyle->"BraKetArg"],
     BoxBaselineShift->0], "\[RightAngleBracket]"}],
   QuantumAlgebra`QuantumAlgebra`Ket,
   BaseStyle->"KetWrapper"]}]], "Output",
 CellChangeTimes->{3.474238362330677*^9, 3.474320397841993*^9, 
  3.5943802018279047`*^9}]
}, Open  ]],

Cell["\<\
Our notation is as follows, the subscripts are labeling the single state \
spaces, while the superscripts are labeling some particular basis in these \
state spaces. Now, suppose that we know the expansion of the state \[Psi] in \
some basis of the two\[Dash]rank vector space. We can plug it into the inner \
product using a local rule: \
\>", "Text",
 CellChangeTimes->{{3.444260535505*^9, 3.444260555557*^9}, {3.444260599652*^9,
   3.444260752658*^9}, {3.4452445421719456`*^9, 3.4452445732799454`*^9}, {
  3.474239128767515*^9, 3.4742392079620447`*^9}, {3.4743204237804766`*^9, 
  3.4743204772315335`*^9}, {3.474320509020352*^9, 3.4743205182128773`*^9}, {
  3.5943802119324827`*^9, 3.5943802122054987`*^9}}],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"\[Psi]Rule", "=", "\[IndentingNewLine]", 
  RowBox[{
   TagBox[
    RowBox[{
     AdjustmentBox["\[VerticalSeparator]",
      BoxBaselineShift->-0.1,
      BoxMargins->{{-0.2, 0.}, {0., 0.}}], 
     AdjustmentBox[
      TagBox["\[Psi]",
       QuantumAlgebra`QuantumAlgebra`KetArgs,
       BaseStyle->"BraKetArg"],
      BoxBaselineShift->0], "\[RightAngleBracket]"}],
    QuantumAlgebra`QuantumAlgebra`Ket,
    BaseStyle->"KetWrapper"], "\[Rule]", "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{
     TagBox[
      SubscriptBox[
       RowBox[{
        AdjustmentBox["\[VerticalSeparator]",
         BoxBaselineShift->-0.1,
         BoxMargins->{{-0.2, 0}, {0, 0}}], 
        AdjustmentBox[
         TagBox["p",
          QuantumAlgebra`QuantumAlgebra`KetArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0], "\[RightAngleBracket]"}], 
       TagBox[
        AdjustmentBox[
         TagBox["1",
          QuantumAlgebra`QuantumAlgebra`KetArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0],
        QuantumAlgebra`QuantumAlgebra`UDScript,
        BaseStyle->"RIndex"]],
      QuantumAlgebra`QuantumAlgebra`Ket,
      BaseStyle->"KetWrapper"], "\[CircleTimes]", 
     TagBox[
      SubscriptBox[
       RowBox[{
        AdjustmentBox["\[VerticalSeparator]",
         BoxBaselineShift->-0.1,
         BoxMargins->{{-0.2, 0}, {0, 0}}], 
        AdjustmentBox[
         TagBox["q",
          QuantumAlgebra`QuantumAlgebra`KetArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0], "\[RightAngleBracket]"}], 
       TagBox[
        AdjustmentBox[
         TagBox["2",
          QuantumAlgebra`QuantumAlgebra`KetArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0],
        QuantumAlgebra`QuantumAlgebra`UDScript,
        BaseStyle->"RIndex"]],
      QuantumAlgebra`QuantumAlgebra`Ket,
      BaseStyle->"KetWrapper"]}], "+", 
    RowBox[{
     TagBox[
      SubscriptBox[
       RowBox[{
        AdjustmentBox["\[VerticalSeparator]",
         BoxBaselineShift->-0.1,
         BoxMargins->{{-0.2, 0}, {0, 0}}], 
        AdjustmentBox[
         TagBox["q",
          QuantumAlgebra`QuantumAlgebra`KetArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0], "\[RightAngleBracket]"}], 
       TagBox[
        AdjustmentBox[
         TagBox["1",
          QuantumAlgebra`QuantumAlgebra`KetArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0],
        QuantumAlgebra`QuantumAlgebra`UDScript,
        BaseStyle->"RIndex"]],
      QuantumAlgebra`QuantumAlgebra`Ket,
      BaseStyle->"KetWrapper"], "\[CircleTimes]", 
     TagBox[
      SubscriptBox[
       RowBox[{
        AdjustmentBox["\[VerticalSeparator]",
         BoxBaselineShift->-0.1,
         BoxMargins->{{-0.2, 0}, {0, 0}}], 
        AdjustmentBox[
         TagBox["p",
          QuantumAlgebra`QuantumAlgebra`KetArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0], "\[RightAngleBracket]"}], 
       TagBox[
        AdjustmentBox[
         TagBox["2",
          QuantumAlgebra`QuantumAlgebra`KetArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0],
        QuantumAlgebra`QuantumAlgebra`UDScript,
        BaseStyle->"RIndex"]],
      QuantumAlgebra`QuantumAlgebra`Ket,
      BaseStyle->"KetWrapper"]}], "+", 
    RowBox[{
     TagBox[
      SubscriptBox[
       RowBox[{
        AdjustmentBox["\[VerticalSeparator]",
         BoxBaselineShift->-0.1,
         BoxMargins->{{-0.2, 0}, {0, 0}}], 
        AdjustmentBox[
         TagBox["q",
          QuantumAlgebra`QuantumAlgebra`KetArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0], "\[RightAngleBracket]"}], 
       TagBox[
        AdjustmentBox[
         TagBox["1",
          QuantumAlgebra`QuantumAlgebra`KetArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0],
        QuantumAlgebra`QuantumAlgebra`UDScript,
        BaseStyle->"RIndex"]],
      QuantumAlgebra`QuantumAlgebra`Ket,
      BaseStyle->"KetWrapper"], "\[CircleTimes]", 
     TagBox[
      SubscriptBox[
       RowBox[{
        AdjustmentBox["\[VerticalSeparator]",
         BoxBaselineShift->-0.1,
         BoxMargins->{{-0.2, 0}, {0, 0}}], 
        AdjustmentBox[
         TagBox["q",
          QuantumAlgebra`QuantumAlgebra`KetArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0], "\[RightAngleBracket]"}], 
       TagBox[
        AdjustmentBox[
         TagBox["2",
          QuantumAlgebra`QuantumAlgebra`KetArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0],
        QuantumAlgebra`QuantumAlgebra`UDScript,
        BaseStyle->"RIndex"]],
      QuantumAlgebra`QuantumAlgebra`Ket,
      BaseStyle->"KetWrapper"]}], "+", 
    RowBox[{
     TagBox[
      SubscriptBox[
       RowBox[{
        AdjustmentBox["\[VerticalSeparator]",
         BoxBaselineShift->-0.1,
         BoxMargins->{{-0.2, 0}, {0, 0}}], 
        AdjustmentBox[
         TagBox["p",
          QuantumAlgebra`QuantumAlgebra`KetArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0], "\[RightAngleBracket]"}], 
       TagBox[
        AdjustmentBox[
         TagBox["1",
          QuantumAlgebra`QuantumAlgebra`KetArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0],
        QuantumAlgebra`QuantumAlgebra`UDScript,
        BaseStyle->"RIndex"]],
      QuantumAlgebra`QuantumAlgebra`Ket,
      BaseStyle->"KetWrapper"], "\[CircleTimes]", 
     TagBox[
      SubscriptBox[
       RowBox[{
        AdjustmentBox["\[VerticalSeparator]",
         BoxBaselineShift->-0.1,
         BoxMargins->{{-0.2, 0}, {0, 0}}], 
        AdjustmentBox[
         TagBox["p",
          QuantumAlgebra`QuantumAlgebra`KetArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0], "\[RightAngleBracket]"}], 
       TagBox[
        AdjustmentBox[
         TagBox["2",
          QuantumAlgebra`QuantumAlgebra`KetArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0],
        QuantumAlgebra`QuantumAlgebra`UDScript,
        BaseStyle->"RIndex"]],
      QuantumAlgebra`QuantumAlgebra`Ket,
      BaseStyle->"KetWrapper"]}]}]}]}]], "Input",
 CellChangeTimes->{{3.4742385908917503`*^9, 3.4742386115979347`*^9}, {
  3.4742390159520626`*^9, 3.474239016888116*^9}, {3.5943803290831833`*^9, 
  3.5943803562937403`*^9}}],

Cell[BoxData[
 RowBox[{
  TagBox[
   RowBox[{
    AdjustmentBox["\[VerticalSeparator]",
     BoxBaselineShift->-0.1,
     BoxMargins->{{-0.2, 0}, {0, 0}}], 
    AdjustmentBox[
     TagBox["\[Psi]",
      QuantumAlgebra`QuantumAlgebra`KetArgs,
      BaseStyle->"BraKetArg"],
     BoxBaselineShift->0], "\[RightAngleBracket]"}],
   QuantumAlgebra`QuantumAlgebra`Ket,
   BaseStyle->"KetWrapper"], "\[Rule]", 
  RowBox[{
   RowBox[{
    TagBox[
     SubscriptBox[
      RowBox[{
       AdjustmentBox["\[VerticalSeparator]",
        BoxBaselineShift->-0.1,
        BoxMargins->{{-0.2, 0}, {0, 0}}], 
       AdjustmentBox[
        TagBox["p",
         QuantumAlgebra`QuantumAlgebra`KetArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0], "\[RightAngleBracket]"}], 
      TagBox[
       AdjustmentBox[
        TagBox["1",
         QuantumAlgebra`QuantumAlgebra`KetArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"RIndex"]],
     QuantumAlgebra`QuantumAlgebra`Ket,
     BaseStyle->"KetWrapper"], "\[CircleTimes]", 
    TagBox[
     SubscriptBox[
      RowBox[{
       AdjustmentBox["\[VerticalSeparator]",
        BoxBaselineShift->-0.1,
        BoxMargins->{{-0.2, 0}, {0, 0}}], 
       AdjustmentBox[
        TagBox["p",
         QuantumAlgebra`QuantumAlgebra`KetArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0], "\[RightAngleBracket]"}], 
      TagBox[
       AdjustmentBox[
        TagBox["2",
         QuantumAlgebra`QuantumAlgebra`KetArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"RIndex"]],
     QuantumAlgebra`QuantumAlgebra`Ket,
     BaseStyle->"KetWrapper"]}], "+", 
   RowBox[{
    TagBox[
     SubscriptBox[
      RowBox[{
       AdjustmentBox["\[VerticalSeparator]",
        BoxBaselineShift->-0.1,
        BoxMargins->{{-0.2, 0}, {0, 0}}], 
       AdjustmentBox[
        TagBox["p",
         QuantumAlgebra`QuantumAlgebra`KetArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0], "\[RightAngleBracket]"}], 
      TagBox[
       AdjustmentBox[
        TagBox["1",
         QuantumAlgebra`QuantumAlgebra`KetArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"RIndex"]],
     QuantumAlgebra`QuantumAlgebra`Ket,
     BaseStyle->"KetWrapper"], "\[CircleTimes]", 
    TagBox[
     SubscriptBox[
      RowBox[{
       AdjustmentBox["\[VerticalSeparator]",
        BoxBaselineShift->-0.1,
        BoxMargins->{{-0.2, 0}, {0, 0}}], 
       AdjustmentBox[
        TagBox["q",
         QuantumAlgebra`QuantumAlgebra`KetArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0], "\[RightAngleBracket]"}], 
      TagBox[
       AdjustmentBox[
        TagBox["2",
         QuantumAlgebra`QuantumAlgebra`KetArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"RIndex"]],
     QuantumAlgebra`QuantumAlgebra`Ket,
     BaseStyle->"KetWrapper"]}], "+", 
   RowBox[{
    TagBox[
     SubscriptBox[
      RowBox[{
       AdjustmentBox["\[VerticalSeparator]",
        BoxBaselineShift->-0.1,
        BoxMargins->{{-0.2, 0}, {0, 0}}], 
       AdjustmentBox[
        TagBox["p",
         QuantumAlgebra`QuantumAlgebra`KetArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0], "\[RightAngleBracket]"}], 
      TagBox[
       AdjustmentBox[
        TagBox["2",
         QuantumAlgebra`QuantumAlgebra`KetArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"RIndex"]],
     QuantumAlgebra`QuantumAlgebra`Ket,
     BaseStyle->"KetWrapper"], "\[CircleTimes]", 
    TagBox[
     SubscriptBox[
      RowBox[{
       AdjustmentBox["\[VerticalSeparator]",
        BoxBaselineShift->-0.1,
        BoxMargins->{{-0.2, 0}, {0, 0}}], 
       AdjustmentBox[
        TagBox["q",
         QuantumAlgebra`QuantumAlgebra`KetArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0], "\[RightAngleBracket]"}], 
      TagBox[
       AdjustmentBox[
        TagBox["1",
         QuantumAlgebra`QuantumAlgebra`KetArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"RIndex"]],
     QuantumAlgebra`QuantumAlgebra`Ket,
     BaseStyle->"KetWrapper"]}], "+", 
   RowBox[{
    TagBox[
     SubscriptBox[
      RowBox[{
       AdjustmentBox["\[VerticalSeparator]",
        BoxBaselineShift->-0.1,
        BoxMargins->{{-0.2, 0}, {0, 0}}], 
       AdjustmentBox[
        TagBox["q",
         QuantumAlgebra`QuantumAlgebra`KetArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0], "\[RightAngleBracket]"}], 
      TagBox[
       AdjustmentBox[
        TagBox["1",
         QuantumAlgebra`QuantumAlgebra`KetArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"RIndex"]],
     QuantumAlgebra`QuantumAlgebra`Ket,
     BaseStyle->"KetWrapper"], "\[CircleTimes]", 
    TagBox[
     SubscriptBox[
      RowBox[{
       AdjustmentBox["\[VerticalSeparator]",
        BoxBaselineShift->-0.1,
        BoxMargins->{{-0.2, 0}, {0, 0}}], 
       AdjustmentBox[
        TagBox["q",
         QuantumAlgebra`QuantumAlgebra`KetArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0], "\[RightAngleBracket]"}], 
      TagBox[
       AdjustmentBox[
        TagBox["2",
         QuantumAlgebra`QuantumAlgebra`KetArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"RIndex"]],
     QuantumAlgebra`QuantumAlgebra`Ket,
     BaseStyle->"KetWrapper"]}]}]}]], "Output",
 CellChangeTimes->{3.474238612099963*^9, 3.4742390174101458`*^9, 
  3.47432053136663*^9, 3.5943803998552313`*^9}]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{
  RowBox[{
   RowBox[{
    TagBox[
     RowBox[{
      SubsuperscriptBox["\[InvisiblePrefixScriptBase]", 
       TagBox[
        AdjustmentBox[
         TagBox["1",
          QuantumAlgebra`QuantumAlgebra`BraArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0],
        QuantumAlgebra`QuantumAlgebra`UDScript,
        BaseStyle->"LIndex"], 
       TagBox[
        AdjustmentBox[
         TagBox["x",
          QuantumAlgebra`QuantumAlgebra`BraArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0],
        QuantumAlgebra`QuantumAlgebra`UDScript,
        BaseStyle->"LIndex"]], 
      RowBox[{"\[LeftAngleBracket]", 
       AdjustmentBox[
        TagBox["p",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0], 
       AdjustmentBox["\[VerticalSeparator]",
        BoxBaselineShift->-0.1,
        BoxMargins->{{0, -0.2}, {0, 0}}]}]}],
     QuantumAlgebra`QuantumAlgebra`Bra,
     BaseStyle->"BraWrapper"], "\[CircleTimes]", 
    TagBox[
     RowBox[{
      SubsuperscriptBox["\[InvisiblePrefixScriptBase]", 
       TagBox[
        AdjustmentBox[
         TagBox["2",
          QuantumAlgebra`QuantumAlgebra`BraArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0],
        QuantumAlgebra`QuantumAlgebra`UDScript,
        BaseStyle->"LIndex"], 
       TagBox[
        AdjustmentBox[
         TagBox["x",
          QuantumAlgebra`QuantumAlgebra`BraArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0],
        QuantumAlgebra`QuantumAlgebra`UDScript,
        BaseStyle->"LIndex"]], 
      RowBox[{"\[LeftAngleBracket]", 
       AdjustmentBox[
        TagBox["q",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0], 
       AdjustmentBox["\[VerticalSeparator]",
        BoxBaselineShift->-0.1,
        BoxMargins->{{0, -0.2}, {0, 0}}]}]}],
     QuantumAlgebra`QuantumAlgebra`Bra,
     BaseStyle->"BraWrapper"]}], "\[CenterDot]", 
   TagBox[
    RowBox[{
     AdjustmentBox["\[VerticalSeparator]",
      BoxBaselineShift->-0.1,
      BoxMargins->{{-0.2, 0}, {0, 0}}], 
     AdjustmentBox[
      TagBox["\[Psi]",
       QuantumAlgebra`QuantumAlgebra`KetArgs,
       BaseStyle->"BraKetArg"],
      BoxBaselineShift->0], "\[RightAngleBracket]"}],
    QuantumAlgebra`QuantumAlgebra`Ket,
    BaseStyle->"KetWrapper"]}], "/.", "\[Psi]Rule"}]], "Input",
 CellChangeTimes->{
  3.444260493704*^9, {3.4452445106399455`*^9, 3.4452445143219457`*^9}, {
   3.4742385874165516`*^9, 3.474238621643509*^9}, {3.474238961797965*^9, 
   3.474238971992548*^9}, {3.474239007648587*^9, 3.474239010301739*^9}, 
   3.5943803902096796`*^9}],

Cell[BoxData[
 RowBox[{
  RowBox[{
   RowBox[{
    TagBox[
     RowBox[{
      SubsuperscriptBox["\[InvisiblePrefixScriptBase]", 
       TagBox[
        AdjustmentBox[
         TagBox["1",
          QuantumAlgebra`QuantumAlgebra`BraArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0],
        QuantumAlgebra`QuantumAlgebra`UDScript,
        BaseStyle->"LIndex"], 
       TagBox[
        AdjustmentBox[
         TagBox["x",
          QuantumAlgebra`QuantumAlgebra`BraArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0],
        QuantumAlgebra`QuantumAlgebra`UDScript,
        BaseStyle->"LIndex"]], 
      RowBox[{"\[LeftAngleBracket]", 
       AdjustmentBox[
        TagBox["p",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0], 
       AdjustmentBox["\[VerticalSeparator]",
        BoxBaselineShift->-0.1,
        BoxMargins->{{0, -0.2}, {0, 0}}]}]}],
     QuantumAlgebra`QuantumAlgebra`Bra,
     BaseStyle->"BraWrapper"], "\[CircleTimes]", 
    TagBox[
     RowBox[{
      SubsuperscriptBox["\[InvisiblePrefixScriptBase]", 
       TagBox[
        AdjustmentBox[
         TagBox["2",
          QuantumAlgebra`QuantumAlgebra`BraArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0],
        QuantumAlgebra`QuantumAlgebra`UDScript,
        BaseStyle->"LIndex"], 
       TagBox[
        AdjustmentBox[
         TagBox["x",
          QuantumAlgebra`QuantumAlgebra`BraArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0],
        QuantumAlgebra`QuantumAlgebra`UDScript,
        BaseStyle->"LIndex"]], 
      RowBox[{"\[LeftAngleBracket]", 
       AdjustmentBox[
        TagBox["q",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0], 
       AdjustmentBox["\[VerticalSeparator]",
        BoxBaselineShift->-0.1,
        BoxMargins->{{0, -0.2}, {0, 0}}]}]}],
     QuantumAlgebra`QuantumAlgebra`Bra,
     BaseStyle->"BraWrapper"]}], "\[CenterDot]", 
   RowBox[{
    TagBox[
     SubscriptBox[
      RowBox[{
       AdjustmentBox["\[VerticalSeparator]",
        BoxBaselineShift->-0.1,
        BoxMargins->{{-0.2, 0}, {0, 0}}], 
       AdjustmentBox[
        TagBox["p",
         QuantumAlgebra`QuantumAlgebra`KetArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0], "\[RightAngleBracket]"}], 
      TagBox[
       AdjustmentBox[
        TagBox["1",
         QuantumAlgebra`QuantumAlgebra`KetArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"RIndex"]],
     QuantumAlgebra`QuantumAlgebra`Ket,
     BaseStyle->"KetWrapper"], "\[CircleTimes]", 
    TagBox[
     SubscriptBox[
      RowBox[{
       AdjustmentBox["\[VerticalSeparator]",
        BoxBaselineShift->-0.1,
        BoxMargins->{{-0.2, 0}, {0, 0}}], 
       AdjustmentBox[
        TagBox["p",
         QuantumAlgebra`QuantumAlgebra`KetArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0], "\[RightAngleBracket]"}], 
      TagBox[
       AdjustmentBox[
        TagBox["2",
         QuantumAlgebra`QuantumAlgebra`KetArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"RIndex"]],
     QuantumAlgebra`QuantumAlgebra`Ket,
     BaseStyle->"KetWrapper"]}]}], "+", 
  RowBox[{
   RowBox[{
    TagBox[
     RowBox[{
      SubsuperscriptBox["\[InvisiblePrefixScriptBase]", 
       TagBox[
        AdjustmentBox[
         TagBox["1",
          QuantumAlgebra`QuantumAlgebra`BraArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0],
        QuantumAlgebra`QuantumAlgebra`UDScript,
        BaseStyle->"LIndex"], 
       TagBox[
        AdjustmentBox[
         TagBox["x",
          QuantumAlgebra`QuantumAlgebra`BraArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0],
        QuantumAlgebra`QuantumAlgebra`UDScript,
        BaseStyle->"LIndex"]], 
      RowBox[{"\[LeftAngleBracket]", 
       AdjustmentBox[
        TagBox["p",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0], 
       AdjustmentBox["\[VerticalSeparator]",
        BoxBaselineShift->-0.1,
        BoxMargins->{{0, -0.2}, {0, 0}}]}]}],
     QuantumAlgebra`QuantumAlgebra`Bra,
     BaseStyle->"BraWrapper"], "\[CircleTimes]", 
    TagBox[
     RowBox[{
      SubsuperscriptBox["\[InvisiblePrefixScriptBase]", 
       TagBox[
        AdjustmentBox[
         TagBox["2",
          QuantumAlgebra`QuantumAlgebra`BraArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0],
        QuantumAlgebra`QuantumAlgebra`UDScript,
        BaseStyle->"LIndex"], 
       TagBox[
        AdjustmentBox[
         TagBox["x",
          QuantumAlgebra`QuantumAlgebra`BraArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0],
        QuantumAlgebra`QuantumAlgebra`UDScript,
        BaseStyle->"LIndex"]], 
      RowBox[{"\[LeftAngleBracket]", 
       AdjustmentBox[
        TagBox["q",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0], 
       AdjustmentBox["\[VerticalSeparator]",
        BoxBaselineShift->-0.1,
        BoxMargins->{{0, -0.2}, {0, 0}}]}]}],
     QuantumAlgebra`QuantumAlgebra`Bra,
     BaseStyle->"BraWrapper"]}], "\[CenterDot]", 
   RowBox[{
    TagBox[
     SubscriptBox[
      RowBox[{
       AdjustmentBox["\[VerticalSeparator]",
        BoxBaselineShift->-0.1,
        BoxMargins->{{-0.2, 0}, {0, 0}}], 
       AdjustmentBox[
        TagBox["p",
         QuantumAlgebra`QuantumAlgebra`KetArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0], "\[RightAngleBracket]"}], 
      TagBox[
       AdjustmentBox[
        TagBox["1",
         QuantumAlgebra`QuantumAlgebra`KetArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"RIndex"]],
     QuantumAlgebra`QuantumAlgebra`Ket,
     BaseStyle->"KetWrapper"], "\[CircleTimes]", 
    TagBox[
     SubscriptBox[
      RowBox[{
       AdjustmentBox["\[VerticalSeparator]",
        BoxBaselineShift->-0.1,
        BoxMargins->{{-0.2, 0}, {0, 0}}], 
       AdjustmentBox[
        TagBox["q",
         QuantumAlgebra`QuantumAlgebra`KetArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0], "\[RightAngleBracket]"}], 
      TagBox[
       AdjustmentBox[
        TagBox["2",
         QuantumAlgebra`QuantumAlgebra`KetArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"RIndex"]],
     QuantumAlgebra`QuantumAlgebra`Ket,
     BaseStyle->"KetWrapper"]}]}], "+", 
  RowBox[{
   RowBox[{
    TagBox[
     RowBox[{
      SubsuperscriptBox["\[InvisiblePrefixScriptBase]", 
       TagBox[
        AdjustmentBox[
         TagBox["1",
          QuantumAlgebra`QuantumAlgebra`BraArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0],
        QuantumAlgebra`QuantumAlgebra`UDScript,
        BaseStyle->"LIndex"], 
       TagBox[
        AdjustmentBox[
         TagBox["x",
          QuantumAlgebra`QuantumAlgebra`BraArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0],
        QuantumAlgebra`QuantumAlgebra`UDScript,
        BaseStyle->"LIndex"]], 
      RowBox[{"\[LeftAngleBracket]", 
       AdjustmentBox[
        TagBox["p",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0], 
       AdjustmentBox["\[VerticalSeparator]",
        BoxBaselineShift->-0.1,
        BoxMargins->{{0, -0.2}, {0, 0}}]}]}],
     QuantumAlgebra`QuantumAlgebra`Bra,
     BaseStyle->"BraWrapper"], "\[CircleTimes]", 
    TagBox[
     RowBox[{
      SubsuperscriptBox["\[InvisiblePrefixScriptBase]", 
       TagBox[
        AdjustmentBox[
         TagBox["2",
          QuantumAlgebra`QuantumAlgebra`BraArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0],
        QuantumAlgebra`QuantumAlgebra`UDScript,
        BaseStyle->"LIndex"], 
       TagBox[
        AdjustmentBox[
         TagBox["x",
          QuantumAlgebra`QuantumAlgebra`BraArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0],
        QuantumAlgebra`QuantumAlgebra`UDScript,
        BaseStyle->"LIndex"]], 
      RowBox[{"\[LeftAngleBracket]", 
       AdjustmentBox[
        TagBox["q",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0], 
       AdjustmentBox["\[VerticalSeparator]",
        BoxBaselineShift->-0.1,
        BoxMargins->{{0, -0.2}, {0, 0}}]}]}],
     QuantumAlgebra`QuantumAlgebra`Bra,
     BaseStyle->"BraWrapper"]}], "\[CenterDot]", 
   RowBox[{
    TagBox[
     SubscriptBox[
      RowBox[{
       AdjustmentBox["\[VerticalSeparator]",
        BoxBaselineShift->-0.1,
        BoxMargins->{{-0.2, 0}, {0, 0}}], 
       AdjustmentBox[
        TagBox["p",
         QuantumAlgebra`QuantumAlgebra`KetArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0], "\[RightAngleBracket]"}], 
      TagBox[
       AdjustmentBox[
        TagBox["2",
         QuantumAlgebra`QuantumAlgebra`KetArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"RIndex"]],
     QuantumAlgebra`QuantumAlgebra`Ket,
     BaseStyle->"KetWrapper"], "\[CircleTimes]", 
    TagBox[
     SubscriptBox[
      RowBox[{
       AdjustmentBox["\[VerticalSeparator]",
        BoxBaselineShift->-0.1,
        BoxMargins->{{-0.2, 0}, {0, 0}}], 
       AdjustmentBox[
        TagBox["q",
         QuantumAlgebra`QuantumAlgebra`KetArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0], "\[RightAngleBracket]"}], 
      TagBox[
       AdjustmentBox[
        TagBox["1",
         QuantumAlgebra`QuantumAlgebra`KetArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"RIndex"]],
     QuantumAlgebra`QuantumAlgebra`Ket,
     BaseStyle->"KetWrapper"]}]}], "+", 
  RowBox[{
   RowBox[{
    TagBox[
     RowBox[{
      SubsuperscriptBox["\[InvisiblePrefixScriptBase]", 
       TagBox[
        AdjustmentBox[
         TagBox["1",
          QuantumAlgebra`QuantumAlgebra`BraArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0],
        QuantumAlgebra`QuantumAlgebra`UDScript,
        BaseStyle->"LIndex"], 
       TagBox[
        AdjustmentBox[
         TagBox["x",
          QuantumAlgebra`QuantumAlgebra`BraArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0],
        QuantumAlgebra`QuantumAlgebra`UDScript,
        BaseStyle->"LIndex"]], 
      RowBox[{"\[LeftAngleBracket]", 
       AdjustmentBox[
        TagBox["p",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0], 
       AdjustmentBox["\[VerticalSeparator]",
        BoxBaselineShift->-0.1,
        BoxMargins->{{0, -0.2}, {0, 0}}]}]}],
     QuantumAlgebra`QuantumAlgebra`Bra,
     BaseStyle->"BraWrapper"], "\[CircleTimes]", 
    TagBox[
     RowBox[{
      SubsuperscriptBox["\[InvisiblePrefixScriptBase]", 
       TagBox[
        AdjustmentBox[
         TagBox["2",
          QuantumAlgebra`QuantumAlgebra`BraArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0],
        QuantumAlgebra`QuantumAlgebra`UDScript,
        BaseStyle->"LIndex"], 
       TagBox[
        AdjustmentBox[
         TagBox["x",
          QuantumAlgebra`QuantumAlgebra`BraArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0],
        QuantumAlgebra`QuantumAlgebra`UDScript,
        BaseStyle->"LIndex"]], 
      RowBox[{"\[LeftAngleBracket]", 
       AdjustmentBox[
        TagBox["q",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0], 
       AdjustmentBox["\[VerticalSeparator]",
        BoxBaselineShift->-0.1,
        BoxMargins->{{0, -0.2}, {0, 0}}]}]}],
     QuantumAlgebra`QuantumAlgebra`Bra,
     BaseStyle->"BraWrapper"]}], "\[CenterDot]", 
   RowBox[{
    TagBox[
     SubscriptBox[
      RowBox[{
       AdjustmentBox["\[VerticalSeparator]",
        BoxBaselineShift->-0.1,
        BoxMargins->{{-0.2, 0}, {0, 0}}], 
       AdjustmentBox[
        TagBox["q",
         QuantumAlgebra`QuantumAlgebra`KetArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0], "\[RightAngleBracket]"}], 
      TagBox[
       AdjustmentBox[
        TagBox["1",
         QuantumAlgebra`QuantumAlgebra`KetArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"RIndex"]],
     QuantumAlgebra`QuantumAlgebra`Ket,
     BaseStyle->"KetWrapper"], "\[CircleTimes]", 
    TagBox[
     SubscriptBox[
      RowBox[{
       AdjustmentBox["\[VerticalSeparator]",
        BoxBaselineShift->-0.1,
        BoxMargins->{{-0.2, 0}, {0, 0}}], 
       AdjustmentBox[
        TagBox["q",
         QuantumAlgebra`QuantumAlgebra`KetArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0], "\[RightAngleBracket]"}], 
      TagBox[
       AdjustmentBox[
        TagBox["2",
         QuantumAlgebra`QuantumAlgebra`KetArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"RIndex"]],
     QuantumAlgebra`QuantumAlgebra`Ket,
     BaseStyle->"KetWrapper"]}]}]}]], "Output",
 CellChangeTimes->{
  3.474238553540614*^9, 3.474238621883523*^9, 3.4742389739596605`*^9, {
   3.4742390113738003`*^9, 3.4742390183281984`*^9}, 3.4743205333587437`*^9, {
   3.594380391074729*^9, 3.594380400657277*^9}, 3.5943804631508517`*^9}]
}, Open  ]],

Cell["\<\
No braketing has took place as there is not matching elements of bras and \
kets. Of course this is because we are working with different basis set in \
each state space. To finish our calculation we express the bra basis vector \
in the same basis as the \[Psi] state:\
\>", "Text",
 CellChangeTimes->{{3.4441690549941998`*^9, 3.4441691667382*^9}, {
  3.4441692318612003`*^9, 3.4441692911071997`*^9}, {3.4441695791532*^9, 
  3.4441695956682*^9}, {3.4442541780810003`*^9, 3.4442541794110003`*^9}, {
  3.444255577285*^9, 3.44425578421*^9}, {3.444255943178*^9, 
  3.444255970119*^9}, {3.4442595673929996`*^9, 3.444259606899*^9}, {
  3.4442597168859997`*^9, 3.444259742925*^9}, {3.444260767663*^9, 
  3.444260767797*^9}, {3.4452446069549456`*^9, 3.4452446165109453`*^9}, {
  3.4742385669513807`*^9, 3.474238579996127*^9}, {3.474239218945673*^9, 
  3.474239278058054*^9}, {3.4743205442113647`*^9, 3.474320591140049*^9}, {
  3.594380436228312*^9, 3.5943804365173283`*^9}}],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"%", " ", "/.", 
  RowBox[{"{", 
   RowBox[{
    RowBox[{
     TagBox[
      RowBox[{
       SubsuperscriptBox["\[InvisiblePrefixScriptBase]", 
        TagBox[
         AdjustmentBox[
          TagBox["1",
           QuantumAlgebra`QuantumAlgebra`BraArgs,
           BaseStyle->"BraKetArg"],
          BoxBaselineShift->0],
         QuantumAlgebra`QuantumAlgebra`UDScript,
         BaseStyle->"LIndex"], 
        TagBox[
         AdjustmentBox[
          TagBox["x",
           QuantumAlgebra`QuantumAlgebra`BraArgs,
           BaseStyle->"BraKetArg"],
          BoxBaselineShift->0],
         QuantumAlgebra`QuantumAlgebra`UDScript,
         BaseStyle->"LIndex"]], 
       RowBox[{"\[LeftAngleBracket]", 
        AdjustmentBox[
         TagBox["p",
          QuantumAlgebra`QuantumAlgebra`BraArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0], 
        AdjustmentBox["\[VerticalSeparator]",
         BoxBaselineShift->-0.1,
         BoxMargins->{{0, -0.2}, {0, 0}}]}]}],
      QuantumAlgebra`QuantumAlgebra`Bra,
      BaseStyle->"BraWrapper"], "\[Rule]", 
     RowBox[{
      TagBox[
       RowBox[{
        SubscriptBox["\[InvisiblePrefixScriptBase]", 
         TagBox[
          AdjustmentBox[
           TagBox["1",
            QuantumAlgebra`QuantumAlgebra`BraArgs,
            BaseStyle->"BraKetArg"],
           BoxBaselineShift->0],
          QuantumAlgebra`QuantumAlgebra`UDScript,
          BaseStyle->"LIndex"]], 
        RowBox[{"\[LeftAngleBracket]", 
         AdjustmentBox[
          TagBox["p",
           QuantumAlgebra`QuantumAlgebra`BraArgs,
           BaseStyle->"BraKetArg"],
          BoxBaselineShift->0], 
         AdjustmentBox["\[VerticalSeparator]",
          BoxBaselineShift->-0.1,
          BoxMargins->{{0, -0.2}, {0, 0}}]}]}],
       QuantumAlgebra`QuantumAlgebra`Bra,
       BaseStyle->"BraWrapper"], "+", 
      TagBox[
       RowBox[{
        SubscriptBox["\[InvisiblePrefixScriptBase]", 
         TagBox[
          AdjustmentBox[
           TagBox["1",
            QuantumAlgebra`QuantumAlgebra`BraArgs,
            BaseStyle->"BraKetArg"],
           BoxBaselineShift->0],
          QuantumAlgebra`QuantumAlgebra`UDScript,
          BaseStyle->"LIndex"]], 
        RowBox[{"\[LeftAngleBracket]", 
         AdjustmentBox[
          TagBox["q",
           QuantumAlgebra`QuantumAlgebra`BraArgs,
           BaseStyle->"BraKetArg"],
          BoxBaselineShift->0], 
         AdjustmentBox["\[VerticalSeparator]",
          BoxBaselineShift->-0.1,
          BoxMargins->{{0, -0.2}, {0, 0}}]}]}],
       QuantumAlgebra`QuantumAlgebra`Bra,
       BaseStyle->"BraWrapper"]}]}], ",", 
    RowBox[{
     TagBox[
      RowBox[{
       SubsuperscriptBox["\[InvisiblePrefixScriptBase]", 
        TagBox[
         AdjustmentBox[
          TagBox["2",
           QuantumAlgebra`QuantumAlgebra`BraArgs,
           BaseStyle->"BraKetArg"],
          BoxBaselineShift->0],
         QuantumAlgebra`QuantumAlgebra`UDScript,
         BaseStyle->"LIndex"], 
        TagBox[
         AdjustmentBox[
          TagBox["x",
           QuantumAlgebra`QuantumAlgebra`BraArgs,
           BaseStyle->"BraKetArg"],
          BoxBaselineShift->0],
         QuantumAlgebra`QuantumAlgebra`UDScript,
         BaseStyle->"LIndex"]], 
       RowBox[{"\[LeftAngleBracket]", 
        AdjustmentBox[
         TagBox["q",
          QuantumAlgebra`QuantumAlgebra`BraArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0], 
        AdjustmentBox["\[VerticalSeparator]",
         BoxBaselineShift->-0.1,
         BoxMargins->{{0, -0.2}, {0, 0}}]}]}],
      QuantumAlgebra`QuantumAlgebra`Bra,
      BaseStyle->"BraWrapper"], "\[Rule]", 
     RowBox[{
      TagBox[
       RowBox[{
        SubscriptBox["\[InvisiblePrefixScriptBase]", 
         TagBox[
          AdjustmentBox[
           TagBox["2",
            QuantumAlgebra`QuantumAlgebra`BraArgs,
            BaseStyle->"BraKetArg"],
           BoxBaselineShift->0],
          QuantumAlgebra`QuantumAlgebra`UDScript,
          BaseStyle->"LIndex"]], 
        RowBox[{"\[LeftAngleBracket]", 
         AdjustmentBox[
          TagBox["p",
           QuantumAlgebra`QuantumAlgebra`BraArgs,
           BaseStyle->"BraKetArg"],
          BoxBaselineShift->0], 
         AdjustmentBox["\[VerticalSeparator]",
          BoxBaselineShift->-0.1,
          BoxMargins->{{0, -0.2}, {0, 0}}]}]}],
       QuantumAlgebra`QuantumAlgebra`Bra,
       BaseStyle->"BraWrapper"], "-", 
      TagBox[
       RowBox[{
        SubscriptBox["\[InvisiblePrefixScriptBase]", 
         TagBox[
          AdjustmentBox[
           TagBox["2",
            QuantumAlgebra`QuantumAlgebra`BraArgs,
            BaseStyle->"BraKetArg"],
           BoxBaselineShift->0],
          QuantumAlgebra`QuantumAlgebra`UDScript,
          BaseStyle->"LIndex"]], 
        RowBox[{"\[LeftAngleBracket]", 
         AdjustmentBox[
          TagBox["q",
           QuantumAlgebra`QuantumAlgebra`BraArgs,
           BaseStyle->"BraKetArg"],
          BoxBaselineShift->0], 
         AdjustmentBox["\[VerticalSeparator]",
          BoxBaselineShift->-0.1,
          BoxMargins->{{0, -0.2}, {0, 0}}]}]}],
       QuantumAlgebra`QuantumAlgebra`Bra,
       BaseStyle->"BraWrapper"]}]}]}], "}"}]}]], "Input",
 CellChangeTimes->{{3.4441676188682003`*^9, 3.4441676755132*^9}, {
   3.4441687760462*^9, 3.4441687874532003`*^9}, {3.444259351233*^9, 
   3.444259357314*^9}, {3.444259395396*^9, 3.444259478624*^9}, {
   3.444259632208*^9, 3.444259674833*^9}, {3.444260798909*^9, 
   3.444260863481*^9}, 3.594380461317747*^9}],

Cell[BoxData[
 RowBox[{
  RowBox[{
   TagBox[
    RowBox[{
     SubscriptBox["\[InvisiblePrefixScriptBase]", 
      TagBox[
       AdjustmentBox[
        TagBox["1",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"LIndex"]], 
     SubscriptBox[
      RowBox[{"\[LeftAngleBracket]", 
       AdjustmentBox[
        RowBox[{
         TagBox["p",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
         TagBox["p",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"]}],
        BoxBaselineShift->0], "\[RightAngleBracket]"}], 
      TagBox[
       AdjustmentBox[
        TagBox["1",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"RIndex"]]}],
    QuantumAlgebra`QuantumAlgebra`Braket,
    BaseStyle->"BraKetWrapper"], " ", 
   TagBox[
    RowBox[{
     SubscriptBox["\[InvisiblePrefixScriptBase]", 
      TagBox[
       AdjustmentBox[
        TagBox["2",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"LIndex"]], 
     SubscriptBox[
      RowBox[{"\[LeftAngleBracket]", 
       AdjustmentBox[
        RowBox[{
         TagBox["p",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
         TagBox["p",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"]}],
        BoxBaselineShift->0], "\[RightAngleBracket]"}], 
      TagBox[
       AdjustmentBox[
        TagBox["2",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"RIndex"]]}],
    QuantumAlgebra`QuantumAlgebra`Braket,
    BaseStyle->"BraKetWrapper"]}], "+", 
  RowBox[{
   TagBox[
    RowBox[{
     SubscriptBox["\[InvisiblePrefixScriptBase]", 
      TagBox[
       AdjustmentBox[
        TagBox["1",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"LIndex"]], 
     SubscriptBox[
      RowBox[{"\[LeftAngleBracket]", 
       AdjustmentBox[
        RowBox[{
         TagBox["p",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
         TagBox["q",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"]}],
        BoxBaselineShift->0], "\[RightAngleBracket]"}], 
      TagBox[
       AdjustmentBox[
        TagBox["1",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"RIndex"]]}],
    QuantumAlgebra`QuantumAlgebra`Braket,
    BaseStyle->"BraKetWrapper"], " ", 
   TagBox[
    RowBox[{
     SubscriptBox["\[InvisiblePrefixScriptBase]", 
      TagBox[
       AdjustmentBox[
        TagBox["2",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"LIndex"]], 
     SubscriptBox[
      RowBox[{"\[LeftAngleBracket]", 
       AdjustmentBox[
        RowBox[{
         TagBox["p",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
         TagBox["p",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"]}],
        BoxBaselineShift->0], "\[RightAngleBracket]"}], 
      TagBox[
       AdjustmentBox[
        TagBox["2",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"RIndex"]]}],
    QuantumAlgebra`QuantumAlgebra`Braket,
    BaseStyle->"BraKetWrapper"]}], "+", 
  RowBox[{
   TagBox[
    RowBox[{
     SubscriptBox["\[InvisiblePrefixScriptBase]", 
      TagBox[
       AdjustmentBox[
        TagBox["1",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"LIndex"]], 
     SubscriptBox[
      RowBox[{"\[LeftAngleBracket]", 
       AdjustmentBox[
        RowBox[{
         TagBox["p",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
         TagBox["p",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"]}],
        BoxBaselineShift->0], "\[RightAngleBracket]"}], 
      TagBox[
       AdjustmentBox[
        TagBox["1",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"RIndex"]]}],
    QuantumAlgebra`QuantumAlgebra`Braket,
    BaseStyle->"BraKetWrapper"], " ", 
   TagBox[
    RowBox[{
     SubscriptBox["\[InvisiblePrefixScriptBase]", 
      TagBox[
       AdjustmentBox[
        TagBox["2",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"LIndex"]], 
     SubscriptBox[
      RowBox[{"\[LeftAngleBracket]", 
       AdjustmentBox[
        RowBox[{
         TagBox["p",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
         TagBox["q",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"]}],
        BoxBaselineShift->0], "\[RightAngleBracket]"}], 
      TagBox[
       AdjustmentBox[
        TagBox["2",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"RIndex"]]}],
    QuantumAlgebra`QuantumAlgebra`Braket,
    BaseStyle->"BraKetWrapper"]}], "+", 
  RowBox[{
   TagBox[
    RowBox[{
     SubscriptBox["\[InvisiblePrefixScriptBase]", 
      TagBox[
       AdjustmentBox[
        TagBox["1",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"LIndex"]], 
     SubscriptBox[
      RowBox[{"\[LeftAngleBracket]", 
       AdjustmentBox[
        RowBox[{
         TagBox["p",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
         TagBox["q",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"]}],
        BoxBaselineShift->0], "\[RightAngleBracket]"}], 
      TagBox[
       AdjustmentBox[
        TagBox["1",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"RIndex"]]}],
    QuantumAlgebra`QuantumAlgebra`Braket,
    BaseStyle->"BraKetWrapper"], " ", 
   TagBox[
    RowBox[{
     SubscriptBox["\[InvisiblePrefixScriptBase]", 
      TagBox[
       AdjustmentBox[
        TagBox["2",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"LIndex"]], 
     SubscriptBox[
      RowBox[{"\[LeftAngleBracket]", 
       AdjustmentBox[
        RowBox[{
         TagBox["p",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
         TagBox["q",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"]}],
        BoxBaselineShift->0], "\[RightAngleBracket]"}], 
      TagBox[
       AdjustmentBox[
        TagBox["2",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"RIndex"]]}],
    QuantumAlgebra`QuantumAlgebra`Braket,
    BaseStyle->"BraKetWrapper"]}], "+", 
  RowBox[{
   TagBox[
    RowBox[{
     SubscriptBox["\[InvisiblePrefixScriptBase]", 
      TagBox[
       AdjustmentBox[
        TagBox["2",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"LIndex"]], 
     SubscriptBox[
      RowBox[{"\[LeftAngleBracket]", 
       AdjustmentBox[
        RowBox[{
         TagBox["p",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
         TagBox["p",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"]}],
        BoxBaselineShift->0], "\[RightAngleBracket]"}], 
      TagBox[
       AdjustmentBox[
        TagBox["2",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"RIndex"]]}],
    QuantumAlgebra`QuantumAlgebra`Braket,
    BaseStyle->"BraKetWrapper"], " ", 
   TagBox[
    RowBox[{
     SubscriptBox["\[InvisiblePrefixScriptBase]", 
      TagBox[
       AdjustmentBox[
        TagBox["1",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"LIndex"]], 
     SubscriptBox[
      RowBox[{"\[LeftAngleBracket]", 
       AdjustmentBox[
        RowBox[{
         TagBox["q",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
         TagBox["p",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"]}],
        BoxBaselineShift->0], "\[RightAngleBracket]"}], 
      TagBox[
       AdjustmentBox[
        TagBox["1",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"RIndex"]]}],
    QuantumAlgebra`QuantumAlgebra`Braket,
    BaseStyle->"BraKetWrapper"]}], "+", 
  RowBox[{
   TagBox[
    RowBox[{
     SubscriptBox["\[InvisiblePrefixScriptBase]", 
      TagBox[
       AdjustmentBox[
        TagBox["2",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"LIndex"]], 
     SubscriptBox[
      RowBox[{"\[LeftAngleBracket]", 
       AdjustmentBox[
        RowBox[{
         TagBox["p",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
         TagBox["q",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"]}],
        BoxBaselineShift->0], "\[RightAngleBracket]"}], 
      TagBox[
       AdjustmentBox[
        TagBox["2",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"RIndex"]]}],
    QuantumAlgebra`QuantumAlgebra`Braket,
    BaseStyle->"BraKetWrapper"], " ", 
   TagBox[
    RowBox[{
     SubscriptBox["\[InvisiblePrefixScriptBase]", 
      TagBox[
       AdjustmentBox[
        TagBox["1",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"LIndex"]], 
     SubscriptBox[
      RowBox[{"\[LeftAngleBracket]", 
       AdjustmentBox[
        RowBox[{
         TagBox["q",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
         TagBox["p",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"]}],
        BoxBaselineShift->0], "\[RightAngleBracket]"}], 
      TagBox[
       AdjustmentBox[
        TagBox["1",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"RIndex"]]}],
    QuantumAlgebra`QuantumAlgebra`Braket,
    BaseStyle->"BraKetWrapper"]}], "+", 
  RowBox[{
   TagBox[
    RowBox[{
     SubscriptBox["\[InvisiblePrefixScriptBase]", 
      TagBox[
       AdjustmentBox[
        TagBox["2",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"LIndex"]], 
     SubscriptBox[
      RowBox[{"\[LeftAngleBracket]", 
       AdjustmentBox[
        RowBox[{
         TagBox["p",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
         TagBox["p",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"]}],
        BoxBaselineShift->0], "\[RightAngleBracket]"}], 
      TagBox[
       AdjustmentBox[
        TagBox["2",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"RIndex"]]}],
    QuantumAlgebra`QuantumAlgebra`Braket,
    BaseStyle->"BraKetWrapper"], " ", 
   TagBox[
    RowBox[{
     SubscriptBox["\[InvisiblePrefixScriptBase]", 
      TagBox[
       AdjustmentBox[
        TagBox["1",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"LIndex"]], 
     SubscriptBox[
      RowBox[{"\[LeftAngleBracket]", 
       AdjustmentBox[
        RowBox[{
         TagBox["q",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
         TagBox["q",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"]}],
        BoxBaselineShift->0], "\[RightAngleBracket]"}], 
      TagBox[
       AdjustmentBox[
        TagBox["1",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"RIndex"]]}],
    QuantumAlgebra`QuantumAlgebra`Braket,
    BaseStyle->"BraKetWrapper"]}], "+", 
  RowBox[{
   TagBox[
    RowBox[{
     SubscriptBox["\[InvisiblePrefixScriptBase]", 
      TagBox[
       AdjustmentBox[
        TagBox["2",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"LIndex"]], 
     SubscriptBox[
      RowBox[{"\[LeftAngleBracket]", 
       AdjustmentBox[
        RowBox[{
         TagBox["p",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
         TagBox["q",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"]}],
        BoxBaselineShift->0], "\[RightAngleBracket]"}], 
      TagBox[
       AdjustmentBox[
        TagBox["2",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"RIndex"]]}],
    QuantumAlgebra`QuantumAlgebra`Braket,
    BaseStyle->"BraKetWrapper"], " ", 
   TagBox[
    RowBox[{
     SubscriptBox["\[InvisiblePrefixScriptBase]", 
      TagBox[
       AdjustmentBox[
        TagBox["1",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"LIndex"]], 
     SubscriptBox[
      RowBox[{"\[LeftAngleBracket]", 
       AdjustmentBox[
        RowBox[{
         TagBox["q",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
         TagBox["q",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"]}],
        BoxBaselineShift->0], "\[RightAngleBracket]"}], 
      TagBox[
       AdjustmentBox[
        TagBox["1",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"RIndex"]]}],
    QuantumAlgebra`QuantumAlgebra`Braket,
    BaseStyle->"BraKetWrapper"]}], "-", 
  RowBox[{
   TagBox[
    RowBox[{
     SubscriptBox["\[InvisiblePrefixScriptBase]", 
      TagBox[
       AdjustmentBox[
        TagBox["1",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"LIndex"]], 
     SubscriptBox[
      RowBox[{"\[LeftAngleBracket]", 
       AdjustmentBox[
        RowBox[{
         TagBox["p",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
         TagBox["p",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"]}],
        BoxBaselineShift->0], "\[RightAngleBracket]"}], 
      TagBox[
       AdjustmentBox[
        TagBox["1",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"RIndex"]]}],
    QuantumAlgebra`QuantumAlgebra`Braket,
    BaseStyle->"BraKetWrapper"], " ", 
   TagBox[
    RowBox[{
     SubscriptBox["\[InvisiblePrefixScriptBase]", 
      TagBox[
       AdjustmentBox[
        TagBox["2",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"LIndex"]], 
     SubscriptBox[
      RowBox[{"\[LeftAngleBracket]", 
       AdjustmentBox[
        RowBox[{
         TagBox["q",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
         TagBox["p",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"]}],
        BoxBaselineShift->0], "\[RightAngleBracket]"}], 
      TagBox[
       AdjustmentBox[
        TagBox["2",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"RIndex"]]}],
    QuantumAlgebra`QuantumAlgebra`Braket,
    BaseStyle->"BraKetWrapper"]}], "-", 
  RowBox[{
   TagBox[
    RowBox[{
     SubscriptBox["\[InvisiblePrefixScriptBase]", 
      TagBox[
       AdjustmentBox[
        TagBox["1",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"LIndex"]], 
     SubscriptBox[
      RowBox[{"\[LeftAngleBracket]", 
       AdjustmentBox[
        RowBox[{
         TagBox["p",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
         TagBox["q",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"]}],
        BoxBaselineShift->0], "\[RightAngleBracket]"}], 
      TagBox[
       AdjustmentBox[
        TagBox["1",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"RIndex"]]}],
    QuantumAlgebra`QuantumAlgebra`Braket,
    BaseStyle->"BraKetWrapper"], " ", 
   TagBox[
    RowBox[{
     SubscriptBox["\[InvisiblePrefixScriptBase]", 
      TagBox[
       AdjustmentBox[
        TagBox["2",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"LIndex"]], 
     SubscriptBox[
      RowBox[{"\[LeftAngleBracket]", 
       AdjustmentBox[
        RowBox[{
         TagBox["q",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
         TagBox["p",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"]}],
        BoxBaselineShift->0], "\[RightAngleBracket]"}], 
      TagBox[
       AdjustmentBox[
        TagBox["2",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"RIndex"]]}],
    QuantumAlgebra`QuantumAlgebra`Braket,
    BaseStyle->"BraKetWrapper"]}], "-", 
  RowBox[{
   TagBox[
    RowBox[{
     SubscriptBox["\[InvisiblePrefixScriptBase]", 
      TagBox[
       AdjustmentBox[
        TagBox["1",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"LIndex"]], 
     SubscriptBox[
      RowBox[{"\[LeftAngleBracket]", 
       AdjustmentBox[
        RowBox[{
         TagBox["q",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
         TagBox["p",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"]}],
        BoxBaselineShift->0], "\[RightAngleBracket]"}], 
      TagBox[
       AdjustmentBox[
        TagBox["1",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"RIndex"]]}],
    QuantumAlgebra`QuantumAlgebra`Braket,
    BaseStyle->"BraKetWrapper"], " ", 
   TagBox[
    RowBox[{
     SubscriptBox["\[InvisiblePrefixScriptBase]", 
      TagBox[
       AdjustmentBox[
        TagBox["2",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"LIndex"]], 
     SubscriptBox[
      RowBox[{"\[LeftAngleBracket]", 
       AdjustmentBox[
        RowBox[{
         TagBox["q",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
         TagBox["p",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"]}],
        BoxBaselineShift->0], "\[RightAngleBracket]"}], 
      TagBox[
       AdjustmentBox[
        TagBox["2",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"RIndex"]]}],
    QuantumAlgebra`QuantumAlgebra`Braket,
    BaseStyle->"BraKetWrapper"]}], "-", 
  RowBox[{
   TagBox[
    RowBox[{
     SubscriptBox["\[InvisiblePrefixScriptBase]", 
      TagBox[
       AdjustmentBox[
        TagBox["1",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"LIndex"]], 
     SubscriptBox[
      RowBox[{"\[LeftAngleBracket]", 
       AdjustmentBox[
        RowBox[{
         TagBox["q",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
         TagBox["q",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"]}],
        BoxBaselineShift->0], "\[RightAngleBracket]"}], 
      TagBox[
       AdjustmentBox[
        TagBox["1",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"RIndex"]]}],
    QuantumAlgebra`QuantumAlgebra`Braket,
    BaseStyle->"BraKetWrapper"], " ", 
   TagBox[
    RowBox[{
     SubscriptBox["\[InvisiblePrefixScriptBase]", 
      TagBox[
       AdjustmentBox[
        TagBox["2",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"LIndex"]], 
     SubscriptBox[
      RowBox[{"\[LeftAngleBracket]", 
       AdjustmentBox[
        RowBox[{
         TagBox["q",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
         TagBox["p",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"]}],
        BoxBaselineShift->0], "\[RightAngleBracket]"}], 
      TagBox[
       AdjustmentBox[
        TagBox["2",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"RIndex"]]}],
    QuantumAlgebra`QuantumAlgebra`Braket,
    BaseStyle->"BraKetWrapper"]}], "-", 
  RowBox[{
   TagBox[
    RowBox[{
     SubscriptBox["\[InvisiblePrefixScriptBase]", 
      TagBox[
       AdjustmentBox[
        TagBox["1",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"LIndex"]], 
     SubscriptBox[
      RowBox[{"\[LeftAngleBracket]", 
       AdjustmentBox[
        RowBox[{
         TagBox["p",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
         TagBox["p",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"]}],
        BoxBaselineShift->0], "\[RightAngleBracket]"}], 
      TagBox[
       AdjustmentBox[
        TagBox["1",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"RIndex"]]}],
    QuantumAlgebra`QuantumAlgebra`Braket,
    BaseStyle->"BraKetWrapper"], " ", 
   TagBox[
    RowBox[{
     SubscriptBox["\[InvisiblePrefixScriptBase]", 
      TagBox[
       AdjustmentBox[
        TagBox["2",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"LIndex"]], 
     SubscriptBox[
      RowBox[{"\[LeftAngleBracket]", 
       AdjustmentBox[
        RowBox[{
         TagBox["q",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
         TagBox["q",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"]}],
        BoxBaselineShift->0], "\[RightAngleBracket]"}], 
      TagBox[
       AdjustmentBox[
        TagBox["2",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"RIndex"]]}],
    QuantumAlgebra`QuantumAlgebra`Braket,
    BaseStyle->"BraKetWrapper"]}], "-", 
  RowBox[{
   TagBox[
    RowBox[{
     SubscriptBox["\[InvisiblePrefixScriptBase]", 
      TagBox[
       AdjustmentBox[
        TagBox["1",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"LIndex"]], 
     SubscriptBox[
      RowBox[{"\[LeftAngleBracket]", 
       AdjustmentBox[
        RowBox[{
         TagBox["p",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
         TagBox["q",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"]}],
        BoxBaselineShift->0], "\[RightAngleBracket]"}], 
      TagBox[
       AdjustmentBox[
        TagBox["1",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"RIndex"]]}],
    QuantumAlgebra`QuantumAlgebra`Braket,
    BaseStyle->"BraKetWrapper"], " ", 
   TagBox[
    RowBox[{
     SubscriptBox["\[InvisiblePrefixScriptBase]", 
      TagBox[
       AdjustmentBox[
        TagBox["2",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"LIndex"]], 
     SubscriptBox[
      RowBox[{"\[LeftAngleBracket]", 
       AdjustmentBox[
        RowBox[{
         TagBox["q",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
         TagBox["q",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"]}],
        BoxBaselineShift->0], "\[RightAngleBracket]"}], 
      TagBox[
       AdjustmentBox[
        TagBox["2",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"RIndex"]]}],
    QuantumAlgebra`QuantumAlgebra`Braket,
    BaseStyle->"BraKetWrapper"]}], "-", 
  RowBox[{
   TagBox[
    RowBox[{
     SubscriptBox["\[InvisiblePrefixScriptBase]", 
      TagBox[
       AdjustmentBox[
        TagBox["1",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"LIndex"]], 
     SubscriptBox[
      RowBox[{"\[LeftAngleBracket]", 
       AdjustmentBox[
        RowBox[{
         TagBox["q",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
         TagBox["p",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"]}],
        BoxBaselineShift->0], "\[RightAngleBracket]"}], 
      TagBox[
       AdjustmentBox[
        TagBox["1",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"RIndex"]]}],
    QuantumAlgebra`QuantumAlgebra`Braket,
    BaseStyle->"BraKetWrapper"], " ", 
   TagBox[
    RowBox[{
     SubscriptBox["\[InvisiblePrefixScriptBase]", 
      TagBox[
       AdjustmentBox[
        TagBox["2",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"LIndex"]], 
     SubscriptBox[
      RowBox[{"\[LeftAngleBracket]", 
       AdjustmentBox[
        RowBox[{
         TagBox["q",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
         TagBox["q",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"]}],
        BoxBaselineShift->0], "\[RightAngleBracket]"}], 
      TagBox[
       AdjustmentBox[
        TagBox["2",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"RIndex"]]}],
    QuantumAlgebra`QuantumAlgebra`Braket,
    BaseStyle->"BraKetWrapper"]}], "-", 
  RowBox[{
   TagBox[
    RowBox[{
     SubscriptBox["\[InvisiblePrefixScriptBase]", 
      TagBox[
       AdjustmentBox[
        TagBox["1",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"LIndex"]], 
     SubscriptBox[
      RowBox[{"\[LeftAngleBracket]", 
       AdjustmentBox[
        RowBox[{
         TagBox["q",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
         TagBox["q",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"]}],
        BoxBaselineShift->0], "\[RightAngleBracket]"}], 
      TagBox[
       AdjustmentBox[
        TagBox["1",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"RIndex"]]}],
    QuantumAlgebra`QuantumAlgebra`Braket,
    BaseStyle->"BraKetWrapper"], " ", 
   TagBox[
    RowBox[{
     SubscriptBox["\[InvisiblePrefixScriptBase]", 
      TagBox[
       AdjustmentBox[
        TagBox["2",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"LIndex"]], 
     SubscriptBox[
      RowBox[{"\[LeftAngleBracket]", 
       AdjustmentBox[
        RowBox[{
         TagBox["q",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
         TagBox["q",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"]}],
        BoxBaselineShift->0], "\[RightAngleBracket]"}], 
      TagBox[
       AdjustmentBox[
        TagBox["2",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"RIndex"]]}],
    QuantumAlgebra`QuantumAlgebra`Braket,
    BaseStyle->"BraKetWrapper"]}]}]], "Output",
 CellChangeTimes->{3.4742386375844207`*^9, 3.4743205998565474`*^9, 
  3.594380464959955*^9}]
}, Open  ]],

Cell["\<\
In some cases you may want to simplify tensor products of bras and kets even \
if their indices don't match. You can force it using local or global rules. \
\>", "Text",
 CellChangeTimes->{{3.444254234019*^9, 3.444254246271*^9}, {3.444254521826*^9,
   3.4442545861099997`*^9}, {3.444254751215*^9, 3.444254763139*^9}, {
  3.4442547980150003`*^9, 3.444254841825*^9}, {3.4442548819700003`*^9, 
  3.4442550138059998`*^9}, {3.444255260099*^9, 3.444255310413*^9}, {
  3.444255340516*^9, 3.444255375701*^9}, {3.444262710693*^9, 
  3.444262816008*^9}, {3.4452446376359453`*^9, 3.4452446443909454`*^9}, {
  3.474239392225584*^9, 3.4742394506689267`*^9}, {3.4743206170455303`*^9, 
  3.4743206736397676`*^9}, {3.4743210455290384`*^9, 3.4743210477751665`*^9}, {
  3.5944362882286086`*^9, 3.594436296943107*^9}, {3.594436543525211*^9, 
  3.594436551101644*^9}, {3.5944367938695297`*^9, 3.5944367941975484`*^9}, {
  3.5944368508787904`*^9, 3.5944369477143292`*^9}, {3.5944371941944265`*^9, 
  3.5944371946634536`*^9}, {3.5944372403100643`*^9, 3.594437242175171*^9}}],

Cell[TextData[{
 "For instance, the following code could be used to match two tensor bra/ket \
objects of the same rank by position. In this case we have to temporarily \
clear the orderless attribute of ",
 StyleBox["TensorProduct",
  FontWeight->"Bold"],
 ",",
 StyleBox[" ",
  FontWeight->"Bold"],
 "so that tensors are not sorted before the transformation."
}], "Text",
 CellChangeTimes->CompressedData["
1:eJxTTMoPSmViYGAQBmIQvWy2w+GUlS8dOdacOAKiZ+RZPQfRcq3O70G0x8Nn
zKlAekNRCiuIflR1gBNEp6VZ8YNoOy57ERB94NROFRDNpN3sDKJ9zM96gmih
5gm+qWBzvwWCaD7da88ygHSnI8MXEL0qcku0x+qXjguaemJA9B9z9i9TH710
vJke+htE/ylRnLsXSP+qMFkCoh+93XAJRGud+wGmDwew37h+/JXje125myC6
/dyH7yB6tcPjHyDa4LK1+A0gHRjkBqZ55WPkQPTJ22VaIHqfhZsniGa2DgXT
PG84/UE0w2xXMG0spxgMom1D/kaBaAD0C6d8
  "]],

Cell[BoxData[{
 RowBox[{
  RowBox[{"SetAttributes", "[", 
   RowBox[{"tensorSimplify", ",", "HoldAll"}], "]"}], 
  "\[IndentingNewLine]"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"tensorSimplify", "[", "expr_", "]"}], ":=", 
  RowBox[{"Module", "[", 
   RowBox[{
    RowBox[{"{", "expr2", "}"}], ",", "\[IndentingNewLine]", 
    RowBox[{
     RowBox[{"ClearAttributes", "[", 
      RowBox[{"TensorProduct", ",", "Orderless"}], "]"}], ";", 
     "\[IndentingNewLine]", 
     RowBox[{"expr2", "=", 
      RowBox[{"expr", "/.", 
       RowBox[{
        RowBox[{"HoldPattern", "[", 
         RowBox[{
          RowBox[{"TensorProduct", "[", "x__Bra", "]"}], " ", "**", " ", 
          RowBox[{"TensorProduct", "[", "y__Ket", "]"}]}], "]"}], " ", ":>", 
        " ", 
        RowBox[{"Times", "@@", 
         RowBox[{"MapThread", "[", 
          RowBox[{
           RowBox[{
            RowBox[{"(", 
             RowBox[{"#1", "**", "#2"}], ")"}], "&"}], ",", 
           RowBox[{"{", 
            RowBox[{
             RowBox[{"{", "x", "}"}], ",", 
             RowBox[{"{", "y", "}"}]}], "}"}]}], "]"}]}]}]}]}], ";", 
     "\[IndentingNewLine]", 
     RowBox[{"SetAttributes", "[", 
      RowBox[{"TensorProduct", ",", "Orderless"}], "]"}], ";", 
     "\[IndentingNewLine]", "expr2"}]}], "\[IndentingNewLine]", 
   "]"}]}]}], "InputOnly",
 CellChangeTimes->{{3.4442560773859997`*^9, 3.444256094151*^9}, {
  3.44426160651*^9, 3.444261626349*^9}, {3.444261674212*^9, 
  3.444261677361*^9}, {3.444261751514*^9, 3.444261774789*^9}, {
  3.444261818369*^9, 3.444261842068*^9}, {3.4442619612539997`*^9, 
  3.44426199934*^9}, {3.444262115613*^9, 3.444262171435*^9}, {
  3.444262378326*^9, 3.4442623832390003`*^9}, {3.4442624485439997`*^9, 
  3.444262452627*^9}, {3.4442626704440002`*^9, 3.4442626846359997`*^9}, {
  3.4742394936783867`*^9, 3.4742394949534597`*^9}, {3.5944365633523445`*^9, 
  3.594436744186688*^9}, {3.5944372946321716`*^9, 3.5944372972263203`*^9}}],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{
  RowBox[{
   TagBox[
    RowBox[{
     SubscriptBox["\[InvisiblePrefixScriptBase]", 
      TagBox[
       AdjustmentBox[
        TagBox["1",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"LIndex"]], 
     RowBox[{"\[LeftAngleBracket]", 
      AdjustmentBox[
       TagBox["0",
        QuantumAlgebra`QuantumAlgebra`BraArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], 
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{0, -0.2}, {0, 0}}]}]}],
    QuantumAlgebra`QuantumAlgebra`Bra,
    BaseStyle->"BraWrapper"], "\[CircleTimes]", 
   TagBox[
    RowBox[{
     SubscriptBox["\[InvisiblePrefixScriptBase]", 
      TagBox[
       AdjustmentBox[
        TagBox["2",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"LIndex"]], 
     RowBox[{"\[LeftAngleBracket]", 
      AdjustmentBox[
       TagBox["1",
        QuantumAlgebra`QuantumAlgebra`BraArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], 
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{0, -0.2}, {0, 0}}]}]}],
    QuantumAlgebra`QuantumAlgebra`Bra,
    BaseStyle->"BraWrapper"], "\[CircleTimes]", 
   TagBox[
    RowBox[{
     SubscriptBox["\[InvisiblePrefixScriptBase]", 
      TagBox[
       AdjustmentBox[
        TagBox["3",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"LIndex"]], 
     RowBox[{"\[LeftAngleBracket]", 
      AdjustmentBox[
       TagBox["0",
        QuantumAlgebra`QuantumAlgebra`BraArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], 
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{0, -0.2}, {0, 0}}]}]}],
    QuantumAlgebra`QuantumAlgebra`Bra,
    BaseStyle->"BraWrapper"]}], "\[CenterDot]", 
  RowBox[{
   TagBox[
    SubscriptBox[
     RowBox[{
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{-0.2, 0}, {0, 0}}], 
      AdjustmentBox[
       TagBox["0",
        QuantumAlgebra`QuantumAlgebra`KetArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], "\[RightAngleBracket]"}], 
     TagBox[
      AdjustmentBox[
       TagBox["x",
        QuantumAlgebra`QuantumAlgebra`KetArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0],
      QuantumAlgebra`QuantumAlgebra`UDScript,
      BaseStyle->"RIndex"]],
    QuantumAlgebra`QuantumAlgebra`Ket,
    BaseStyle->"KetWrapper"], "\[CircleTimes]", 
   TagBox[
    SubscriptBox[
     RowBox[{
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{-0.2, 0}, {0, 0}}], 
      AdjustmentBox[
       TagBox["0",
        QuantumAlgebra`QuantumAlgebra`KetArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], "\[RightAngleBracket]"}], 
     TagBox[
      AdjustmentBox[
       TagBox["y",
        QuantumAlgebra`QuantumAlgebra`KetArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0],
      QuantumAlgebra`QuantumAlgebra`UDScript,
      BaseStyle->"RIndex"]],
    QuantumAlgebra`QuantumAlgebra`Ket,
    BaseStyle->"KetWrapper"], "\[CircleTimes]", 
   TagBox[
    SubscriptBox[
     RowBox[{
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{-0.2, 0}, {0, 0}}], 
      AdjustmentBox[
       TagBox["1",
        QuantumAlgebra`QuantumAlgebra`KetArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], "\[RightAngleBracket]"}], 
     TagBox[
      AdjustmentBox[
       TagBox["z",
        QuantumAlgebra`QuantumAlgebra`KetArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0],
      QuantumAlgebra`QuantumAlgebra`UDScript,
      BaseStyle->"RIndex"]],
    QuantumAlgebra`QuantumAlgebra`Ket,
    BaseStyle->"KetWrapper"]}]}]], "Input",
 CellChangeTimes->{{3.5944364114326553`*^9, 3.5944364524430013`*^9}}],

Cell[BoxData[
 RowBox[{
  RowBox[{
   TagBox[
    RowBox[{
     SubscriptBox["\[InvisiblePrefixScriptBase]", 
      TagBox[
       AdjustmentBox[
        TagBox["1",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"LIndex"]], 
     RowBox[{"\[LeftAngleBracket]", 
      AdjustmentBox[
       TagBox["0",
        QuantumAlgebra`QuantumAlgebra`BraArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], 
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{0, -0.2}, {0, 0}}]}]}],
    QuantumAlgebra`QuantumAlgebra`Bra,
    BaseStyle->"BraWrapper"], "\[CircleTimes]", 
   TagBox[
    RowBox[{
     SubscriptBox["\[InvisiblePrefixScriptBase]", 
      TagBox[
       AdjustmentBox[
        TagBox["3",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"LIndex"]], 
     RowBox[{"\[LeftAngleBracket]", 
      AdjustmentBox[
       TagBox["0",
        QuantumAlgebra`QuantumAlgebra`BraArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], 
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{0, -0.2}, {0, 0}}]}]}],
    QuantumAlgebra`QuantumAlgebra`Bra,
    BaseStyle->"BraWrapper"], "\[CircleTimes]", 
   TagBox[
    RowBox[{
     SubscriptBox["\[InvisiblePrefixScriptBase]", 
      TagBox[
       AdjustmentBox[
        TagBox["2",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"LIndex"]], 
     RowBox[{"\[LeftAngleBracket]", 
      AdjustmentBox[
       TagBox["1",
        QuantumAlgebra`QuantumAlgebra`BraArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], 
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{0, -0.2}, {0, 0}}]}]}],
    QuantumAlgebra`QuantumAlgebra`Bra,
    BaseStyle->"BraWrapper"]}], "\[CenterDot]", 
  RowBox[{
   TagBox[
    SubscriptBox[
     RowBox[{
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{-0.2, 0}, {0, 0}}], 
      AdjustmentBox[
       TagBox["0",
        QuantumAlgebra`QuantumAlgebra`KetArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], "\[RightAngleBracket]"}], 
     TagBox[
      AdjustmentBox[
       TagBox["x",
        QuantumAlgebra`QuantumAlgebra`KetArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0],
      QuantumAlgebra`QuantumAlgebra`UDScript,
      BaseStyle->"RIndex"]],
    QuantumAlgebra`QuantumAlgebra`Ket,
    BaseStyle->"KetWrapper"], "\[CircleTimes]", 
   TagBox[
    SubscriptBox[
     RowBox[{
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{-0.2, 0}, {0, 0}}], 
      AdjustmentBox[
       TagBox["0",
        QuantumAlgebra`QuantumAlgebra`KetArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], "\[RightAngleBracket]"}], 
     TagBox[
      AdjustmentBox[
       TagBox["y",
        QuantumAlgebra`QuantumAlgebra`KetArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0],
      QuantumAlgebra`QuantumAlgebra`UDScript,
      BaseStyle->"RIndex"]],
    QuantumAlgebra`QuantumAlgebra`Ket,
    BaseStyle->"KetWrapper"], "\[CircleTimes]", 
   TagBox[
    SubscriptBox[
     RowBox[{
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{-0.2, 0}, {0, 0}}], 
      AdjustmentBox[
       TagBox["1",
        QuantumAlgebra`QuantumAlgebra`KetArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], "\[RightAngleBracket]"}], 
     TagBox[
      AdjustmentBox[
       TagBox["z",
        QuantumAlgebra`QuantumAlgebra`KetArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0],
      QuantumAlgebra`QuantumAlgebra`UDScript,
      BaseStyle->"RIndex"]],
    QuantumAlgebra`QuantumAlgebra`Ket,
    BaseStyle->"KetWrapper"]}]}]], "Output",
 CellChangeTimes->{3.5944368326437473`*^9}]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{
  RowBox[{
   RowBox[{
    TagBox[
     RowBox[{
      SubscriptBox["\[InvisiblePrefixScriptBase]", 
       TagBox[
        AdjustmentBox[
         TagBox["1",
          QuantumAlgebra`QuantumAlgebra`BraArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0],
        QuantumAlgebra`QuantumAlgebra`UDScript,
        BaseStyle->"LIndex"]], 
      RowBox[{"\[LeftAngleBracket]", 
       AdjustmentBox[
        TagBox["0",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0], 
       AdjustmentBox["\[VerticalSeparator]",
        BoxBaselineShift->-0.1,
        BoxMargins->{{0, -0.2}, {0, 0}}]}]}],
     QuantumAlgebra`QuantumAlgebra`Bra,
     BaseStyle->"BraWrapper"], "\[CircleTimes]", 
    TagBox[
     RowBox[{
      SubscriptBox["\[InvisiblePrefixScriptBase]", 
       TagBox[
        AdjustmentBox[
         TagBox["2",
          QuantumAlgebra`QuantumAlgebra`BraArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0],
        QuantumAlgebra`QuantumAlgebra`UDScript,
        BaseStyle->"LIndex"]], 
      RowBox[{"\[LeftAngleBracket]", 
       AdjustmentBox[
        TagBox["1",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0], 
       AdjustmentBox["\[VerticalSeparator]",
        BoxBaselineShift->-0.1,
        BoxMargins->{{0, -0.2}, {0, 0}}]}]}],
     QuantumAlgebra`QuantumAlgebra`Bra,
     BaseStyle->"BraWrapper"], "\[CircleTimes]", 
    TagBox[
     RowBox[{
      SubscriptBox["\[InvisiblePrefixScriptBase]", 
       TagBox[
        AdjustmentBox[
         TagBox["3",
          QuantumAlgebra`QuantumAlgebra`BraArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0],
        QuantumAlgebra`QuantumAlgebra`UDScript,
        BaseStyle->"LIndex"]], 
      RowBox[{"\[LeftAngleBracket]", 
       AdjustmentBox[
        TagBox["0",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0], 
       AdjustmentBox["\[VerticalSeparator]",
        BoxBaselineShift->-0.1,
        BoxMargins->{{0, -0.2}, {0, 0}}]}]}],
     QuantumAlgebra`QuantumAlgebra`Bra,
     BaseStyle->"BraWrapper"]}], "\[CenterDot]", 
   RowBox[{
    TagBox[
     SubscriptBox[
      RowBox[{
       AdjustmentBox["\[VerticalSeparator]",
        BoxBaselineShift->-0.1,
        BoxMargins->{{-0.2, 0}, {0, 0}}], 
       AdjustmentBox[
        TagBox["0",
         QuantumAlgebra`QuantumAlgebra`KetArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0], "\[RightAngleBracket]"}], 
      TagBox[
       AdjustmentBox[
        TagBox["x",
         QuantumAlgebra`QuantumAlgebra`KetArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"RIndex"]],
     QuantumAlgebra`QuantumAlgebra`Ket,
     BaseStyle->"KetWrapper"], "\[CircleTimes]", 
    TagBox[
     SubscriptBox[
      RowBox[{
       AdjustmentBox["\[VerticalSeparator]",
        BoxBaselineShift->-0.1,
        BoxMargins->{{-0.2, 0}, {0, 0}}], 
       AdjustmentBox[
        TagBox["0",
         QuantumAlgebra`QuantumAlgebra`KetArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0], "\[RightAngleBracket]"}], 
      TagBox[
       AdjustmentBox[
        TagBox["y",
         QuantumAlgebra`QuantumAlgebra`KetArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"RIndex"]],
     QuantumAlgebra`QuantumAlgebra`Ket,
     BaseStyle->"KetWrapper"], "\[CircleTimes]", 
    TagBox[
     SubscriptBox[
      RowBox[{
       AdjustmentBox["\[VerticalSeparator]",
        BoxBaselineShift->-0.1,
        BoxMargins->{{-0.2, 0}, {0, 0}}], 
       AdjustmentBox[
        TagBox["1",
         QuantumAlgebra`QuantumAlgebra`KetArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0], "\[RightAngleBracket]"}], 
      TagBox[
       AdjustmentBox[
        TagBox["z",
         QuantumAlgebra`QuantumAlgebra`KetArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"RIndex"]],
     QuantumAlgebra`QuantumAlgebra`Ket,
     BaseStyle->"KetWrapper"]}]}], "//", "tensorSimplify"}]], "Input",
 CellChangeTimes->{{3.444254258389*^9, 3.444254399921*^9}, {
   3.4442544568050003`*^9, 3.4442544914309998`*^9}, {3.444254603488*^9, 
   3.4442546264969997`*^9}, {3.4442546583789997`*^9, 3.444254726824*^9}, 
   3.444256074676*^9, {3.444256115601*^9, 3.444256117172*^9}, 
   3.444261500783*^9, {3.444261683837*^9, 3.444261686343*^9}, {
   3.4442622594230003`*^9, 3.4442623038599997`*^9}, {3.444262389207*^9, 
   3.4442623960480003`*^9}, {3.4442626894890003`*^9, 3.444262698373*^9}, {
   3.4442961917275505`*^9, 3.4442962491475506`*^9}, {3.4452446780279455`*^9, 
   3.4452447066189456`*^9}, {3.4738143035400467`*^9, 
   3.4738143066522245`*^9}, {3.5944367012332315`*^9, 3.594436712594881*^9}}],

Cell[BoxData[
 RowBox[{
  RowBox[{
   TagBox[
    RowBox[{
     SubscriptBox["\[InvisiblePrefixScriptBase]", 
      TagBox[
       AdjustmentBox[
        TagBox["1",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"LIndex"]], 
     RowBox[{"\[LeftAngleBracket]", 
      AdjustmentBox[
       TagBox["0",
        QuantumAlgebra`QuantumAlgebra`BraArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], 
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{0, -0.2}, {0, 0}}]}]}],
    QuantumAlgebra`QuantumAlgebra`Bra,
    BaseStyle->"BraWrapper"], "\[CenterDot]", 
   TagBox[
    SubscriptBox[
     RowBox[{
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{-0.2, 0}, {0, 0}}], 
      AdjustmentBox[
       TagBox["0",
        QuantumAlgebra`QuantumAlgebra`KetArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], "\[RightAngleBracket]"}], 
     TagBox[
      AdjustmentBox[
       TagBox["x",
        QuantumAlgebra`QuantumAlgebra`KetArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0],
      QuantumAlgebra`QuantumAlgebra`UDScript,
      BaseStyle->"RIndex"]],
    QuantumAlgebra`QuantumAlgebra`Ket,
    BaseStyle->"KetWrapper"]}], " ", 
  RowBox[{
   TagBox[
    RowBox[{
     SubscriptBox["\[InvisiblePrefixScriptBase]", 
      TagBox[
       AdjustmentBox[
        TagBox["3",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"LIndex"]], 
     RowBox[{"\[LeftAngleBracket]", 
      AdjustmentBox[
       TagBox["0",
        QuantumAlgebra`QuantumAlgebra`BraArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], 
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{0, -0.2}, {0, 0}}]}]}],
    QuantumAlgebra`QuantumAlgebra`Bra,
    BaseStyle->"BraWrapper"], "\[CenterDot]", 
   TagBox[
    SubscriptBox[
     RowBox[{
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{-0.2, 0}, {0, 0}}], 
      AdjustmentBox[
       TagBox["1",
        QuantumAlgebra`QuantumAlgebra`KetArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], "\[RightAngleBracket]"}], 
     TagBox[
      AdjustmentBox[
       TagBox["z",
        QuantumAlgebra`QuantumAlgebra`KetArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0],
      QuantumAlgebra`QuantumAlgebra`UDScript,
      BaseStyle->"RIndex"]],
    QuantumAlgebra`QuantumAlgebra`Ket,
    BaseStyle->"KetWrapper"]}], " ", 
  RowBox[{
   TagBox[
    RowBox[{
     SubscriptBox["\[InvisiblePrefixScriptBase]", 
      TagBox[
       AdjustmentBox[
        TagBox["2",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"LIndex"]], 
     RowBox[{"\[LeftAngleBracket]", 
      AdjustmentBox[
       TagBox["1",
        QuantumAlgebra`QuantumAlgebra`BraArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], 
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{0, -0.2}, {0, 0}}]}]}],
    QuantumAlgebra`QuantumAlgebra`Bra,
    BaseStyle->"BraWrapper"], "\[CenterDot]", 
   TagBox[
    SubscriptBox[
     RowBox[{
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{-0.2, 0}, {0, 0}}], 
      AdjustmentBox[
       TagBox["0",
        QuantumAlgebra`QuantumAlgebra`KetArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], "\[RightAngleBracket]"}], 
     TagBox[
      AdjustmentBox[
       TagBox["y",
        QuantumAlgebra`QuantumAlgebra`KetArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0],
      QuantumAlgebra`QuantumAlgebra`UDScript,
      BaseStyle->"RIndex"]],
    QuantumAlgebra`QuantumAlgebra`Ket,
    BaseStyle->"KetWrapper"]}]}]], "Output",
 CellChangeTimes->{3.5944367487059464`*^9, 3.5944368355069113`*^9}]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"%", "//", "QAProductExpand"}]], "Input",
 CellChangeTimes->{{3.4442962679645505`*^9, 3.4442962766075506`*^9}, {
  3.4742395221630163`*^9, 3.474239536953862*^9}}],

Cell[BoxData[
 RowBox[{
  TagBox[
   RowBox[{
    SubscriptBox["\[InvisiblePrefixScriptBase]", 
     TagBox[
      AdjustmentBox[
       TagBox["1",
        QuantumAlgebra`QuantumAlgebra`BraArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0],
      QuantumAlgebra`QuantumAlgebra`UDScript,
      BaseStyle->"LIndex"]], 
    SubscriptBox[
     RowBox[{"\[LeftAngleBracket]", 
      AdjustmentBox[
       RowBox[{
        TagBox["0",
         QuantumAlgebra`QuantumAlgebra`BraKetArgs,
         BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
        TagBox["0",
         QuantumAlgebra`QuantumAlgebra`BraKetArgs,
         BaseStyle->"BraKetArg"]}],
       BoxBaselineShift->0], "\[RightAngleBracket]"}], 
     TagBox[
      AdjustmentBox[
       TagBox["x",
        QuantumAlgebra`QuantumAlgebra`BraArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0],
      QuantumAlgebra`QuantumAlgebra`UDScript,
      BaseStyle->"RIndex"]]}],
   QuantumAlgebra`QuantumAlgebra`Braket,
   BaseStyle->"BraKetWrapper"], " ", 
  TagBox[
   RowBox[{
    SubscriptBox["\[InvisiblePrefixScriptBase]", 
     TagBox[
      AdjustmentBox[
       TagBox["3",
        QuantumAlgebra`QuantumAlgebra`BraArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0],
      QuantumAlgebra`QuantumAlgebra`UDScript,
      BaseStyle->"LIndex"]], 
    SubscriptBox[
     RowBox[{"\[LeftAngleBracket]", 
      AdjustmentBox[
       RowBox[{
        TagBox["0",
         QuantumAlgebra`QuantumAlgebra`BraKetArgs,
         BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
        TagBox["1",
         QuantumAlgebra`QuantumAlgebra`BraKetArgs,
         BaseStyle->"BraKetArg"]}],
       BoxBaselineShift->0], "\[RightAngleBracket]"}], 
     TagBox[
      AdjustmentBox[
       TagBox["z",
        QuantumAlgebra`QuantumAlgebra`BraArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0],
      QuantumAlgebra`QuantumAlgebra`UDScript,
      BaseStyle->"RIndex"]]}],
   QuantumAlgebra`QuantumAlgebra`Braket,
   BaseStyle->"BraKetWrapper"], " ", 
  TagBox[
   RowBox[{
    SubscriptBox["\[InvisiblePrefixScriptBase]", 
     TagBox[
      AdjustmentBox[
       TagBox["2",
        QuantumAlgebra`QuantumAlgebra`BraArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0],
      QuantumAlgebra`QuantumAlgebra`UDScript,
      BaseStyle->"LIndex"]], 
    SubscriptBox[
     RowBox[{"\[LeftAngleBracket]", 
      AdjustmentBox[
       RowBox[{
        TagBox["1",
         QuantumAlgebra`QuantumAlgebra`BraKetArgs,
         BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
        TagBox["0",
         QuantumAlgebra`QuantumAlgebra`BraKetArgs,
         BaseStyle->"BraKetArg"]}],
       BoxBaselineShift->0], "\[RightAngleBracket]"}], 
     TagBox[
      AdjustmentBox[
       TagBox["y",
        QuantumAlgebra`QuantumAlgebra`BraArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0],
      QuantumAlgebra`QuantumAlgebra`UDScript,
      BaseStyle->"RIndex"]]}],
   QuantumAlgebra`QuantumAlgebra`Braket,
   BaseStyle->"BraKetWrapper"]}]], "Output",
 CellChangeTimes->{
  3.473969513367014*^9, {3.4742395306865034`*^9, 3.474239541277109*^9}, 
   3.4743210168814*^9, 3.5944368364359646`*^9}]
}, Open  ]],

Cell[TextData[{
 "Clearing permanently the orderlees attribute of ",
 StyleBox["TensorProduct",
  FontWeight->"Bold"],
 " is not good idea since the behavior of ",
 StyleBox["QuantumAlgebra",
  FontSlant->"Italic"],
 " could be affected by removing this attribute."
}], "Text",
 CellChangeTimes->{{3.444262847823*^9, 3.444262901459*^9}, 3.44426297879*^9, {
   3.444263031516*^9, 3.444263059948*^9}, {3.444263141271*^9, 
   3.444263143476*^9}, {3.444263244918*^9, 3.444263314167*^9}, {
   3.444263388775*^9, 3.44426345435*^9}, {3.4442635236429996`*^9, 
   3.444263618144*^9}, {3.444263659828*^9, 3.444263660365*^9}, {
   3.444424174861*^9, 3.444424223174*^9}, {3.474236861224819*^9, 
   3.4742368655870686`*^9}, {3.474239563619387*^9, 3.474239597293313*^9}, {
   3.5944370251557584`*^9, 3.594437164957755*^9}, {3.5944372082302294`*^9, 
   3.594437225231202*^9}}]
}, Open  ]],

Cell[CellGroupData[{

Cell["Outer Products Revisited", "Subsection",
 CellTags->"qa:BR.4"],

Cell["\<\
Tensorial operators can be written in its outer form using the non \
commutative product. If we take the non commutative product of two or more \
tensor operators, braketing can take place. The same rules as discussed in \
the previous section applies to simplify the inner products.\
\>", "Text",
 CellChangeTimes->{{3.444241123448*^9, 3.444241151131*^9}, {3.444241224453*^9,
    3.444241231926*^9}, {3.444241408663*^9, 3.444241449207*^9}, {
   3.444241516835*^9, 3.444241528565*^9}, {3.444242549516*^9, 
   3.444242660391*^9}, {3.4442441720290003`*^9, 3.444244198199*^9}, {
   3.444244953317*^9, 3.444245036337*^9}, {3.444245141394*^9, 
   3.444245158602*^9}, {3.4442452034309998`*^9, 3.444245210815*^9}, 
   3.444245404939*^9, {3.4442465103929996`*^9, 3.444246530028*^9}, {
   3.444246664882*^9, 3.444246675151*^9}, {3.444246789049*^9, 
   3.4442467946470003`*^9}, {3.444247267613*^9, 3.444247274977*^9}, {
   3.4442974320965505`*^9, 3.4442974565465508`*^9}, {3.4443011028459997`*^9, 
   3.4443012292*^9}, {3.444301913771*^9, 3.444301923391*^9}, {
   3.4443019791400003`*^9, 3.444302006709*^9}, 3.444302512546*^9, {
   3.444303885198*^9, 3.444303900427*^9}, {3.444308585258*^9, 
   3.444308597745*^9}, {3.444308721205*^9, 3.444308723599*^9}, {
   3.444308754276*^9, 3.444308852644*^9}, {3.444308935388*^9, 
   3.4443089427279997`*^9}, {3.444309094934*^9, 3.444309098358*^9}, {
   3.4443146004370003`*^9, 3.4443146034119997`*^9}, 3.4452447671979456`*^9, {
   3.4743211414255233`*^9, 3.474321145585761*^9}, {3.4749047047042875`*^9, 
   3.4749047061283693`*^9}, 3.4749047761423736`*^9, {3.5944550265850534`*^9, 
   3.5944550274901056`*^9}}],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{
  RowBox[{"(", 
   RowBox[{
    RowBox[{
     TagBox[
      SubscriptBox[
       RowBox[{
        AdjustmentBox["\[VerticalSeparator]",
         BoxBaselineShift->-0.1,
         BoxMargins->{{-0.2, 0}, {0, 0}}], 
        AdjustmentBox[
         TagBox["\[Alpha]",
          QuantumAlgebra`QuantumAlgebra`KetArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0], "\[RightAngleBracket]"}], 
       TagBox[
        AdjustmentBox[
         TagBox["1",
          QuantumAlgebra`QuantumAlgebra`KetArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0],
        QuantumAlgebra`QuantumAlgebra`UDScript,
        BaseStyle->"RIndex"]],
      QuantumAlgebra`QuantumAlgebra`Ket,
      BaseStyle->"KetWrapper"], "\[CircleTimes]", 
     TagBox[
      SubscriptBox[
       RowBox[{
        AdjustmentBox["\[VerticalSeparator]",
         BoxBaselineShift->-0.1,
         BoxMargins->{{-0.2, 0}, {0, 0}}], 
        AdjustmentBox[
         TagBox["\[Beta]",
          QuantumAlgebra`QuantumAlgebra`KetArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0], "\[RightAngleBracket]"}], 
       TagBox[
        AdjustmentBox[
         TagBox["2",
          QuantumAlgebra`QuantumAlgebra`KetArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0],
        QuantumAlgebra`QuantumAlgebra`UDScript,
        BaseStyle->"RIndex"]],
      QuantumAlgebra`QuantumAlgebra`Ket,
      BaseStyle->"KetWrapper"]}], "\[CenterDot]", 
    RowBox[{
     TagBox[
      RowBox[{
       SubscriptBox["\[InvisiblePrefixScriptBase]", 
        TagBox[
         AdjustmentBox[
          TagBox["1",
           QuantumAlgebra`QuantumAlgebra`BraArgs,
           BaseStyle->"BraKetArg"],
          BoxBaselineShift->0],
         QuantumAlgebra`QuantumAlgebra`UDScript,
         BaseStyle->"LIndex"]], 
       RowBox[{"\[LeftAngleBracket]", 
        AdjustmentBox[
         TagBox["\[Gamma]",
          QuantumAlgebra`QuantumAlgebra`BraArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0], 
        AdjustmentBox["\[VerticalSeparator]",
         BoxBaselineShift->-0.1,
         BoxMargins->{{0, -0.2}, {0, 0}}]}]}],
      QuantumAlgebra`QuantumAlgebra`Bra,
      BaseStyle->"BraWrapper"], "\[CircleTimes]", 
     TagBox[
      RowBox[{
       SubscriptBox["\[InvisiblePrefixScriptBase]", 
        TagBox[
         AdjustmentBox[
          TagBox["2",
           QuantumAlgebra`QuantumAlgebra`BraArgs,
           BaseStyle->"BraKetArg"],
          BoxBaselineShift->0],
         QuantumAlgebra`QuantumAlgebra`UDScript,
         BaseStyle->"LIndex"]], 
       RowBox[{"\[LeftAngleBracket]", 
        AdjustmentBox[
         TagBox["\[Epsilon]",
          QuantumAlgebra`QuantumAlgebra`BraArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0], 
        AdjustmentBox["\[VerticalSeparator]",
         BoxBaselineShift->-0.1,
         BoxMargins->{{0, -0.2}, {0, 0}}]}]}],
      QuantumAlgebra`QuantumAlgebra`Bra,
      BaseStyle->"BraWrapper"]}]}], ")"}], "\[CenterDot]", 
  RowBox[{"(", 
   RowBox[{
    RowBox[{
     TagBox[
      SubscriptBox[
       RowBox[{
        AdjustmentBox["\[VerticalSeparator]",
         BoxBaselineShift->-0.1,
         BoxMargins->{{-0.2, 0}, {0, 0}}], 
        AdjustmentBox[
         TagBox["\[CurlyEpsilon]",
          QuantumAlgebra`QuantumAlgebra`KetArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0], "\[RightAngleBracket]"}], 
       TagBox[
        AdjustmentBox[
         TagBox["1",
          QuantumAlgebra`QuantumAlgebra`KetArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0],
        QuantumAlgebra`QuantumAlgebra`UDScript,
        BaseStyle->"RIndex"]],
      QuantumAlgebra`QuantumAlgebra`Ket,
      BaseStyle->"KetWrapper"], "\[CircleTimes]", 
     TagBox[
      SubscriptBox[
       RowBox[{
        AdjustmentBox["\[VerticalSeparator]",
         BoxBaselineShift->-0.1,
         BoxMargins->{{-0.2, 0}, {0, 0}}], 
        AdjustmentBox[
         TagBox["\[Zeta]",
          QuantumAlgebra`QuantumAlgebra`KetArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0], "\[RightAngleBracket]"}], 
       TagBox[
        AdjustmentBox[
         TagBox["2",
          QuantumAlgebra`QuantumAlgebra`KetArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0],
        QuantumAlgebra`QuantumAlgebra`UDScript,
        BaseStyle->"RIndex"]],
      QuantumAlgebra`QuantumAlgebra`Ket,
      BaseStyle->"KetWrapper"]}], "\[CenterDot]", 
    RowBox[{
     TagBox[
      RowBox[{
       SubscriptBox["\[InvisiblePrefixScriptBase]", 
        TagBox[
         AdjustmentBox[
          TagBox["1",
           QuantumAlgebra`QuantumAlgebra`BraArgs,
           BaseStyle->"BraKetArg"],
          BoxBaselineShift->0],
         QuantumAlgebra`QuantumAlgebra`UDScript,
         BaseStyle->"LIndex"]], 
       RowBox[{"\[LeftAngleBracket]", 
        AdjustmentBox[
         TagBox["\[Eta]",
          QuantumAlgebra`QuantumAlgebra`BraArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0], 
        AdjustmentBox["\[VerticalSeparator]",
         BoxBaselineShift->-0.1,
         BoxMargins->{{0, -0.2}, {0, 0}}]}]}],
      QuantumAlgebra`QuantumAlgebra`Bra,
      BaseStyle->"BraWrapper"], "\[CircleTimes]", 
     TagBox[
      RowBox[{
       SubscriptBox["\[InvisiblePrefixScriptBase]", 
        TagBox[
         AdjustmentBox[
          TagBox["2",
           QuantumAlgebra`QuantumAlgebra`BraArgs,
           BaseStyle->"BraKetArg"],
          BoxBaselineShift->0],
         QuantumAlgebra`QuantumAlgebra`UDScript,
         BaseStyle->"LIndex"]], 
       RowBox[{"\[LeftAngleBracket]", 
        AdjustmentBox[
         TagBox["\[Theta]",
          QuantumAlgebra`QuantumAlgebra`BraArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0], 
        AdjustmentBox["\[VerticalSeparator]",
         BoxBaselineShift->-0.1,
         BoxMargins->{{0, -0.2}, {0, 0}}]}]}],
      QuantumAlgebra`QuantumAlgebra`Bra,
      BaseStyle->"BraWrapper"]}]}], ")"}]}]], "Input",
 CellChangeTimes->{{3.444240849752*^9, 3.4442409541099997`*^9}, {
  3.4442415352539997`*^9, 3.444241547849*^9}, {3.444242234216*^9, 
  3.444242299317*^9}, {3.444302015793*^9, 3.444302145623*^9}, {
  3.474321249014677*^9, 3.4743212502497473`*^9}, {3.4743213411949496`*^9, 
  3.4743213420359974`*^9}, {3.474321387308587*^9, 3.474321388652664*^9}, {
  3.474904760790496*^9, 3.47490476191556*^9}, {3.5944549898449526`*^9, 
  3.594455002027649*^9}}],

Cell[BoxData[
 RowBox[{
  TagBox[
   RowBox[{
    SubscriptBox["\[InvisiblePrefixScriptBase]", 
     TagBox[
      AdjustmentBox[
       TagBox["1",
        QuantumAlgebra`QuantumAlgebra`BraArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0],
      QuantumAlgebra`QuantumAlgebra`UDScript,
      BaseStyle->"LIndex"]], 
    SubscriptBox[
     RowBox[{"\[LeftAngleBracket]", 
      AdjustmentBox[
       RowBox[{
        TagBox["\[Gamma]",
         QuantumAlgebra`QuantumAlgebra`BraKetArgs,
         BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
        TagBox["\[CurlyEpsilon]",
         QuantumAlgebra`QuantumAlgebra`BraKetArgs,
         BaseStyle->"BraKetArg"]}],
       BoxBaselineShift->0], "\[RightAngleBracket]"}], 
     TagBox[
      AdjustmentBox[
       TagBox["1",
        QuantumAlgebra`QuantumAlgebra`BraArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0],
      QuantumAlgebra`QuantumAlgebra`UDScript,
      BaseStyle->"RIndex"]]}],
   QuantumAlgebra`QuantumAlgebra`Braket,
   BaseStyle->"BraKetWrapper"], " ", 
  TagBox[
   RowBox[{
    SubscriptBox["\[InvisiblePrefixScriptBase]", 
     TagBox[
      AdjustmentBox[
       TagBox["2",
        QuantumAlgebra`QuantumAlgebra`BraArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0],
      QuantumAlgebra`QuantumAlgebra`UDScript,
      BaseStyle->"LIndex"]], 
    SubscriptBox[
     RowBox[{"\[LeftAngleBracket]", 
      AdjustmentBox[
       RowBox[{
        TagBox["\[Epsilon]",
         QuantumAlgebra`QuantumAlgebra`BraKetArgs,
         BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
        TagBox["\[Zeta]",
         QuantumAlgebra`QuantumAlgebra`BraKetArgs,
         BaseStyle->"BraKetArg"]}],
       BoxBaselineShift->0], "\[RightAngleBracket]"}], 
     TagBox[
      AdjustmentBox[
       TagBox["2",
        QuantumAlgebra`QuantumAlgebra`BraArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0],
      QuantumAlgebra`QuantumAlgebra`UDScript,
      BaseStyle->"RIndex"]]}],
   QuantumAlgebra`QuantumAlgebra`Braket,
   BaseStyle->"BraKetWrapper"], " ", 
  RowBox[{
   RowBox[{
    TagBox[
     SubscriptBox[
      RowBox[{
       AdjustmentBox["\[VerticalSeparator]",
        BoxBaselineShift->-0.1,
        BoxMargins->{{-0.2, 0}, {0, 0}}], 
       AdjustmentBox[
        TagBox["\[Alpha]",
         QuantumAlgebra`QuantumAlgebra`KetArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0], "\[RightAngleBracket]"}], 
      TagBox[
       AdjustmentBox[
        TagBox["1",
         QuantumAlgebra`QuantumAlgebra`KetArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"RIndex"]],
     QuantumAlgebra`QuantumAlgebra`Ket,
     BaseStyle->"KetWrapper"], "\[CircleTimes]", 
    TagBox[
     SubscriptBox[
      RowBox[{
       AdjustmentBox["\[VerticalSeparator]",
        BoxBaselineShift->-0.1,
        BoxMargins->{{-0.2, 0}, {0, 0}}], 
       AdjustmentBox[
        TagBox["\[Beta]",
         QuantumAlgebra`QuantumAlgebra`KetArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0], "\[RightAngleBracket]"}], 
      TagBox[
       AdjustmentBox[
        TagBox["2",
         QuantumAlgebra`QuantumAlgebra`KetArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"RIndex"]],
     QuantumAlgebra`QuantumAlgebra`Ket,
     BaseStyle->"KetWrapper"]}], "\[CenterDot]", 
   RowBox[{
    TagBox[
     RowBox[{
      SubscriptBox["\[InvisiblePrefixScriptBase]", 
       TagBox[
        AdjustmentBox[
         TagBox["1",
          QuantumAlgebra`QuantumAlgebra`BraArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0],
        QuantumAlgebra`QuantumAlgebra`UDScript,
        BaseStyle->"LIndex"]], 
      RowBox[{"\[LeftAngleBracket]", 
       AdjustmentBox[
        TagBox["\[Eta]",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0], 
       AdjustmentBox["\[VerticalSeparator]",
        BoxBaselineShift->-0.1,
        BoxMargins->{{0, -0.2}, {0, 0}}]}]}],
     QuantumAlgebra`QuantumAlgebra`Bra,
     BaseStyle->"BraWrapper"], "\[CircleTimes]", 
    TagBox[
     RowBox[{
      SubscriptBox["\[InvisiblePrefixScriptBase]", 
       TagBox[
        AdjustmentBox[
         TagBox["2",
          QuantumAlgebra`QuantumAlgebra`BraArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0],
        QuantumAlgebra`QuantumAlgebra`UDScript,
        BaseStyle->"LIndex"]], 
      RowBox[{"\[LeftAngleBracket]", 
       AdjustmentBox[
        TagBox["\[Theta]",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0], 
       AdjustmentBox["\[VerticalSeparator]",
        BoxBaselineShift->-0.1,
        BoxMargins->{{0, -0.2}, {0, 0}}]}]}],
     QuantumAlgebra`QuantumAlgebra`Bra,
     BaseStyle->"BraWrapper"]}]}]}]], "Output",
 CellChangeTimes->{3.474239624580874*^9, 3.474321165264887*^9, 
  3.474321251133798*^9, 3.474321342657033*^9, 3.474321389155693*^9, 
  3.594455002623683*^9}]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{
  RowBox[{"(", 
   RowBox[{
    RowBox[{
     TagBox[
      SubscriptBox[
       RowBox[{
        AdjustmentBox["\[VerticalSeparator]",
         BoxBaselineShift->-0.1,
         BoxMargins->{{-0.2, 0}, {0, 0}}], 
        AdjustmentBox[
         TagBox["\[Alpha]",
          QuantumAlgebra`QuantumAlgebra`KetArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0], "\[RightAngleBracket]"}], 
       TagBox[
        AdjustmentBox[
         TagBox["1",
          QuantumAlgebra`QuantumAlgebra`KetArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0],
        QuantumAlgebra`QuantumAlgebra`UDScript,
        BaseStyle->"RIndex"]],
      QuantumAlgebra`QuantumAlgebra`Ket,
      BaseStyle->"KetWrapper"], "\[CircleTimes]", 
     TagBox[
      SubscriptBox[
       RowBox[{
        AdjustmentBox["\[VerticalSeparator]",
         BoxBaselineShift->-0.1,
         BoxMargins->{{-0.2, 0}, {0, 0}}], 
        AdjustmentBox[
         TagBox["\[Beta]",
          QuantumAlgebra`QuantumAlgebra`KetArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0], "\[RightAngleBracket]"}], 
       TagBox[
        AdjustmentBox[
         TagBox["3",
          QuantumAlgebra`QuantumAlgebra`KetArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0],
        QuantumAlgebra`QuantumAlgebra`UDScript,
        BaseStyle->"RIndex"]],
      QuantumAlgebra`QuantumAlgebra`Ket,
      BaseStyle->"KetWrapper"]}], "\[CenterDot]", 
    RowBox[{
     TagBox[
      RowBox[{
       SubscriptBox["\[InvisiblePrefixScriptBase]", 
        TagBox[
         AdjustmentBox[
          TagBox["1",
           QuantumAlgebra`QuantumAlgebra`BraArgs,
           BaseStyle->"BraKetArg"],
          BoxBaselineShift->0],
         QuantumAlgebra`QuantumAlgebra`UDScript,
         BaseStyle->"LIndex"]], 
       RowBox[{"\[LeftAngleBracket]", 
        AdjustmentBox[
         TagBox["\[Gamma]",
          QuantumAlgebra`QuantumAlgebra`BraArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0], 
        AdjustmentBox["\[VerticalSeparator]",
         BoxBaselineShift->-0.1,
         BoxMargins->{{0, -0.2}, {0, 0}}]}]}],
      QuantumAlgebra`QuantumAlgebra`Bra,
      BaseStyle->"BraWrapper"], "\[CircleTimes]", 
     TagBox[
      RowBox[{
       SubscriptBox["\[InvisiblePrefixScriptBase]", 
        TagBox[
         AdjustmentBox[
          TagBox["3",
           QuantumAlgebra`QuantumAlgebra`BraArgs,
           BaseStyle->"BraKetArg"],
          BoxBaselineShift->0],
         QuantumAlgebra`QuantumAlgebra`UDScript,
         BaseStyle->"LIndex"]], 
       RowBox[{"\[LeftAngleBracket]", 
        AdjustmentBox[
         TagBox["\[Epsilon]",
          QuantumAlgebra`QuantumAlgebra`BraArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0], 
        AdjustmentBox["\[VerticalSeparator]",
         BoxBaselineShift->-0.1,
         BoxMargins->{{0, -0.2}, {0, 0}}]}]}],
      QuantumAlgebra`QuantumAlgebra`Bra,
      BaseStyle->"BraWrapper"]}]}], ")"}], "\[CenterDot]", 
  RowBox[{"(", 
   RowBox[{
    RowBox[{
     TagBox[
      SubscriptBox[
       RowBox[{
        AdjustmentBox["\[VerticalSeparator]",
         BoxBaselineShift->-0.1,
         BoxMargins->{{-0.2, 0}, {0, 0}}], 
        AdjustmentBox[
         TagBox["\[CurlyEpsilon]",
          QuantumAlgebra`QuantumAlgebra`KetArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0], "\[RightAngleBracket]"}], 
       TagBox[
        AdjustmentBox[
         TagBox["1",
          QuantumAlgebra`QuantumAlgebra`KetArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0],
        QuantumAlgebra`QuantumAlgebra`UDScript,
        BaseStyle->"RIndex"]],
      QuantumAlgebra`QuantumAlgebra`Ket,
      BaseStyle->"KetWrapper"], "\[CircleTimes]", 
     TagBox[
      SubscriptBox[
       RowBox[{
        AdjustmentBox["\[VerticalSeparator]",
         BoxBaselineShift->-0.1,
         BoxMargins->{{-0.2, 0}, {0, 0}}], 
        AdjustmentBox[
         TagBox["\[Zeta]",
          QuantumAlgebra`QuantumAlgebra`KetArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0], "\[RightAngleBracket]"}], 
       TagBox[
        AdjustmentBox[
         TagBox["2",
          QuantumAlgebra`QuantumAlgebra`KetArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0],
        QuantumAlgebra`QuantumAlgebra`UDScript,
        BaseStyle->"RIndex"]],
      QuantumAlgebra`QuantumAlgebra`Ket,
      BaseStyle->"KetWrapper"]}], "\[CenterDot]", 
    RowBox[{
     TagBox[
      RowBox[{
       SubscriptBox["\[InvisiblePrefixScriptBase]", 
        TagBox[
         AdjustmentBox[
          TagBox["1",
           QuantumAlgebra`QuantumAlgebra`BraArgs,
           BaseStyle->"BraKetArg"],
          BoxBaselineShift->0],
         QuantumAlgebra`QuantumAlgebra`UDScript,
         BaseStyle->"LIndex"]], 
       RowBox[{"\[LeftAngleBracket]", 
        AdjustmentBox[
         TagBox["\[Eta]",
          QuantumAlgebra`QuantumAlgebra`BraArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0], 
        AdjustmentBox["\[VerticalSeparator]",
         BoxBaselineShift->-0.1,
         BoxMargins->{{0, -0.2}, {0, 0}}]}]}],
      QuantumAlgebra`QuantumAlgebra`Bra,
      BaseStyle->"BraWrapper"], "\[CircleTimes]", 
     TagBox[
      RowBox[{
       SubscriptBox["\[InvisiblePrefixScriptBase]", 
        TagBox[
         AdjustmentBox[
          TagBox["2",
           QuantumAlgebra`QuantumAlgebra`BraArgs,
           BaseStyle->"BraKetArg"],
          BoxBaselineShift->0],
         QuantumAlgebra`QuantumAlgebra`UDScript,
         BaseStyle->"LIndex"]], 
       RowBox[{"\[LeftAngleBracket]", 
        AdjustmentBox[
         TagBox["\[Theta]",
          QuantumAlgebra`QuantumAlgebra`BraArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0], 
        AdjustmentBox["\[VerticalSeparator]",
         BoxBaselineShift->-0.1,
         BoxMargins->{{0, -0.2}, {0, 0}}]}]}],
      QuantumAlgebra`QuantumAlgebra`Bra,
      BaseStyle->"BraWrapper"]}]}], ")"}]}]], "Input",
 CellChangeTimes->{{3.444240849752*^9, 3.4442409541099997`*^9}, {
  3.4442415352539997`*^9, 3.444241547849*^9}, {3.444242234216*^9, 
  3.444242299317*^9}, {3.444246721797*^9, 3.44424673615*^9}, {
  3.444246768184*^9, 3.444246774105*^9}, {3.444302170201*^9, 
  3.44430219665*^9}, {3.594455038525737*^9, 3.594455053217577*^9}}],

Cell[BoxData[
 RowBox[{
  TagBox[
   RowBox[{
    SubscriptBox["\[InvisiblePrefixScriptBase]", 
     TagBox[
      AdjustmentBox[
       TagBox["1",
        QuantumAlgebra`QuantumAlgebra`BraArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0],
      QuantumAlgebra`QuantumAlgebra`UDScript,
      BaseStyle->"LIndex"]], 
    SubscriptBox[
     RowBox[{"\[LeftAngleBracket]", 
      AdjustmentBox[
       RowBox[{
        TagBox["\[Gamma]",
         QuantumAlgebra`QuantumAlgebra`BraKetArgs,
         BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
        TagBox["\[CurlyEpsilon]",
         QuantumAlgebra`QuantumAlgebra`BraKetArgs,
         BaseStyle->"BraKetArg"]}],
       BoxBaselineShift->0], "\[RightAngleBracket]"}], 
     TagBox[
      AdjustmentBox[
       TagBox["1",
        QuantumAlgebra`QuantumAlgebra`BraArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0],
      QuantumAlgebra`QuantumAlgebra`UDScript,
      BaseStyle->"RIndex"]]}],
   QuantumAlgebra`QuantumAlgebra`Braket,
   BaseStyle->"BraKetWrapper"], " ", 
  RowBox[{
   RowBox[{
    TagBox[
     SubscriptBox[
      RowBox[{
       AdjustmentBox["\[VerticalSeparator]",
        BoxBaselineShift->-0.1,
        BoxMargins->{{-0.2, 0}, {0, 0}}], 
       AdjustmentBox[
        TagBox["\[Alpha]",
         QuantumAlgebra`QuantumAlgebra`KetArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0], "\[RightAngleBracket]"}], 
      TagBox[
       AdjustmentBox[
        TagBox["1",
         QuantumAlgebra`QuantumAlgebra`KetArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"RIndex"]],
     QuantumAlgebra`QuantumAlgebra`Ket,
     BaseStyle->"KetWrapper"], "\[CircleTimes]", 
    TagBox[
     SubscriptBox[
      RowBox[{
       AdjustmentBox["\[VerticalSeparator]",
        BoxBaselineShift->-0.1,
        BoxMargins->{{-0.2, 0}, {0, 0}}], 
       AdjustmentBox[
        TagBox["\[Beta]",
         QuantumAlgebra`QuantumAlgebra`KetArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0], "\[RightAngleBracket]"}], 
      TagBox[
       AdjustmentBox[
        TagBox["3",
         QuantumAlgebra`QuantumAlgebra`KetArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"RIndex"]],
     QuantumAlgebra`QuantumAlgebra`Ket,
     BaseStyle->"KetWrapper"], "\[CircleTimes]", 
    TagBox[
     SubscriptBox[
      RowBox[{
       AdjustmentBox["\[VerticalSeparator]",
        BoxBaselineShift->-0.1,
        BoxMargins->{{-0.2, 0}, {0, 0}}], 
       AdjustmentBox[
        TagBox["\[Zeta]",
         QuantumAlgebra`QuantumAlgebra`KetArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0], "\[RightAngleBracket]"}], 
      TagBox[
       AdjustmentBox[
        TagBox["2",
         QuantumAlgebra`QuantumAlgebra`KetArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"RIndex"]],
     QuantumAlgebra`QuantumAlgebra`Ket,
     BaseStyle->"KetWrapper"]}], "\[CenterDot]", 
   RowBox[{
    TagBox[
     RowBox[{
      SubscriptBox["\[InvisiblePrefixScriptBase]", 
       TagBox[
        AdjustmentBox[
         TagBox["3",
          QuantumAlgebra`QuantumAlgebra`BraArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0],
        QuantumAlgebra`QuantumAlgebra`UDScript,
        BaseStyle->"LIndex"]], 
      RowBox[{"\[LeftAngleBracket]", 
       AdjustmentBox[
        TagBox["\[Epsilon]",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0], 
       AdjustmentBox["\[VerticalSeparator]",
        BoxBaselineShift->-0.1,
        BoxMargins->{{0, -0.2}, {0, 0}}]}]}],
     QuantumAlgebra`QuantumAlgebra`Bra,
     BaseStyle->"BraWrapper"], "\[CircleTimes]", 
    TagBox[
     RowBox[{
      SubscriptBox["\[InvisiblePrefixScriptBase]", 
       TagBox[
        AdjustmentBox[
         TagBox["1",
          QuantumAlgebra`QuantumAlgebra`BraArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0],
        QuantumAlgebra`QuantumAlgebra`UDScript,
        BaseStyle->"LIndex"]], 
      RowBox[{"\[LeftAngleBracket]", 
       AdjustmentBox[
        TagBox["\[Eta]",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0], 
       AdjustmentBox["\[VerticalSeparator]",
        BoxBaselineShift->-0.1,
        BoxMargins->{{0, -0.2}, {0, 0}}]}]}],
     QuantumAlgebra`QuantumAlgebra`Bra,
     BaseStyle->"BraWrapper"], "\[CircleTimes]", 
    TagBox[
     RowBox[{
      SubscriptBox["\[InvisiblePrefixScriptBase]", 
       TagBox[
        AdjustmentBox[
         TagBox["2",
          QuantumAlgebra`QuantumAlgebra`BraArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0],
        QuantumAlgebra`QuantumAlgebra`UDScript,
        BaseStyle->"LIndex"]], 
      RowBox[{"\[LeftAngleBracket]", 
       AdjustmentBox[
        TagBox["\[Theta]",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0], 
       AdjustmentBox["\[VerticalSeparator]",
        BoxBaselineShift->-0.1,
        BoxMargins->{{0, -0.2}, {0, 0}}]}]}],
     QuantumAlgebra`QuantumAlgebra`Bra,
     BaseStyle->"BraWrapper"]}]}]}]], "Output",
 CellChangeTimes->{3.47423962643398*^9, 3.474321170949212*^9, 
  3.594455053510594*^9}]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{
  RowBox[{"(", 
   RowBox[{
    RowBox[{
     TagBox[
      SubscriptBox[
       RowBox[{
        AdjustmentBox["\[VerticalSeparator]",
         BoxBaselineShift->-0.1,
         BoxMargins->{{-0.2, 0}, {0, 0}}], 
        AdjustmentBox[
         TagBox["\[Alpha]",
          QuantumAlgebra`QuantumAlgebra`KetArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0], "\[RightAngleBracket]"}], 
       TagBox[
        AdjustmentBox[
         TagBox["4",
          QuantumAlgebra`QuantumAlgebra`KetArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0],
        QuantumAlgebra`QuantumAlgebra`UDScript,
        BaseStyle->"RIndex"]],
      QuantumAlgebra`QuantumAlgebra`Ket,
      BaseStyle->"KetWrapper"], "\[CircleTimes]", 
     TagBox[
      SubscriptBox[
       RowBox[{
        AdjustmentBox["\[VerticalSeparator]",
         BoxBaselineShift->-0.1,
         BoxMargins->{{-0.2, 0}, {0, 0}}], 
        AdjustmentBox[
         TagBox["\[Beta]",
          QuantumAlgebra`QuantumAlgebra`KetArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0], "\[RightAngleBracket]"}], 
       TagBox[
        AdjustmentBox[
         TagBox["3",
          QuantumAlgebra`QuantumAlgebra`KetArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0],
        QuantumAlgebra`QuantumAlgebra`UDScript,
        BaseStyle->"RIndex"]],
      QuantumAlgebra`QuantumAlgebra`Ket,
      BaseStyle->"KetWrapper"]}], "\[CenterDot]", 
    RowBox[{
     TagBox[
      RowBox[{
       SubscriptBox["\[InvisiblePrefixScriptBase]", 
        TagBox[
         AdjustmentBox[
          TagBox["4",
           QuantumAlgebra`QuantumAlgebra`BraArgs,
           BaseStyle->"BraKetArg"],
          BoxBaselineShift->0],
         QuantumAlgebra`QuantumAlgebra`UDScript,
         BaseStyle->"LIndex"]], 
       RowBox[{"\[LeftAngleBracket]", 
        AdjustmentBox[
         TagBox["\[Gamma]",
          QuantumAlgebra`QuantumAlgebra`BraArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0], 
        AdjustmentBox["\[VerticalSeparator]",
         BoxBaselineShift->-0.1,
         BoxMargins->{{0, -0.2}, {0, 0}}]}]}],
      QuantumAlgebra`QuantumAlgebra`Bra,
      BaseStyle->"BraWrapper"], "\[CircleTimes]", 
     TagBox[
      RowBox[{
       SubscriptBox["\[InvisiblePrefixScriptBase]", 
        TagBox[
         AdjustmentBox[
          TagBox["3",
           QuantumAlgebra`QuantumAlgebra`BraArgs,
           BaseStyle->"BraKetArg"],
          BoxBaselineShift->0],
         QuantumAlgebra`QuantumAlgebra`UDScript,
         BaseStyle->"LIndex"]], 
       RowBox[{"\[LeftAngleBracket]", 
        AdjustmentBox[
         TagBox["\[Epsilon]",
          QuantumAlgebra`QuantumAlgebra`BraArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0], 
        AdjustmentBox["\[VerticalSeparator]",
         BoxBaselineShift->-0.1,
         BoxMargins->{{0, -0.2}, {0, 0}}]}]}],
      QuantumAlgebra`QuantumAlgebra`Bra,
      BaseStyle->"BraWrapper"]}]}], ")"}], "\[CenterDot]", 
  RowBox[{"(", 
   RowBox[{
    RowBox[{
     TagBox[
      SubscriptBox[
       RowBox[{
        AdjustmentBox["\[VerticalSeparator]",
         BoxBaselineShift->-0.1,
         BoxMargins->{{-0.2, 0}, {0, 0}}], 
        AdjustmentBox[
         TagBox["\[CurlyEpsilon]",
          QuantumAlgebra`QuantumAlgebra`KetArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0], "\[RightAngleBracket]"}], 
       TagBox[
        AdjustmentBox[
         TagBox["1",
          QuantumAlgebra`QuantumAlgebra`KetArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0],
        QuantumAlgebra`QuantumAlgebra`UDScript,
        BaseStyle->"RIndex"]],
      QuantumAlgebra`QuantumAlgebra`Ket,
      BaseStyle->"KetWrapper"], "\[CircleTimes]", 
     TagBox[
      SubscriptBox[
       RowBox[{
        AdjustmentBox["\[VerticalSeparator]",
         BoxBaselineShift->-0.1,
         BoxMargins->{{-0.2, 0}, {0, 0}}], 
        AdjustmentBox[
         TagBox["\[Zeta]",
          QuantumAlgebra`QuantumAlgebra`KetArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0], "\[RightAngleBracket]"}], 
       TagBox[
        AdjustmentBox[
         TagBox["2",
          QuantumAlgebra`QuantumAlgebra`KetArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0],
        QuantumAlgebra`QuantumAlgebra`UDScript,
        BaseStyle->"RIndex"]],
      QuantumAlgebra`QuantumAlgebra`Ket,
      BaseStyle->"KetWrapper"]}], "\[CenterDot]", 
    RowBox[{
     TagBox[
      RowBox[{
       SubscriptBox["\[InvisiblePrefixScriptBase]", 
        TagBox[
         AdjustmentBox[
          TagBox["1",
           QuantumAlgebra`QuantumAlgebra`BraArgs,
           BaseStyle->"BraKetArg"],
          BoxBaselineShift->0],
         QuantumAlgebra`QuantumAlgebra`UDScript,
         BaseStyle->"LIndex"]], 
       RowBox[{"\[LeftAngleBracket]", 
        AdjustmentBox[
         TagBox["\[Eta]",
          QuantumAlgebra`QuantumAlgebra`BraArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0], 
        AdjustmentBox["\[VerticalSeparator]",
         BoxBaselineShift->-0.1,
         BoxMargins->{{0, -0.2}, {0, 0}}]}]}],
      QuantumAlgebra`QuantumAlgebra`Bra,
      BaseStyle->"BraWrapper"], "\[CircleTimes]", 
     TagBox[
      RowBox[{
       SubscriptBox["\[InvisiblePrefixScriptBase]", 
        TagBox[
         AdjustmentBox[
          TagBox["2",
           QuantumAlgebra`QuantumAlgebra`BraArgs,
           BaseStyle->"BraKetArg"],
          BoxBaselineShift->0],
         QuantumAlgebra`QuantumAlgebra`UDScript,
         BaseStyle->"LIndex"]], 
       RowBox[{"\[LeftAngleBracket]", 
        AdjustmentBox[
         TagBox["\[Theta]",
          QuantumAlgebra`QuantumAlgebra`BraArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0], 
        AdjustmentBox["\[VerticalSeparator]",
         BoxBaselineShift->-0.1,
         BoxMargins->{{0, -0.2}, {0, 0}}]}]}],
      QuantumAlgebra`QuantumAlgebra`Bra,
      BaseStyle->"BraWrapper"]}]}], ")"}]}]], "Input",
 CellChangeTimes->{{3.444240849752*^9, 3.4442409541099997`*^9}, {
  3.4442415352539997`*^9, 3.444241547849*^9}, {3.444242234216*^9, 
  3.444242299317*^9}, {3.444246721797*^9, 3.44424673615*^9}, {
  3.444246768184*^9, 3.444246774105*^9}, {3.444302170201*^9, 
  3.44430219665*^9}, {3.444303324042*^9, 3.444303328308*^9}, {
  3.444304475926*^9, 3.4443044773640003`*^9}, {3.4443083069639997`*^9, 
  3.4443083075299997`*^9}, {3.5944550632281494`*^9, 3.5944550736207438`*^9}}],

Cell[BoxData[
 RowBox[{
  RowBox[{
   TagBox[
    SubscriptBox[
     RowBox[{
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{-0.2, 0}, {0, 0}}], 
      AdjustmentBox[
       TagBox["\[Alpha]",
        QuantumAlgebra`QuantumAlgebra`KetArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], "\[RightAngleBracket]"}], 
     TagBox[
      AdjustmentBox[
       TagBox["4",
        QuantumAlgebra`QuantumAlgebra`KetArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0],
      QuantumAlgebra`QuantumAlgebra`UDScript,
      BaseStyle->"RIndex"]],
    QuantumAlgebra`QuantumAlgebra`Ket,
    BaseStyle->"KetWrapper"], "\[CircleTimes]", 
   TagBox[
    SubscriptBox[
     RowBox[{
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{-0.2, 0}, {0, 0}}], 
      AdjustmentBox[
       TagBox["\[Beta]",
        QuantumAlgebra`QuantumAlgebra`KetArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], "\[RightAngleBracket]"}], 
     TagBox[
      AdjustmentBox[
       TagBox["3",
        QuantumAlgebra`QuantumAlgebra`KetArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0],
      QuantumAlgebra`QuantumAlgebra`UDScript,
      BaseStyle->"RIndex"]],
    QuantumAlgebra`QuantumAlgebra`Ket,
    BaseStyle->"KetWrapper"], "\[CircleTimes]", 
   TagBox[
    SubscriptBox[
     RowBox[{
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{-0.2, 0}, {0, 0}}], 
      AdjustmentBox[
       TagBox["\[CurlyEpsilon]",
        QuantumAlgebra`QuantumAlgebra`KetArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], "\[RightAngleBracket]"}], 
     TagBox[
      AdjustmentBox[
       TagBox["1",
        QuantumAlgebra`QuantumAlgebra`KetArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0],
      QuantumAlgebra`QuantumAlgebra`UDScript,
      BaseStyle->"RIndex"]],
    QuantumAlgebra`QuantumAlgebra`Ket,
    BaseStyle->"KetWrapper"], "\[CircleTimes]", 
   TagBox[
    SubscriptBox[
     RowBox[{
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{-0.2, 0}, {0, 0}}], 
      AdjustmentBox[
       TagBox["\[Zeta]",
        QuantumAlgebra`QuantumAlgebra`KetArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], "\[RightAngleBracket]"}], 
     TagBox[
      AdjustmentBox[
       TagBox["2",
        QuantumAlgebra`QuantumAlgebra`KetArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0],
      QuantumAlgebra`QuantumAlgebra`UDScript,
      BaseStyle->"RIndex"]],
    QuantumAlgebra`QuantumAlgebra`Ket,
    BaseStyle->"KetWrapper"]}], "\[CenterDot]", 
  RowBox[{
   TagBox[
    RowBox[{
     SubscriptBox["\[InvisiblePrefixScriptBase]", 
      TagBox[
       AdjustmentBox[
        TagBox["4",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"LIndex"]], 
     RowBox[{"\[LeftAngleBracket]", 
      AdjustmentBox[
       TagBox["\[Gamma]",
        QuantumAlgebra`QuantumAlgebra`BraArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], 
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{0, -0.2}, {0, 0}}]}]}],
    QuantumAlgebra`QuantumAlgebra`Bra,
    BaseStyle->"BraWrapper"], "\[CircleTimes]", 
   TagBox[
    RowBox[{
     SubscriptBox["\[InvisiblePrefixScriptBase]", 
      TagBox[
       AdjustmentBox[
        TagBox["3",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"LIndex"]], 
     RowBox[{"\[LeftAngleBracket]", 
      AdjustmentBox[
       TagBox["\[Epsilon]",
        QuantumAlgebra`QuantumAlgebra`BraArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], 
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{0, -0.2}, {0, 0}}]}]}],
    QuantumAlgebra`QuantumAlgebra`Bra,
    BaseStyle->"BraWrapper"], "\[CircleTimes]", 
   TagBox[
    RowBox[{
     SubscriptBox["\[InvisiblePrefixScriptBase]", 
      TagBox[
       AdjustmentBox[
        TagBox["1",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"LIndex"]], 
     RowBox[{"\[LeftAngleBracket]", 
      AdjustmentBox[
       TagBox["\[Eta]",
        QuantumAlgebra`QuantumAlgebra`BraArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], 
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{0, -0.2}, {0, 0}}]}]}],
    QuantumAlgebra`QuantumAlgebra`Bra,
    BaseStyle->"BraWrapper"], "\[CircleTimes]", 
   TagBox[
    RowBox[{
     SubscriptBox["\[InvisiblePrefixScriptBase]", 
      TagBox[
       AdjustmentBox[
        TagBox["2",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"LIndex"]], 
     RowBox[{"\[LeftAngleBracket]", 
      AdjustmentBox[
       TagBox["\[Theta]",
        QuantumAlgebra`QuantumAlgebra`BraArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], 
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{0, -0.2}, {0, 0}}]}]}],
    QuantumAlgebra`QuantumAlgebra`Bra,
    BaseStyle->"BraWrapper"]}]}]], "Output",
 CellChangeTimes->{3.474239627538043*^9, 3.4743211737713737`*^9, 
  3.5944550739057603`*^9}]
}, Open  ]],

Cell["\<\
In all cases the result is a new tensor operator written in its outer form. \
In the first example two brakets has been simplified and the result is a 2 \
rank tensor operator. In the second case, only one match is possible and the \
result is a 3 rank tensor operator. In the last case, there is no matching \
and the result is essentially the same, but has been written as a 4 rank \
tensor operator.  In this case, the result is the same if we compute the \
tensor product of both operators:\
\>", "Text",
 CellChangeTimes->{{3.4442349225*^9, 3.4442349385220003`*^9}, {
   3.444234993856*^9, 3.444235028273*^9}, 3.444236440842*^9, {
   3.444246798557*^9, 3.444247035811*^9}, {3.4442473370620003`*^9, 
   3.4442473430629997`*^9}, {3.444247384594*^9, 3.444247403909*^9}, {
   3.444247438422*^9, 3.444247475071*^9}, {3.444247517374*^9, 
   3.4442475196540003`*^9}, {3.4442475783789997`*^9, 3.444247581238*^9}, {
   3.444247683613*^9, 3.4442476841210003`*^9}, {3.444247729227*^9, 
   3.444247760023*^9}, {3.4442958460555506`*^9, 3.4442958717965508`*^9}, 
   3.444303367568*^9, {3.444303935866*^9, 3.4443039648789997`*^9}, {
   3.4443082806359997`*^9, 3.444308301741*^9}, {3.444308464531*^9, 
   3.444308490216*^9}, {3.444309019499*^9, 3.444309132869*^9}, {
   3.444309172262*^9, 3.444309188049*^9}, {3.44430928763*^9, 
   3.4443094138780003`*^9}, {3.444309472855*^9, 3.444309509163*^9}, 
   3.5944551506101475`*^9}],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{
  RowBox[{"(", 
   RowBox[{
    RowBox[{
     TagBox[
      SubscriptBox[
       RowBox[{
        AdjustmentBox["\[VerticalSeparator]",
         BoxBaselineShift->-0.1,
         BoxMargins->{{-0.2, 0}, {0, 0}}], 
        AdjustmentBox[
         TagBox["\[Alpha]",
          QuantumAlgebra`QuantumAlgebra`KetArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0], "\[RightAngleBracket]"}], 
       TagBox[
        AdjustmentBox[
         TagBox["4",
          QuantumAlgebra`QuantumAlgebra`KetArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0],
        QuantumAlgebra`QuantumAlgebra`UDScript,
        BaseStyle->"RIndex"]],
      QuantumAlgebra`QuantumAlgebra`Ket,
      BaseStyle->"KetWrapper"], "\[CircleTimes]", 
     TagBox[
      SubscriptBox[
       RowBox[{
        AdjustmentBox["\[VerticalSeparator]",
         BoxBaselineShift->-0.1,
         BoxMargins->{{-0.2, 0}, {0, 0}}], 
        AdjustmentBox[
         TagBox["\[Beta]",
          QuantumAlgebra`QuantumAlgebra`KetArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0], "\[RightAngleBracket]"}], 
       TagBox[
        AdjustmentBox[
         TagBox["3",
          QuantumAlgebra`QuantumAlgebra`KetArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0],
        QuantumAlgebra`QuantumAlgebra`UDScript,
        BaseStyle->"RIndex"]],
      QuantumAlgebra`QuantumAlgebra`Ket,
      BaseStyle->"KetWrapper"]}], "\[CenterDot]", 
    RowBox[{
     TagBox[
      RowBox[{
       SubscriptBox["\[InvisiblePrefixScriptBase]", 
        TagBox[
         AdjustmentBox[
          TagBox["4",
           QuantumAlgebra`QuantumAlgebra`BraArgs,
           BaseStyle->"BraKetArg"],
          BoxBaselineShift->0],
         QuantumAlgebra`QuantumAlgebra`UDScript,
         BaseStyle->"LIndex"]], 
       RowBox[{"\[LeftAngleBracket]", 
        AdjustmentBox[
         TagBox["\[Gamma]",
          QuantumAlgebra`QuantumAlgebra`BraArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0], 
        AdjustmentBox["\[VerticalSeparator]",
         BoxBaselineShift->-0.1,
         BoxMargins->{{0, -0.2}, {0, 0}}]}]}],
      QuantumAlgebra`QuantumAlgebra`Bra,
      BaseStyle->"BraWrapper"], "\[CircleTimes]", 
     TagBox[
      RowBox[{
       SubscriptBox["\[InvisiblePrefixScriptBase]", 
        TagBox[
         AdjustmentBox[
          TagBox["3",
           QuantumAlgebra`QuantumAlgebra`BraArgs,
           BaseStyle->"BraKetArg"],
          BoxBaselineShift->0],
         QuantumAlgebra`QuantumAlgebra`UDScript,
         BaseStyle->"LIndex"]], 
       RowBox[{"\[LeftAngleBracket]", 
        AdjustmentBox[
         TagBox["\[Epsilon]",
          QuantumAlgebra`QuantumAlgebra`BraArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0], 
        AdjustmentBox["\[VerticalSeparator]",
         BoxBaselineShift->-0.1,
         BoxMargins->{{0, -0.2}, {0, 0}}]}]}],
      QuantumAlgebra`QuantumAlgebra`Bra,
      BaseStyle->"BraWrapper"]}]}], ")"}], "\[CircleTimes]", 
  RowBox[{"(", 
   RowBox[{
    RowBox[{
     TagBox[
      SubscriptBox[
       RowBox[{
        AdjustmentBox["\[VerticalSeparator]",
         BoxBaselineShift->-0.1,
         BoxMargins->{{-0.2, 0}, {0, 0}}], 
        AdjustmentBox[
         TagBox["\[CurlyEpsilon]",
          QuantumAlgebra`QuantumAlgebra`KetArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0], "\[RightAngleBracket]"}], 
       TagBox[
        AdjustmentBox[
         TagBox["1",
          QuantumAlgebra`QuantumAlgebra`KetArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0],
        QuantumAlgebra`QuantumAlgebra`UDScript,
        BaseStyle->"RIndex"]],
      QuantumAlgebra`QuantumAlgebra`Ket,
      BaseStyle->"KetWrapper"], "\[CircleTimes]", 
     TagBox[
      SubscriptBox[
       RowBox[{
        AdjustmentBox["\[VerticalSeparator]",
         BoxBaselineShift->-0.1,
         BoxMargins->{{-0.2, 0}, {0, 0}}], 
        AdjustmentBox[
         TagBox["\[Zeta]",
          QuantumAlgebra`QuantumAlgebra`KetArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0], "\[RightAngleBracket]"}], 
       TagBox[
        AdjustmentBox[
         TagBox["2",
          QuantumAlgebra`QuantumAlgebra`KetArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0],
        QuantumAlgebra`QuantumAlgebra`UDScript,
        BaseStyle->"RIndex"]],
      QuantumAlgebra`QuantumAlgebra`Ket,
      BaseStyle->"KetWrapper"]}], "\[CenterDot]", 
    RowBox[{
     TagBox[
      RowBox[{
       SubscriptBox["\[InvisiblePrefixScriptBase]", 
        TagBox[
         AdjustmentBox[
          TagBox["1",
           QuantumAlgebra`QuantumAlgebra`BraArgs,
           BaseStyle->"BraKetArg"],
          BoxBaselineShift->0],
         QuantumAlgebra`QuantumAlgebra`UDScript,
         BaseStyle->"LIndex"]], 
       RowBox[{"\[LeftAngleBracket]", 
        AdjustmentBox[
         TagBox["\[Eta]",
          QuantumAlgebra`QuantumAlgebra`BraArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0], 
        AdjustmentBox["\[VerticalSeparator]",
         BoxBaselineShift->-0.1,
         BoxMargins->{{0, -0.2}, {0, 0}}]}]}],
      QuantumAlgebra`QuantumAlgebra`Bra,
      BaseStyle->"BraWrapper"], "\[CircleTimes]", 
     TagBox[
      RowBox[{
       SubscriptBox["\[InvisiblePrefixScriptBase]", 
        TagBox[
         AdjustmentBox[
          TagBox["2",
           QuantumAlgebra`QuantumAlgebra`BraArgs,
           BaseStyle->"BraKetArg"],
          BoxBaselineShift->0],
         QuantumAlgebra`QuantumAlgebra`UDScript,
         BaseStyle->"LIndex"]], 
       RowBox[{"\[LeftAngleBracket]", 
        AdjustmentBox[
         TagBox["\[Theta]",
          QuantumAlgebra`QuantumAlgebra`BraArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0], 
        AdjustmentBox["\[VerticalSeparator]",
         BoxBaselineShift->-0.1,
         BoxMargins->{{0, -0.2}, {0, 0}}]}]}],
      QuantumAlgebra`QuantumAlgebra`Bra,
      BaseStyle->"BraWrapper"]}]}], ")"}]}]], "Input",
 CellChangeTimes->{{3.444240849752*^9, 3.4442409541099997`*^9}, {
  3.4442415352539997`*^9, 3.444241547849*^9}, {3.444242234216*^9, 
  3.444242299317*^9}, {3.444246721797*^9, 3.44424673615*^9}, {
  3.444246768184*^9, 3.444246774105*^9}, {3.444302170201*^9, 
  3.44430219665*^9}, {3.444303324042*^9, 3.444303328308*^9}, {
  3.444304475926*^9, 3.4443044773640003`*^9}, {3.4443083069639997`*^9, 
  3.4443083075299997`*^9}, {3.4443095168859997`*^9, 3.44430951809*^9}, {
  3.444317632212*^9, 3.444317684348*^9}, {3.44431773159*^9, 
  3.4443177456*^9}, {3.4443197146029997`*^9, 3.444319728599*^9}, {
  3.444319833132*^9, 3.444319848174*^9}, {3.5944551369873686`*^9, 
  3.594455145636863*^9}}],

Cell[BoxData[
 RowBox[{
  RowBox[{
   TagBox[
    SubscriptBox[
     RowBox[{
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{-0.2, 0}, {0, 0}}], 
      AdjustmentBox[
       TagBox["\[Alpha]",
        QuantumAlgebra`QuantumAlgebra`KetArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], "\[RightAngleBracket]"}], 
     TagBox[
      AdjustmentBox[
       TagBox["4",
        QuantumAlgebra`QuantumAlgebra`KetArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0],
      QuantumAlgebra`QuantumAlgebra`UDScript,
      BaseStyle->"RIndex"]],
    QuantumAlgebra`QuantumAlgebra`Ket,
    BaseStyle->"KetWrapper"], "\[CircleTimes]", 
   TagBox[
    SubscriptBox[
     RowBox[{
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{-0.2, 0}, {0, 0}}], 
      AdjustmentBox[
       TagBox["\[Beta]",
        QuantumAlgebra`QuantumAlgebra`KetArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], "\[RightAngleBracket]"}], 
     TagBox[
      AdjustmentBox[
       TagBox["3",
        QuantumAlgebra`QuantumAlgebra`KetArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0],
      QuantumAlgebra`QuantumAlgebra`UDScript,
      BaseStyle->"RIndex"]],
    QuantumAlgebra`QuantumAlgebra`Ket,
    BaseStyle->"KetWrapper"], "\[CircleTimes]", 
   TagBox[
    SubscriptBox[
     RowBox[{
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{-0.2, 0}, {0, 0}}], 
      AdjustmentBox[
       TagBox["\[CurlyEpsilon]",
        QuantumAlgebra`QuantumAlgebra`KetArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], "\[RightAngleBracket]"}], 
     TagBox[
      AdjustmentBox[
       TagBox["1",
        QuantumAlgebra`QuantumAlgebra`KetArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0],
      QuantumAlgebra`QuantumAlgebra`UDScript,
      BaseStyle->"RIndex"]],
    QuantumAlgebra`QuantumAlgebra`Ket,
    BaseStyle->"KetWrapper"], "\[CircleTimes]", 
   TagBox[
    SubscriptBox[
     RowBox[{
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{-0.2, 0}, {0, 0}}], 
      AdjustmentBox[
       TagBox["\[Zeta]",
        QuantumAlgebra`QuantumAlgebra`KetArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], "\[RightAngleBracket]"}], 
     TagBox[
      AdjustmentBox[
       TagBox["2",
        QuantumAlgebra`QuantumAlgebra`KetArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0],
      QuantumAlgebra`QuantumAlgebra`UDScript,
      BaseStyle->"RIndex"]],
    QuantumAlgebra`QuantumAlgebra`Ket,
    BaseStyle->"KetWrapper"]}], "\[CenterDot]", 
  RowBox[{
   TagBox[
    RowBox[{
     SubscriptBox["\[InvisiblePrefixScriptBase]", 
      TagBox[
       AdjustmentBox[
        TagBox["4",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"LIndex"]], 
     RowBox[{"\[LeftAngleBracket]", 
      AdjustmentBox[
       TagBox["\[Gamma]",
        QuantumAlgebra`QuantumAlgebra`BraArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], 
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{0, -0.2}, {0, 0}}]}]}],
    QuantumAlgebra`QuantumAlgebra`Bra,
    BaseStyle->"BraWrapper"], "\[CircleTimes]", 
   TagBox[
    RowBox[{
     SubscriptBox["\[InvisiblePrefixScriptBase]", 
      TagBox[
       AdjustmentBox[
        TagBox["3",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"LIndex"]], 
     RowBox[{"\[LeftAngleBracket]", 
      AdjustmentBox[
       TagBox["\[Epsilon]",
        QuantumAlgebra`QuantumAlgebra`BraArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], 
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{0, -0.2}, {0, 0}}]}]}],
    QuantumAlgebra`QuantumAlgebra`Bra,
    BaseStyle->"BraWrapper"], "\[CircleTimes]", 
   TagBox[
    RowBox[{
     SubscriptBox["\[InvisiblePrefixScriptBase]", 
      TagBox[
       AdjustmentBox[
        TagBox["1",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"LIndex"]], 
     RowBox[{"\[LeftAngleBracket]", 
      AdjustmentBox[
       TagBox["\[Eta]",
        QuantumAlgebra`QuantumAlgebra`BraArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], 
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{0, -0.2}, {0, 0}}]}]}],
    QuantumAlgebra`QuantumAlgebra`Bra,
    BaseStyle->"BraWrapper"], "\[CircleTimes]", 
   TagBox[
    RowBox[{
     SubscriptBox["\[InvisiblePrefixScriptBase]", 
      TagBox[
       AdjustmentBox[
        TagBox["2",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"LIndex"]], 
     RowBox[{"\[LeftAngleBracket]", 
      AdjustmentBox[
       TagBox["\[Theta]",
        QuantumAlgebra`QuantumAlgebra`BraArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], 
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{0, -0.2}, {0, 0}}]}]}],
    QuantumAlgebra`QuantumAlgebra`Bra,
    BaseStyle->"BraWrapper"]}]}]], "Output",
 CellChangeTimes->{3.474239630959239*^9, 3.5944551459418807`*^9}]
}, Open  ]],

Cell["\<\
We can compute the non commutative product of several operators:\
\>", "Text",
 CellChangeTimes->{{3.4442349225*^9, 3.4442349385220003`*^9}, {
   3.444234993856*^9, 3.444235028273*^9}, 3.444236440842*^9, {
   3.444246798557*^9, 3.444247035811*^9}, {3.4442473370620003`*^9, 
   3.4442473430629997`*^9}, {3.444247384594*^9, 3.444247403909*^9}, {
   3.444247438422*^9, 3.444247475071*^9}, {3.444247517374*^9, 
   3.4442475196540003`*^9}, {3.4442475783789997`*^9, 3.444247581238*^9}, {
   3.444247683613*^9, 3.4442476841210003`*^9}, {3.444247729227*^9, 
   3.444247760023*^9}, {3.4442958460555506`*^9, 3.4442958717965508`*^9}, {
   3.444303367568*^9, 3.444303385689*^9}, {3.44430967846*^9, 
   3.444309693646*^9}, {3.445244921627946*^9, 3.445244939660946*^9}, {
   3.594455197177811*^9, 3.594455203715185*^9}, {3.5944552818856564`*^9, 
   3.5944553170026646`*^9}, {3.594455429295088*^9, 3.5944554317402277`*^9}}],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{
  RowBox[{"(", 
   RowBox[{
    RowBox[{
     TagBox[
      SubscriptBox[
       RowBox[{
        AdjustmentBox["\[VerticalSeparator]",
         BoxBaselineShift->-0.1,
         BoxMargins->{{-0.2, 0}, {0, 0}}], 
        AdjustmentBox[
         TagBox["\[Alpha]",
          QuantumAlgebra`QuantumAlgebra`KetArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0], "\[RightAngleBracket]"}], 
       TagBox[
        AdjustmentBox[
         TagBox["1",
          QuantumAlgebra`QuantumAlgebra`KetArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0],
        QuantumAlgebra`QuantumAlgebra`UDScript,
        BaseStyle->"RIndex"]],
      QuantumAlgebra`QuantumAlgebra`Ket,
      BaseStyle->"KetWrapper"], "\[CircleTimes]", 
     TagBox[
      SubscriptBox[
       RowBox[{
        AdjustmentBox["\[VerticalSeparator]",
         BoxBaselineShift->-0.1,
         BoxMargins->{{-0.2, 0}, {0, 0}}], 
        AdjustmentBox[
         TagBox["\[Beta]",
          QuantumAlgebra`QuantumAlgebra`KetArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0], "\[RightAngleBracket]"}], 
       TagBox[
        AdjustmentBox[
         TagBox["2",
          QuantumAlgebra`QuantumAlgebra`KetArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0],
        QuantumAlgebra`QuantumAlgebra`UDScript,
        BaseStyle->"RIndex"]],
      QuantumAlgebra`QuantumAlgebra`Ket,
      BaseStyle->"KetWrapper"]}], "\[CenterDot]", 
    RowBox[{
     TagBox[
      RowBox[{
       SubscriptBox["\[InvisiblePrefixScriptBase]", 
        TagBox[
         AdjustmentBox[
          TagBox["1",
           QuantumAlgebra`QuantumAlgebra`BraArgs,
           BaseStyle->"BraKetArg"],
          BoxBaselineShift->0],
         QuantumAlgebra`QuantumAlgebra`UDScript,
         BaseStyle->"LIndex"]], 
       RowBox[{"\[LeftAngleBracket]", 
        AdjustmentBox[
         TagBox["\[Gamma]",
          QuantumAlgebra`QuantumAlgebra`BraArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0], 
        AdjustmentBox["\[VerticalSeparator]",
         BoxBaselineShift->-0.1,
         BoxMargins->{{0, -0.2}, {0, 0}}]}]}],
      QuantumAlgebra`QuantumAlgebra`Bra,
      BaseStyle->"BraWrapper"], "\[CircleTimes]", 
     TagBox[
      RowBox[{
       SubscriptBox["\[InvisiblePrefixScriptBase]", 
        TagBox[
         AdjustmentBox[
          TagBox["2",
           QuantumAlgebra`QuantumAlgebra`BraArgs,
           BaseStyle->"BraKetArg"],
          BoxBaselineShift->0],
         QuantumAlgebra`QuantumAlgebra`UDScript,
         BaseStyle->"LIndex"]], 
       RowBox[{"\[LeftAngleBracket]", 
        AdjustmentBox[
         TagBox["\[Epsilon]",
          QuantumAlgebra`QuantumAlgebra`BraArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0], 
        AdjustmentBox["\[VerticalSeparator]",
         BoxBaselineShift->-0.1,
         BoxMargins->{{0, -0.2}, {0, 0}}]}]}],
      QuantumAlgebra`QuantumAlgebra`Bra,
      BaseStyle->"BraWrapper"]}]}], ")"}], "\[CenterDot]", 
  RowBox[{"(", 
   RowBox[{
    RowBox[{
     TagBox[
      SubscriptBox[
       RowBox[{
        AdjustmentBox["\[VerticalSeparator]",
         BoxBaselineShift->-0.1,
         BoxMargins->{{-0.2, 0}, {0, 0}}], 
        AdjustmentBox[
         TagBox["\[CurlyEpsilon]",
          QuantumAlgebra`QuantumAlgebra`KetArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0], "\[RightAngleBracket]"}], 
       TagBox[
        AdjustmentBox[
         TagBox["1",
          QuantumAlgebra`QuantumAlgebra`KetArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0],
        QuantumAlgebra`QuantumAlgebra`UDScript,
        BaseStyle->"RIndex"]],
      QuantumAlgebra`QuantumAlgebra`Ket,
      BaseStyle->"KetWrapper"], "\[CircleTimes]", 
     TagBox[
      SubscriptBox[
       RowBox[{
        AdjustmentBox["\[VerticalSeparator]",
         BoxBaselineShift->-0.1,
         BoxMargins->{{-0.2, 0}, {0, 0}}], 
        AdjustmentBox[
         TagBox["\[Zeta]",
          QuantumAlgebra`QuantumAlgebra`KetArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0], "\[RightAngleBracket]"}], 
       TagBox[
        AdjustmentBox[
         TagBox["3",
          QuantumAlgebra`QuantumAlgebra`KetArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0],
        QuantumAlgebra`QuantumAlgebra`UDScript,
        BaseStyle->"RIndex"]],
      QuantumAlgebra`QuantumAlgebra`Ket,
      BaseStyle->"KetWrapper"]}], "\[CenterDot]", 
    RowBox[{
     TagBox[
      RowBox[{
       SubscriptBox["\[InvisiblePrefixScriptBase]", 
        TagBox[
         AdjustmentBox[
          TagBox["1",
           QuantumAlgebra`QuantumAlgebra`BraArgs,
           BaseStyle->"BraKetArg"],
          BoxBaselineShift->0],
         QuantumAlgebra`QuantumAlgebra`UDScript,
         BaseStyle->"LIndex"]], 
       RowBox[{"\[LeftAngleBracket]", 
        AdjustmentBox[
         TagBox["\[Eta]",
          QuantumAlgebra`QuantumAlgebra`BraArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0], 
        AdjustmentBox["\[VerticalSeparator]",
         BoxBaselineShift->-0.1,
         BoxMargins->{{0, -0.2}, {0, 0}}]}]}],
      QuantumAlgebra`QuantumAlgebra`Bra,
      BaseStyle->"BraWrapper"], "\[CircleTimes]", 
     TagBox[
      RowBox[{
       SubscriptBox["\[InvisiblePrefixScriptBase]", 
        TagBox[
         AdjustmentBox[
          TagBox["3",
           QuantumAlgebra`QuantumAlgebra`BraArgs,
           BaseStyle->"BraKetArg"],
          BoxBaselineShift->0],
         QuantumAlgebra`QuantumAlgebra`UDScript,
         BaseStyle->"LIndex"]], 
       RowBox[{"\[LeftAngleBracket]", 
        AdjustmentBox[
         TagBox["\[Theta]",
          QuantumAlgebra`QuantumAlgebra`BraArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0], 
        AdjustmentBox["\[VerticalSeparator]",
         BoxBaselineShift->-0.1,
         BoxMargins->{{0, -0.2}, {0, 0}}]}]}],
      QuantumAlgebra`QuantumAlgebra`Bra,
      BaseStyle->"BraWrapper"]}]}], ")"}], "\[CenterDot]", 
  RowBox[{"(", 
   RowBox[{
    RowBox[{
     TagBox[
      SubscriptBox[
       RowBox[{
        AdjustmentBox["\[VerticalSeparator]",
         BoxBaselineShift->-0.1,
         BoxMargins->{{-0.2, 0}, {0, 0}}], 
        AdjustmentBox[
         TagBox["\[CurlyEpsilon]",
          QuantumAlgebra`QuantumAlgebra`KetArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0], "\[RightAngleBracket]"}], 
       TagBox[
        AdjustmentBox[
         TagBox["2",
          QuantumAlgebra`QuantumAlgebra`KetArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0],
        QuantumAlgebra`QuantumAlgebra`UDScript,
        BaseStyle->"RIndex"]],
      QuantumAlgebra`QuantumAlgebra`Ket,
      BaseStyle->"KetWrapper"], "\[CircleTimes]", 
     TagBox[
      SubscriptBox[
       RowBox[{
        AdjustmentBox["\[VerticalSeparator]",
         BoxBaselineShift->-0.1,
         BoxMargins->{{-0.2, 0}, {0, 0}}], 
        AdjustmentBox[
         TagBox["\[Zeta]",
          QuantumAlgebra`QuantumAlgebra`KetArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0], "\[RightAngleBracket]"}], 
       TagBox[
        AdjustmentBox[
         TagBox["3",
          QuantumAlgebra`QuantumAlgebra`KetArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0],
        QuantumAlgebra`QuantumAlgebra`UDScript,
        BaseStyle->"RIndex"]],
      QuantumAlgebra`QuantumAlgebra`Ket,
      BaseStyle->"KetWrapper"]}], "\[CenterDot]", 
    RowBox[{
     TagBox[
      RowBox[{
       SubscriptBox["\[InvisiblePrefixScriptBase]", 
        TagBox[
         AdjustmentBox[
          TagBox["2",
           QuantumAlgebra`QuantumAlgebra`BraArgs,
           BaseStyle->"BraKetArg"],
          BoxBaselineShift->0],
         QuantumAlgebra`QuantumAlgebra`UDScript,
         BaseStyle->"LIndex"]], 
       RowBox[{"\[LeftAngleBracket]", 
        AdjustmentBox[
         TagBox["\[Eta]",
          QuantumAlgebra`QuantumAlgebra`BraArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0], 
        AdjustmentBox["\[VerticalSeparator]",
         BoxBaselineShift->-0.1,
         BoxMargins->{{0, -0.2}, {0, 0}}]}]}],
      QuantumAlgebra`QuantumAlgebra`Bra,
      BaseStyle->"BraWrapper"], "\[CircleTimes]", 
     TagBox[
      RowBox[{
       SubscriptBox["\[InvisiblePrefixScriptBase]", 
        TagBox[
         AdjustmentBox[
          TagBox["3",
           QuantumAlgebra`QuantumAlgebra`BraArgs,
           BaseStyle->"BraKetArg"],
          BoxBaselineShift->0],
         QuantumAlgebra`QuantumAlgebra`UDScript,
         BaseStyle->"LIndex"]], 
       RowBox[{"\[LeftAngleBracket]", 
        AdjustmentBox[
         TagBox["\[Theta]",
          QuantumAlgebra`QuantumAlgebra`BraArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0], 
        AdjustmentBox["\[VerticalSeparator]",
         BoxBaselineShift->-0.1,
         BoxMargins->{{0, -0.2}, {0, 0}}]}]}],
      QuantumAlgebra`QuantumAlgebra`Bra,
      BaseStyle->"BraWrapper"]}]}], ")"}], "\[CenterDot]", 
  RowBox[{"(", 
   RowBox[{
    TagBox[
     SubscriptBox[
      RowBox[{
       AdjustmentBox["\[VerticalSeparator]",
        BoxBaselineShift->-0.1,
        BoxMargins->{{-0.2, 0}, {0, 0}}], 
       AdjustmentBox[
        TagBox["\[CurlyEpsilon]",
         QuantumAlgebra`QuantumAlgebra`KetArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0], "\[RightAngleBracket]"}], 
      TagBox[
       AdjustmentBox[
        TagBox["1",
         QuantumAlgebra`QuantumAlgebra`KetArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"RIndex"]],
     QuantumAlgebra`QuantumAlgebra`Ket,
     BaseStyle->"KetWrapper"], "\[CenterDot]", 
    TagBox[
     RowBox[{
      SubscriptBox["\[InvisiblePrefixScriptBase]", 
       TagBox[
        AdjustmentBox[
         TagBox["1",
          QuantumAlgebra`QuantumAlgebra`BraArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0],
        QuantumAlgebra`QuantumAlgebra`UDScript,
        BaseStyle->"LIndex"]], 
      RowBox[{"\[LeftAngleBracket]", 
       AdjustmentBox[
        TagBox["\[Theta]",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0], 
       AdjustmentBox["\[VerticalSeparator]",
        BoxBaselineShift->-0.1,
        BoxMargins->{{0, -0.2}, {0, 0}}]}]}],
     QuantumAlgebra`QuantumAlgebra`Bra,
     BaseStyle->"BraWrapper"]}], ")"}]}]], "Input",
 CellChangeTimes->{{3.444240849752*^9, 3.4442409541099997`*^9}, {
  3.4442415352539997`*^9, 3.444241547849*^9}, {3.444242234216*^9, 
  3.444242299317*^9}, {3.444302015793*^9, 3.444302145623*^9}, {
  3.4443022749440002`*^9, 3.444302341229*^9}, {3.594455162033801*^9, 
  3.594455177266672*^9}, {3.59445521638791*^9, 3.594455218755045*^9}}],

Cell[BoxData[
 RowBox[{
  TagBox[
   RowBox[{
    SubscriptBox["\[InvisiblePrefixScriptBase]", 
     TagBox[
      AdjustmentBox[
       TagBox["1",
        QuantumAlgebra`QuantumAlgebra`BraArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0],
      QuantumAlgebra`QuantumAlgebra`UDScript,
      BaseStyle->"LIndex"]], 
    SubscriptBox[
     RowBox[{"\[LeftAngleBracket]", 
      AdjustmentBox[
       RowBox[{
        TagBox["\[Gamma]",
         QuantumAlgebra`QuantumAlgebra`BraKetArgs,
         BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
        TagBox["\[CurlyEpsilon]",
         QuantumAlgebra`QuantumAlgebra`BraKetArgs,
         BaseStyle->"BraKetArg"]}],
       BoxBaselineShift->0], "\[RightAngleBracket]"}], 
     TagBox[
      AdjustmentBox[
       TagBox["1",
        QuantumAlgebra`QuantumAlgebra`BraArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0],
      QuantumAlgebra`QuantumAlgebra`UDScript,
      BaseStyle->"RIndex"]]}],
   QuantumAlgebra`QuantumAlgebra`Braket,
   BaseStyle->"BraKetWrapper"], " ", 
  TagBox[
   RowBox[{
    SubscriptBox["\[InvisiblePrefixScriptBase]", 
     TagBox[
      AdjustmentBox[
       TagBox["2",
        QuantumAlgebra`QuantumAlgebra`BraArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0],
      QuantumAlgebra`QuantumAlgebra`UDScript,
      BaseStyle->"LIndex"]], 
    SubscriptBox[
     RowBox[{"\[LeftAngleBracket]", 
      AdjustmentBox[
       RowBox[{
        TagBox["\[Epsilon]",
         QuantumAlgebra`QuantumAlgebra`BraKetArgs,
         BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
        TagBox["\[CurlyEpsilon]",
         QuantumAlgebra`QuantumAlgebra`BraKetArgs,
         BaseStyle->"BraKetArg"]}],
       BoxBaselineShift->0], "\[RightAngleBracket]"}], 
     TagBox[
      AdjustmentBox[
       TagBox["2",
        QuantumAlgebra`QuantumAlgebra`BraArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0],
      QuantumAlgebra`QuantumAlgebra`UDScript,
      BaseStyle->"RIndex"]]}],
   QuantumAlgebra`QuantumAlgebra`Braket,
   BaseStyle->"BraKetWrapper"], " ", 
  TagBox[
   RowBox[{
    SubscriptBox["\[InvisiblePrefixScriptBase]", 
     TagBox[
      AdjustmentBox[
       TagBox["1",
        QuantumAlgebra`QuantumAlgebra`BraArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0],
      QuantumAlgebra`QuantumAlgebra`UDScript,
      BaseStyle->"LIndex"]], 
    SubscriptBox[
     RowBox[{"\[LeftAngleBracket]", 
      AdjustmentBox[
       RowBox[{
        TagBox["\[Eta]",
         QuantumAlgebra`QuantumAlgebra`BraKetArgs,
         BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
        TagBox["\[CurlyEpsilon]",
         QuantumAlgebra`QuantumAlgebra`BraKetArgs,
         BaseStyle->"BraKetArg"]}],
       BoxBaselineShift->0], "\[RightAngleBracket]"}], 
     TagBox[
      AdjustmentBox[
       TagBox["1",
        QuantumAlgebra`QuantumAlgebra`BraArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0],
      QuantumAlgebra`QuantumAlgebra`UDScript,
      BaseStyle->"RIndex"]]}],
   QuantumAlgebra`QuantumAlgebra`Braket,
   BaseStyle->"BraKetWrapper"], " ", 
  TagBox[
   RowBox[{
    SubscriptBox["\[InvisiblePrefixScriptBase]", 
     TagBox[
      AdjustmentBox[
       TagBox["3",
        QuantumAlgebra`QuantumAlgebra`BraArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0],
      QuantumAlgebra`QuantumAlgebra`UDScript,
      BaseStyle->"LIndex"]], 
    SubscriptBox[
     RowBox[{"\[LeftAngleBracket]", 
      AdjustmentBox[
       RowBox[{
        TagBox["\[Theta]",
         QuantumAlgebra`QuantumAlgebra`BraKetArgs,
         BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
        TagBox["\[Zeta]",
         QuantumAlgebra`QuantumAlgebra`BraKetArgs,
         BaseStyle->"BraKetArg"]}],
       BoxBaselineShift->0], "\[RightAngleBracket]"}], 
     TagBox[
      AdjustmentBox[
       TagBox["3",
        QuantumAlgebra`QuantumAlgebra`BraArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0],
      QuantumAlgebra`QuantumAlgebra`UDScript,
      BaseStyle->"RIndex"]]}],
   QuantumAlgebra`QuantumAlgebra`Braket,
   BaseStyle->"BraKetWrapper"], " ", 
  RowBox[{
   RowBox[{
    TagBox[
     SubscriptBox[
      RowBox[{
       AdjustmentBox["\[VerticalSeparator]",
        BoxBaselineShift->-0.1,
        BoxMargins->{{-0.2, 0}, {0, 0}}], 
       AdjustmentBox[
        TagBox["\[Alpha]",
         QuantumAlgebra`QuantumAlgebra`KetArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0], "\[RightAngleBracket]"}], 
      TagBox[
       AdjustmentBox[
        TagBox["1",
         QuantumAlgebra`QuantumAlgebra`KetArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"RIndex"]],
     QuantumAlgebra`QuantumAlgebra`Ket,
     BaseStyle->"KetWrapper"], "\[CircleTimes]", 
    TagBox[
     SubscriptBox[
      RowBox[{
       AdjustmentBox["\[VerticalSeparator]",
        BoxBaselineShift->-0.1,
        BoxMargins->{{-0.2, 0}, {0, 0}}], 
       AdjustmentBox[
        TagBox["\[Beta]",
         QuantumAlgebra`QuantumAlgebra`KetArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0], "\[RightAngleBracket]"}], 
      TagBox[
       AdjustmentBox[
        TagBox["2",
         QuantumAlgebra`QuantumAlgebra`KetArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"RIndex"]],
     QuantumAlgebra`QuantumAlgebra`Ket,
     BaseStyle->"KetWrapper"], "\[CircleTimes]", 
    TagBox[
     SubscriptBox[
      RowBox[{
       AdjustmentBox["\[VerticalSeparator]",
        BoxBaselineShift->-0.1,
        BoxMargins->{{-0.2, 0}, {0, 0}}], 
       AdjustmentBox[
        TagBox["\[Zeta]",
         QuantumAlgebra`QuantumAlgebra`KetArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0], "\[RightAngleBracket]"}], 
      TagBox[
       AdjustmentBox[
        TagBox["3",
         QuantumAlgebra`QuantumAlgebra`KetArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"RIndex"]],
     QuantumAlgebra`QuantumAlgebra`Ket,
     BaseStyle->"KetWrapper"]}], "\[CenterDot]", 
   RowBox[{
    TagBox[
     RowBox[{
      SubscriptBox["\[InvisiblePrefixScriptBase]", 
       TagBox[
        AdjustmentBox[
         TagBox["2",
          QuantumAlgebra`QuantumAlgebra`BraArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0],
        QuantumAlgebra`QuantumAlgebra`UDScript,
        BaseStyle->"LIndex"]], 
      RowBox[{"\[LeftAngleBracket]", 
       AdjustmentBox[
        TagBox["\[Eta]",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0], 
       AdjustmentBox["\[VerticalSeparator]",
        BoxBaselineShift->-0.1,
        BoxMargins->{{0, -0.2}, {0, 0}}]}]}],
     QuantumAlgebra`QuantumAlgebra`Bra,
     BaseStyle->"BraWrapper"], "\[CircleTimes]", 
    TagBox[
     RowBox[{
      SubscriptBox["\[InvisiblePrefixScriptBase]", 
       TagBox[
        AdjustmentBox[
         TagBox["1",
          QuantumAlgebra`QuantumAlgebra`BraArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0],
        QuantumAlgebra`QuantumAlgebra`UDScript,
        BaseStyle->"LIndex"]], 
      RowBox[{"\[LeftAngleBracket]", 
       AdjustmentBox[
        TagBox["\[Theta]",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0], 
       AdjustmentBox["\[VerticalSeparator]",
        BoxBaselineShift->-0.1,
        BoxMargins->{{0, -0.2}, {0, 0}}]}]}],
     QuantumAlgebra`QuantumAlgebra`Bra,
     BaseStyle->"BraWrapper"], "\[CircleTimes]", 
    TagBox[
     RowBox[{
      SubscriptBox["\[InvisiblePrefixScriptBase]", 
       TagBox[
        AdjustmentBox[
         TagBox["3",
          QuantumAlgebra`QuantumAlgebra`BraArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0],
        QuantumAlgebra`QuantumAlgebra`UDScript,
        BaseStyle->"LIndex"]], 
      RowBox[{"\[LeftAngleBracket]", 
       AdjustmentBox[
        TagBox["\[Theta]",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0], 
       AdjustmentBox["\[VerticalSeparator]",
        BoxBaselineShift->-0.1,
        BoxMargins->{{0, -0.2}, {0, 0}}]}]}],
     QuantumAlgebra`QuantumAlgebra`Bra,
     BaseStyle->"BraWrapper"]}]}]}]], "Output",
 CellChangeTimes->{3.4742396326623363`*^9, 3.594455177824704*^9}]
}, Open  ]],

Cell["\<\
and combine them together with linear properties:\
\>", "Text",
 CellChangeTimes->{{3.594455446556075*^9, 3.5944554685163307`*^9}}],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{
  SuperscriptBox[
   RowBox[{"(", 
    RowBox[{
     RowBox[{
      RowBox[{
       TagBox[
        SubscriptBox[
         RowBox[{
          AdjustmentBox["\[VerticalSeparator]",
           BoxBaselineShift->-0.1,
           BoxMargins->{{-0.2, 0}, {0, 0}}], 
          AdjustmentBox[
           TagBox["\[Alpha]",
            QuantumAlgebra`QuantumAlgebra`KetArgs,
            BaseStyle->"BraKetArg"],
           BoxBaselineShift->0], "\[RightAngleBracket]"}], 
         TagBox[
          AdjustmentBox[
           TagBox["1",
            QuantumAlgebra`QuantumAlgebra`KetArgs,
            BaseStyle->"BraKetArg"],
           BoxBaselineShift->0],
          QuantumAlgebra`QuantumAlgebra`UDScript,
          BaseStyle->"RIndex"]],
        QuantumAlgebra`QuantumAlgebra`Ket,
        BaseStyle->"KetWrapper"], "\[CircleTimes]", 
       TagBox[
        SubscriptBox[
         RowBox[{
          AdjustmentBox["\[VerticalSeparator]",
           BoxBaselineShift->-0.1,
           BoxMargins->{{-0.2, 0}, {0, 0}}], 
          AdjustmentBox[
           TagBox["\[Beta]",
            QuantumAlgebra`QuantumAlgebra`KetArgs,
            BaseStyle->"BraKetArg"],
           BoxBaselineShift->0], "\[RightAngleBracket]"}], 
         TagBox[
          AdjustmentBox[
           TagBox["2",
            QuantumAlgebra`QuantumAlgebra`KetArgs,
            BaseStyle->"BraKetArg"],
           BoxBaselineShift->0],
          QuantumAlgebra`QuantumAlgebra`UDScript,
          BaseStyle->"RIndex"]],
        QuantumAlgebra`QuantumAlgebra`Ket,
        BaseStyle->"KetWrapper"]}], "\[CenterDot]", 
      RowBox[{
       TagBox[
        RowBox[{
         SubscriptBox["\[InvisiblePrefixScriptBase]", 
          TagBox[
           AdjustmentBox[
            TagBox["1",
             QuantumAlgebra`QuantumAlgebra`BraArgs,
             BaseStyle->"BraKetArg"],
            BoxBaselineShift->0],
           QuantumAlgebra`QuantumAlgebra`UDScript,
           BaseStyle->"LIndex"]], 
         RowBox[{"\[LeftAngleBracket]", 
          AdjustmentBox[
           TagBox["\[Gamma]",
            QuantumAlgebra`QuantumAlgebra`BraArgs,
            BaseStyle->"BraKetArg"],
           BoxBaselineShift->0], 
          AdjustmentBox["\[VerticalSeparator]",
           BoxBaselineShift->-0.1,
           BoxMargins->{{0, -0.2}, {0, 0}}]}]}],
        QuantumAlgebra`QuantumAlgebra`Bra,
        BaseStyle->"BraWrapper"], "\[CircleTimes]", 
       TagBox[
        RowBox[{
         SubscriptBox["\[InvisiblePrefixScriptBase]", 
          TagBox[
           AdjustmentBox[
            TagBox["2",
             QuantumAlgebra`QuantumAlgebra`BraArgs,
             BaseStyle->"BraKetArg"],
            BoxBaselineShift->0],
           QuantumAlgebra`QuantumAlgebra`UDScript,
           BaseStyle->"LIndex"]], 
         RowBox[{"\[LeftAngleBracket]", 
          AdjustmentBox[
           TagBox["\[Epsilon]",
            QuantumAlgebra`QuantumAlgebra`BraArgs,
            BaseStyle->"BraKetArg"],
           BoxBaselineShift->0], 
          AdjustmentBox["\[VerticalSeparator]",
           BoxBaselineShift->-0.1,
           BoxMargins->{{0, -0.2}, {0, 0}}]}]}],
        QuantumAlgebra`QuantumAlgebra`Bra,
        BaseStyle->"BraWrapper"]}]}], "+", 
     RowBox[{
      RowBox[{
       TagBox[
        SubscriptBox[
         RowBox[{
          AdjustmentBox["\[VerticalSeparator]",
           BoxBaselineShift->-0.1,
           BoxMargins->{{-0.2, 0}, {0, 0}}], 
          AdjustmentBox[
           TagBox["\[CurlyEpsilon]",
            QuantumAlgebra`QuantumAlgebra`KetArgs,
            BaseStyle->"BraKetArg"],
           BoxBaselineShift->0], "\[RightAngleBracket]"}], 
         TagBox[
          AdjustmentBox[
           TagBox["1",
            QuantumAlgebra`QuantumAlgebra`KetArgs,
            BaseStyle->"BraKetArg"],
           BoxBaselineShift->0],
          QuantumAlgebra`QuantumAlgebra`UDScript,
          BaseStyle->"RIndex"]],
        QuantumAlgebra`QuantumAlgebra`Ket,
        BaseStyle->"KetWrapper"], "\[CircleTimes]", 
       TagBox[
        SubscriptBox[
         RowBox[{
          AdjustmentBox["\[VerticalSeparator]",
           BoxBaselineShift->-0.1,
           BoxMargins->{{-0.2, 0}, {0, 0}}], 
          AdjustmentBox[
           TagBox["\[Zeta]",
            QuantumAlgebra`QuantumAlgebra`KetArgs,
            BaseStyle->"BraKetArg"],
           BoxBaselineShift->0], "\[RightAngleBracket]"}], 
         TagBox[
          AdjustmentBox[
           TagBox["2",
            QuantumAlgebra`QuantumAlgebra`KetArgs,
            BaseStyle->"BraKetArg"],
           BoxBaselineShift->0],
          QuantumAlgebra`QuantumAlgebra`UDScript,
          BaseStyle->"RIndex"]],
        QuantumAlgebra`QuantumAlgebra`Ket,
        BaseStyle->"KetWrapper"]}], "\[CenterDot]", 
      RowBox[{
       TagBox[
        RowBox[{
         SubscriptBox["\[InvisiblePrefixScriptBase]", 
          TagBox[
           AdjustmentBox[
            TagBox["1",
             QuantumAlgebra`QuantumAlgebra`BraArgs,
             BaseStyle->"BraKetArg"],
            BoxBaselineShift->0],
           QuantumAlgebra`QuantumAlgebra`UDScript,
           BaseStyle->"LIndex"]], 
         RowBox[{"\[LeftAngleBracket]", 
          AdjustmentBox[
           TagBox["\[Eta]",
            QuantumAlgebra`QuantumAlgebra`BraArgs,
            BaseStyle->"BraKetArg"],
           BoxBaselineShift->0], 
          AdjustmentBox["\[VerticalSeparator]",
           BoxBaselineShift->-0.1,
           BoxMargins->{{0, -0.2}, {0, 0}}]}]}],
        QuantumAlgebra`QuantumAlgebra`Bra,
        BaseStyle->"BraWrapper"], "\[CircleTimes]", 
       TagBox[
        RowBox[{
         SubscriptBox["\[InvisiblePrefixScriptBase]", 
          TagBox[
           AdjustmentBox[
            TagBox["2",
             QuantumAlgebra`QuantumAlgebra`BraArgs,
             BaseStyle->"BraKetArg"],
            BoxBaselineShift->0],
           QuantumAlgebra`QuantumAlgebra`UDScript,
           BaseStyle->"LIndex"]], 
         RowBox[{"\[LeftAngleBracket]", 
          AdjustmentBox[
           TagBox["\[Theta]",
            QuantumAlgebra`QuantumAlgebra`BraArgs,
            BaseStyle->"BraKetArg"],
           BoxBaselineShift->0], 
          AdjustmentBox["\[VerticalSeparator]",
           BoxBaselineShift->-0.1,
           BoxMargins->{{0, -0.2}, {0, 0}}]}]}],
        QuantumAlgebra`QuantumAlgebra`Bra,
        BaseStyle->"BraWrapper"]}]}]}], ")"}], "3"], "//", 
  "QAPowerExpand"}]], "Input",
 CellChangeTimes->{{3.444302377574*^9, 3.444302489907*^9}, {
  3.4452451336289454`*^9, 3.4452451396369457`*^9}, {3.5944552543530817`*^9, 
  3.5944552676078396`*^9}}],

Cell[BoxData[
 RowBox[{
  RowBox[{
   SuperscriptBox[
    TagBox[
     RowBox[{
      SubscriptBox["\[InvisiblePrefixScriptBase]", 
       TagBox[
        AdjustmentBox[
         TagBox["1",
          QuantumAlgebra`QuantumAlgebra`BraArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0],
        QuantumAlgebra`QuantumAlgebra`UDScript,
        BaseStyle->"LIndex"]], 
      SubscriptBox[
       RowBox[{"\[LeftAngleBracket]", 
        AdjustmentBox[
         RowBox[{
          TagBox["\[Gamma]",
           QuantumAlgebra`QuantumAlgebra`BraKetArgs,
           BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
          TagBox["\[Alpha]",
           QuantumAlgebra`QuantumAlgebra`BraKetArgs,
           BaseStyle->"BraKetArg"]}],
         BoxBaselineShift->0], "\[RightAngleBracket]"}], 
       TagBox[
        AdjustmentBox[
         TagBox["1",
          QuantumAlgebra`QuantumAlgebra`BraArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0],
        QuantumAlgebra`QuantumAlgebra`UDScript,
        BaseStyle->"RIndex"]]}],
     QuantumAlgebra`QuantumAlgebra`Braket,
     BaseStyle->"BraKetWrapper"], "2"], " ", 
   SuperscriptBox[
    TagBox[
     RowBox[{
      SubscriptBox["\[InvisiblePrefixScriptBase]", 
       TagBox[
        AdjustmentBox[
         TagBox["2",
          QuantumAlgebra`QuantumAlgebra`BraArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0],
        QuantumAlgebra`QuantumAlgebra`UDScript,
        BaseStyle->"LIndex"]], 
      SubscriptBox[
       RowBox[{"\[LeftAngleBracket]", 
        AdjustmentBox[
         RowBox[{
          TagBox["\[Epsilon]",
           QuantumAlgebra`QuantumAlgebra`BraKetArgs,
           BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
          TagBox["\[Beta]",
           QuantumAlgebra`QuantumAlgebra`BraKetArgs,
           BaseStyle->"BraKetArg"]}],
         BoxBaselineShift->0], "\[RightAngleBracket]"}], 
       TagBox[
        AdjustmentBox[
         TagBox["2",
          QuantumAlgebra`QuantumAlgebra`BraArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0],
        QuantumAlgebra`QuantumAlgebra`UDScript,
        BaseStyle->"RIndex"]]}],
     QuantumAlgebra`QuantumAlgebra`Braket,
     BaseStyle->"BraKetWrapper"], "2"], " ", 
   RowBox[{
    RowBox[{
     TagBox[
      SubscriptBox[
       RowBox[{
        AdjustmentBox["\[VerticalSeparator]",
         BoxBaselineShift->-0.1,
         BoxMargins->{{-0.2, 0}, {0, 0}}], 
        AdjustmentBox[
         TagBox["\[Alpha]",
          QuantumAlgebra`QuantumAlgebra`KetArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0], "\[RightAngleBracket]"}], 
       TagBox[
        AdjustmentBox[
         TagBox["1",
          QuantumAlgebra`QuantumAlgebra`KetArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0],
        QuantumAlgebra`QuantumAlgebra`UDScript,
        BaseStyle->"RIndex"]],
      QuantumAlgebra`QuantumAlgebra`Ket,
      BaseStyle->"KetWrapper"], "\[CircleTimes]", 
     TagBox[
      SubscriptBox[
       RowBox[{
        AdjustmentBox["\[VerticalSeparator]",
         BoxBaselineShift->-0.1,
         BoxMargins->{{-0.2, 0}, {0, 0}}], 
        AdjustmentBox[
         TagBox["\[Beta]",
          QuantumAlgebra`QuantumAlgebra`KetArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0], "\[RightAngleBracket]"}], 
       TagBox[
        AdjustmentBox[
         TagBox["2",
          QuantumAlgebra`QuantumAlgebra`KetArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0],
        QuantumAlgebra`QuantumAlgebra`UDScript,
        BaseStyle->"RIndex"]],
      QuantumAlgebra`QuantumAlgebra`Ket,
      BaseStyle->"KetWrapper"]}], "\[CenterDot]", 
    RowBox[{
     TagBox[
      RowBox[{
       SubscriptBox["\[InvisiblePrefixScriptBase]", 
        TagBox[
         AdjustmentBox[
          TagBox["1",
           QuantumAlgebra`QuantumAlgebra`BraArgs,
           BaseStyle->"BraKetArg"],
          BoxBaselineShift->0],
         QuantumAlgebra`QuantumAlgebra`UDScript,
         BaseStyle->"LIndex"]], 
       RowBox[{"\[LeftAngleBracket]", 
        AdjustmentBox[
         TagBox["\[Gamma]",
          QuantumAlgebra`QuantumAlgebra`BraArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0], 
        AdjustmentBox["\[VerticalSeparator]",
         BoxBaselineShift->-0.1,
         BoxMargins->{{0, -0.2}, {0, 0}}]}]}],
      QuantumAlgebra`QuantumAlgebra`Bra,
      BaseStyle->"BraWrapper"], "\[CircleTimes]", 
     TagBox[
      RowBox[{
       SubscriptBox["\[InvisiblePrefixScriptBase]", 
        TagBox[
         AdjustmentBox[
          TagBox["2",
           QuantumAlgebra`QuantumAlgebra`BraArgs,
           BaseStyle->"BraKetArg"],
          BoxBaselineShift->0],
         QuantumAlgebra`QuantumAlgebra`UDScript,
         BaseStyle->"LIndex"]], 
       RowBox[{"\[LeftAngleBracket]", 
        AdjustmentBox[
         TagBox["\[Epsilon]",
          QuantumAlgebra`QuantumAlgebra`BraArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0], 
        AdjustmentBox["\[VerticalSeparator]",
         BoxBaselineShift->-0.1,
         BoxMargins->{{0, -0.2}, {0, 0}}]}]}],
      QuantumAlgebra`QuantumAlgebra`Bra,
      BaseStyle->"BraWrapper"]}]}]}], "+", 
  RowBox[{
   TagBox[
    RowBox[{
     SubscriptBox["\[InvisiblePrefixScriptBase]", 
      TagBox[
       AdjustmentBox[
        TagBox["1",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"LIndex"]], 
     SubscriptBox[
      RowBox[{"\[LeftAngleBracket]", 
       AdjustmentBox[
        RowBox[{
         TagBox["\[Gamma]",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
         TagBox["\[CurlyEpsilon]",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"]}],
        BoxBaselineShift->0], "\[RightAngleBracket]"}], 
      TagBox[
       AdjustmentBox[
        TagBox["1",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"RIndex"]]}],
    QuantumAlgebra`QuantumAlgebra`Braket,
    BaseStyle->"BraKetWrapper"], " ", 
   TagBox[
    RowBox[{
     SubscriptBox["\[InvisiblePrefixScriptBase]", 
      TagBox[
       AdjustmentBox[
        TagBox["2",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"LIndex"]], 
     SubscriptBox[
      RowBox[{"\[LeftAngleBracket]", 
       AdjustmentBox[
        RowBox[{
         TagBox["\[Epsilon]",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
         TagBox["\[Zeta]",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"]}],
        BoxBaselineShift->0], "\[RightAngleBracket]"}], 
      TagBox[
       AdjustmentBox[
        TagBox["2",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"RIndex"]]}],
    QuantumAlgebra`QuantumAlgebra`Braket,
    BaseStyle->"BraKetWrapper"], " ", 
   TagBox[
    RowBox[{
     SubscriptBox["\[InvisiblePrefixScriptBase]", 
      TagBox[
       AdjustmentBox[
        TagBox["1",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"LIndex"]], 
     SubscriptBox[
      RowBox[{"\[LeftAngleBracket]", 
       AdjustmentBox[
        RowBox[{
         TagBox["\[Eta]",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
         TagBox["\[Alpha]",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"]}],
        BoxBaselineShift->0], "\[RightAngleBracket]"}], 
      TagBox[
       AdjustmentBox[
        TagBox["1",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"RIndex"]]}],
    QuantumAlgebra`QuantumAlgebra`Braket,
    BaseStyle->"BraKetWrapper"], " ", 
   TagBox[
    RowBox[{
     SubscriptBox["\[InvisiblePrefixScriptBase]", 
      TagBox[
       AdjustmentBox[
        TagBox["2",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"LIndex"]], 
     SubscriptBox[
      RowBox[{"\[LeftAngleBracket]", 
       AdjustmentBox[
        RowBox[{
         TagBox["\[Theta]",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
         TagBox["\[Beta]",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"]}],
        BoxBaselineShift->0], "\[RightAngleBracket]"}], 
      TagBox[
       AdjustmentBox[
        TagBox["2",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"RIndex"]]}],
    QuantumAlgebra`QuantumAlgebra`Braket,
    BaseStyle->"BraKetWrapper"], " ", 
   RowBox[{
    RowBox[{
     TagBox[
      SubscriptBox[
       RowBox[{
        AdjustmentBox["\[VerticalSeparator]",
         BoxBaselineShift->-0.1,
         BoxMargins->{{-0.2, 0}, {0, 0}}], 
        AdjustmentBox[
         TagBox["\[Alpha]",
          QuantumAlgebra`QuantumAlgebra`KetArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0], "\[RightAngleBracket]"}], 
       TagBox[
        AdjustmentBox[
         TagBox["1",
          QuantumAlgebra`QuantumAlgebra`KetArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0],
        QuantumAlgebra`QuantumAlgebra`UDScript,
        BaseStyle->"RIndex"]],
      QuantumAlgebra`QuantumAlgebra`Ket,
      BaseStyle->"KetWrapper"], "\[CircleTimes]", 
     TagBox[
      SubscriptBox[
       RowBox[{
        AdjustmentBox["\[VerticalSeparator]",
         BoxBaselineShift->-0.1,
         BoxMargins->{{-0.2, 0}, {0, 0}}], 
        AdjustmentBox[
         TagBox["\[Beta]",
          QuantumAlgebra`QuantumAlgebra`KetArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0], "\[RightAngleBracket]"}], 
       TagBox[
        AdjustmentBox[
         TagBox["2",
          QuantumAlgebra`QuantumAlgebra`KetArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0],
        QuantumAlgebra`QuantumAlgebra`UDScript,
        BaseStyle->"RIndex"]],
      QuantumAlgebra`QuantumAlgebra`Ket,
      BaseStyle->"KetWrapper"]}], "\[CenterDot]", 
    RowBox[{
     TagBox[
      RowBox[{
       SubscriptBox["\[InvisiblePrefixScriptBase]", 
        TagBox[
         AdjustmentBox[
          TagBox["1",
           QuantumAlgebra`QuantumAlgebra`BraArgs,
           BaseStyle->"BraKetArg"],
          BoxBaselineShift->0],
         QuantumAlgebra`QuantumAlgebra`UDScript,
         BaseStyle->"LIndex"]], 
       RowBox[{"\[LeftAngleBracket]", 
        AdjustmentBox[
         TagBox["\[Gamma]",
          QuantumAlgebra`QuantumAlgebra`BraArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0], 
        AdjustmentBox["\[VerticalSeparator]",
         BoxBaselineShift->-0.1,
         BoxMargins->{{0, -0.2}, {0, 0}}]}]}],
      QuantumAlgebra`QuantumAlgebra`Bra,
      BaseStyle->"BraWrapper"], "\[CircleTimes]", 
     TagBox[
      RowBox[{
       SubscriptBox["\[InvisiblePrefixScriptBase]", 
        TagBox[
         AdjustmentBox[
          TagBox["2",
           QuantumAlgebra`QuantumAlgebra`BraArgs,
           BaseStyle->"BraKetArg"],
          BoxBaselineShift->0],
         QuantumAlgebra`QuantumAlgebra`UDScript,
         BaseStyle->"LIndex"]], 
       RowBox[{"\[LeftAngleBracket]", 
        AdjustmentBox[
         TagBox["\[Epsilon]",
          QuantumAlgebra`QuantumAlgebra`BraArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0], 
        AdjustmentBox["\[VerticalSeparator]",
         BoxBaselineShift->-0.1,
         BoxMargins->{{0, -0.2}, {0, 0}}]}]}],
      QuantumAlgebra`QuantumAlgebra`Bra,
      BaseStyle->"BraWrapper"]}]}]}], "+", 
  RowBox[{
   TagBox[
    RowBox[{
     SubscriptBox["\[InvisiblePrefixScriptBase]", 
      TagBox[
       AdjustmentBox[
        TagBox["1",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"LIndex"]], 
     SubscriptBox[
      RowBox[{"\[LeftAngleBracket]", 
       AdjustmentBox[
        RowBox[{
         TagBox["\[Gamma]",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
         TagBox["\[Alpha]",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"]}],
        BoxBaselineShift->0], "\[RightAngleBracket]"}], 
      TagBox[
       AdjustmentBox[
        TagBox["1",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"RIndex"]]}],
    QuantumAlgebra`QuantumAlgebra`Braket,
    BaseStyle->"BraKetWrapper"], " ", 
   TagBox[
    RowBox[{
     SubscriptBox["\[InvisiblePrefixScriptBase]", 
      TagBox[
       AdjustmentBox[
        TagBox["1",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"LIndex"]], 
     SubscriptBox[
      RowBox[{"\[LeftAngleBracket]", 
       AdjustmentBox[
        RowBox[{
         TagBox["\[Gamma]",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
         TagBox["\[CurlyEpsilon]",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"]}],
        BoxBaselineShift->0], "\[RightAngleBracket]"}], 
      TagBox[
       AdjustmentBox[
        TagBox["1",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"RIndex"]]}],
    QuantumAlgebra`QuantumAlgebra`Braket,
    BaseStyle->"BraKetWrapper"], " ", 
   TagBox[
    RowBox[{
     SubscriptBox["\[InvisiblePrefixScriptBase]", 
      TagBox[
       AdjustmentBox[
        TagBox["2",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"LIndex"]], 
     SubscriptBox[
      RowBox[{"\[LeftAngleBracket]", 
       AdjustmentBox[
        RowBox[{
         TagBox["\[Epsilon]",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
         TagBox["\[Beta]",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"]}],
        BoxBaselineShift->0], "\[RightAngleBracket]"}], 
      TagBox[
       AdjustmentBox[
        TagBox["2",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"RIndex"]]}],
    QuantumAlgebra`QuantumAlgebra`Braket,
    BaseStyle->"BraKetWrapper"], " ", 
   TagBox[
    RowBox[{
     SubscriptBox["\[InvisiblePrefixScriptBase]", 
      TagBox[
       AdjustmentBox[
        TagBox["2",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"LIndex"]], 
     SubscriptBox[
      RowBox[{"\[LeftAngleBracket]", 
       AdjustmentBox[
        RowBox[{
         TagBox["\[Epsilon]",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
         TagBox["\[Zeta]",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"]}],
        BoxBaselineShift->0], "\[RightAngleBracket]"}], 
      TagBox[
       AdjustmentBox[
        TagBox["2",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"RIndex"]]}],
    QuantumAlgebra`QuantumAlgebra`Braket,
    BaseStyle->"BraKetWrapper"], " ", 
   RowBox[{
    RowBox[{
     TagBox[
      SubscriptBox[
       RowBox[{
        AdjustmentBox["\[VerticalSeparator]",
         BoxBaselineShift->-0.1,
         BoxMargins->{{-0.2, 0}, {0, 0}}], 
        AdjustmentBox[
         TagBox["\[Alpha]",
          QuantumAlgebra`QuantumAlgebra`KetArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0], "\[RightAngleBracket]"}], 
       TagBox[
        AdjustmentBox[
         TagBox["1",
          QuantumAlgebra`QuantumAlgebra`KetArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0],
        QuantumAlgebra`QuantumAlgebra`UDScript,
        BaseStyle->"RIndex"]],
      QuantumAlgebra`QuantumAlgebra`Ket,
      BaseStyle->"KetWrapper"], "\[CircleTimes]", 
     TagBox[
      SubscriptBox[
       RowBox[{
        AdjustmentBox["\[VerticalSeparator]",
         BoxBaselineShift->-0.1,
         BoxMargins->{{-0.2, 0}, {0, 0}}], 
        AdjustmentBox[
         TagBox["\[Beta]",
          QuantumAlgebra`QuantumAlgebra`KetArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0], "\[RightAngleBracket]"}], 
       TagBox[
        AdjustmentBox[
         TagBox["2",
          QuantumAlgebra`QuantumAlgebra`KetArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0],
        QuantumAlgebra`QuantumAlgebra`UDScript,
        BaseStyle->"RIndex"]],
      QuantumAlgebra`QuantumAlgebra`Ket,
      BaseStyle->"KetWrapper"]}], "\[CenterDot]", 
    RowBox[{
     TagBox[
      RowBox[{
       SubscriptBox["\[InvisiblePrefixScriptBase]", 
        TagBox[
         AdjustmentBox[
          TagBox["1",
           QuantumAlgebra`QuantumAlgebra`BraArgs,
           BaseStyle->"BraKetArg"],
          BoxBaselineShift->0],
         QuantumAlgebra`QuantumAlgebra`UDScript,
         BaseStyle->"LIndex"]], 
       RowBox[{"\[LeftAngleBracket]", 
        AdjustmentBox[
         TagBox["\[Eta]",
          QuantumAlgebra`QuantumAlgebra`BraArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0], 
        AdjustmentBox["\[VerticalSeparator]",
         BoxBaselineShift->-0.1,
         BoxMargins->{{0, -0.2}, {0, 0}}]}]}],
      QuantumAlgebra`QuantumAlgebra`Bra,
      BaseStyle->"BraWrapper"], "\[CircleTimes]", 
     TagBox[
      RowBox[{
       SubscriptBox["\[InvisiblePrefixScriptBase]", 
        TagBox[
         AdjustmentBox[
          TagBox["2",
           QuantumAlgebra`QuantumAlgebra`BraArgs,
           BaseStyle->"BraKetArg"],
          BoxBaselineShift->0],
         QuantumAlgebra`QuantumAlgebra`UDScript,
         BaseStyle->"LIndex"]], 
       RowBox[{"\[LeftAngleBracket]", 
        AdjustmentBox[
         TagBox["\[Theta]",
          QuantumAlgebra`QuantumAlgebra`BraArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0], 
        AdjustmentBox["\[VerticalSeparator]",
         BoxBaselineShift->-0.1,
         BoxMargins->{{0, -0.2}, {0, 0}}]}]}],
      QuantumAlgebra`QuantumAlgebra`Bra,
      BaseStyle->"BraWrapper"]}]}]}], "+", 
  RowBox[{
   TagBox[
    RowBox[{
     SubscriptBox["\[InvisiblePrefixScriptBase]", 
      TagBox[
       AdjustmentBox[
        TagBox["1",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"LIndex"]], 
     SubscriptBox[
      RowBox[{"\[LeftAngleBracket]", 
       AdjustmentBox[
        RowBox[{
         TagBox["\[Gamma]",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
         TagBox["\[CurlyEpsilon]",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"]}],
        BoxBaselineShift->0], "\[RightAngleBracket]"}], 
      TagBox[
       AdjustmentBox[
        TagBox["1",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"RIndex"]]}],
    QuantumAlgebra`QuantumAlgebra`Braket,
    BaseStyle->"BraKetWrapper"], " ", 
   TagBox[
    RowBox[{
     SubscriptBox["\[InvisiblePrefixScriptBase]", 
      TagBox[
       AdjustmentBox[
        TagBox["2",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"LIndex"]], 
     SubscriptBox[
      RowBox[{"\[LeftAngleBracket]", 
       AdjustmentBox[
        RowBox[{
         TagBox["\[Epsilon]",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
         TagBox["\[Zeta]",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"]}],
        BoxBaselineShift->0], "\[RightAngleBracket]"}], 
      TagBox[
       AdjustmentBox[
        TagBox["2",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"RIndex"]]}],
    QuantumAlgebra`QuantumAlgebra`Braket,
    BaseStyle->"BraKetWrapper"], " ", 
   TagBox[
    RowBox[{
     SubscriptBox["\[InvisiblePrefixScriptBase]", 
      TagBox[
       AdjustmentBox[
        TagBox["1",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"LIndex"]], 
     SubscriptBox[
      RowBox[{"\[LeftAngleBracket]", 
       AdjustmentBox[
        RowBox[{
         TagBox["\[Eta]",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
         TagBox["\[CurlyEpsilon]",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"]}],
        BoxBaselineShift->0], "\[RightAngleBracket]"}], 
      TagBox[
       AdjustmentBox[
        TagBox["1",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"RIndex"]]}],
    QuantumAlgebra`QuantumAlgebra`Braket,
    BaseStyle->"BraKetWrapper"], " ", 
   TagBox[
    RowBox[{
     SubscriptBox["\[InvisiblePrefixScriptBase]", 
      TagBox[
       AdjustmentBox[
        TagBox["2",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"LIndex"]], 
     SubscriptBox[
      RowBox[{"\[LeftAngleBracket]", 
       AdjustmentBox[
        RowBox[{
         TagBox["\[Theta]",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
         TagBox["\[Zeta]",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"]}],
        BoxBaselineShift->0], "\[RightAngleBracket]"}], 
      TagBox[
       AdjustmentBox[
        TagBox["2",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"RIndex"]]}],
    QuantumAlgebra`QuantumAlgebra`Braket,
    BaseStyle->"BraKetWrapper"], " ", 
   RowBox[{
    RowBox[{
     TagBox[
      SubscriptBox[
       RowBox[{
        AdjustmentBox["\[VerticalSeparator]",
         BoxBaselineShift->-0.1,
         BoxMargins->{{-0.2, 0}, {0, 0}}], 
        AdjustmentBox[
         TagBox["\[Alpha]",
          QuantumAlgebra`QuantumAlgebra`KetArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0], "\[RightAngleBracket]"}], 
       TagBox[
        AdjustmentBox[
         TagBox["1",
          QuantumAlgebra`QuantumAlgebra`KetArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0],
        QuantumAlgebra`QuantumAlgebra`UDScript,
        BaseStyle->"RIndex"]],
      QuantumAlgebra`QuantumAlgebra`Ket,
      BaseStyle->"KetWrapper"], "\[CircleTimes]", 
     TagBox[
      SubscriptBox[
       RowBox[{
        AdjustmentBox["\[VerticalSeparator]",
         BoxBaselineShift->-0.1,
         BoxMargins->{{-0.2, 0}, {0, 0}}], 
        AdjustmentBox[
         TagBox["\[Beta]",
          QuantumAlgebra`QuantumAlgebra`KetArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0], "\[RightAngleBracket]"}], 
       TagBox[
        AdjustmentBox[
         TagBox["2",
          QuantumAlgebra`QuantumAlgebra`KetArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0],
        QuantumAlgebra`QuantumAlgebra`UDScript,
        BaseStyle->"RIndex"]],
      QuantumAlgebra`QuantumAlgebra`Ket,
      BaseStyle->"KetWrapper"]}], "\[CenterDot]", 
    RowBox[{
     TagBox[
      RowBox[{
       SubscriptBox["\[InvisiblePrefixScriptBase]", 
        TagBox[
         AdjustmentBox[
          TagBox["1",
           QuantumAlgebra`QuantumAlgebra`BraArgs,
           BaseStyle->"BraKetArg"],
          BoxBaselineShift->0],
         QuantumAlgebra`QuantumAlgebra`UDScript,
         BaseStyle->"LIndex"]], 
       RowBox[{"\[LeftAngleBracket]", 
        AdjustmentBox[
         TagBox["\[Eta]",
          QuantumAlgebra`QuantumAlgebra`BraArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0], 
        AdjustmentBox["\[VerticalSeparator]",
         BoxBaselineShift->-0.1,
         BoxMargins->{{0, -0.2}, {0, 0}}]}]}],
      QuantumAlgebra`QuantumAlgebra`Bra,
      BaseStyle->"BraWrapper"], "\[CircleTimes]", 
     TagBox[
      RowBox[{
       SubscriptBox["\[InvisiblePrefixScriptBase]", 
        TagBox[
         AdjustmentBox[
          TagBox["2",
           QuantumAlgebra`QuantumAlgebra`BraArgs,
           BaseStyle->"BraKetArg"],
          BoxBaselineShift->0],
         QuantumAlgebra`QuantumAlgebra`UDScript,
         BaseStyle->"LIndex"]], 
       RowBox[{"\[LeftAngleBracket]", 
        AdjustmentBox[
         TagBox["\[Theta]",
          QuantumAlgebra`QuantumAlgebra`BraArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0], 
        AdjustmentBox["\[VerticalSeparator]",
         BoxBaselineShift->-0.1,
         BoxMargins->{{0, -0.2}, {0, 0}}]}]}],
      QuantumAlgebra`QuantumAlgebra`Bra,
      BaseStyle->"BraWrapper"]}]}]}], "+", 
  RowBox[{
   TagBox[
    RowBox[{
     SubscriptBox["\[InvisiblePrefixScriptBase]", 
      TagBox[
       AdjustmentBox[
        TagBox["1",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"LIndex"]], 
     SubscriptBox[
      RowBox[{"\[LeftAngleBracket]", 
       AdjustmentBox[
        RowBox[{
         TagBox["\[Gamma]",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
         TagBox["\[Alpha]",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"]}],
        BoxBaselineShift->0], "\[RightAngleBracket]"}], 
      TagBox[
       AdjustmentBox[
        TagBox["1",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"RIndex"]]}],
    QuantumAlgebra`QuantumAlgebra`Braket,
    BaseStyle->"BraKetWrapper"], " ", 
   TagBox[
    RowBox[{
     SubscriptBox["\[InvisiblePrefixScriptBase]", 
      TagBox[
       AdjustmentBox[
        TagBox["2",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"LIndex"]], 
     SubscriptBox[
      RowBox[{"\[LeftAngleBracket]", 
       AdjustmentBox[
        RowBox[{
         TagBox["\[Epsilon]",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
         TagBox["\[Beta]",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"]}],
        BoxBaselineShift->0], "\[RightAngleBracket]"}], 
      TagBox[
       AdjustmentBox[
        TagBox["2",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"RIndex"]]}],
    QuantumAlgebra`QuantumAlgebra`Braket,
    BaseStyle->"BraKetWrapper"], " ", 
   TagBox[
    RowBox[{
     SubscriptBox["\[InvisiblePrefixScriptBase]", 
      TagBox[
       AdjustmentBox[
        TagBox["1",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"LIndex"]], 
     SubscriptBox[
      RowBox[{"\[LeftAngleBracket]", 
       AdjustmentBox[
        RowBox[{
         TagBox["\[Eta]",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
         TagBox["\[Alpha]",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"]}],
        BoxBaselineShift->0], "\[RightAngleBracket]"}], 
      TagBox[
       AdjustmentBox[
        TagBox["1",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"RIndex"]]}],
    QuantumAlgebra`QuantumAlgebra`Braket,
    BaseStyle->"BraKetWrapper"], " ", 
   TagBox[
    RowBox[{
     SubscriptBox["\[InvisiblePrefixScriptBase]", 
      TagBox[
       AdjustmentBox[
        TagBox["2",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"LIndex"]], 
     SubscriptBox[
      RowBox[{"\[LeftAngleBracket]", 
       AdjustmentBox[
        RowBox[{
         TagBox["\[Theta]",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
         TagBox["\[Beta]",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"]}],
        BoxBaselineShift->0], "\[RightAngleBracket]"}], 
      TagBox[
       AdjustmentBox[
        TagBox["2",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"RIndex"]]}],
    QuantumAlgebra`QuantumAlgebra`Braket,
    BaseStyle->"BraKetWrapper"], " ", 
   RowBox[{
    RowBox[{
     TagBox[
      SubscriptBox[
       RowBox[{
        AdjustmentBox["\[VerticalSeparator]",
         BoxBaselineShift->-0.1,
         BoxMargins->{{-0.2, 0}, {0, 0}}], 
        AdjustmentBox[
         TagBox["\[CurlyEpsilon]",
          QuantumAlgebra`QuantumAlgebra`KetArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0], "\[RightAngleBracket]"}], 
       TagBox[
        AdjustmentBox[
         TagBox["1",
          QuantumAlgebra`QuantumAlgebra`KetArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0],
        QuantumAlgebra`QuantumAlgebra`UDScript,
        BaseStyle->"RIndex"]],
      QuantumAlgebra`QuantumAlgebra`Ket,
      BaseStyle->"KetWrapper"], "\[CircleTimes]", 
     TagBox[
      SubscriptBox[
       RowBox[{
        AdjustmentBox["\[VerticalSeparator]",
         BoxBaselineShift->-0.1,
         BoxMargins->{{-0.2, 0}, {0, 0}}], 
        AdjustmentBox[
         TagBox["\[Zeta]",
          QuantumAlgebra`QuantumAlgebra`KetArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0], "\[RightAngleBracket]"}], 
       TagBox[
        AdjustmentBox[
         TagBox["2",
          QuantumAlgebra`QuantumAlgebra`KetArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0],
        QuantumAlgebra`QuantumAlgebra`UDScript,
        BaseStyle->"RIndex"]],
      QuantumAlgebra`QuantumAlgebra`Ket,
      BaseStyle->"KetWrapper"]}], "\[CenterDot]", 
    RowBox[{
     TagBox[
      RowBox[{
       SubscriptBox["\[InvisiblePrefixScriptBase]", 
        TagBox[
         AdjustmentBox[
          TagBox["1",
           QuantumAlgebra`QuantumAlgebra`BraArgs,
           BaseStyle->"BraKetArg"],
          BoxBaselineShift->0],
         QuantumAlgebra`QuantumAlgebra`UDScript,
         BaseStyle->"LIndex"]], 
       RowBox[{"\[LeftAngleBracket]", 
        AdjustmentBox[
         TagBox["\[Gamma]",
          QuantumAlgebra`QuantumAlgebra`BraArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0], 
        AdjustmentBox["\[VerticalSeparator]",
         BoxBaselineShift->-0.1,
         BoxMargins->{{0, -0.2}, {0, 0}}]}]}],
      QuantumAlgebra`QuantumAlgebra`Bra,
      BaseStyle->"BraWrapper"], "\[CircleTimes]", 
     TagBox[
      RowBox[{
       SubscriptBox["\[InvisiblePrefixScriptBase]", 
        TagBox[
         AdjustmentBox[
          TagBox["2",
           QuantumAlgebra`QuantumAlgebra`BraArgs,
           BaseStyle->"BraKetArg"],
          BoxBaselineShift->0],
         QuantumAlgebra`QuantumAlgebra`UDScript,
         BaseStyle->"LIndex"]], 
       RowBox[{"\[LeftAngleBracket]", 
        AdjustmentBox[
         TagBox["\[Epsilon]",
          QuantumAlgebra`QuantumAlgebra`BraArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0], 
        AdjustmentBox["\[VerticalSeparator]",
         BoxBaselineShift->-0.1,
         BoxMargins->{{0, -0.2}, {0, 0}}]}]}],
      QuantumAlgebra`QuantumAlgebra`Bra,
      BaseStyle->"BraWrapper"]}]}]}], "+", 
  RowBox[{
   TagBox[
    RowBox[{
     SubscriptBox["\[InvisiblePrefixScriptBase]", 
      TagBox[
       AdjustmentBox[
        TagBox["1",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"LIndex"]], 
     SubscriptBox[
      RowBox[{"\[LeftAngleBracket]", 
       AdjustmentBox[
        RowBox[{
         TagBox["\[Eta]",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
         TagBox["\[Alpha]",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"]}],
        BoxBaselineShift->0], "\[RightAngleBracket]"}], 
      TagBox[
       AdjustmentBox[
        TagBox["1",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"RIndex"]]}],
    QuantumAlgebra`QuantumAlgebra`Braket,
    BaseStyle->"BraKetWrapper"], " ", 
   TagBox[
    RowBox[{
     SubscriptBox["\[InvisiblePrefixScriptBase]", 
      TagBox[
       AdjustmentBox[
        TagBox["1",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"LIndex"]], 
     SubscriptBox[
      RowBox[{"\[LeftAngleBracket]", 
       AdjustmentBox[
        RowBox[{
         TagBox["\[Eta]",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
         TagBox["\[CurlyEpsilon]",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"]}],
        BoxBaselineShift->0], "\[RightAngleBracket]"}], 
      TagBox[
       AdjustmentBox[
        TagBox["1",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"RIndex"]]}],
    QuantumAlgebra`QuantumAlgebra`Braket,
    BaseStyle->"BraKetWrapper"], " ", 
   TagBox[
    RowBox[{
     SubscriptBox["\[InvisiblePrefixScriptBase]", 
      TagBox[
       AdjustmentBox[
        TagBox["2",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"LIndex"]], 
     SubscriptBox[
      RowBox[{"\[LeftAngleBracket]", 
       AdjustmentBox[
        RowBox[{
         TagBox["\[Theta]",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
         TagBox["\[Beta]",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"]}],
        BoxBaselineShift->0], "\[RightAngleBracket]"}], 
      TagBox[
       AdjustmentBox[
        TagBox["2",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"RIndex"]]}],
    QuantumAlgebra`QuantumAlgebra`Braket,
    BaseStyle->"BraKetWrapper"], " ", 
   TagBox[
    RowBox[{
     SubscriptBox["\[InvisiblePrefixScriptBase]", 
      TagBox[
       AdjustmentBox[
        TagBox["2",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"LIndex"]], 
     SubscriptBox[
      RowBox[{"\[LeftAngleBracket]", 
       AdjustmentBox[
        RowBox[{
         TagBox["\[Theta]",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
         TagBox["\[Zeta]",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"]}],
        BoxBaselineShift->0], "\[RightAngleBracket]"}], 
      TagBox[
       AdjustmentBox[
        TagBox["2",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"RIndex"]]}],
    QuantumAlgebra`QuantumAlgebra`Braket,
    BaseStyle->"BraKetWrapper"], " ", 
   RowBox[{
    RowBox[{
     TagBox[
      SubscriptBox[
       RowBox[{
        AdjustmentBox["\[VerticalSeparator]",
         BoxBaselineShift->-0.1,
         BoxMargins->{{-0.2, 0}, {0, 0}}], 
        AdjustmentBox[
         TagBox["\[CurlyEpsilon]",
          QuantumAlgebra`QuantumAlgebra`KetArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0], "\[RightAngleBracket]"}], 
       TagBox[
        AdjustmentBox[
         TagBox["1",
          QuantumAlgebra`QuantumAlgebra`KetArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0],
        QuantumAlgebra`QuantumAlgebra`UDScript,
        BaseStyle->"RIndex"]],
      QuantumAlgebra`QuantumAlgebra`Ket,
      BaseStyle->"KetWrapper"], "\[CircleTimes]", 
     TagBox[
      SubscriptBox[
       RowBox[{
        AdjustmentBox["\[VerticalSeparator]",
         BoxBaselineShift->-0.1,
         BoxMargins->{{-0.2, 0}, {0, 0}}], 
        AdjustmentBox[
         TagBox["\[Zeta]",
          QuantumAlgebra`QuantumAlgebra`KetArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0], "\[RightAngleBracket]"}], 
       TagBox[
        AdjustmentBox[
         TagBox["2",
          QuantumAlgebra`QuantumAlgebra`KetArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0],
        QuantumAlgebra`QuantumAlgebra`UDScript,
        BaseStyle->"RIndex"]],
      QuantumAlgebra`QuantumAlgebra`Ket,
      BaseStyle->"KetWrapper"]}], "\[CenterDot]", 
    RowBox[{
     TagBox[
      RowBox[{
       SubscriptBox["\[InvisiblePrefixScriptBase]", 
        TagBox[
         AdjustmentBox[
          TagBox["1",
           QuantumAlgebra`QuantumAlgebra`BraArgs,
           BaseStyle->"BraKetArg"],
          BoxBaselineShift->0],
         QuantumAlgebra`QuantumAlgebra`UDScript,
         BaseStyle->"LIndex"]], 
       RowBox[{"\[LeftAngleBracket]", 
        AdjustmentBox[
         TagBox["\[Gamma]",
          QuantumAlgebra`QuantumAlgebra`BraArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0], 
        AdjustmentBox["\[VerticalSeparator]",
         BoxBaselineShift->-0.1,
         BoxMargins->{{0, -0.2}, {0, 0}}]}]}],
      QuantumAlgebra`QuantumAlgebra`Bra,
      BaseStyle->"BraWrapper"], "\[CircleTimes]", 
     TagBox[
      RowBox[{
       SubscriptBox["\[InvisiblePrefixScriptBase]", 
        TagBox[
         AdjustmentBox[
          TagBox["2",
           QuantumAlgebra`QuantumAlgebra`BraArgs,
           BaseStyle->"BraKetArg"],
          BoxBaselineShift->0],
         QuantumAlgebra`QuantumAlgebra`UDScript,
         BaseStyle->"LIndex"]], 
       RowBox[{"\[LeftAngleBracket]", 
        AdjustmentBox[
         TagBox["\[Epsilon]",
          QuantumAlgebra`QuantumAlgebra`BraArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0], 
        AdjustmentBox["\[VerticalSeparator]",
         BoxBaselineShift->-0.1,
         BoxMargins->{{0, -0.2}, {0, 0}}]}]}],
      QuantumAlgebra`QuantumAlgebra`Bra,
      BaseStyle->"BraWrapper"]}]}]}], "+", 
  RowBox[{
   TagBox[
    RowBox[{
     SubscriptBox["\[InvisiblePrefixScriptBase]", 
      TagBox[
       AdjustmentBox[
        TagBox["1",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"LIndex"]], 
     SubscriptBox[
      RowBox[{"\[LeftAngleBracket]", 
       AdjustmentBox[
        RowBox[{
         TagBox["\[Gamma]",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
         TagBox["\[CurlyEpsilon]",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"]}],
        BoxBaselineShift->0], "\[RightAngleBracket]"}], 
      TagBox[
       AdjustmentBox[
        TagBox["1",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"RIndex"]]}],
    QuantumAlgebra`QuantumAlgebra`Braket,
    BaseStyle->"BraKetWrapper"], " ", 
   TagBox[
    RowBox[{
     SubscriptBox["\[InvisiblePrefixScriptBase]", 
      TagBox[
       AdjustmentBox[
        TagBox["2",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"LIndex"]], 
     SubscriptBox[
      RowBox[{"\[LeftAngleBracket]", 
       AdjustmentBox[
        RowBox[{
         TagBox["\[Epsilon]",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
         TagBox["\[Zeta]",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"]}],
        BoxBaselineShift->0], "\[RightAngleBracket]"}], 
      TagBox[
       AdjustmentBox[
        TagBox["2",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"RIndex"]]}],
    QuantumAlgebra`QuantumAlgebra`Braket,
    BaseStyle->"BraKetWrapper"], " ", 
   TagBox[
    RowBox[{
     SubscriptBox["\[InvisiblePrefixScriptBase]", 
      TagBox[
       AdjustmentBox[
        TagBox["1",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"LIndex"]], 
     SubscriptBox[
      RowBox[{"\[LeftAngleBracket]", 
       AdjustmentBox[
        RowBox[{
         TagBox["\[Eta]",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
         TagBox["\[Alpha]",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"]}],
        BoxBaselineShift->0], "\[RightAngleBracket]"}], 
      TagBox[
       AdjustmentBox[
        TagBox["1",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"RIndex"]]}],
    QuantumAlgebra`QuantumAlgebra`Braket,
    BaseStyle->"BraKetWrapper"], " ", 
   TagBox[
    RowBox[{
     SubscriptBox["\[InvisiblePrefixScriptBase]", 
      TagBox[
       AdjustmentBox[
        TagBox["2",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"LIndex"]], 
     SubscriptBox[
      RowBox[{"\[LeftAngleBracket]", 
       AdjustmentBox[
        RowBox[{
         TagBox["\[Theta]",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
         TagBox["\[Beta]",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"]}],
        BoxBaselineShift->0], "\[RightAngleBracket]"}], 
      TagBox[
       AdjustmentBox[
        TagBox["2",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"RIndex"]]}],
    QuantumAlgebra`QuantumAlgebra`Braket,
    BaseStyle->"BraKetWrapper"], " ", 
   RowBox[{
    RowBox[{
     TagBox[
      SubscriptBox[
       RowBox[{
        AdjustmentBox["\[VerticalSeparator]",
         BoxBaselineShift->-0.1,
         BoxMargins->{{-0.2, 0}, {0, 0}}], 
        AdjustmentBox[
         TagBox["\[CurlyEpsilon]",
          QuantumAlgebra`QuantumAlgebra`KetArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0], "\[RightAngleBracket]"}], 
       TagBox[
        AdjustmentBox[
         TagBox["1",
          QuantumAlgebra`QuantumAlgebra`KetArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0],
        QuantumAlgebra`QuantumAlgebra`UDScript,
        BaseStyle->"RIndex"]],
      QuantumAlgebra`QuantumAlgebra`Ket,
      BaseStyle->"KetWrapper"], "\[CircleTimes]", 
     TagBox[
      SubscriptBox[
       RowBox[{
        AdjustmentBox["\[VerticalSeparator]",
         BoxBaselineShift->-0.1,
         BoxMargins->{{-0.2, 0}, {0, 0}}], 
        AdjustmentBox[
         TagBox["\[Zeta]",
          QuantumAlgebra`QuantumAlgebra`KetArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0], "\[RightAngleBracket]"}], 
       TagBox[
        AdjustmentBox[
         TagBox["2",
          QuantumAlgebra`QuantumAlgebra`KetArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0],
        QuantumAlgebra`QuantumAlgebra`UDScript,
        BaseStyle->"RIndex"]],
      QuantumAlgebra`QuantumAlgebra`Ket,
      BaseStyle->"KetWrapper"]}], "\[CenterDot]", 
    RowBox[{
     TagBox[
      RowBox[{
       SubscriptBox["\[InvisiblePrefixScriptBase]", 
        TagBox[
         AdjustmentBox[
          TagBox["1",
           QuantumAlgebra`QuantumAlgebra`BraArgs,
           BaseStyle->"BraKetArg"],
          BoxBaselineShift->0],
         QuantumAlgebra`QuantumAlgebra`UDScript,
         BaseStyle->"LIndex"]], 
       RowBox[{"\[LeftAngleBracket]", 
        AdjustmentBox[
         TagBox["\[Eta]",
          QuantumAlgebra`QuantumAlgebra`BraArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0], 
        AdjustmentBox["\[VerticalSeparator]",
         BoxBaselineShift->-0.1,
         BoxMargins->{{0, -0.2}, {0, 0}}]}]}],
      QuantumAlgebra`QuantumAlgebra`Bra,
      BaseStyle->"BraWrapper"], "\[CircleTimes]", 
     TagBox[
      RowBox[{
       SubscriptBox["\[InvisiblePrefixScriptBase]", 
        TagBox[
         AdjustmentBox[
          TagBox["2",
           QuantumAlgebra`QuantumAlgebra`BraArgs,
           BaseStyle->"BraKetArg"],
          BoxBaselineShift->0],
         QuantumAlgebra`QuantumAlgebra`UDScript,
         BaseStyle->"LIndex"]], 
       RowBox[{"\[LeftAngleBracket]", 
        AdjustmentBox[
         TagBox["\[Theta]",
          QuantumAlgebra`QuantumAlgebra`BraArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0], 
        AdjustmentBox["\[VerticalSeparator]",
         BoxBaselineShift->-0.1,
         BoxMargins->{{0, -0.2}, {0, 0}}]}]}],
      QuantumAlgebra`QuantumAlgebra`Bra,
      BaseStyle->"BraWrapper"]}]}]}], "+", 
  RowBox[{
   SuperscriptBox[
    TagBox[
     RowBox[{
      SubscriptBox["\[InvisiblePrefixScriptBase]", 
       TagBox[
        AdjustmentBox[
         TagBox["1",
          QuantumAlgebra`QuantumAlgebra`BraArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0],
        QuantumAlgebra`QuantumAlgebra`UDScript,
        BaseStyle->"LIndex"]], 
      SubscriptBox[
       RowBox[{"\[LeftAngleBracket]", 
        AdjustmentBox[
         RowBox[{
          TagBox["\[Eta]",
           QuantumAlgebra`QuantumAlgebra`BraKetArgs,
           BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
          TagBox["\[CurlyEpsilon]",
           QuantumAlgebra`QuantumAlgebra`BraKetArgs,
           BaseStyle->"BraKetArg"]}],
         BoxBaselineShift->0], "\[RightAngleBracket]"}], 
       TagBox[
        AdjustmentBox[
         TagBox["1",
          QuantumAlgebra`QuantumAlgebra`BraArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0],
        QuantumAlgebra`QuantumAlgebra`UDScript,
        BaseStyle->"RIndex"]]}],
     QuantumAlgebra`QuantumAlgebra`Braket,
     BaseStyle->"BraKetWrapper"], "2"], " ", 
   SuperscriptBox[
    TagBox[
     RowBox[{
      SubscriptBox["\[InvisiblePrefixScriptBase]", 
       TagBox[
        AdjustmentBox[
         TagBox["2",
          QuantumAlgebra`QuantumAlgebra`BraArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0],
        QuantumAlgebra`QuantumAlgebra`UDScript,
        BaseStyle->"LIndex"]], 
      SubscriptBox[
       RowBox[{"\[LeftAngleBracket]", 
        AdjustmentBox[
         RowBox[{
          TagBox["\[Theta]",
           QuantumAlgebra`QuantumAlgebra`BraKetArgs,
           BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
          TagBox["\[Zeta]",
           QuantumAlgebra`QuantumAlgebra`BraKetArgs,
           BaseStyle->"BraKetArg"]}],
         BoxBaselineShift->0], "\[RightAngleBracket]"}], 
       TagBox[
        AdjustmentBox[
         TagBox["2",
          QuantumAlgebra`QuantumAlgebra`BraArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0],
        QuantumAlgebra`QuantumAlgebra`UDScript,
        BaseStyle->"RIndex"]]}],
     QuantumAlgebra`QuantumAlgebra`Braket,
     BaseStyle->"BraKetWrapper"], "2"], " ", 
   RowBox[{
    RowBox[{
     TagBox[
      SubscriptBox[
       RowBox[{
        AdjustmentBox["\[VerticalSeparator]",
         BoxBaselineShift->-0.1,
         BoxMargins->{{-0.2, 0}, {0, 0}}], 
        AdjustmentBox[
         TagBox["\[CurlyEpsilon]",
          QuantumAlgebra`QuantumAlgebra`KetArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0], "\[RightAngleBracket]"}], 
       TagBox[
        AdjustmentBox[
         TagBox["1",
          QuantumAlgebra`QuantumAlgebra`KetArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0],
        QuantumAlgebra`QuantumAlgebra`UDScript,
        BaseStyle->"RIndex"]],
      QuantumAlgebra`QuantumAlgebra`Ket,
      BaseStyle->"KetWrapper"], "\[CircleTimes]", 
     TagBox[
      SubscriptBox[
       RowBox[{
        AdjustmentBox["\[VerticalSeparator]",
         BoxBaselineShift->-0.1,
         BoxMargins->{{-0.2, 0}, {0, 0}}], 
        AdjustmentBox[
         TagBox["\[Zeta]",
          QuantumAlgebra`QuantumAlgebra`KetArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0], "\[RightAngleBracket]"}], 
       TagBox[
        AdjustmentBox[
         TagBox["2",
          QuantumAlgebra`QuantumAlgebra`KetArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0],
        QuantumAlgebra`QuantumAlgebra`UDScript,
        BaseStyle->"RIndex"]],
      QuantumAlgebra`QuantumAlgebra`Ket,
      BaseStyle->"KetWrapper"]}], "\[CenterDot]", 
    RowBox[{
     TagBox[
      RowBox[{
       SubscriptBox["\[InvisiblePrefixScriptBase]", 
        TagBox[
         AdjustmentBox[
          TagBox["1",
           QuantumAlgebra`QuantumAlgebra`BraArgs,
           BaseStyle->"BraKetArg"],
          BoxBaselineShift->0],
         QuantumAlgebra`QuantumAlgebra`UDScript,
         BaseStyle->"LIndex"]], 
       RowBox[{"\[LeftAngleBracket]", 
        AdjustmentBox[
         TagBox["\[Eta]",
          QuantumAlgebra`QuantumAlgebra`BraArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0], 
        AdjustmentBox["\[VerticalSeparator]",
         BoxBaselineShift->-0.1,
         BoxMargins->{{0, -0.2}, {0, 0}}]}]}],
      QuantumAlgebra`QuantumAlgebra`Bra,
      BaseStyle->"BraWrapper"], "\[CircleTimes]", 
     TagBox[
      RowBox[{
       SubscriptBox["\[InvisiblePrefixScriptBase]", 
        TagBox[
         AdjustmentBox[
          TagBox["2",
           QuantumAlgebra`QuantumAlgebra`BraArgs,
           BaseStyle->"BraKetArg"],
          BoxBaselineShift->0],
         QuantumAlgebra`QuantumAlgebra`UDScript,
         BaseStyle->"LIndex"]], 
       RowBox[{"\[LeftAngleBracket]", 
        AdjustmentBox[
         TagBox["\[Theta]",
          QuantumAlgebra`QuantumAlgebra`BraArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0], 
        AdjustmentBox["\[VerticalSeparator]",
         BoxBaselineShift->-0.1,
         BoxMargins->{{0, -0.2}, {0, 0}}]}]}],
      QuantumAlgebra`QuantumAlgebra`Bra,
      BaseStyle->"BraWrapper"]}]}]}]}]], "Output",
 CellChangeTimes->{3.4742396345054417`*^9, 3.5944552692519336`*^9}]
}, Open  ]],

Cell[TextData[{
 "Suppose that we want to compute the expectation value of the product of two \
operators ",
 Cell[BoxData[
  FormBox[
   OverscriptBox["\[ScriptCapitalA]", "^"], TraditionalForm]]],
 " and ",
 Cell[BoxData[
  FormBox[
   OverscriptBox["\[ScriptCapitalB]", "^"], TraditionalForm]]],
 " for a system in the state ",
 Cell[BoxData[
  FormBox[
   RowBox[{
    RowBox[{
     AdjustmentBox["|",
      BoxBaselineShift->0.14285714285714285`,
      BoxMargins->{{0., 0.}, {-0.14285714285714285`, 0.14285714285714285`}}], 
     "\[Psi]"}], "\[RightAngleBracket]"}], TraditionalForm]]],
 ", but these objects live in a state space made of three single ones ",
 Cell[BoxData[
  FormBox[
   RowBox[{"\[ScriptCapitalE]", "=", 
    RowBox[{
     SubscriptBox["\[ScriptCapitalE]", "1"], "\[CircleTimes]", 
     SubscriptBox["\[ScriptCapitalE]", "2"], "\[CircleTimes]", 
     SubscriptBox["\[ScriptCapitalE]", "3"]}]}], TraditionalForm]]],
 ". "
}], "Text",
 CellChangeTimes->{{3.4442186444465485`*^9, 3.4442188754145484`*^9}, 
   3.4442189093335485`*^9, {3.4442189881805487`*^9, 3.4442190581145487`*^9}, {
   3.4452451680079455`*^9, 3.4452451754679456`*^9}, {3.4452452250919456`*^9, 
   3.445245263087946*^9}, {3.4742397485659657`*^9, 3.4742397615027056`*^9}, {
   3.5944553447562523`*^9, 3.594455398514327*^9}}],

Cell["\<\
First we give the outer representations of the two operators in some basis \
labeled by the integers 1, 2 and 3 for each state space:\
\>", "Text",
 CellChangeTimes->{{3.4442190721915483`*^9, 3.4442191848545485`*^9}, {
   3.4443098213640003`*^9, 3.444309853505*^9}, {3.4443099075030003`*^9, 
   3.444309919908*^9}, {3.444310004778*^9, 3.4443100724519997`*^9}, 
   3.4452453373909454`*^9, {3.5944554876224236`*^9, 3.5944555640557957`*^9}, 
   3.594455915924921*^9}],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"ABRules", "=", 
  RowBox[{"{", 
   RowBox[{
    RowBox[{
     OverscriptBox["\[ScriptCapitalA]", "^"], "\[Rule]", 
     RowBox[{
      RowBox[{
       RowBox[{
        TagBox[
         SubscriptBox[
          RowBox[{
           AdjustmentBox["\[VerticalSeparator]",
            BoxBaselineShift->-0.1,
            BoxMargins->{{-0.2, 0}, {0, 0}}], 
           AdjustmentBox[
            TagBox["0",
             QuantumAlgebra`QuantumAlgebra`KetArgs,
             BaseStyle->"BraKetArg"],
            BoxBaselineShift->0], "\[RightAngleBracket]"}], 
          TagBox[
           AdjustmentBox[
            TagBox["1",
             QuantumAlgebra`QuantumAlgebra`KetArgs,
             BaseStyle->"BraKetArg"],
            BoxBaselineShift->0],
           QuantumAlgebra`QuantumAlgebra`UDScript,
           BaseStyle->"RIndex"]],
         QuantumAlgebra`QuantumAlgebra`Ket,
         BaseStyle->"KetWrapper"], "\[CircleTimes]", 
        TagBox[
         SubscriptBox[
          RowBox[{
           AdjustmentBox["\[VerticalSeparator]",
            BoxBaselineShift->-0.1,
            BoxMargins->{{-0.2, 0}, {0, 0}}], 
           AdjustmentBox[
            TagBox["1",
             QuantumAlgebra`QuantumAlgebra`KetArgs,
             BaseStyle->"BraKetArg"],
            BoxBaselineShift->0], "\[RightAngleBracket]"}], 
          TagBox[
           AdjustmentBox[
            TagBox["2",
             QuantumAlgebra`QuantumAlgebra`KetArgs,
             BaseStyle->"BraKetArg"],
            BoxBaselineShift->0],
           QuantumAlgebra`QuantumAlgebra`UDScript,
           BaseStyle->"RIndex"]],
         QuantumAlgebra`QuantumAlgebra`Ket,
         BaseStyle->"KetWrapper"]}], "\[CenterDot]", 
       RowBox[{
        TagBox[
         RowBox[{
          SubscriptBox["\[InvisiblePrefixScriptBase]", 
           TagBox[
            AdjustmentBox[
             TagBox["1",
              QuantumAlgebra`QuantumAlgebra`BraArgs,
              BaseStyle->"BraKetArg"],
             BoxBaselineShift->0],
            QuantumAlgebra`QuantumAlgebra`UDScript,
            BaseStyle->"LIndex"]], 
          RowBox[{"\[LeftAngleBracket]", 
           AdjustmentBox[
            TagBox["1",
             QuantumAlgebra`QuantumAlgebra`BraArgs,
             BaseStyle->"BraKetArg"],
            BoxBaselineShift->0], 
           AdjustmentBox["\[VerticalSeparator]",
            BoxBaselineShift->-0.1,
            BoxMargins->{{0, -0.2}, {0, 0}}]}]}],
         QuantumAlgebra`QuantumAlgebra`Bra,
         BaseStyle->"BraWrapper"], "\[CircleTimes]", 
        TagBox[
         RowBox[{
          SubscriptBox["\[InvisiblePrefixScriptBase]", 
           TagBox[
            AdjustmentBox[
             TagBox["2",
              QuantumAlgebra`QuantumAlgebra`BraArgs,
              BaseStyle->"BraKetArg"],
             BoxBaselineShift->0],
            QuantumAlgebra`QuantumAlgebra`UDScript,
            BaseStyle->"LIndex"]], 
          RowBox[{"\[LeftAngleBracket]", 
           AdjustmentBox[
            TagBox["0",
             QuantumAlgebra`QuantumAlgebra`BraArgs,
             BaseStyle->"BraKetArg"],
            BoxBaselineShift->0], 
           AdjustmentBox["\[VerticalSeparator]",
            BoxBaselineShift->-0.1,
            BoxMargins->{{0, -0.2}, {0, 0}}]}]}],
         QuantumAlgebra`QuantumAlgebra`Bra,
         BaseStyle->"BraWrapper"]}]}], "+", 
      RowBox[{
       RowBox[{
        TagBox[
         SubscriptBox[
          RowBox[{
           AdjustmentBox["\[VerticalSeparator]",
            BoxBaselineShift->-0.1,
            BoxMargins->{{-0.2, 0}, {0, 0}}], 
           AdjustmentBox[
            TagBox["1",
             QuantumAlgebra`QuantumAlgebra`KetArgs,
             BaseStyle->"BraKetArg"],
            BoxBaselineShift->0], "\[RightAngleBracket]"}], 
          TagBox[
           AdjustmentBox[
            TagBox["1",
             QuantumAlgebra`QuantumAlgebra`KetArgs,
             BaseStyle->"BraKetArg"],
            BoxBaselineShift->0],
           QuantumAlgebra`QuantumAlgebra`UDScript,
           BaseStyle->"RIndex"]],
         QuantumAlgebra`QuantumAlgebra`Ket,
         BaseStyle->"KetWrapper"], "\[CircleTimes]", 
        TagBox[
         SubscriptBox[
          RowBox[{
           AdjustmentBox["\[VerticalSeparator]",
            BoxBaselineShift->-0.1,
            BoxMargins->{{-0.2, 0}, {0, 0}}], 
           AdjustmentBox[
            TagBox["0",
             QuantumAlgebra`QuantumAlgebra`KetArgs,
             BaseStyle->"BraKetArg"],
            BoxBaselineShift->0], "\[RightAngleBracket]"}], 
          TagBox[
           AdjustmentBox[
            TagBox["2",
             QuantumAlgebra`QuantumAlgebra`KetArgs,
             BaseStyle->"BraKetArg"],
            BoxBaselineShift->0],
           QuantumAlgebra`QuantumAlgebra`UDScript,
           BaseStyle->"RIndex"]],
         QuantumAlgebra`QuantumAlgebra`Ket,
         BaseStyle->"KetWrapper"]}], "\[CenterDot]", 
       RowBox[{
        TagBox[
         RowBox[{
          SubscriptBox["\[InvisiblePrefixScriptBase]", 
           TagBox[
            AdjustmentBox[
             TagBox["1",
              QuantumAlgebra`QuantumAlgebra`BraArgs,
              BaseStyle->"BraKetArg"],
             BoxBaselineShift->0],
            QuantumAlgebra`QuantumAlgebra`UDScript,
            BaseStyle->"LIndex"]], 
          RowBox[{"\[LeftAngleBracket]", 
           AdjustmentBox[
            TagBox["0",
             QuantumAlgebra`QuantumAlgebra`BraArgs,
             BaseStyle->"BraKetArg"],
            BoxBaselineShift->0], 
           AdjustmentBox["\[VerticalSeparator]",
            BoxBaselineShift->-0.1,
            BoxMargins->{{0, -0.2}, {0, 0}}]}]}],
         QuantumAlgebra`QuantumAlgebra`Bra,
         BaseStyle->"BraWrapper"], "\[CircleTimes]", 
        TagBox[
         RowBox[{
          SubscriptBox["\[InvisiblePrefixScriptBase]", 
           TagBox[
            AdjustmentBox[
             TagBox["2",
              QuantumAlgebra`QuantumAlgebra`BraArgs,
              BaseStyle->"BraKetArg"],
             BoxBaselineShift->0],
            QuantumAlgebra`QuantumAlgebra`UDScript,
            BaseStyle->"LIndex"]], 
          RowBox[{"\[LeftAngleBracket]", 
           AdjustmentBox[
            TagBox["1",
             QuantumAlgebra`QuantumAlgebra`BraArgs,
             BaseStyle->"BraKetArg"],
            BoxBaselineShift->0], 
           AdjustmentBox["\[VerticalSeparator]",
            BoxBaselineShift->-0.1,
            BoxMargins->{{0, -0.2}, {0, 0}}]}]}],
         QuantumAlgebra`QuantumAlgebra`Bra,
         BaseStyle->"BraWrapper"]}]}]}]}], ",", 
    RowBox[{
     OverscriptBox["\[ScriptCapitalB]", "^"], "\[Rule]", 
     RowBox[{
      RowBox[{
       RowBox[{
        TagBox[
         SubscriptBox[
          RowBox[{
           AdjustmentBox["\[VerticalSeparator]",
            BoxBaselineShift->-0.1,
            BoxMargins->{{-0.2, 0}, {0, 0}}], 
           AdjustmentBox[
            TagBox["0",
             QuantumAlgebra`QuantumAlgebra`KetArgs,
             BaseStyle->"BraKetArg"],
            BoxBaselineShift->0], "\[RightAngleBracket]"}], 
          TagBox[
           AdjustmentBox[
            TagBox["1",
             QuantumAlgebra`QuantumAlgebra`KetArgs,
             BaseStyle->"BraKetArg"],
            BoxBaselineShift->0],
           QuantumAlgebra`QuantumAlgebra`UDScript,
           BaseStyle->"RIndex"]],
         QuantumAlgebra`QuantumAlgebra`Ket,
         BaseStyle->"KetWrapper"], "\[CircleTimes]", 
        TagBox[
         SubscriptBox[
          RowBox[{
           AdjustmentBox["\[VerticalSeparator]",
            BoxBaselineShift->-0.1,
            BoxMargins->{{-0.2, 0}, {0, 0}}], 
           AdjustmentBox[
            TagBox["0",
             QuantumAlgebra`QuantumAlgebra`KetArgs,
             BaseStyle->"BraKetArg"],
            BoxBaselineShift->0], "\[RightAngleBracket]"}], 
          TagBox[
           AdjustmentBox[
            TagBox["3",
             QuantumAlgebra`QuantumAlgebra`KetArgs,
             BaseStyle->"BraKetArg"],
            BoxBaselineShift->0],
           QuantumAlgebra`QuantumAlgebra`UDScript,
           BaseStyle->"RIndex"]],
         QuantumAlgebra`QuantumAlgebra`Ket,
         BaseStyle->"KetWrapper"]}], "\[CenterDot]", 
       RowBox[{
        TagBox[
         RowBox[{
          SubscriptBox["\[InvisiblePrefixScriptBase]", 
           TagBox[
            AdjustmentBox[
             TagBox["1",
              QuantumAlgebra`QuantumAlgebra`BraArgs,
              BaseStyle->"BraKetArg"],
             BoxBaselineShift->0],
            QuantumAlgebra`QuantumAlgebra`UDScript,
            BaseStyle->"LIndex"]], 
          RowBox[{"\[LeftAngleBracket]", 
           AdjustmentBox[
            TagBox["0",
             QuantumAlgebra`QuantumAlgebra`BraArgs,
             BaseStyle->"BraKetArg"],
            BoxBaselineShift->0], 
           AdjustmentBox["\[VerticalSeparator]",
            BoxBaselineShift->-0.1,
            BoxMargins->{{0, -0.2}, {0, 0}}]}]}],
         QuantumAlgebra`QuantumAlgebra`Bra,
         BaseStyle->"BraWrapper"], "\[CircleTimes]", 
        TagBox[
         RowBox[{
          SubscriptBox["\[InvisiblePrefixScriptBase]", 
           TagBox[
            AdjustmentBox[
             TagBox["3",
              QuantumAlgebra`QuantumAlgebra`BraArgs,
              BaseStyle->"BraKetArg"],
             BoxBaselineShift->0],
            QuantumAlgebra`QuantumAlgebra`UDScript,
            BaseStyle->"LIndex"]], 
          RowBox[{"\[LeftAngleBracket]", 
           AdjustmentBox[
            TagBox["0",
             QuantumAlgebra`QuantumAlgebra`BraArgs,
             BaseStyle->"BraKetArg"],
            BoxBaselineShift->0], 
           AdjustmentBox["\[VerticalSeparator]",
            BoxBaselineShift->-0.1,
            BoxMargins->{{0, -0.2}, {0, 0}}]}]}],
         QuantumAlgebra`QuantumAlgebra`Bra,
         BaseStyle->"BraWrapper"]}]}], "+", 
      RowBox[{
       RowBox[{
        TagBox[
         SubscriptBox[
          RowBox[{
           AdjustmentBox["\[VerticalSeparator]",
            BoxBaselineShift->-0.1,
            BoxMargins->{{-0.2, 0}, {0, 0}}], 
           AdjustmentBox[
            TagBox["1",
             QuantumAlgebra`QuantumAlgebra`KetArgs,
             BaseStyle->"BraKetArg"],
            BoxBaselineShift->0], "\[RightAngleBracket]"}], 
          TagBox[
           AdjustmentBox[
            TagBox["1",
             QuantumAlgebra`QuantumAlgebra`KetArgs,
             BaseStyle->"BraKetArg"],
            BoxBaselineShift->0],
           QuantumAlgebra`QuantumAlgebra`UDScript,
           BaseStyle->"RIndex"]],
         QuantumAlgebra`QuantumAlgebra`Ket,
         BaseStyle->"KetWrapper"], "\[CircleTimes]", 
        TagBox[
         SubscriptBox[
          RowBox[{
           AdjustmentBox["\[VerticalSeparator]",
            BoxBaselineShift->-0.1,
            BoxMargins->{{-0.2, 0}, {0, 0}}], 
           AdjustmentBox[
            TagBox["1",
             QuantumAlgebra`QuantumAlgebra`KetArgs,
             BaseStyle->"BraKetArg"],
            BoxBaselineShift->0], "\[RightAngleBracket]"}], 
          TagBox[
           AdjustmentBox[
            TagBox["3",
             QuantumAlgebra`QuantumAlgebra`KetArgs,
             BaseStyle->"BraKetArg"],
            BoxBaselineShift->0],
           QuantumAlgebra`QuantumAlgebra`UDScript,
           BaseStyle->"RIndex"]],
         QuantumAlgebra`QuantumAlgebra`Ket,
         BaseStyle->"KetWrapper"]}], "\[CenterDot]", 
       RowBox[{
        TagBox[
         RowBox[{
          SubscriptBox["\[InvisiblePrefixScriptBase]", 
           TagBox[
            AdjustmentBox[
             TagBox["1",
              QuantumAlgebra`QuantumAlgebra`BraArgs,
              BaseStyle->"BraKetArg"],
             BoxBaselineShift->0],
            QuantumAlgebra`QuantumAlgebra`UDScript,
            BaseStyle->"LIndex"]], 
          RowBox[{"\[LeftAngleBracket]", 
           AdjustmentBox[
            TagBox["1",
             QuantumAlgebra`QuantumAlgebra`BraArgs,
             BaseStyle->"BraKetArg"],
            BoxBaselineShift->0], 
           AdjustmentBox["\[VerticalSeparator]",
            BoxBaselineShift->-0.1,
            BoxMargins->{{0, -0.2}, {0, 0}}]}]}],
         QuantumAlgebra`QuantumAlgebra`Bra,
         BaseStyle->"BraWrapper"], "\[CircleTimes]", 
        TagBox[
         RowBox[{
          SubscriptBox["\[InvisiblePrefixScriptBase]", 
           TagBox[
            AdjustmentBox[
             TagBox["3",
              QuantumAlgebra`QuantumAlgebra`BraArgs,
              BaseStyle->"BraKetArg"],
             BoxBaselineShift->0],
            QuantumAlgebra`QuantumAlgebra`UDScript,
            BaseStyle->"LIndex"]], 
          RowBox[{"\[LeftAngleBracket]", 
           AdjustmentBox[
            TagBox["1",
             QuantumAlgebra`QuantumAlgebra`BraArgs,
             BaseStyle->"BraKetArg"],
            BoxBaselineShift->0], 
           AdjustmentBox["\[VerticalSeparator]",
            BoxBaselineShift->-0.1,
            BoxMargins->{{0, -0.2}, {0, 0}}]}]}],
         QuantumAlgebra`QuantumAlgebra`Bra,
         BaseStyle->"BraWrapper"]}]}]}]}]}], "}"}]}]], "Input",
 CellChangeTimes->{{3.4742396590988483`*^9, 3.4742396798750362`*^9}, 
   3.4742398426433463`*^9, {3.5944555703531556`*^9, 3.5944555829078736`*^9}}],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{
   RowBox[{
    OverscriptBox["\[ScriptCapitalA]", "^"], "\[Rule]", 
    RowBox[{
     RowBox[{
      RowBox[{
       TagBox[
        SubscriptBox[
         RowBox[{
          AdjustmentBox["\[VerticalSeparator]",
           BoxBaselineShift->-0.1,
           BoxMargins->{{-0.2, 0}, {0, 0}}], 
          AdjustmentBox[
           TagBox["0",
            QuantumAlgebra`QuantumAlgebra`KetArgs,
            BaseStyle->"BraKetArg"],
           BoxBaselineShift->0], "\[RightAngleBracket]"}], 
         TagBox[
          AdjustmentBox[
           TagBox["1",
            QuantumAlgebra`QuantumAlgebra`KetArgs,
            BaseStyle->"BraKetArg"],
           BoxBaselineShift->0],
          QuantumAlgebra`QuantumAlgebra`UDScript,
          BaseStyle->"RIndex"]],
        QuantumAlgebra`QuantumAlgebra`Ket,
        BaseStyle->"KetWrapper"], "\[CircleTimes]", 
       TagBox[
        SubscriptBox[
         RowBox[{
          AdjustmentBox["\[VerticalSeparator]",
           BoxBaselineShift->-0.1,
           BoxMargins->{{-0.2, 0}, {0, 0}}], 
          AdjustmentBox[
           TagBox["1",
            QuantumAlgebra`QuantumAlgebra`KetArgs,
            BaseStyle->"BraKetArg"],
           BoxBaselineShift->0], "\[RightAngleBracket]"}], 
         TagBox[
          AdjustmentBox[
           TagBox["2",
            QuantumAlgebra`QuantumAlgebra`KetArgs,
            BaseStyle->"BraKetArg"],
           BoxBaselineShift->0],
          QuantumAlgebra`QuantumAlgebra`UDScript,
          BaseStyle->"RIndex"]],
        QuantumAlgebra`QuantumAlgebra`Ket,
        BaseStyle->"KetWrapper"]}], "\[CenterDot]", 
      RowBox[{
       TagBox[
        RowBox[{
         SubscriptBox["\[InvisiblePrefixScriptBase]", 
          TagBox[
           AdjustmentBox[
            TagBox["2",
             QuantumAlgebra`QuantumAlgebra`BraArgs,
             BaseStyle->"BraKetArg"],
            BoxBaselineShift->0],
           QuantumAlgebra`QuantumAlgebra`UDScript,
           BaseStyle->"LIndex"]], 
         RowBox[{"\[LeftAngleBracket]", 
          AdjustmentBox[
           TagBox["0",
            QuantumAlgebra`QuantumAlgebra`BraArgs,
            BaseStyle->"BraKetArg"],
           BoxBaselineShift->0], 
          AdjustmentBox["\[VerticalSeparator]",
           BoxBaselineShift->-0.1,
           BoxMargins->{{0, -0.2}, {0, 0}}]}]}],
        QuantumAlgebra`QuantumAlgebra`Bra,
        BaseStyle->"BraWrapper"], "\[CircleTimes]", 
       TagBox[
        RowBox[{
         SubscriptBox["\[InvisiblePrefixScriptBase]", 
          TagBox[
           AdjustmentBox[
            TagBox["1",
             QuantumAlgebra`QuantumAlgebra`BraArgs,
             BaseStyle->"BraKetArg"],
            BoxBaselineShift->0],
           QuantumAlgebra`QuantumAlgebra`UDScript,
           BaseStyle->"LIndex"]], 
         RowBox[{"\[LeftAngleBracket]", 
          AdjustmentBox[
           TagBox["1",
            QuantumAlgebra`QuantumAlgebra`BraArgs,
            BaseStyle->"BraKetArg"],
           BoxBaselineShift->0], 
          AdjustmentBox["\[VerticalSeparator]",
           BoxBaselineShift->-0.1,
           BoxMargins->{{0, -0.2}, {0, 0}}]}]}],
        QuantumAlgebra`QuantumAlgebra`Bra,
        BaseStyle->"BraWrapper"]}]}], "+", 
     RowBox[{
      RowBox[{
       TagBox[
        SubscriptBox[
         RowBox[{
          AdjustmentBox["\[VerticalSeparator]",
           BoxBaselineShift->-0.1,
           BoxMargins->{{-0.2, 0}, {0, 0}}], 
          AdjustmentBox[
           TagBox["0",
            QuantumAlgebra`QuantumAlgebra`KetArgs,
            BaseStyle->"BraKetArg"],
           BoxBaselineShift->0], "\[RightAngleBracket]"}], 
         TagBox[
          AdjustmentBox[
           TagBox["2",
            QuantumAlgebra`QuantumAlgebra`KetArgs,
            BaseStyle->"BraKetArg"],
           BoxBaselineShift->0],
          QuantumAlgebra`QuantumAlgebra`UDScript,
          BaseStyle->"RIndex"]],
        QuantumAlgebra`QuantumAlgebra`Ket,
        BaseStyle->"KetWrapper"], "\[CircleTimes]", 
       TagBox[
        SubscriptBox[
         RowBox[{
          AdjustmentBox["\[VerticalSeparator]",
           BoxBaselineShift->-0.1,
           BoxMargins->{{-0.2, 0}, {0, 0}}], 
          AdjustmentBox[
           TagBox["1",
            QuantumAlgebra`QuantumAlgebra`KetArgs,
            BaseStyle->"BraKetArg"],
           BoxBaselineShift->0], "\[RightAngleBracket]"}], 
         TagBox[
          AdjustmentBox[
           TagBox["1",
            QuantumAlgebra`QuantumAlgebra`KetArgs,
            BaseStyle->"BraKetArg"],
           BoxBaselineShift->0],
          QuantumAlgebra`QuantumAlgebra`UDScript,
          BaseStyle->"RIndex"]],
        QuantumAlgebra`QuantumAlgebra`Ket,
        BaseStyle->"KetWrapper"]}], "\[CenterDot]", 
      RowBox[{
       TagBox[
        RowBox[{
         SubscriptBox["\[InvisiblePrefixScriptBase]", 
          TagBox[
           AdjustmentBox[
            TagBox["1",
             QuantumAlgebra`QuantumAlgebra`BraArgs,
             BaseStyle->"BraKetArg"],
            BoxBaselineShift->0],
           QuantumAlgebra`QuantumAlgebra`UDScript,
           BaseStyle->"LIndex"]], 
         RowBox[{"\[LeftAngleBracket]", 
          AdjustmentBox[
           TagBox["0",
            QuantumAlgebra`QuantumAlgebra`BraArgs,
            BaseStyle->"BraKetArg"],
           BoxBaselineShift->0], 
          AdjustmentBox["\[VerticalSeparator]",
           BoxBaselineShift->-0.1,
           BoxMargins->{{0, -0.2}, {0, 0}}]}]}],
        QuantumAlgebra`QuantumAlgebra`Bra,
        BaseStyle->"BraWrapper"], "\[CircleTimes]", 
       TagBox[
        RowBox[{
         SubscriptBox["\[InvisiblePrefixScriptBase]", 
          TagBox[
           AdjustmentBox[
            TagBox["2",
             QuantumAlgebra`QuantumAlgebra`BraArgs,
             BaseStyle->"BraKetArg"],
            BoxBaselineShift->0],
           QuantumAlgebra`QuantumAlgebra`UDScript,
           BaseStyle->"LIndex"]], 
         RowBox[{"\[LeftAngleBracket]", 
          AdjustmentBox[
           TagBox["1",
            QuantumAlgebra`QuantumAlgebra`BraArgs,
            BaseStyle->"BraKetArg"],
           BoxBaselineShift->0], 
          AdjustmentBox["\[VerticalSeparator]",
           BoxBaselineShift->-0.1,
           BoxMargins->{{0, -0.2}, {0, 0}}]}]}],
        QuantumAlgebra`QuantumAlgebra`Bra,
        BaseStyle->"BraWrapper"]}]}]}]}], ",", 
   RowBox[{
    OverscriptBox["\[ScriptCapitalB]", "^"], "\[Rule]", 
    RowBox[{
     RowBox[{
      RowBox[{
       TagBox[
        SubscriptBox[
         RowBox[{
          AdjustmentBox["\[VerticalSeparator]",
           BoxBaselineShift->-0.1,
           BoxMargins->{{-0.2, 0}, {0, 0}}], 
          AdjustmentBox[
           TagBox["0",
            QuantumAlgebra`QuantumAlgebra`KetArgs,
            BaseStyle->"BraKetArg"],
           BoxBaselineShift->0], "\[RightAngleBracket]"}], 
         TagBox[
          AdjustmentBox[
           TagBox["1",
            QuantumAlgebra`QuantumAlgebra`KetArgs,
            BaseStyle->"BraKetArg"],
           BoxBaselineShift->0],
          QuantumAlgebra`QuantumAlgebra`UDScript,
          BaseStyle->"RIndex"]],
        QuantumAlgebra`QuantumAlgebra`Ket,
        BaseStyle->"KetWrapper"], "\[CircleTimes]", 
       TagBox[
        SubscriptBox[
         RowBox[{
          AdjustmentBox["\[VerticalSeparator]",
           BoxBaselineShift->-0.1,
           BoxMargins->{{-0.2, 0}, {0, 0}}], 
          AdjustmentBox[
           TagBox["0",
            QuantumAlgebra`QuantumAlgebra`KetArgs,
            BaseStyle->"BraKetArg"],
           BoxBaselineShift->0], "\[RightAngleBracket]"}], 
         TagBox[
          AdjustmentBox[
           TagBox["3",
            QuantumAlgebra`QuantumAlgebra`KetArgs,
            BaseStyle->"BraKetArg"],
           BoxBaselineShift->0],
          QuantumAlgebra`QuantumAlgebra`UDScript,
          BaseStyle->"RIndex"]],
        QuantumAlgebra`QuantumAlgebra`Ket,
        BaseStyle->"KetWrapper"]}], "\[CenterDot]", 
      RowBox[{
       TagBox[
        RowBox[{
         SubscriptBox["\[InvisiblePrefixScriptBase]", 
          TagBox[
           AdjustmentBox[
            TagBox["1",
             QuantumAlgebra`QuantumAlgebra`BraArgs,
             BaseStyle->"BraKetArg"],
            BoxBaselineShift->0],
           QuantumAlgebra`QuantumAlgebra`UDScript,
           BaseStyle->"LIndex"]], 
         RowBox[{"\[LeftAngleBracket]", 
          AdjustmentBox[
           TagBox["0",
            QuantumAlgebra`QuantumAlgebra`BraArgs,
            BaseStyle->"BraKetArg"],
           BoxBaselineShift->0], 
          AdjustmentBox["\[VerticalSeparator]",
           BoxBaselineShift->-0.1,
           BoxMargins->{{0, -0.2}, {0, 0}}]}]}],
        QuantumAlgebra`QuantumAlgebra`Bra,
        BaseStyle->"BraWrapper"], "\[CircleTimes]", 
       TagBox[
        RowBox[{
         SubscriptBox["\[InvisiblePrefixScriptBase]", 
          TagBox[
           AdjustmentBox[
            TagBox["3",
             QuantumAlgebra`QuantumAlgebra`BraArgs,
             BaseStyle->"BraKetArg"],
            BoxBaselineShift->0],
           QuantumAlgebra`QuantumAlgebra`UDScript,
           BaseStyle->"LIndex"]], 
         RowBox[{"\[LeftAngleBracket]", 
          AdjustmentBox[
           TagBox["0",
            QuantumAlgebra`QuantumAlgebra`BraArgs,
            BaseStyle->"BraKetArg"],
           BoxBaselineShift->0], 
          AdjustmentBox["\[VerticalSeparator]",
           BoxBaselineShift->-0.1,
           BoxMargins->{{0, -0.2}, {0, 0}}]}]}],
        QuantumAlgebra`QuantumAlgebra`Bra,
        BaseStyle->"BraWrapper"]}]}], "+", 
     RowBox[{
      RowBox[{
       TagBox[
        SubscriptBox[
         RowBox[{
          AdjustmentBox["\[VerticalSeparator]",
           BoxBaselineShift->-0.1,
           BoxMargins->{{-0.2, 0}, {0, 0}}], 
          AdjustmentBox[
           TagBox["1",
            QuantumAlgebra`QuantumAlgebra`KetArgs,
            BaseStyle->"BraKetArg"],
           BoxBaselineShift->0], "\[RightAngleBracket]"}], 
         TagBox[
          AdjustmentBox[
           TagBox["1",
            QuantumAlgebra`QuantumAlgebra`KetArgs,
            BaseStyle->"BraKetArg"],
           BoxBaselineShift->0],
          QuantumAlgebra`QuantumAlgebra`UDScript,
          BaseStyle->"RIndex"]],
        QuantumAlgebra`QuantumAlgebra`Ket,
        BaseStyle->"KetWrapper"], "\[CircleTimes]", 
       TagBox[
        SubscriptBox[
         RowBox[{
          AdjustmentBox["\[VerticalSeparator]",
           BoxBaselineShift->-0.1,
           BoxMargins->{{-0.2, 0}, {0, 0}}], 
          AdjustmentBox[
           TagBox["1",
            QuantumAlgebra`QuantumAlgebra`KetArgs,
            BaseStyle->"BraKetArg"],
           BoxBaselineShift->0], "\[RightAngleBracket]"}], 
         TagBox[
          AdjustmentBox[
           TagBox["3",
            QuantumAlgebra`QuantumAlgebra`KetArgs,
            BaseStyle->"BraKetArg"],
           BoxBaselineShift->0],
          QuantumAlgebra`QuantumAlgebra`UDScript,
          BaseStyle->"RIndex"]],
        QuantumAlgebra`QuantumAlgebra`Ket,
        BaseStyle->"KetWrapper"]}], "\[CenterDot]", 
      RowBox[{
       TagBox[
        RowBox[{
         SubscriptBox["\[InvisiblePrefixScriptBase]", 
          TagBox[
           AdjustmentBox[
            TagBox["1",
             QuantumAlgebra`QuantumAlgebra`BraArgs,
             BaseStyle->"BraKetArg"],
            BoxBaselineShift->0],
           QuantumAlgebra`QuantumAlgebra`UDScript,
           BaseStyle->"LIndex"]], 
         RowBox[{"\[LeftAngleBracket]", 
          AdjustmentBox[
           TagBox["1",
            QuantumAlgebra`QuantumAlgebra`BraArgs,
            BaseStyle->"BraKetArg"],
           BoxBaselineShift->0], 
          AdjustmentBox["\[VerticalSeparator]",
           BoxBaselineShift->-0.1,
           BoxMargins->{{0, -0.2}, {0, 0}}]}]}],
        QuantumAlgebra`QuantumAlgebra`Bra,
        BaseStyle->"BraWrapper"], "\[CircleTimes]", 
       TagBox[
        RowBox[{
         SubscriptBox["\[InvisiblePrefixScriptBase]", 
          TagBox[
           AdjustmentBox[
            TagBox["3",
             QuantumAlgebra`QuantumAlgebra`BraArgs,
             BaseStyle->"BraKetArg"],
            BoxBaselineShift->0],
           QuantumAlgebra`QuantumAlgebra`UDScript,
           BaseStyle->"LIndex"]], 
         RowBox[{"\[LeftAngleBracket]", 
          AdjustmentBox[
           TagBox["1",
            QuantumAlgebra`QuantumAlgebra`BraArgs,
            BaseStyle->"BraKetArg"],
           BoxBaselineShift->0], 
          AdjustmentBox["\[VerticalSeparator]",
           BoxBaselineShift->-0.1,
           BoxMargins->{{0, -0.2}, {0, 0}}]}]}],
        QuantumAlgebra`QuantumAlgebra`Bra,
        BaseStyle->"BraWrapper"]}]}]}]}]}], "}"}]], "Output",
 CellChangeTimes->{3.474239843543398*^9, 3.5944555857690372`*^9}]
}, Open  ]],

Cell[TextData[{
 "The operator ",
 Cell[BoxData[
  FormBox[
   OverscriptBox["\[ScriptCapitalA]", "^"], TraditionalForm]]],
 " live in the state space ",
 Cell[BoxData[
  FormBox[
   RowBox[{
    SubscriptBox["\[ScriptCapitalE]", "1"], "\[CircleTimes]", 
    SubscriptBox["\[ScriptCapitalE]", "2"]}], TraditionalForm]]],
 " while the operator ",
 Cell[BoxData[
  FormBox[
   OverscriptBox["\[ScriptCapitalB]", "^"], TraditionalForm]]],
 " lives in the state space ",
 Cell[BoxData[
  FormBox[
   RowBox[{
    SubscriptBox["\[ScriptCapitalE]", "1"], "\[CircleTimes]", 
    SubscriptBox["\[ScriptCapitalE]", "3"]}], TraditionalForm]]],
 ". The product of both operators live in the state space ",
 Cell[BoxData[
  FormBox["\[ScriptCapitalE]", TraditionalForm]]],
 ". The expectation value is:"
}], "Text",
 CellChangeTimes->{{3.5944556396961217`*^9, 3.5944556714399376`*^9}}],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"\[ScriptCapitalE]", "=", 
  RowBox[{
   RowBox[{
    TagBox[
     RowBox[{"\[LeftAngleBracket]", 
      AdjustmentBox[
       TagBox["\[Psi]",
        QuantumAlgebra`QuantumAlgebra`BraArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], 
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{0, -0.2}, {0, 0}}]}],
     QuantumAlgebra`QuantumAlgebra`Bra,
     BaseStyle->"BraWrapper"], "\[CenterDot]", 
    OverscriptBox["\[ScriptCapitalA]", "^"], "\[CenterDot]", 
    OverscriptBox["\[ScriptCapitalB]", "^"], "\[CenterDot]", 
    TagBox[
     RowBox[{
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{-0.2, 0}, {0, 0}}], 
      AdjustmentBox[
       TagBox["\[Psi]",
        QuantumAlgebra`QuantumAlgebra`KetArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], "\[RightAngleBracket]"}],
     QuantumAlgebra`QuantumAlgebra`Ket,
     BaseStyle->"KetWrapper"]}], "/.", "ABRules"}]}]], "Input",
 CellChangeTimes->{{3.4441681874972*^9, 3.4441682744642*^9}, {
   3.4441687987682*^9, 3.4441688077402*^9}, {3.4441692018132*^9, 
   3.4441692133972*^9}, {3.4442192315175486`*^9, 3.4442194626785483`*^9}, {
   3.4442195677505484`*^9, 3.4442196113435483`*^9}, {3.444220468542548*^9, 
   3.4442205130575485`*^9}, 3.444221872537548*^9, {3.444233069836*^9, 
   3.444233070216*^9}, {3.4443106527130003`*^9, 3.4443106545150003`*^9}, {
   3.444310717936*^9, 3.4443107183450003`*^9}, {3.4742396720805907`*^9, 
   3.4742396875834775`*^9}, {3.474239796235692*^9, 3.4742398138136973`*^9}, 
   3.5944556048581295`*^9}],

Cell[BoxData[
 RowBox[{
  RowBox[{
   TagBox[
    RowBox[{
     SubscriptBox["\[InvisiblePrefixScriptBase]", 
      TagBox[
       AdjustmentBox[
        TagBox["1",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"LIndex"]], 
     SubscriptBox[
      RowBox[{"\[LeftAngleBracket]", 
       AdjustmentBox[
        RowBox[{
         TagBox["1",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
         TagBox["0",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"]}],
        BoxBaselineShift->0], "\[RightAngleBracket]"}], 
      TagBox[
       AdjustmentBox[
        TagBox["1",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"RIndex"]]}],
    QuantumAlgebra`QuantumAlgebra`Braket,
    BaseStyle->"BraKetWrapper"], " ", 
   RowBox[{
    TagBox[
     RowBox[{"\[LeftAngleBracket]", 
      AdjustmentBox[
       TagBox["\[Psi]",
        QuantumAlgebra`QuantumAlgebra`BraArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], 
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{0, -0.2}, {0, 0}}]}],
     QuantumAlgebra`QuantumAlgebra`Bra,
     BaseStyle->"BraWrapper"], "\[CenterDot]", 
    RowBox[{
     TagBox[
      SubscriptBox[
       RowBox[{
        AdjustmentBox["\[VerticalSeparator]",
         BoxBaselineShift->-0.1,
         BoxMargins->{{-0.2, 0}, {0, 0}}], 
        AdjustmentBox[
         TagBox["0",
          QuantumAlgebra`QuantumAlgebra`KetArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0], "\[RightAngleBracket]"}], 
       TagBox[
        AdjustmentBox[
         TagBox["1",
          QuantumAlgebra`QuantumAlgebra`KetArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0],
        QuantumAlgebra`QuantumAlgebra`UDScript,
        BaseStyle->"RIndex"]],
      QuantumAlgebra`QuantumAlgebra`Ket,
      BaseStyle->"KetWrapper"], "\[CircleTimes]", 
     TagBox[
      SubscriptBox[
       RowBox[{
        AdjustmentBox["\[VerticalSeparator]",
         BoxBaselineShift->-0.1,
         BoxMargins->{{-0.2, 0}, {0, 0}}], 
        AdjustmentBox[
         TagBox["0",
          QuantumAlgebra`QuantumAlgebra`KetArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0], "\[RightAngleBracket]"}], 
       TagBox[
        AdjustmentBox[
         TagBox["3",
          QuantumAlgebra`QuantumAlgebra`KetArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0],
        QuantumAlgebra`QuantumAlgebra`UDScript,
        BaseStyle->"RIndex"]],
      QuantumAlgebra`QuantumAlgebra`Ket,
      BaseStyle->"KetWrapper"], "\[CircleTimes]", 
     TagBox[
      SubscriptBox[
       RowBox[{
        AdjustmentBox["\[VerticalSeparator]",
         BoxBaselineShift->-0.1,
         BoxMargins->{{-0.2, 0}, {0, 0}}], 
        AdjustmentBox[
         TagBox["1",
          QuantumAlgebra`QuantumAlgebra`KetArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0], "\[RightAngleBracket]"}], 
       TagBox[
        AdjustmentBox[
         TagBox["2",
          QuantumAlgebra`QuantumAlgebra`KetArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0],
        QuantumAlgebra`QuantumAlgebra`UDScript,
        BaseStyle->"RIndex"]],
      QuantumAlgebra`QuantumAlgebra`Ket,
      BaseStyle->"KetWrapper"]}], "\[CenterDot]", 
    RowBox[{
     TagBox[
      RowBox[{
       SubscriptBox["\[InvisiblePrefixScriptBase]", 
        TagBox[
         AdjustmentBox[
          TagBox["1",
           QuantumAlgebra`QuantumAlgebra`BraArgs,
           BaseStyle->"BraKetArg"],
          BoxBaselineShift->0],
         QuantumAlgebra`QuantumAlgebra`UDScript,
         BaseStyle->"LIndex"]], 
       RowBox[{"\[LeftAngleBracket]", 
        AdjustmentBox[
         TagBox["0",
          QuantumAlgebra`QuantumAlgebra`BraArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0], 
        AdjustmentBox["\[VerticalSeparator]",
         BoxBaselineShift->-0.1,
         BoxMargins->{{0, -0.2}, {0, 0}}]}]}],
      QuantumAlgebra`QuantumAlgebra`Bra,
      BaseStyle->"BraWrapper"], "\[CircleTimes]", 
     TagBox[
      RowBox[{
       SubscriptBox["\[InvisiblePrefixScriptBase]", 
        TagBox[
         AdjustmentBox[
          TagBox["2",
           QuantumAlgebra`QuantumAlgebra`BraArgs,
           BaseStyle->"BraKetArg"],
          BoxBaselineShift->0],
         QuantumAlgebra`QuantumAlgebra`UDScript,
         BaseStyle->"LIndex"]], 
       RowBox[{"\[LeftAngleBracket]", 
        AdjustmentBox[
         TagBox["0",
          QuantumAlgebra`QuantumAlgebra`BraArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0], 
        AdjustmentBox["\[VerticalSeparator]",
         BoxBaselineShift->-0.1,
         BoxMargins->{{0, -0.2}, {0, 0}}]}]}],
      QuantumAlgebra`QuantumAlgebra`Bra,
      BaseStyle->"BraWrapper"], "\[CircleTimes]", 
     TagBox[
      RowBox[{
       SubscriptBox["\[InvisiblePrefixScriptBase]", 
        TagBox[
         AdjustmentBox[
          TagBox["3",
           QuantumAlgebra`QuantumAlgebra`BraArgs,
           BaseStyle->"BraKetArg"],
          BoxBaselineShift->0],
         QuantumAlgebra`QuantumAlgebra`UDScript,
         BaseStyle->"LIndex"]], 
       RowBox[{"\[LeftAngleBracket]", 
        AdjustmentBox[
         TagBox["0",
          QuantumAlgebra`QuantumAlgebra`BraArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0], 
        AdjustmentBox["\[VerticalSeparator]",
         BoxBaselineShift->-0.1,
         BoxMargins->{{0, -0.2}, {0, 0}}]}]}],
      QuantumAlgebra`QuantumAlgebra`Bra,
      BaseStyle->"BraWrapper"]}], "\[CenterDot]", 
    TagBox[
     RowBox[{
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{-0.2, 0}, {0, 0}}], 
      AdjustmentBox[
       TagBox["\[Psi]",
        QuantumAlgebra`QuantumAlgebra`KetArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], "\[RightAngleBracket]"}],
     QuantumAlgebra`QuantumAlgebra`Ket,
     BaseStyle->"KetWrapper"]}]}], "+", 
  RowBox[{
   TagBox[
    RowBox[{
     SubscriptBox["\[InvisiblePrefixScriptBase]", 
      TagBox[
       AdjustmentBox[
        TagBox["1",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"LIndex"]], 
     SubscriptBox[
      RowBox[{"\[LeftAngleBracket]", 
       AdjustmentBox[
        RowBox[{
         TagBox["1",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
         TagBox["1",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"]}],
        BoxBaselineShift->0], "\[RightAngleBracket]"}], 
      TagBox[
       AdjustmentBox[
        TagBox["1",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"RIndex"]]}],
    QuantumAlgebra`QuantumAlgebra`Braket,
    BaseStyle->"BraKetWrapper"], " ", 
   RowBox[{
    TagBox[
     RowBox[{"\[LeftAngleBracket]", 
      AdjustmentBox[
       TagBox["\[Psi]",
        QuantumAlgebra`QuantumAlgebra`BraArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], 
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{0, -0.2}, {0, 0}}]}],
     QuantumAlgebra`QuantumAlgebra`Bra,
     BaseStyle->"BraWrapper"], "\[CenterDot]", 
    RowBox[{
     TagBox[
      SubscriptBox[
       RowBox[{
        AdjustmentBox["\[VerticalSeparator]",
         BoxBaselineShift->-0.1,
         BoxMargins->{{-0.2, 0}, {0, 0}}], 
        AdjustmentBox[
         TagBox["0",
          QuantumAlgebra`QuantumAlgebra`KetArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0], "\[RightAngleBracket]"}], 
       TagBox[
        AdjustmentBox[
         TagBox["1",
          QuantumAlgebra`QuantumAlgebra`KetArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0],
        QuantumAlgebra`QuantumAlgebra`UDScript,
        BaseStyle->"RIndex"]],
      QuantumAlgebra`QuantumAlgebra`Ket,
      BaseStyle->"KetWrapper"], "\[CircleTimes]", 
     TagBox[
      SubscriptBox[
       RowBox[{
        AdjustmentBox["\[VerticalSeparator]",
         BoxBaselineShift->-0.1,
         BoxMargins->{{-0.2, 0}, {0, 0}}], 
        AdjustmentBox[
         TagBox["1",
          QuantumAlgebra`QuantumAlgebra`KetArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0], "\[RightAngleBracket]"}], 
       TagBox[
        AdjustmentBox[
         TagBox["2",
          QuantumAlgebra`QuantumAlgebra`KetArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0],
        QuantumAlgebra`QuantumAlgebra`UDScript,
        BaseStyle->"RIndex"]],
      QuantumAlgebra`QuantumAlgebra`Ket,
      BaseStyle->"KetWrapper"], "\[CircleTimes]", 
     TagBox[
      SubscriptBox[
       RowBox[{
        AdjustmentBox["\[VerticalSeparator]",
         BoxBaselineShift->-0.1,
         BoxMargins->{{-0.2, 0}, {0, 0}}], 
        AdjustmentBox[
         TagBox["1",
          QuantumAlgebra`QuantumAlgebra`KetArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0], "\[RightAngleBracket]"}], 
       TagBox[
        AdjustmentBox[
         TagBox["3",
          QuantumAlgebra`QuantumAlgebra`KetArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0],
        QuantumAlgebra`QuantumAlgebra`UDScript,
        BaseStyle->"RIndex"]],
      QuantumAlgebra`QuantumAlgebra`Ket,
      BaseStyle->"KetWrapper"]}], "\[CenterDot]", 
    RowBox[{
     TagBox[
      RowBox[{
       SubscriptBox["\[InvisiblePrefixScriptBase]", 
        TagBox[
         AdjustmentBox[
          TagBox["2",
           QuantumAlgebra`QuantumAlgebra`BraArgs,
           BaseStyle->"BraKetArg"],
          BoxBaselineShift->0],
         QuantumAlgebra`QuantumAlgebra`UDScript,
         BaseStyle->"LIndex"]], 
       RowBox[{"\[LeftAngleBracket]", 
        AdjustmentBox[
         TagBox["0",
          QuantumAlgebra`QuantumAlgebra`BraArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0], 
        AdjustmentBox["\[VerticalSeparator]",
         BoxBaselineShift->-0.1,
         BoxMargins->{{0, -0.2}, {0, 0}}]}]}],
      QuantumAlgebra`QuantumAlgebra`Bra,
      BaseStyle->"BraWrapper"], "\[CircleTimes]", 
     TagBox[
      RowBox[{
       SubscriptBox["\[InvisiblePrefixScriptBase]", 
        TagBox[
         AdjustmentBox[
          TagBox["1",
           QuantumAlgebra`QuantumAlgebra`BraArgs,
           BaseStyle->"BraKetArg"],
          BoxBaselineShift->0],
         QuantumAlgebra`QuantumAlgebra`UDScript,
         BaseStyle->"LIndex"]], 
       RowBox[{"\[LeftAngleBracket]", 
        AdjustmentBox[
         TagBox["1",
          QuantumAlgebra`QuantumAlgebra`BraArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0], 
        AdjustmentBox["\[VerticalSeparator]",
         BoxBaselineShift->-0.1,
         BoxMargins->{{0, -0.2}, {0, 0}}]}]}],
      QuantumAlgebra`QuantumAlgebra`Bra,
      BaseStyle->"BraWrapper"], "\[CircleTimes]", 
     TagBox[
      RowBox[{
       SubscriptBox["\[InvisiblePrefixScriptBase]", 
        TagBox[
         AdjustmentBox[
          TagBox["3",
           QuantumAlgebra`QuantumAlgebra`BraArgs,
           BaseStyle->"BraKetArg"],
          BoxBaselineShift->0],
         QuantumAlgebra`QuantumAlgebra`UDScript,
         BaseStyle->"LIndex"]], 
       RowBox[{"\[LeftAngleBracket]", 
        AdjustmentBox[
         TagBox["1",
          QuantumAlgebra`QuantumAlgebra`BraArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0], 
        AdjustmentBox["\[VerticalSeparator]",
         BoxBaselineShift->-0.1,
         BoxMargins->{{0, -0.2}, {0, 0}}]}]}],
      QuantumAlgebra`QuantumAlgebra`Bra,
      BaseStyle->"BraWrapper"]}], "\[CenterDot]", 
    TagBox[
     RowBox[{
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{-0.2, 0}, {0, 0}}], 
      AdjustmentBox[
       TagBox["\[Psi]",
        QuantumAlgebra`QuantumAlgebra`KetArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], "\[RightAngleBracket]"}],
     QuantumAlgebra`QuantumAlgebra`Ket,
     BaseStyle->"KetWrapper"]}]}], "+", 
  RowBox[{
   TagBox[
    RowBox[{
     SubscriptBox["\[InvisiblePrefixScriptBase]", 
      TagBox[
       AdjustmentBox[
        TagBox["1",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"LIndex"]], 
     SubscriptBox[
      RowBox[{"\[LeftAngleBracket]", 
       AdjustmentBox[
        RowBox[{
         TagBox["0",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
         TagBox["0",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"]}],
        BoxBaselineShift->0], "\[RightAngleBracket]"}], 
      TagBox[
       AdjustmentBox[
        TagBox["1",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"RIndex"]]}],
    QuantumAlgebra`QuantumAlgebra`Braket,
    BaseStyle->"BraKetWrapper"], " ", 
   RowBox[{
    TagBox[
     RowBox[{"\[LeftAngleBracket]", 
      AdjustmentBox[
       TagBox["\[Psi]",
        QuantumAlgebra`QuantumAlgebra`BraArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], 
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{0, -0.2}, {0, 0}}]}],
     QuantumAlgebra`QuantumAlgebra`Bra,
     BaseStyle->"BraWrapper"], "\[CenterDot]", 
    RowBox[{
     TagBox[
      SubscriptBox[
       RowBox[{
        AdjustmentBox["\[VerticalSeparator]",
         BoxBaselineShift->-0.1,
         BoxMargins->{{-0.2, 0}, {0, 0}}], 
        AdjustmentBox[
         TagBox["0",
          QuantumAlgebra`QuantumAlgebra`KetArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0], "\[RightAngleBracket]"}], 
       TagBox[
        AdjustmentBox[
         TagBox["2",
          QuantumAlgebra`QuantumAlgebra`KetArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0],
        QuantumAlgebra`QuantumAlgebra`UDScript,
        BaseStyle->"RIndex"]],
      QuantumAlgebra`QuantumAlgebra`Ket,
      BaseStyle->"KetWrapper"], "\[CircleTimes]", 
     TagBox[
      SubscriptBox[
       RowBox[{
        AdjustmentBox["\[VerticalSeparator]",
         BoxBaselineShift->-0.1,
         BoxMargins->{{-0.2, 0}, {0, 0}}], 
        AdjustmentBox[
         TagBox["0",
          QuantumAlgebra`QuantumAlgebra`KetArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0], "\[RightAngleBracket]"}], 
       TagBox[
        AdjustmentBox[
         TagBox["3",
          QuantumAlgebra`QuantumAlgebra`KetArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0],
        QuantumAlgebra`QuantumAlgebra`UDScript,
        BaseStyle->"RIndex"]],
      QuantumAlgebra`QuantumAlgebra`Ket,
      BaseStyle->"KetWrapper"], "\[CircleTimes]", 
     TagBox[
      SubscriptBox[
       RowBox[{
        AdjustmentBox["\[VerticalSeparator]",
         BoxBaselineShift->-0.1,
         BoxMargins->{{-0.2, 0}, {0, 0}}], 
        AdjustmentBox[
         TagBox["1",
          QuantumAlgebra`QuantumAlgebra`KetArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0], "\[RightAngleBracket]"}], 
       TagBox[
        AdjustmentBox[
         TagBox["1",
          QuantumAlgebra`QuantumAlgebra`KetArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0],
        QuantumAlgebra`QuantumAlgebra`UDScript,
        BaseStyle->"RIndex"]],
      QuantumAlgebra`QuantumAlgebra`Ket,
      BaseStyle->"KetWrapper"]}], "\[CenterDot]", 
    RowBox[{
     TagBox[
      RowBox[{
       SubscriptBox["\[InvisiblePrefixScriptBase]", 
        TagBox[
         AdjustmentBox[
          TagBox["1",
           QuantumAlgebra`QuantumAlgebra`BraArgs,
           BaseStyle->"BraKetArg"],
          BoxBaselineShift->0],
         QuantumAlgebra`QuantumAlgebra`UDScript,
         BaseStyle->"LIndex"]], 
       RowBox[{"\[LeftAngleBracket]", 
        AdjustmentBox[
         TagBox["0",
          QuantumAlgebra`QuantumAlgebra`BraArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0], 
        AdjustmentBox["\[VerticalSeparator]",
         BoxBaselineShift->-0.1,
         BoxMargins->{{0, -0.2}, {0, 0}}]}]}],
      QuantumAlgebra`QuantumAlgebra`Bra,
      BaseStyle->"BraWrapper"], "\[CircleTimes]", 
     TagBox[
      RowBox[{
       SubscriptBox["\[InvisiblePrefixScriptBase]", 
        TagBox[
         AdjustmentBox[
          TagBox["3",
           QuantumAlgebra`QuantumAlgebra`BraArgs,
           BaseStyle->"BraKetArg"],
          BoxBaselineShift->0],
         QuantumAlgebra`QuantumAlgebra`UDScript,
         BaseStyle->"LIndex"]], 
       RowBox[{"\[LeftAngleBracket]", 
        AdjustmentBox[
         TagBox["0",
          QuantumAlgebra`QuantumAlgebra`BraArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0], 
        AdjustmentBox["\[VerticalSeparator]",
         BoxBaselineShift->-0.1,
         BoxMargins->{{0, -0.2}, {0, 0}}]}]}],
      QuantumAlgebra`QuantumAlgebra`Bra,
      BaseStyle->"BraWrapper"], "\[CircleTimes]", 
     TagBox[
      RowBox[{
       SubscriptBox["\[InvisiblePrefixScriptBase]", 
        TagBox[
         AdjustmentBox[
          TagBox["2",
           QuantumAlgebra`QuantumAlgebra`BraArgs,
           BaseStyle->"BraKetArg"],
          BoxBaselineShift->0],
         QuantumAlgebra`QuantumAlgebra`UDScript,
         BaseStyle->"LIndex"]], 
       RowBox[{"\[LeftAngleBracket]", 
        AdjustmentBox[
         TagBox["1",
          QuantumAlgebra`QuantumAlgebra`BraArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0], 
        AdjustmentBox["\[VerticalSeparator]",
         BoxBaselineShift->-0.1,
         BoxMargins->{{0, -0.2}, {0, 0}}]}]}],
      QuantumAlgebra`QuantumAlgebra`Bra,
      BaseStyle->"BraWrapper"]}], "\[CenterDot]", 
    TagBox[
     RowBox[{
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{-0.2, 0}, {0, 0}}], 
      AdjustmentBox[
       TagBox["\[Psi]",
        QuantumAlgebra`QuantumAlgebra`KetArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], "\[RightAngleBracket]"}],
     QuantumAlgebra`QuantumAlgebra`Ket,
     BaseStyle->"KetWrapper"]}]}], "+", 
  RowBox[{
   TagBox[
    RowBox[{
     SubscriptBox["\[InvisiblePrefixScriptBase]", 
      TagBox[
       AdjustmentBox[
        TagBox["1",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"LIndex"]], 
     SubscriptBox[
      RowBox[{"\[LeftAngleBracket]", 
       AdjustmentBox[
        RowBox[{
         TagBox["0",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
         TagBox["1",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"]}],
        BoxBaselineShift->0], "\[RightAngleBracket]"}], 
      TagBox[
       AdjustmentBox[
        TagBox["1",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"RIndex"]]}],
    QuantumAlgebra`QuantumAlgebra`Braket,
    BaseStyle->"BraKetWrapper"], " ", 
   RowBox[{
    TagBox[
     RowBox[{"\[LeftAngleBracket]", 
      AdjustmentBox[
       TagBox["\[Psi]",
        QuantumAlgebra`QuantumAlgebra`BraArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], 
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{0, -0.2}, {0, 0}}]}],
     QuantumAlgebra`QuantumAlgebra`Bra,
     BaseStyle->"BraWrapper"], "\[CenterDot]", 
    RowBox[{
     TagBox[
      SubscriptBox[
       RowBox[{
        AdjustmentBox["\[VerticalSeparator]",
         BoxBaselineShift->-0.1,
         BoxMargins->{{-0.2, 0}, {0, 0}}], 
        AdjustmentBox[
         TagBox["0",
          QuantumAlgebra`QuantumAlgebra`KetArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0], "\[RightAngleBracket]"}], 
       TagBox[
        AdjustmentBox[
         TagBox["2",
          QuantumAlgebra`QuantumAlgebra`KetArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0],
        QuantumAlgebra`QuantumAlgebra`UDScript,
        BaseStyle->"RIndex"]],
      QuantumAlgebra`QuantumAlgebra`Ket,
      BaseStyle->"KetWrapper"], "\[CircleTimes]", 
     TagBox[
      SubscriptBox[
       RowBox[{
        AdjustmentBox["\[VerticalSeparator]",
         BoxBaselineShift->-0.1,
         BoxMargins->{{-0.2, 0}, {0, 0}}], 
        AdjustmentBox[
         TagBox["1",
          QuantumAlgebra`QuantumAlgebra`KetArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0], "\[RightAngleBracket]"}], 
       TagBox[
        AdjustmentBox[
         TagBox["1",
          QuantumAlgebra`QuantumAlgebra`KetArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0],
        QuantumAlgebra`QuantumAlgebra`UDScript,
        BaseStyle->"RIndex"]],
      QuantumAlgebra`QuantumAlgebra`Ket,
      BaseStyle->"KetWrapper"], "\[CircleTimes]", 
     TagBox[
      SubscriptBox[
       RowBox[{
        AdjustmentBox["\[VerticalSeparator]",
         BoxBaselineShift->-0.1,
         BoxMargins->{{-0.2, 0}, {0, 0}}], 
        AdjustmentBox[
         TagBox["1",
          QuantumAlgebra`QuantumAlgebra`KetArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0], "\[RightAngleBracket]"}], 
       TagBox[
        AdjustmentBox[
         TagBox["3",
          QuantumAlgebra`QuantumAlgebra`KetArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0],
        QuantumAlgebra`QuantumAlgebra`UDScript,
        BaseStyle->"RIndex"]],
      QuantumAlgebra`QuantumAlgebra`Ket,
      BaseStyle->"KetWrapper"]}], "\[CenterDot]", 
    RowBox[{
     TagBox[
      RowBox[{
       SubscriptBox["\[InvisiblePrefixScriptBase]", 
        TagBox[
         AdjustmentBox[
          TagBox["1",
           QuantumAlgebra`QuantumAlgebra`BraArgs,
           BaseStyle->"BraKetArg"],
          BoxBaselineShift->0],
         QuantumAlgebra`QuantumAlgebra`UDScript,
         BaseStyle->"LIndex"]], 
       RowBox[{"\[LeftAngleBracket]", 
        AdjustmentBox[
         TagBox["1",
          QuantumAlgebra`QuantumAlgebra`BraArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0], 
        AdjustmentBox["\[VerticalSeparator]",
         BoxBaselineShift->-0.1,
         BoxMargins->{{0, -0.2}, {0, 0}}]}]}],
      QuantumAlgebra`QuantumAlgebra`Bra,
      BaseStyle->"BraWrapper"], "\[CircleTimes]", 
     TagBox[
      RowBox[{
       SubscriptBox["\[InvisiblePrefixScriptBase]", 
        TagBox[
         AdjustmentBox[
          TagBox["2",
           QuantumAlgebra`QuantumAlgebra`BraArgs,
           BaseStyle->"BraKetArg"],
          BoxBaselineShift->0],
         QuantumAlgebra`QuantumAlgebra`UDScript,
         BaseStyle->"LIndex"]], 
       RowBox[{"\[LeftAngleBracket]", 
        AdjustmentBox[
         TagBox["1",
          QuantumAlgebra`QuantumAlgebra`BraArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0], 
        AdjustmentBox["\[VerticalSeparator]",
         BoxBaselineShift->-0.1,
         BoxMargins->{{0, -0.2}, {0, 0}}]}]}],
      QuantumAlgebra`QuantumAlgebra`Bra,
      BaseStyle->"BraWrapper"], "\[CircleTimes]", 
     TagBox[
      RowBox[{
       SubscriptBox["\[InvisiblePrefixScriptBase]", 
        TagBox[
         AdjustmentBox[
          TagBox["3",
           QuantumAlgebra`QuantumAlgebra`BraArgs,
           BaseStyle->"BraKetArg"],
          BoxBaselineShift->0],
         QuantumAlgebra`QuantumAlgebra`UDScript,
         BaseStyle->"LIndex"]], 
       RowBox[{"\[LeftAngleBracket]", 
        AdjustmentBox[
         TagBox["1",
          QuantumAlgebra`QuantumAlgebra`BraArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0], 
        AdjustmentBox["\[VerticalSeparator]",
         BoxBaselineShift->-0.1,
         BoxMargins->{{0, -0.2}, {0, 0}}]}]}],
      QuantumAlgebra`QuantumAlgebra`Bra,
      BaseStyle->"BraWrapper"]}], "\[CenterDot]", 
    TagBox[
     RowBox[{
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{-0.2, 0}, {0, 0}}], 
      AdjustmentBox[
       TagBox["\[Psi]",
        QuantumAlgebra`QuantumAlgebra`KetArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], "\[RightAngleBracket]"}],
     QuantumAlgebra`QuantumAlgebra`Ket,
     BaseStyle->"KetWrapper"]}]}]}]], "Output",
 CellChangeTimes->{3.4742396490772753`*^9, 3.4742398460585413`*^9, 
  3.594455605199149*^9}]
}, Open  ]],

Cell["\<\
We see that braketing has took place in the common state space of both \
operators, but not with the general state \[Psi]. If this state is know in \
the same basis, we can plug it into the calculation using local rules:\
\>", "Text",
 CellChangeTimes->{{3.4443101214379997`*^9, 3.444310140626*^9}, {
   3.4443102205620003`*^9, 3.4443102855*^9}, {3.444310374066*^9, 
   3.444310535701*^9}, {3.444319878039*^9, 3.444319934847*^9}, 
   3.444319965559*^9, {3.4443200340959997`*^9, 3.444320119137*^9}, {
   3.444320345487*^9, 3.444320368427*^9}, {3.444470164705*^9, 
   3.4444702156540003`*^9}, 3.4452453702839456`*^9, {3.4452454074269457`*^9, 
   3.4452454551809454`*^9}, {3.5944556340307975`*^9, 
   3.5944556797674136`*^9}, {3.594455744288104*^9, 3.594455771806678*^9}, {
   3.594455810571895*^9, 3.5944558351903033`*^9}, 3.59445587848978*^9, {
   3.5944559510999327`*^9, 3.5944560174917307`*^9}, {3.5946317803299336`*^9, 
   3.59463188271379*^9}}],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"\[Psi]Rule", "=", 
  RowBox[{"{", "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{
     TagBox[
      RowBox[{
       AdjustmentBox["\[VerticalSeparator]",
        BoxBaselineShift->-0.1,
        BoxMargins->{{-0.2, 0}, {0, 0}}], 
       AdjustmentBox[
        TagBox["\[Psi]",
         QuantumAlgebra`QuantumAlgebra`KetArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0], "\[RightAngleBracket]"}],
      QuantumAlgebra`QuantumAlgebra`Ket,
      BaseStyle->"KetWrapper"], "\[Rule]", 
     RowBox[{
      TagBox[
       SubscriptBox[
        RowBox[{
         AdjustmentBox["\[VerticalSeparator]",
          BoxBaselineShift->-0.1,
          BoxMargins->{{-0.2, 0}, {0, 0}}], 
         AdjustmentBox[
          TagBox["1",
           QuantumAlgebra`QuantumAlgebra`KetArgs,
           BaseStyle->"BraKetArg"],
          BoxBaselineShift->0], "\[RightAngleBracket]"}], 
        TagBox[
         AdjustmentBox[
          TagBox["1",
           QuantumAlgebra`QuantumAlgebra`KetArgs,
           BaseStyle->"BraKetArg"],
          BoxBaselineShift->0],
         QuantumAlgebra`QuantumAlgebra`UDScript,
         BaseStyle->"RIndex"]],
       QuantumAlgebra`QuantumAlgebra`Ket,
       BaseStyle->"KetWrapper"], "\[CircleTimes]", 
      TagBox[
       SubscriptBox[
        RowBox[{
         AdjustmentBox["\[VerticalSeparator]",
          BoxBaselineShift->-0.1,
          BoxMargins->{{-0.2, 0}, {0, 0}}], 
         AdjustmentBox[
          TagBox["0",
           QuantumAlgebra`QuantumAlgebra`KetArgs,
           BaseStyle->"BraKetArg"],
          BoxBaselineShift->0], "\[RightAngleBracket]"}], 
        TagBox[
         AdjustmentBox[
          TagBox["2",
           QuantumAlgebra`QuantumAlgebra`KetArgs,
           BaseStyle->"BraKetArg"],
          BoxBaselineShift->0],
         QuantumAlgebra`QuantumAlgebra`UDScript,
         BaseStyle->"RIndex"]],
       QuantumAlgebra`QuantumAlgebra`Ket,
       BaseStyle->"KetWrapper"], "\[CircleTimes]", 
      TagBox[
       SubscriptBox[
        RowBox[{
         AdjustmentBox["\[VerticalSeparator]",
          BoxBaselineShift->-0.1,
          BoxMargins->{{-0.2, 0}, {0, 0}}], 
         AdjustmentBox[
          TagBox["1",
           QuantumAlgebra`QuantumAlgebra`KetArgs,
           BaseStyle->"BraKetArg"],
          BoxBaselineShift->0], "\[RightAngleBracket]"}], 
        TagBox[
         AdjustmentBox[
          TagBox["3",
           QuantumAlgebra`QuantumAlgebra`KetArgs,
           BaseStyle->"BraKetArg"],
          BoxBaselineShift->0],
         QuantumAlgebra`QuantumAlgebra`UDScript,
         BaseStyle->"RIndex"]],
       QuantumAlgebra`QuantumAlgebra`Ket,
       BaseStyle->"KetWrapper"]}]}], ",", "\[IndentingNewLine]", 
    RowBox[{
     TagBox[
      RowBox[{"\[LeftAngleBracket]", 
       AdjustmentBox[
        TagBox["\[Psi]",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0], 
       AdjustmentBox["\[VerticalSeparator]",
        BoxBaselineShift->-0.1,
        BoxMargins->{{0, -0.2}, {0, 0}}]}],
      QuantumAlgebra`QuantumAlgebra`Bra,
      BaseStyle->"BraWrapper"], "\[Rule]", 
     RowBox[{
      TagBox[
       RowBox[{
        SubscriptBox["\[InvisiblePrefixScriptBase]", 
         TagBox[
          AdjustmentBox[
           TagBox["1",
            QuantumAlgebra`QuantumAlgebra`BraArgs,
            BaseStyle->"BraKetArg"],
           BoxBaselineShift->0],
          QuantumAlgebra`QuantumAlgebra`UDScript,
          BaseStyle->"LIndex"]], 
        RowBox[{"\[LeftAngleBracket]", 
         AdjustmentBox[
          TagBox["1",
           QuantumAlgebra`QuantumAlgebra`BraArgs,
           BaseStyle->"BraKetArg"],
          BoxBaselineShift->0], 
         AdjustmentBox["\[VerticalSeparator]",
          BoxBaselineShift->-0.1,
          BoxMargins->{{0, -0.2}, {0, 0}}]}]}],
       QuantumAlgebra`QuantumAlgebra`Bra,
       BaseStyle->"BraWrapper"], "\[CircleTimes]", 
      TagBox[
       RowBox[{
        SubscriptBox["\[InvisiblePrefixScriptBase]", 
         TagBox[
          AdjustmentBox[
           TagBox["2",
            QuantumAlgebra`QuantumAlgebra`BraArgs,
            BaseStyle->"BraKetArg"],
           BoxBaselineShift->0],
          QuantumAlgebra`QuantumAlgebra`UDScript,
          BaseStyle->"LIndex"]], 
        RowBox[{"\[LeftAngleBracket]", 
         AdjustmentBox[
          TagBox["0",
           QuantumAlgebra`QuantumAlgebra`BraArgs,
           BaseStyle->"BraKetArg"],
          BoxBaselineShift->0], 
         AdjustmentBox["\[VerticalSeparator]",
          BoxBaselineShift->-0.1,
          BoxMargins->{{0, -0.2}, {0, 0}}]}]}],
       QuantumAlgebra`QuantumAlgebra`Bra,
       BaseStyle->"BraWrapper"], "\[CircleTimes]", 
      TagBox[
       RowBox[{
        SubscriptBox["\[InvisiblePrefixScriptBase]", 
         TagBox[
          AdjustmentBox[
           TagBox["3",
            QuantumAlgebra`QuantumAlgebra`BraArgs,
            BaseStyle->"BraKetArg"],
           BoxBaselineShift->0],
          QuantumAlgebra`QuantumAlgebra`UDScript,
          BaseStyle->"LIndex"]], 
        RowBox[{"\[LeftAngleBracket]", 
         AdjustmentBox[
          TagBox["1",
           QuantumAlgebra`QuantumAlgebra`BraArgs,
           BaseStyle->"BraKetArg"],
          BoxBaselineShift->0], 
         AdjustmentBox["\[VerticalSeparator]",
          BoxBaselineShift->-0.1,
          BoxMargins->{{0, -0.2}, {0, 0}}]}]}],
       QuantumAlgebra`QuantumAlgebra`Bra,
       BaseStyle->"BraWrapper"]}]}]}], "}"}]}]], "Input",
 CellChangeTimes->{{3.4742398559351063`*^9, 3.474239885774813*^9}, {
  3.594455779916142*^9, 3.5944557953320236`*^9}}],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{
   RowBox[{
    TagBox[
     RowBox[{
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{-0.2, 0}, {0, 0}}], 
      AdjustmentBox[
       TagBox["\[Psi]",
        QuantumAlgebra`QuantumAlgebra`KetArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], "\[RightAngleBracket]"}],
     QuantumAlgebra`QuantumAlgebra`Ket,
     BaseStyle->"KetWrapper"], "\[Rule]", 
    RowBox[{
     TagBox[
      SubscriptBox[
       RowBox[{
        AdjustmentBox["\[VerticalSeparator]",
         BoxBaselineShift->-0.1,
         BoxMargins->{{-0.2, 0}, {0, 0}}], 
        AdjustmentBox[
         TagBox["0",
          QuantumAlgebra`QuantumAlgebra`KetArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0], "\[RightAngleBracket]"}], 
       TagBox[
        AdjustmentBox[
         TagBox["2",
          QuantumAlgebra`QuantumAlgebra`KetArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0],
        QuantumAlgebra`QuantumAlgebra`UDScript,
        BaseStyle->"RIndex"]],
      QuantumAlgebra`QuantumAlgebra`Ket,
      BaseStyle->"KetWrapper"], "\[CircleTimes]", 
     TagBox[
      SubscriptBox[
       RowBox[{
        AdjustmentBox["\[VerticalSeparator]",
         BoxBaselineShift->-0.1,
         BoxMargins->{{-0.2, 0}, {0, 0}}], 
        AdjustmentBox[
         TagBox["1",
          QuantumAlgebra`QuantumAlgebra`KetArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0], "\[RightAngleBracket]"}], 
       TagBox[
        AdjustmentBox[
         TagBox["1",
          QuantumAlgebra`QuantumAlgebra`KetArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0],
        QuantumAlgebra`QuantumAlgebra`UDScript,
        BaseStyle->"RIndex"]],
      QuantumAlgebra`QuantumAlgebra`Ket,
      BaseStyle->"KetWrapper"], "\[CircleTimes]", 
     TagBox[
      SubscriptBox[
       RowBox[{
        AdjustmentBox["\[VerticalSeparator]",
         BoxBaselineShift->-0.1,
         BoxMargins->{{-0.2, 0}, {0, 0}}], 
        AdjustmentBox[
         TagBox["1",
          QuantumAlgebra`QuantumAlgebra`KetArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0], "\[RightAngleBracket]"}], 
       TagBox[
        AdjustmentBox[
         TagBox["3",
          QuantumAlgebra`QuantumAlgebra`KetArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0],
        QuantumAlgebra`QuantumAlgebra`UDScript,
        BaseStyle->"RIndex"]],
      QuantumAlgebra`QuantumAlgebra`Ket,
      BaseStyle->"KetWrapper"]}]}], ",", 
   RowBox[{
    TagBox[
     RowBox[{"\[LeftAngleBracket]", 
      AdjustmentBox[
       TagBox["\[Psi]",
        QuantumAlgebra`QuantumAlgebra`BraArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], 
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{0, -0.2}, {0, 0}}]}],
     QuantumAlgebra`QuantumAlgebra`Bra,
     BaseStyle->"BraWrapper"], "\[Rule]", 
    RowBox[{
     TagBox[
      RowBox[{
       SubscriptBox["\[InvisiblePrefixScriptBase]", 
        TagBox[
         AdjustmentBox[
          TagBox["2",
           QuantumAlgebra`QuantumAlgebra`BraArgs,
           BaseStyle->"BraKetArg"],
          BoxBaselineShift->0],
         QuantumAlgebra`QuantumAlgebra`UDScript,
         BaseStyle->"LIndex"]], 
       RowBox[{"\[LeftAngleBracket]", 
        AdjustmentBox[
         TagBox["0",
          QuantumAlgebra`QuantumAlgebra`BraArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0], 
        AdjustmentBox["\[VerticalSeparator]",
         BoxBaselineShift->-0.1,
         BoxMargins->{{0, -0.2}, {0, 0}}]}]}],
      QuantumAlgebra`QuantumAlgebra`Bra,
      BaseStyle->"BraWrapper"], "\[CircleTimes]", 
     TagBox[
      RowBox[{
       SubscriptBox["\[InvisiblePrefixScriptBase]", 
        TagBox[
         AdjustmentBox[
          TagBox["1",
           QuantumAlgebra`QuantumAlgebra`BraArgs,
           BaseStyle->"BraKetArg"],
          BoxBaselineShift->0],
         QuantumAlgebra`QuantumAlgebra`UDScript,
         BaseStyle->"LIndex"]], 
       RowBox[{"\[LeftAngleBracket]", 
        AdjustmentBox[
         TagBox["1",
          QuantumAlgebra`QuantumAlgebra`BraArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0], 
        AdjustmentBox["\[VerticalSeparator]",
         BoxBaselineShift->-0.1,
         BoxMargins->{{0, -0.2}, {0, 0}}]}]}],
      QuantumAlgebra`QuantumAlgebra`Bra,
      BaseStyle->"BraWrapper"], "\[CircleTimes]", 
     TagBox[
      RowBox[{
       SubscriptBox["\[InvisiblePrefixScriptBase]", 
        TagBox[
         AdjustmentBox[
          TagBox["3",
           QuantumAlgebra`QuantumAlgebra`BraArgs,
           BaseStyle->"BraKetArg"],
          BoxBaselineShift->0],
         QuantumAlgebra`QuantumAlgebra`UDScript,
         BaseStyle->"LIndex"]], 
       RowBox[{"\[LeftAngleBracket]", 
        AdjustmentBox[
         TagBox["1",
          QuantumAlgebra`QuantumAlgebra`BraArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0], 
        AdjustmentBox["\[VerticalSeparator]",
         BoxBaselineShift->-0.1,
         BoxMargins->{{0, -0.2}, {0, 0}}]}]}],
      QuantumAlgebra`QuantumAlgebra`Bra,
      BaseStyle->"BraWrapper"]}]}]}], "}"}]], "Output",
 CellChangeTimes->{3.4742398877399254`*^9, 3.594455800418315*^9}]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"\[ScriptCapitalE]", "/.", "\[Psi]Rule"}]], "Input",
 CellChangeTimes->{{3.4441681874972*^9, 3.4441682744642*^9}, {
   3.4441687987682*^9, 3.4441688077402*^9}, {3.4441692018132*^9, 
   3.4441692133972*^9}, {3.4442192315175486`*^9, 3.4442194626785483`*^9}, {
   3.4442195677505484`*^9, 3.4442196113435483`*^9}, {3.444219687924548*^9, 
   3.4442198075595484`*^9}, {3.4442203342185483`*^9, 
   3.4442203735935483`*^9}, {3.4442205289675484`*^9, 
   3.4442205339925485`*^9}, {3.4442219258995485`*^9, 3.4442219303245487`*^9}, 
   3.4742398715009966`*^9, {3.474239908705125*^9, 3.4742399149404817`*^9}}],

Cell[BoxData[
 RowBox[{
  RowBox[{
   TagBox[
    RowBox[{
     SubscriptBox["\[InvisiblePrefixScriptBase]", 
      TagBox[
       AdjustmentBox[
        TagBox["1",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"LIndex"]], 
     SubscriptBox[
      RowBox[{"\[LeftAngleBracket]", 
       AdjustmentBox[
        RowBox[{
         TagBox["0",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
         TagBox["1",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"]}],
        BoxBaselineShift->0], "\[RightAngleBracket]"}], 
      TagBox[
       AdjustmentBox[
        TagBox["1",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"RIndex"]]}],
    QuantumAlgebra`QuantumAlgebra`Braket,
    BaseStyle->"BraKetWrapper"], " ", 
   TagBox[
    RowBox[{
     SubscriptBox["\[InvisiblePrefixScriptBase]", 
      TagBox[
       AdjustmentBox[
        TagBox["2",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"LIndex"]], 
     SubscriptBox[
      RowBox[{"\[LeftAngleBracket]", 
       AdjustmentBox[
        RowBox[{
         TagBox["0",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
         TagBox["0",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"]}],
        BoxBaselineShift->0], "\[RightAngleBracket]"}], 
      TagBox[
       AdjustmentBox[
        TagBox["2",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"RIndex"]]}],
    QuantumAlgebra`QuantumAlgebra`Braket,
    BaseStyle->"BraKetWrapper"], " ", 
   TagBox[
    RowBox[{
     SubscriptBox["\[InvisiblePrefixScriptBase]", 
      TagBox[
       AdjustmentBox[
        TagBox["2",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"LIndex"]], 
     SubscriptBox[
      RowBox[{"\[LeftAngleBracket]", 
       AdjustmentBox[
        RowBox[{
         TagBox["0",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
         TagBox["1",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"]}],
        BoxBaselineShift->0], "\[RightAngleBracket]"}], 
      TagBox[
       AdjustmentBox[
        TagBox["2",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"RIndex"]]}],
    QuantumAlgebra`QuantumAlgebra`Braket,
    BaseStyle->"BraKetWrapper"], " ", 
   TagBox[
    RowBox[{
     SubscriptBox["\[InvisiblePrefixScriptBase]", 
      TagBox[
       AdjustmentBox[
        TagBox["3",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"LIndex"]], 
     SubscriptBox[
      RowBox[{"\[LeftAngleBracket]", 
       AdjustmentBox[
        RowBox[{
         TagBox["0",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
         TagBox["1",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"]}],
        BoxBaselineShift->0], "\[RightAngleBracket]"}], 
      TagBox[
       AdjustmentBox[
        TagBox["3",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"RIndex"]]}],
    QuantumAlgebra`QuantumAlgebra`Braket,
    BaseStyle->"BraKetWrapper"], " ", 
   SuperscriptBox[
    TagBox[
     RowBox[{
      SubscriptBox["\[InvisiblePrefixScriptBase]", 
       TagBox[
        AdjustmentBox[
         TagBox["1",
          QuantumAlgebra`QuantumAlgebra`BraArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0],
        QuantumAlgebra`QuantumAlgebra`UDScript,
        BaseStyle->"LIndex"]], 
      SubscriptBox[
       RowBox[{"\[LeftAngleBracket]", 
        AdjustmentBox[
         RowBox[{
          TagBox["1",
           QuantumAlgebra`QuantumAlgebra`BraKetArgs,
           BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
          TagBox["0",
           QuantumAlgebra`QuantumAlgebra`BraKetArgs,
           BaseStyle->"BraKetArg"]}],
         BoxBaselineShift->0], "\[RightAngleBracket]"}], 
       TagBox[
        AdjustmentBox[
         TagBox["1",
          QuantumAlgebra`QuantumAlgebra`BraArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0],
        QuantumAlgebra`QuantumAlgebra`UDScript,
        BaseStyle->"RIndex"]]}],
     QuantumAlgebra`QuantumAlgebra`Braket,
     BaseStyle->"BraKetWrapper"], "2"], " ", 
   TagBox[
    RowBox[{
     SubscriptBox["\[InvisiblePrefixScriptBase]", 
      TagBox[
       AdjustmentBox[
        TagBox["3",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"LIndex"]], 
     SubscriptBox[
      RowBox[{"\[LeftAngleBracket]", 
       AdjustmentBox[
        RowBox[{
         TagBox["1",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
         TagBox["0",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"]}],
        BoxBaselineShift->0], "\[RightAngleBracket]"}], 
      TagBox[
       AdjustmentBox[
        TagBox["3",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"RIndex"]]}],
    QuantumAlgebra`QuantumAlgebra`Braket,
    BaseStyle->"BraKetWrapper"]}], "+", 
  RowBox[{
   TagBox[
    RowBox[{
     SubscriptBox["\[InvisiblePrefixScriptBase]", 
      TagBox[
       AdjustmentBox[
        TagBox["1",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"LIndex"]], 
     SubscriptBox[
      RowBox[{"\[LeftAngleBracket]", 
       AdjustmentBox[
        RowBox[{
         TagBox["0",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
         TagBox["0",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"]}],
        BoxBaselineShift->0], "\[RightAngleBracket]"}], 
      TagBox[
       AdjustmentBox[
        TagBox["1",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"RIndex"]]}],
    QuantumAlgebra`QuantumAlgebra`Braket,
    BaseStyle->"BraKetWrapper"], " ", 
   TagBox[
    RowBox[{
     SubscriptBox["\[InvisiblePrefixScriptBase]", 
      TagBox[
       AdjustmentBox[
        TagBox["1",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"LIndex"]], 
     SubscriptBox[
      RowBox[{"\[LeftAngleBracket]", 
       AdjustmentBox[
        RowBox[{
         TagBox["0",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
         TagBox["1",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"]}],
        BoxBaselineShift->0], "\[RightAngleBracket]"}], 
      TagBox[
       AdjustmentBox[
        TagBox["1",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"RIndex"]]}],
    QuantumAlgebra`QuantumAlgebra`Braket,
    BaseStyle->"BraKetWrapper"], " ", 
   TagBox[
    RowBox[{
     SubscriptBox["\[InvisiblePrefixScriptBase]", 
      TagBox[
       AdjustmentBox[
        TagBox["2",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"LIndex"]], 
     SubscriptBox[
      RowBox[{"\[LeftAngleBracket]", 
       AdjustmentBox[
        RowBox[{
         TagBox["0",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
         TagBox["0",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"]}],
        BoxBaselineShift->0], "\[RightAngleBracket]"}], 
      TagBox[
       AdjustmentBox[
        TagBox["2",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"RIndex"]]}],
    QuantumAlgebra`QuantumAlgebra`Braket,
    BaseStyle->"BraKetWrapper"], " ", 
   TagBox[
    RowBox[{
     SubscriptBox["\[InvisiblePrefixScriptBase]", 
      TagBox[
       AdjustmentBox[
        TagBox["3",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"LIndex"]], 
     SubscriptBox[
      RowBox[{"\[LeftAngleBracket]", 
       AdjustmentBox[
        RowBox[{
         TagBox["0",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
         TagBox["1",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"]}],
        BoxBaselineShift->0], "\[RightAngleBracket]"}], 
      TagBox[
       AdjustmentBox[
        TagBox["3",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"RIndex"]]}],
    QuantumAlgebra`QuantumAlgebra`Braket,
    BaseStyle->"BraKetWrapper"], " ", 
   TagBox[
    RowBox[{
     SubscriptBox["\[InvisiblePrefixScriptBase]", 
      TagBox[
       AdjustmentBox[
        TagBox["1",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"LIndex"]], 
     SubscriptBox[
      RowBox[{"\[LeftAngleBracket]", 
       AdjustmentBox[
        RowBox[{
         TagBox["1",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
         TagBox["1",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"]}],
        BoxBaselineShift->0], "\[RightAngleBracket]"}], 
      TagBox[
       AdjustmentBox[
        TagBox["1",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"RIndex"]]}],
    QuantumAlgebra`QuantumAlgebra`Braket,
    BaseStyle->"BraKetWrapper"], " ", 
   TagBox[
    RowBox[{
     SubscriptBox["\[InvisiblePrefixScriptBase]", 
      TagBox[
       AdjustmentBox[
        TagBox["2",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"LIndex"]], 
     SubscriptBox[
      RowBox[{"\[LeftAngleBracket]", 
       AdjustmentBox[
        RowBox[{
         TagBox["1",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
         TagBox["0",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"]}],
        BoxBaselineShift->0], "\[RightAngleBracket]"}], 
      TagBox[
       AdjustmentBox[
        TagBox["2",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"RIndex"]]}],
    QuantumAlgebra`QuantumAlgebra`Braket,
    BaseStyle->"BraKetWrapper"], " ", 
   TagBox[
    RowBox[{
     SubscriptBox["\[InvisiblePrefixScriptBase]", 
      TagBox[
       AdjustmentBox[
        TagBox["3",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"LIndex"]], 
     SubscriptBox[
      RowBox[{"\[LeftAngleBracket]", 
       AdjustmentBox[
        RowBox[{
         TagBox["1",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
         TagBox["0",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"]}],
        BoxBaselineShift->0], "\[RightAngleBracket]"}], 
      TagBox[
       AdjustmentBox[
        TagBox["3",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"RIndex"]]}],
    QuantumAlgebra`QuantumAlgebra`Braket,
    BaseStyle->"BraKetWrapper"]}], "+", 
  RowBox[{
   TagBox[
    RowBox[{
     SubscriptBox["\[InvisiblePrefixScriptBase]", 
      TagBox[
       AdjustmentBox[
        TagBox["2",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"LIndex"]], 
     SubscriptBox[
      RowBox[{"\[LeftAngleBracket]", 
       AdjustmentBox[
        RowBox[{
         TagBox["0",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
         TagBox["0",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"]}],
        BoxBaselineShift->0], "\[RightAngleBracket]"}], 
      TagBox[
       AdjustmentBox[
        TagBox["2",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"RIndex"]]}],
    QuantumAlgebra`QuantumAlgebra`Braket,
    BaseStyle->"BraKetWrapper"], " ", 
   TagBox[
    RowBox[{
     SubscriptBox["\[InvisiblePrefixScriptBase]", 
      TagBox[
       AdjustmentBox[
        TagBox["2",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"LIndex"]], 
     SubscriptBox[
      RowBox[{"\[LeftAngleBracket]", 
       AdjustmentBox[
        RowBox[{
         TagBox["0",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
         TagBox["1",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"]}],
        BoxBaselineShift->0], "\[RightAngleBracket]"}], 
      TagBox[
       AdjustmentBox[
        TagBox["2",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"RIndex"]]}],
    QuantumAlgebra`QuantumAlgebra`Braket,
    BaseStyle->"BraKetWrapper"], " ", 
   TagBox[
    RowBox[{
     SubscriptBox["\[InvisiblePrefixScriptBase]", 
      TagBox[
       AdjustmentBox[
        TagBox["1",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"LIndex"]], 
     SubscriptBox[
      RowBox[{"\[LeftAngleBracket]", 
       AdjustmentBox[
        RowBox[{
         TagBox["1",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
         TagBox["0",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"]}],
        BoxBaselineShift->0], "\[RightAngleBracket]"}], 
      TagBox[
       AdjustmentBox[
        TagBox["1",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"RIndex"]]}],
    QuantumAlgebra`QuantumAlgebra`Braket,
    BaseStyle->"BraKetWrapper"], " ", 
   SuperscriptBox[
    TagBox[
     RowBox[{
      SubscriptBox["\[InvisiblePrefixScriptBase]", 
       TagBox[
        AdjustmentBox[
         TagBox["1",
          QuantumAlgebra`QuantumAlgebra`BraArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0],
        QuantumAlgebra`QuantumAlgebra`UDScript,
        BaseStyle->"LIndex"]], 
      SubscriptBox[
       RowBox[{"\[LeftAngleBracket]", 
        AdjustmentBox[
         RowBox[{
          TagBox["1",
           QuantumAlgebra`QuantumAlgebra`BraKetArgs,
           BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
          TagBox["1",
           QuantumAlgebra`QuantumAlgebra`BraKetArgs,
           BaseStyle->"BraKetArg"]}],
         BoxBaselineShift->0], "\[RightAngleBracket]"}], 
       TagBox[
        AdjustmentBox[
         TagBox["1",
          QuantumAlgebra`QuantumAlgebra`BraArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0],
        QuantumAlgebra`QuantumAlgebra`UDScript,
        BaseStyle->"RIndex"]]}],
     QuantumAlgebra`QuantumAlgebra`Braket,
     BaseStyle->"BraKetWrapper"], "2"], " ", 
   SuperscriptBox[
    TagBox[
     RowBox[{
      SubscriptBox["\[InvisiblePrefixScriptBase]", 
       TagBox[
        AdjustmentBox[
         TagBox["3",
          QuantumAlgebra`QuantumAlgebra`BraArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0],
        QuantumAlgebra`QuantumAlgebra`UDScript,
        BaseStyle->"LIndex"]], 
      SubscriptBox[
       RowBox[{"\[LeftAngleBracket]", 
        AdjustmentBox[
         RowBox[{
          TagBox["1",
           QuantumAlgebra`QuantumAlgebra`BraKetArgs,
           BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
          TagBox["1",
           QuantumAlgebra`QuantumAlgebra`BraKetArgs,
           BaseStyle->"BraKetArg"]}],
         BoxBaselineShift->0], "\[RightAngleBracket]"}], 
       TagBox[
        AdjustmentBox[
         TagBox["3",
          QuantumAlgebra`QuantumAlgebra`BraArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0],
        QuantumAlgebra`QuantumAlgebra`UDScript,
        BaseStyle->"RIndex"]]}],
     QuantumAlgebra`QuantumAlgebra`Braket,
     BaseStyle->"BraKetWrapper"], "2"]}], "+", 
  RowBox[{
   TagBox[
    RowBox[{
     SubscriptBox["\[InvisiblePrefixScriptBase]", 
      TagBox[
       AdjustmentBox[
        TagBox["1",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"LIndex"]], 
     SubscriptBox[
      RowBox[{"\[LeftAngleBracket]", 
       AdjustmentBox[
        RowBox[{
         TagBox["0",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
         TagBox["1",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"]}],
        BoxBaselineShift->0], "\[RightAngleBracket]"}], 
      TagBox[
       AdjustmentBox[
        TagBox["1",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"RIndex"]]}],
    QuantumAlgebra`QuantumAlgebra`Braket,
    BaseStyle->"BraKetWrapper"], " ", 
   TagBox[
    RowBox[{
     SubscriptBox["\[InvisiblePrefixScriptBase]", 
      TagBox[
       AdjustmentBox[
        TagBox["2",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"LIndex"]], 
     SubscriptBox[
      RowBox[{"\[LeftAngleBracket]", 
       AdjustmentBox[
        RowBox[{
         TagBox["0",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
         TagBox["0",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"]}],
        BoxBaselineShift->0], "\[RightAngleBracket]"}], 
      TagBox[
       AdjustmentBox[
        TagBox["2",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"RIndex"]]}],
    QuantumAlgebra`QuantumAlgebra`Braket,
    BaseStyle->"BraKetWrapper"], " ", 
   SuperscriptBox[
    TagBox[
     RowBox[{
      SubscriptBox["\[InvisiblePrefixScriptBase]", 
       TagBox[
        AdjustmentBox[
         TagBox["1",
          QuantumAlgebra`QuantumAlgebra`BraArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0],
        QuantumAlgebra`QuantumAlgebra`UDScript,
        BaseStyle->"LIndex"]], 
      SubscriptBox[
       RowBox[{"\[LeftAngleBracket]", 
        AdjustmentBox[
         RowBox[{
          TagBox["1",
           QuantumAlgebra`QuantumAlgebra`BraKetArgs,
           BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
          TagBox["1",
           QuantumAlgebra`QuantumAlgebra`BraKetArgs,
           BaseStyle->"BraKetArg"]}],
         BoxBaselineShift->0], "\[RightAngleBracket]"}], 
       TagBox[
        AdjustmentBox[
         TagBox["1",
          QuantumAlgebra`QuantumAlgebra`BraArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0],
        QuantumAlgebra`QuantumAlgebra`UDScript,
        BaseStyle->"RIndex"]]}],
     QuantumAlgebra`QuantumAlgebra`Braket,
     BaseStyle->"BraKetWrapper"], "2"], " ", 
   TagBox[
    RowBox[{
     SubscriptBox["\[InvisiblePrefixScriptBase]", 
      TagBox[
       AdjustmentBox[
        TagBox["2",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"LIndex"]], 
     SubscriptBox[
      RowBox[{"\[LeftAngleBracket]", 
       AdjustmentBox[
        RowBox[{
         TagBox["1",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
         TagBox["0",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"]}],
        BoxBaselineShift->0], "\[RightAngleBracket]"}], 
      TagBox[
       AdjustmentBox[
        TagBox["2",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"RIndex"]]}],
    QuantumAlgebra`QuantumAlgebra`Braket,
    BaseStyle->"BraKetWrapper"], " ", 
   SuperscriptBox[
    TagBox[
     RowBox[{
      SubscriptBox["\[InvisiblePrefixScriptBase]", 
       TagBox[
        AdjustmentBox[
         TagBox["3",
          QuantumAlgebra`QuantumAlgebra`BraArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0],
        QuantumAlgebra`QuantumAlgebra`UDScript,
        BaseStyle->"LIndex"]], 
      SubscriptBox[
       RowBox[{"\[LeftAngleBracket]", 
        AdjustmentBox[
         RowBox[{
          TagBox["1",
           QuantumAlgebra`QuantumAlgebra`BraKetArgs,
           BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
          TagBox["1",
           QuantumAlgebra`QuantumAlgebra`BraKetArgs,
           BaseStyle->"BraKetArg"]}],
         BoxBaselineShift->0], "\[RightAngleBracket]"}], 
       TagBox[
        AdjustmentBox[
         TagBox["3",
          QuantumAlgebra`QuantumAlgebra`BraArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0],
        QuantumAlgebra`QuantumAlgebra`UDScript,
        BaseStyle->"RIndex"]]}],
     QuantumAlgebra`QuantumAlgebra`Braket,
     BaseStyle->"BraKetWrapper"], "2"]}]}]], "Output",
 CellChangeTimes->{3.474239652298459*^9, 3.474239915544516*^9, 
  3.5944558026224403`*^9}]
}, Open  ]]
}, Open  ]],

Cell[CellGroupData[{

Cell["Braketing Rules for the Short Tensor Notation", "Subsection",
 CellTags->"qa:BR.5"],

Cell["\<\
For the short tensor notation, braketing occurs whenever the first subscript \
of a label inside a bra matches the first subscript of a label inside a ket.\
\>", "Text",
 CellChangeTimes->{{3.4444704682679996`*^9, 3.444470546983*^9}, {
  3.444488147959*^9, 3.444488247166*^9}, {3.444488285296*^9, 
  3.444488334347*^9}, {3.444488366895*^9, 3.444488384443*^9}, {
  3.4452455182969456`*^9, 3.4452455247039456`*^9}, {3.4452475320509453`*^9, 
  3.445247533148946*^9}, {3.5946331846532564`*^9, 3.594633189944559*^9}}],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{
  TagBox[
   RowBox[{"\[LeftAngleBracket]", 
    AdjustmentBox[
     TagBox[
      SubscriptBox["\[Alpha]", "y"],
      QuantumAlgebra`QuantumAlgebra`BraArgs,
      BaseStyle->"BraKetArg"],
     BoxBaselineShift->0], 
    AdjustmentBox["\[VerticalSeparator]",
     BoxBaselineShift->-0.1,
     BoxMargins->{{0, -0.2}, {0, 0}}]}],
   QuantumAlgebra`QuantumAlgebra`Bra,
   BaseStyle->"BraWrapper"], "\[CenterDot]", 
  TagBox[
   RowBox[{
    AdjustmentBox["\[VerticalSeparator]",
     BoxBaselineShift->-0.1,
     BoxMargins->{{-0.2, 0}, {0, 0}}], 
    AdjustmentBox[
     TagBox[
      RowBox[{
       SubscriptBox["\[Beta]", "a"], ",", 
       SubscriptBox["\[Gamma]", "b"], ",", 
       SubscriptBox["\[Delta]", "y"]}],
      QuantumAlgebra`QuantumAlgebra`KetArgs,
      BaseStyle->"BraKetArg"],
     BoxBaselineShift->0], "\[RightAngleBracket]"}],
   QuantumAlgebra`QuantumAlgebra`Ket,
   BaseStyle->"KetWrapper"]}]], "Input",
 CellChangeTimes->{{3.444470551231*^9, 3.444470610356*^9}, 
   3.5946332204253025`*^9}],

Cell[BoxData[
 RowBox[{
  TagBox[
   RowBox[{"\[LeftAngleBracket]", 
    AdjustmentBox[
     RowBox[{
      TagBox[
       SubscriptBox["\[Alpha]", "y"],
       QuantumAlgebra`QuantumAlgebra`BraKetArgs,
       BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
      TagBox[
       SubscriptBox["\[Delta]", "y"],
       QuantumAlgebra`QuantumAlgebra`BraKetArgs,
       BaseStyle->"BraKetArg"]}],
     BoxBaselineShift->0], "\[RightAngleBracket]"}],
   QuantumAlgebra`QuantumAlgebra`Braket,
   BaseStyle->"BraKetWrapper"], " ", 
  TagBox[
   RowBox[{
    AdjustmentBox["\[VerticalSeparator]",
     BoxBaselineShift->-0.1,
     BoxMargins->{{-0.2, 0}, {0, 0}}], 
    AdjustmentBox[
     TagBox[
      RowBox[{
       SubscriptBox["\[Beta]", "a"], ",", 
       SubscriptBox["\[Gamma]", "b"]}],
      QuantumAlgebra`QuantumAlgebra`KetArgs,
      BaseStyle->"BraKetArg"],
     BoxBaselineShift->0], "\[RightAngleBracket]"}],
   QuantumAlgebra`QuantumAlgebra`Ket,
   BaseStyle->"KetWrapper"]}]], "Output",
 CellChangeTimes->{3.4742399487424145`*^9, 3.5946332207413206`*^9}]
}, Open  ]],

Cell["\<\
These rules apply only if the corresponding bra and ket have the same set of \
scripts outside. It is also possible to mix both tensor notations to perform \
a braketing.\
\>", "Text",
 CellChangeTimes->{{3.444488387875*^9, 3.444488496882*^9}, {
  3.445245555752946*^9, 3.445245565134946*^9}, {3.4452475062419453`*^9, 
  3.4452475179449453`*^9}, {3.4452475687849455`*^9, 3.4452475701459455`*^9}, {
  3.5946332353331547`*^9, 3.5946332365122223`*^9}}],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{
  TagBox[
   RowBox[{
    SubscriptBox["\[InvisiblePrefixScriptBase]", 
     TagBox[
      AdjustmentBox[
       TagBox["x",
        QuantumAlgebra`QuantumAlgebra`BraArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0],
      QuantumAlgebra`QuantumAlgebra`UDScript,
      BaseStyle->"LIndex"]], 
    RowBox[{"\[LeftAngleBracket]", 
     AdjustmentBox[
      TagBox[
       RowBox[{
        SubscriptBox["\[Alpha]", "1"], ",", 
        SubscriptBox["\[Beta]", "2"]}],
       QuantumAlgebra`QuantumAlgebra`BraArgs,
       BaseStyle->"BraKetArg"],
      BoxBaselineShift->0], 
     AdjustmentBox["\[VerticalSeparator]",
      BoxBaselineShift->-0.1,
      BoxMargins->{{0, -0.2}, {0, 0}}]}]}],
   QuantumAlgebra`QuantumAlgebra`Bra,
   BaseStyle->"BraWrapper"], "\[CenterDot]", 
  TagBox[
   SubscriptBox[
    RowBox[{
     AdjustmentBox["\[VerticalSeparator]",
      BoxBaselineShift->-0.1,
      BoxMargins->{{-0.2, 0}, {0, 0}}], 
     AdjustmentBox[
      TagBox[
       RowBox[{
        SubscriptBox["\[Gamma]", "1"], ",", 
        SubscriptBox["\[Delta]", "2"], ",", 
        SubscriptBox["\[Epsilon]", "3"]}],
       QuantumAlgebra`QuantumAlgebra`KetArgs,
       BaseStyle->"BraKetArg"],
      BoxBaselineShift->0], "\[RightAngleBracket]"}], 
    TagBox[
     AdjustmentBox[
      TagBox["x",
       QuantumAlgebra`QuantumAlgebra`KetArgs,
       BaseStyle->"BraKetArg"],
      BoxBaselineShift->0],
     QuantumAlgebra`QuantumAlgebra`UDScript,
     BaseStyle->"RIndex"]],
   QuantumAlgebra`QuantumAlgebra`Ket,
   BaseStyle->"KetWrapper"]}]], "Input",
 CellChangeTimes->{{3.444470551231*^9, 3.444470610356*^9}, {3.444470647574*^9,
   3.444470689008*^9}, {3.5946332557123203`*^9, 3.5946332656428885`*^9}}],

Cell[BoxData[
 RowBox[{
  TagBox[
   RowBox[{
    SubscriptBox["\[InvisiblePrefixScriptBase]", 
     TagBox[
      AdjustmentBox[
       TagBox["x",
        QuantumAlgebra`QuantumAlgebra`BraArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0],
      QuantumAlgebra`QuantumAlgebra`UDScript,
      BaseStyle->"LIndex"]], 
    SubscriptBox[
     RowBox[{"\[LeftAngleBracket]", 
      AdjustmentBox[
       RowBox[{
        TagBox[
         SubscriptBox["\[Alpha]", "1"],
         QuantumAlgebra`QuantumAlgebra`BraKetArgs,
         BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
        TagBox[
         SubscriptBox["\[Gamma]", "1"],
         QuantumAlgebra`QuantumAlgebra`BraKetArgs,
         BaseStyle->"BraKetArg"]}],
       BoxBaselineShift->0], "\[RightAngleBracket]"}], 
     TagBox[
      AdjustmentBox[
       TagBox["x",
        QuantumAlgebra`QuantumAlgebra`BraArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0],
      QuantumAlgebra`QuantumAlgebra`UDScript,
      BaseStyle->"RIndex"]]}],
   QuantumAlgebra`QuantumAlgebra`Braket,
   BaseStyle->"BraKetWrapper"], " ", 
  TagBox[
   RowBox[{
    SubscriptBox["\[InvisiblePrefixScriptBase]", 
     TagBox[
      AdjustmentBox[
       TagBox["x",
        QuantumAlgebra`QuantumAlgebra`BraArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0],
      QuantumAlgebra`QuantumAlgebra`UDScript,
      BaseStyle->"LIndex"]], 
    SubscriptBox[
     RowBox[{"\[LeftAngleBracket]", 
      AdjustmentBox[
       RowBox[{
        TagBox[
         SubscriptBox["\[Beta]", "2"],
         QuantumAlgebra`QuantumAlgebra`BraKetArgs,
         BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
        TagBox[
         SubscriptBox["\[Delta]", "2"],
         QuantumAlgebra`QuantumAlgebra`BraKetArgs,
         BaseStyle->"BraKetArg"]}],
       BoxBaselineShift->0], "\[RightAngleBracket]"}], 
     TagBox[
      AdjustmentBox[
       TagBox["x",
        QuantumAlgebra`QuantumAlgebra`BraArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0],
      QuantumAlgebra`QuantumAlgebra`UDScript,
      BaseStyle->"RIndex"]]}],
   QuantumAlgebra`QuantumAlgebra`Braket,
   BaseStyle->"BraKetWrapper"], " ", 
  TagBox[
   SubscriptBox[
    RowBox[{
     AdjustmentBox["\[VerticalSeparator]",
      BoxBaselineShift->-0.1,
      BoxMargins->{{-0.2, 0}, {0, 0}}], 
     AdjustmentBox[
      TagBox[
       SubscriptBox["\[Epsilon]", "3"],
       QuantumAlgebra`QuantumAlgebra`KetArgs,
       BaseStyle->"BraKetArg"],
      BoxBaselineShift->0], "\[RightAngleBracket]"}], 
    TagBox[
     AdjustmentBox[
      TagBox["x",
       QuantumAlgebra`QuantumAlgebra`KetArgs,
       BaseStyle->"BraKetArg"],
      BoxBaselineShift->0],
     QuantumAlgebra`QuantumAlgebra`UDScript,
     BaseStyle->"RIndex"]],
   QuantumAlgebra`QuantumAlgebra`Ket,
   BaseStyle->"KetWrapper"]}]], "Output",
 CellChangeTimes->{3.474239950329506*^9, 3.5946332663589296`*^9}]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{
  RowBox[{
   TagBox[
    RowBox[{"\[LeftAngleBracket]", 
     AdjustmentBox[
      TagBox[
       SubscriptBox["\[Alpha]", "y"],
       QuantumAlgebra`QuantumAlgebra`BraArgs,
       BaseStyle->"BraKetArg"],
      BoxBaselineShift->0], 
     AdjustmentBox["\[VerticalSeparator]",
      BoxBaselineShift->-0.1,
      BoxMargins->{{0, -0.2}, {0, 0}}]}],
    QuantumAlgebra`QuantumAlgebra`Bra,
    BaseStyle->"BraWrapper"], "\[CircleTimes]", 
   TagBox[
    RowBox[{
     SubscriptBox["\[InvisiblePrefixScriptBase]", 
      TagBox[
       AdjustmentBox[
        TagBox["x",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"LIndex"]], 
     RowBox[{"\[LeftAngleBracket]", 
      AdjustmentBox[
       TagBox[
        RowBox[{
         SubscriptBox["\[Alpha]", "1"], ",", 
         SubscriptBox["\[Beta]", "2"]}],
        QuantumAlgebra`QuantumAlgebra`BraArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], 
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{0, -0.2}, {0, 0}}]}]}],
    QuantumAlgebra`QuantumAlgebra`Bra,
    BaseStyle->"BraWrapper"]}], "\[CenterDot]", 
  RowBox[{
   TagBox[
    SubscriptBox[
     RowBox[{
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{-0.2, 0}, {0, 0}}], 
      AdjustmentBox[
       TagBox[
        RowBox[{
         SubscriptBox["\[Gamma]", "1"], ",", 
         SubscriptBox["\[Delta]", "2"], ",", 
         SubscriptBox["\[Epsilon]", "3"]}],
        QuantumAlgebra`QuantumAlgebra`KetArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], "\[RightAngleBracket]"}], 
     TagBox[
      AdjustmentBox[
       TagBox["x",
        QuantumAlgebra`QuantumAlgebra`KetArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0],
      QuantumAlgebra`QuantumAlgebra`UDScript,
      BaseStyle->"RIndex"]],
    QuantumAlgebra`QuantumAlgebra`Ket,
    BaseStyle->"KetWrapper"], "\[CircleTimes]", 
   TagBox[
    RowBox[{
     AdjustmentBox["\[VerticalSeparator]",
      BoxBaselineShift->-0.1,
      BoxMargins->{{-0.2, 0}, {0, 0}}], 
     AdjustmentBox[
      TagBox[
       RowBox[{
        SubscriptBox["\[Beta]", "a"], ",", 
        SubscriptBox["\[Gamma]", "b"], ",", 
        SubscriptBox["\[Delta]", "y"]}],
       QuantumAlgebra`QuantumAlgebra`KetArgs,
       BaseStyle->"BraKetArg"],
      BoxBaselineShift->0], "\[RightAngleBracket]"}],
    QuantumAlgebra`QuantumAlgebra`Ket,
    BaseStyle->"KetWrapper"]}]}]], "Input",
 CellChangeTimes->{{3.444470711459*^9, 3.44447073229*^9}, {
  3.4452467689199457`*^9, 3.4452467755509453`*^9}, {3.445246835431946*^9, 
  3.4452468451479454`*^9}, {3.5946332691120872`*^9, 3.594633280132717*^9}}],

Cell[BoxData[
 RowBox[{
  TagBox[
   RowBox[{"\[LeftAngleBracket]", 
    AdjustmentBox[
     RowBox[{
      TagBox[
       SubscriptBox["\[Alpha]", "y"],
       QuantumAlgebra`QuantumAlgebra`BraKetArgs,
       BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
      TagBox[
       SubscriptBox["\[Delta]", "y"],
       QuantumAlgebra`QuantumAlgebra`BraKetArgs,
       BaseStyle->"BraKetArg"]}],
     BoxBaselineShift->0], "\[RightAngleBracket]"}],
   QuantumAlgebra`QuantumAlgebra`Braket,
   BaseStyle->"BraKetWrapper"], " ", 
  TagBox[
   RowBox[{
    SubscriptBox["\[InvisiblePrefixScriptBase]", 
     TagBox[
      AdjustmentBox[
       TagBox["x",
        QuantumAlgebra`QuantumAlgebra`BraArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0],
      QuantumAlgebra`QuantumAlgebra`UDScript,
      BaseStyle->"LIndex"]], 
    SubscriptBox[
     RowBox[{"\[LeftAngleBracket]", 
      AdjustmentBox[
       RowBox[{
        TagBox[
         SubscriptBox["\[Alpha]", "1"],
         QuantumAlgebra`QuantumAlgebra`BraKetArgs,
         BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
        TagBox[
         SubscriptBox["\[Gamma]", "1"],
         QuantumAlgebra`QuantumAlgebra`BraKetArgs,
         BaseStyle->"BraKetArg"]}],
       BoxBaselineShift->0], "\[RightAngleBracket]"}], 
     TagBox[
      AdjustmentBox[
       TagBox["x",
        QuantumAlgebra`QuantumAlgebra`BraArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0],
      QuantumAlgebra`QuantumAlgebra`UDScript,
      BaseStyle->"RIndex"]]}],
   QuantumAlgebra`QuantumAlgebra`Braket,
   BaseStyle->"BraKetWrapper"], " ", 
  TagBox[
   RowBox[{
    SubscriptBox["\[InvisiblePrefixScriptBase]", 
     TagBox[
      AdjustmentBox[
       TagBox["x",
        QuantumAlgebra`QuantumAlgebra`BraArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0],
      QuantumAlgebra`QuantumAlgebra`UDScript,
      BaseStyle->"LIndex"]], 
    SubscriptBox[
     RowBox[{"\[LeftAngleBracket]", 
      AdjustmentBox[
       RowBox[{
        TagBox[
         SubscriptBox["\[Beta]", "2"],
         QuantumAlgebra`QuantumAlgebra`BraKetArgs,
         BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
        TagBox[
         SubscriptBox["\[Delta]", "2"],
         QuantumAlgebra`QuantumAlgebra`BraKetArgs,
         BaseStyle->"BraKetArg"]}],
       BoxBaselineShift->0], "\[RightAngleBracket]"}], 
     TagBox[
      AdjustmentBox[
       TagBox["x",
        QuantumAlgebra`QuantumAlgebra`BraArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0],
      QuantumAlgebra`QuantumAlgebra`UDScript,
      BaseStyle->"RIndex"]]}],
   QuantumAlgebra`QuantumAlgebra`Braket,
   BaseStyle->"BraKetWrapper"], " ", 
  RowBox[{
   TagBox[
    RowBox[{
     AdjustmentBox["\[VerticalSeparator]",
      BoxBaselineShift->-0.1,
      BoxMargins->{{-0.2, 0}, {0, 0}}], 
     AdjustmentBox[
      TagBox[
       RowBox[{
        SubscriptBox["\[Beta]", "a"], ",", 
        SubscriptBox["\[Gamma]", "b"]}],
       QuantumAlgebra`QuantumAlgebra`KetArgs,
       BaseStyle->"BraKetArg"],
      BoxBaselineShift->0], "\[RightAngleBracket]"}],
    QuantumAlgebra`QuantumAlgebra`Ket,
    BaseStyle->"KetWrapper"], "\[CircleTimes]", 
   TagBox[
    SubscriptBox[
     RowBox[{
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{-0.2, 0}, {0, 0}}], 
      AdjustmentBox[
       TagBox[
        SubscriptBox["\[Epsilon]", "3"],
        QuantumAlgebra`QuantumAlgebra`KetArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], "\[RightAngleBracket]"}], 
     TagBox[
      AdjustmentBox[
       TagBox["x",
        QuantumAlgebra`QuantumAlgebra`KetArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0],
      QuantumAlgebra`QuantumAlgebra`UDScript,
      BaseStyle->"RIndex"]],
    QuantumAlgebra`QuantumAlgebra`Ket,
    BaseStyle->"KetWrapper"]}]}]], "Output",
 CellChangeTimes->{3.4742399512715597`*^9, 3.594633280405733*^9}]
}, Open  ]],

Cell["\<\
If no matches occur, then the expression is left unevaluated. In the \
following example, the bra with label \[Mu] and the ket with label \[Beta] \
should be subscripted to match each other. \
\>", "Text",
 CellChangeTimes->{{3.444488504005*^9, 3.444488540532*^9}, {3.444491034354*^9,
   3.444491059002*^9}, {3.444491335138*^9, 3.444491378824*^9}, {
  3.444491417362*^9, 3.444491460543*^9}, {3.444494751492*^9, 
  3.444494777984*^9}, {3.4452457270229454`*^9, 3.4452457271079454`*^9}, {
  3.4452458055019455`*^9, 3.4452458306909456`*^9}, {3.5946333040460854`*^9, 
  3.5946333112044945`*^9}}],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{
  RowBox[{
   TagBox[
    RowBox[{
     SubscriptBox["\[InvisiblePrefixScriptBase]", 
      TagBox[
       AdjustmentBox[
        TagBox["x",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"LIndex"]], 
     RowBox[{"\[LeftAngleBracket]", 
      AdjustmentBox[
       TagBox[
        RowBox[{
         SubscriptBox["\[Alpha]", "y"], ",", 
         SubscriptBox["\[Beta]", "k"]}],
        QuantumAlgebra`QuantumAlgebra`BraArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], 
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{0, -0.2}, {0, 0}}]}]}],
    QuantumAlgebra`QuantumAlgebra`Bra,
    BaseStyle->"BraWrapper"], "\[CircleTimes]", 
   TagBox[
    RowBox[{"\[LeftAngleBracket]", 
     AdjustmentBox[
      TagBox[
       RowBox[{"\[Mu]", ",", 
        SubscriptBox["\[Nu]", "5"]}],
       QuantumAlgebra`QuantumAlgebra`BraArgs,
       BaseStyle->"BraKetArg"],
      BoxBaselineShift->0], 
     AdjustmentBox["\[VerticalSeparator]",
      BoxBaselineShift->-0.1,
      BoxMargins->{{0, -0.2}, {0, 0}}]}],
    QuantumAlgebra`QuantumAlgebra`Bra,
    BaseStyle->"BraWrapper"]}], "\[CenterDot]", 
  RowBox[{
   TagBox[
    RowBox[{
     AdjustmentBox["\[VerticalSeparator]",
      BoxBaselineShift->-0.1,
      BoxMargins->{{-0.2, 0}, {0, 0}}], 
     AdjustmentBox[
      TagBox[
       RowBox[{"\[Beta]", ",", 
        SubscriptBox["b", "3"]}],
       QuantumAlgebra`QuantumAlgebra`KetArgs,
       BaseStyle->"BraKetArg"],
      BoxBaselineShift->0], "\[RightAngleBracket]"}],
    QuantumAlgebra`QuantumAlgebra`Ket,
    BaseStyle->"KetWrapper"], "\[CircleTimes]", 
   TagBox[
    SubscriptBox[
     RowBox[{
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{-0.2, 0}, {0, 0}}], 
      AdjustmentBox[
       TagBox[
        RowBox[{
         SubscriptBox["\[Kappa]", "l"], ",", 
         SubscriptBox["\[Eta]", "j"]}],
        QuantumAlgebra`QuantumAlgebra`KetArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], "\[RightAngleBracket]"}], 
     TagBox[
      AdjustmentBox[
       TagBox["q",
        QuantumAlgebra`QuantumAlgebra`KetArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0],
      QuantumAlgebra`QuantumAlgebra`UDScript,
      BaseStyle->"RIndex"]],
    QuantumAlgebra`QuantumAlgebra`Ket,
    BaseStyle->"KetWrapper"]}]}]], "Input",
 CellChangeTimes->{{3.444473009057*^9, 3.444473017611*^9}, {
  3.4444885441940002`*^9, 3.444488586922*^9}, {3.4444887068059998`*^9, 
  3.4444887150889997`*^9}, {3.4444887576210003`*^9, 3.444488762849*^9}, {
  3.444488910715*^9, 3.444488912271*^9}, {3.4444889887349997`*^9, 
  3.44448899204*^9}, {3.4444909668*^9, 3.4444910226549997`*^9}, {
  3.444491318501*^9, 3.444491318841*^9}, {3.44449140258*^9, 
  3.444491412159*^9}, {3.4452457835519457`*^9, 3.4452457850419455`*^9}, {
  3.5946333210170555`*^9, 3.594633333985798*^9}}],

Cell[BoxData[
 RowBox[{
  RowBox[{
   TagBox[
    RowBox[{"\[LeftAngleBracket]", 
     AdjustmentBox[
      TagBox[
       RowBox[{"\[Mu]", ",", 
        SubscriptBox["\[Nu]", "5"]}],
       QuantumAlgebra`QuantumAlgebra`BraArgs,
       BaseStyle->"BraKetArg"],
      BoxBaselineShift->0], 
     AdjustmentBox["\[VerticalSeparator]",
      BoxBaselineShift->-0.1,
      BoxMargins->{{0, -0.2}, {0, 0}}]}],
    QuantumAlgebra`QuantumAlgebra`Bra,
    BaseStyle->"BraWrapper"], "\[CircleTimes]", 
   TagBox[
    RowBox[{
     SubscriptBox["\[InvisiblePrefixScriptBase]", 
      TagBox[
       AdjustmentBox[
        TagBox["x",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"LIndex"]], 
     RowBox[{"\[LeftAngleBracket]", 
      AdjustmentBox[
       TagBox[
        RowBox[{
         SubscriptBox["\[Alpha]", "y"], ",", 
         SubscriptBox["\[Beta]", "k"]}],
        QuantumAlgebra`QuantumAlgebra`BraArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], 
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{0, -0.2}, {0, 0}}]}]}],
    QuantumAlgebra`QuantumAlgebra`Bra,
    BaseStyle->"BraWrapper"]}], "\[CenterDot]", 
  RowBox[{
   TagBox[
    RowBox[{
     AdjustmentBox["\[VerticalSeparator]",
      BoxBaselineShift->-0.1,
      BoxMargins->{{-0.2, 0}, {0, 0}}], 
     AdjustmentBox[
      TagBox[
       RowBox[{"\[Beta]", ",", 
        SubscriptBox["b", "3"]}],
       QuantumAlgebra`QuantumAlgebra`KetArgs,
       BaseStyle->"BraKetArg"],
      BoxBaselineShift->0], "\[RightAngleBracket]"}],
    QuantumAlgebra`QuantumAlgebra`Ket,
    BaseStyle->"KetWrapper"], "\[CircleTimes]", 
   TagBox[
    SubscriptBox[
     RowBox[{
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{-0.2, 0}, {0, 0}}], 
      AdjustmentBox[
       TagBox[
        RowBox[{
         SubscriptBox["\[Kappa]", "l"], ",", 
         SubscriptBox["\[Eta]", "j"]}],
        QuantumAlgebra`QuantumAlgebra`KetArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], "\[RightAngleBracket]"}], 
     TagBox[
      AdjustmentBox[
       TagBox["q",
        QuantumAlgebra`QuantumAlgebra`KetArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0],
      QuantumAlgebra`QuantumAlgebra`UDScript,
      BaseStyle->"RIndex"]],
    QuantumAlgebra`QuantumAlgebra`Ket,
    BaseStyle->"KetWrapper"]}]}]], "Output",
 CellChangeTimes->{3.4742399534266825`*^9, 3.594633334252813*^9}]
}, Open  ]],

Cell["\<\
Outer product representation of operartors can be written using the short \
tensor form. As before, if we make the non commutative product of two or more \
tensor operators, braketing can take place. Let's see some examples. \
\>", "Text",
 CellChangeTimes->{{3.444494674718*^9, 3.444494700332*^9}, {3.444494816759*^9,
    3.44449485502*^9}, {3.444494931325*^9, 3.444494965849*^9}, {
   3.444494996566*^9, 3.444495012113*^9}, {3.444495066258*^9, 
   3.4444950792799997`*^9}, {3.4452458659669456`*^9, 3.4452458753629456`*^9}, 
   3.5946333695198298`*^9}],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{
  RowBox[{"(", 
   RowBox[{
    TagBox[
     RowBox[{
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{-0.2, 0}, {0, 0}}], 
      AdjustmentBox[
       TagBox[
        RowBox[{
         SubscriptBox["\[Alpha]", "1"], ",", 
         SubscriptBox["\[Beta]", "2"]}],
        QuantumAlgebra`QuantumAlgebra`KetArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], "\[RightAngleBracket]"}],
     QuantumAlgebra`QuantumAlgebra`Ket,
     BaseStyle->"KetWrapper"], "\[CenterDot]", 
    TagBox[
     RowBox[{"\[LeftAngleBracket]", 
      AdjustmentBox[
       TagBox[
        RowBox[{
         SubscriptBox["\[Gamma]", "1"], ",", 
         SubscriptBox["\[Epsilon]", "2"]}],
        QuantumAlgebra`QuantumAlgebra`BraArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], 
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{0, -0.2}, {0, 0}}]}],
     QuantumAlgebra`QuantumAlgebra`Bra,
     BaseStyle->"BraWrapper"]}], ")"}], "\[CenterDot]", 
  RowBox[{"(", 
   RowBox[{
    TagBox[
     RowBox[{
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{-0.2, 0}, {0, 0}}], 
      AdjustmentBox[
       TagBox[
        RowBox[{
         SubscriptBox["\[CurlyEpsilon]", "1"], ",", 
         SubscriptBox["\[Zeta]", "2"]}],
        QuantumAlgebra`QuantumAlgebra`KetArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], "\[RightAngleBracket]"}],
     QuantumAlgebra`QuantumAlgebra`Ket,
     BaseStyle->"KetWrapper"], "\[CenterDot]", 
    TagBox[
     RowBox[{"\[LeftAngleBracket]", 
      AdjustmentBox[
       TagBox[
        RowBox[{
         SubscriptBox["\[Eta]", "1"], ",", 
         SubscriptBox["\[Theta]", "2"]}],
        QuantumAlgebra`QuantumAlgebra`BraArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], 
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{0, -0.2}, {0, 0}}]}],
     QuantumAlgebra`QuantumAlgebra`Bra,
     BaseStyle->"BraWrapper"]}], ")"}]}]], "Input",
 CellChangeTimes->{{3.444494876881*^9, 3.444494884916*^9}, {3.444495088027*^9,
   3.444495195601*^9}, {3.444495356446*^9, 3.4444953710480003`*^9}, {
  3.444495447352*^9, 3.444495450977*^9}, {3.594633371914967*^9, 
  3.594633381620522*^9}}],

Cell[BoxData[
 RowBox[{
  TagBox[
   RowBox[{"\[LeftAngleBracket]", 
    AdjustmentBox[
     RowBox[{
      TagBox[
       SubscriptBox["\[Gamma]", "1"],
       QuantumAlgebra`QuantumAlgebra`BraKetArgs,
       BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
      TagBox[
       SubscriptBox["\[CurlyEpsilon]", "1"],
       QuantumAlgebra`QuantumAlgebra`BraKetArgs,
       BaseStyle->"BraKetArg"]}],
     BoxBaselineShift->0], "\[RightAngleBracket]"}],
   QuantumAlgebra`QuantumAlgebra`Braket,
   BaseStyle->"BraKetWrapper"], " ", 
  TagBox[
   RowBox[{"\[LeftAngleBracket]", 
    AdjustmentBox[
     RowBox[{
      TagBox[
       SubscriptBox["\[Epsilon]", "2"],
       QuantumAlgebra`QuantumAlgebra`BraKetArgs,
       BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
      TagBox[
       SubscriptBox["\[Zeta]", "2"],
       QuantumAlgebra`QuantumAlgebra`BraKetArgs,
       BaseStyle->"BraKetArg"]}],
     BoxBaselineShift->0], "\[RightAngleBracket]"}],
   QuantumAlgebra`QuantumAlgebra`Braket,
   BaseStyle->"BraKetWrapper"], " ", 
  RowBox[{
   TagBox[
    RowBox[{
     AdjustmentBox["\[VerticalSeparator]",
      BoxBaselineShift->-0.1,
      BoxMargins->{{-0.2, 0}, {0, 0}}], 
     AdjustmentBox[
      TagBox[
       RowBox[{
        SubscriptBox["\[Alpha]", "1"], ",", 
        SubscriptBox["\[Beta]", "2"]}],
       QuantumAlgebra`QuantumAlgebra`KetArgs,
       BaseStyle->"BraKetArg"],
      BoxBaselineShift->0], "\[RightAngleBracket]"}],
    QuantumAlgebra`QuantumAlgebra`Ket,
    BaseStyle->"KetWrapper"], "\[CenterDot]", 
   TagBox[
    RowBox[{"\[LeftAngleBracket]", 
     AdjustmentBox[
      TagBox[
       RowBox[{
        SubscriptBox["\[Eta]", "1"], ",", 
        SubscriptBox["\[Theta]", "2"]}],
       QuantumAlgebra`QuantumAlgebra`BraArgs,
       BaseStyle->"BraKetArg"],
      BoxBaselineShift->0], 
     AdjustmentBox["\[VerticalSeparator]",
      BoxBaselineShift->-0.1,
      BoxMargins->{{0, -0.2}, {0, 0}}]}],
    QuantumAlgebra`QuantumAlgebra`Bra,
    BaseStyle->"BraWrapper"]}]}]], "Output",
 CellChangeTimes->{3.4742399555488043`*^9, 3.594633381904538*^9}]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{
  RowBox[{"(", 
   RowBox[{
    TagBox[
     RowBox[{
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{-0.2, 0}, {0, 0}}], 
      AdjustmentBox[
       TagBox[
        RowBox[{
         SubscriptBox["\[Alpha]", "1"], ",", 
         SubscriptBox["\[Beta]", "3"]}],
        QuantumAlgebra`QuantumAlgebra`KetArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], "\[RightAngleBracket]"}],
     QuantumAlgebra`QuantumAlgebra`Ket,
     BaseStyle->"KetWrapper"], "\[CenterDot]", 
    TagBox[
     RowBox[{"\[LeftAngleBracket]", 
      AdjustmentBox[
       TagBox[
        RowBox[{
         SubscriptBox["\[Gamma]", "1"], ",", 
         SubscriptBox["\[Epsilon]", "3"]}],
        QuantumAlgebra`QuantumAlgebra`BraArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], 
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{0, -0.2}, {0, 0}}]}],
     QuantumAlgebra`QuantumAlgebra`Bra,
     BaseStyle->"BraWrapper"]}], ")"}], "\[CenterDot]", 
  RowBox[{"(", 
   RowBox[{
    TagBox[
     RowBox[{
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{-0.2, 0}, {0, 0}}], 
      AdjustmentBox[
       TagBox[
        RowBox[{
         SubscriptBox["\[CurlyEpsilon]", "1"], ",", 
         SubscriptBox["\[Zeta]", "2"]}],
        QuantumAlgebra`QuantumAlgebra`KetArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], "\[RightAngleBracket]"}],
     QuantumAlgebra`QuantumAlgebra`Ket,
     BaseStyle->"KetWrapper"], "\[CenterDot]", 
    TagBox[
     RowBox[{"\[LeftAngleBracket]", 
      AdjustmentBox[
       TagBox[
        RowBox[{
         SubscriptBox["\[Eta]", "1"], ",", 
         SubscriptBox["\[Theta]", "2"]}],
        QuantumAlgebra`QuantumAlgebra`BraArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], 
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{0, -0.2}, {0, 0}}]}],
     QuantumAlgebra`QuantumAlgebra`Bra,
     BaseStyle->"BraWrapper"]}], ")"}]}]], "Input",
 CellChangeTimes->{{3.4444954776809998`*^9, 3.444495482123*^9}, {
  3.5946333847757025`*^9, 3.5946333942872467`*^9}}],

Cell[BoxData[
 RowBox[{
  TagBox[
   RowBox[{"\[LeftAngleBracket]", 
    AdjustmentBox[
     RowBox[{
      TagBox[
       SubscriptBox["\[Gamma]", "1"],
       QuantumAlgebra`QuantumAlgebra`BraKetArgs,
       BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
      TagBox[
       SubscriptBox["\[CurlyEpsilon]", "1"],
       QuantumAlgebra`QuantumAlgebra`BraKetArgs,
       BaseStyle->"BraKetArg"]}],
     BoxBaselineShift->0], "\[RightAngleBracket]"}],
   QuantumAlgebra`QuantumAlgebra`Braket,
   BaseStyle->"BraKetWrapper"], " ", 
  RowBox[{
   TagBox[
    RowBox[{
     AdjustmentBox["\[VerticalSeparator]",
      BoxBaselineShift->-0.1,
      BoxMargins->{{-0.2, 0}, {0, 0}}], 
     AdjustmentBox[
      TagBox[
       RowBox[{
        SubscriptBox["\[Alpha]", "1"], ",", 
        SubscriptBox["\[Zeta]", "2"], ",", 
        SubscriptBox["\[Beta]", "3"]}],
       QuantumAlgebra`QuantumAlgebra`KetArgs,
       BaseStyle->"BraKetArg"],
      BoxBaselineShift->0], "\[RightAngleBracket]"}],
    QuantumAlgebra`QuantumAlgebra`Ket,
    BaseStyle->"KetWrapper"], "\[CenterDot]", 
   TagBox[
    RowBox[{"\[LeftAngleBracket]", 
     AdjustmentBox[
      TagBox[
       RowBox[{
        SubscriptBox["\[Eta]", "1"], ",", 
        SubscriptBox["\[Theta]", "2"], ",", 
        SubscriptBox["\[Epsilon]", "3"]}],
       QuantumAlgebra`QuantumAlgebra`BraArgs,
       BaseStyle->"BraKetArg"],
      BoxBaselineShift->0], 
     AdjustmentBox["\[VerticalSeparator]",
      BoxBaselineShift->-0.1,
      BoxMargins->{{0, -0.2}, {0, 0}}]}],
    QuantumAlgebra`QuantumAlgebra`Bra,
    BaseStyle->"BraWrapper"]}]}]], "Output",
 CellChangeTimes->{3.474239956366851*^9, 3.594633396351365*^9}]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{
  RowBox[{"(", 
   RowBox[{
    TagBox[
     RowBox[{
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{-0.2, 0}, {0, 0}}], 
      AdjustmentBox[
       TagBox[
        RowBox[{
         SubscriptBox["\[Alpha]", "4"], ",", 
         SubscriptBox["\[Beta]", "3"]}],
        QuantumAlgebra`QuantumAlgebra`KetArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], "\[RightAngleBracket]"}],
     QuantumAlgebra`QuantumAlgebra`Ket,
     BaseStyle->"KetWrapper"], "\[CenterDot]", 
    TagBox[
     RowBox[{"\[LeftAngleBracket]", 
      AdjustmentBox[
       TagBox[
        RowBox[{
         SubscriptBox["\[Gamma]", "4"], ",", 
         SubscriptBox["\[Epsilon]", "3"]}],
        QuantumAlgebra`QuantumAlgebra`BraArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], 
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{0, -0.2}, {0, 0}}]}],
     QuantumAlgebra`QuantumAlgebra`Bra,
     BaseStyle->"BraWrapper"]}], ")"}], "\[CenterDot]", 
  RowBox[{"(", 
   RowBox[{
    TagBox[
     RowBox[{
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{-0.2, 0}, {0, 0}}], 
      AdjustmentBox[
       TagBox[
        RowBox[{
         SubscriptBox["\[CurlyEpsilon]", "1"], ",", 
         SubscriptBox["\[Zeta]", "2"]}],
        QuantumAlgebra`QuantumAlgebra`KetArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], "\[RightAngleBracket]"}],
     QuantumAlgebra`QuantumAlgebra`Ket,
     BaseStyle->"KetWrapper"], "\[CenterDot]", 
    TagBox[
     RowBox[{"\[LeftAngleBracket]", 
      AdjustmentBox[
       TagBox[
        RowBox[{
         SubscriptBox["\[Eta]", "1"], ",", 
         SubscriptBox["\[Theta]", "2"]}],
        QuantumAlgebra`QuantumAlgebra`BraArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], 
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{0, -0.2}, {0, 0}}]}],
     QuantumAlgebra`QuantumAlgebra`Bra,
     BaseStyle->"BraWrapper"]}], ")"}]}]], "Input",
 CellChangeTimes->{{3.444495522389*^9, 3.444495525509*^9}, {
  3.594633408227044*^9, 3.594633416564521*^9}}],

Cell[BoxData[
 RowBox[{
  TagBox[
   RowBox[{
    AdjustmentBox["\[VerticalSeparator]",
     BoxBaselineShift->-0.1,
     BoxMargins->{{-0.2, 0}, {0, 0}}], 
    AdjustmentBox[
     TagBox[
      RowBox[{
       SubscriptBox["\[CurlyEpsilon]", "1"], ",", 
       SubscriptBox["\[Zeta]", "2"], ",", 
       SubscriptBox["\[Beta]", "3"], ",", 
       SubscriptBox["\[Alpha]", "4"]}],
      QuantumAlgebra`QuantumAlgebra`KetArgs,
      BaseStyle->"BraKetArg"],
     BoxBaselineShift->0], "\[RightAngleBracket]"}],
   QuantumAlgebra`QuantumAlgebra`Ket,
   BaseStyle->"KetWrapper"], "\[CenterDot]", 
  TagBox[
   RowBox[{"\[LeftAngleBracket]", 
    AdjustmentBox[
     TagBox[
      RowBox[{
       SubscriptBox["\[Eta]", "1"], ",", 
       SubscriptBox["\[Theta]", "2"], ",", 
       SubscriptBox["\[Epsilon]", "3"], ",", 
       SubscriptBox["\[Gamma]", "4"]}],
      QuantumAlgebra`QuantumAlgebra`BraArgs,
      BaseStyle->"BraKetArg"],
     BoxBaselineShift->0], 
    AdjustmentBox["\[VerticalSeparator]",
     BoxBaselineShift->-0.1,
     BoxMargins->{{0, -0.2}, {0, 0}}]}],
   QuantumAlgebra`QuantumAlgebra`Bra,
   BaseStyle->"BraWrapper"]}]], "Output",
 CellChangeTimes->{3.474239957147896*^9, 3.594633416829536*^9}]
}, Open  ]],

Cell["\<\
In all cases the result is a new tensor operator written in its outer form. \
In the first example two brakets has been simplified and the result is a 2 \
rank tensor operator. In the second case, only one match is possible and the \
result is a 3 rank tensor operator. In the last case, there is no matching \
and the result is essentially the same, but has been written as a 4 rank \
tensor operator.  In this case the result is the same if we compute the \
tensor product of both operators:\
\>", "Text",
 CellChangeTimes->{{3.4442349225*^9, 3.4442349385220003`*^9}, {
   3.444234993856*^9, 3.444235028273*^9}, 3.444236440842*^9, {
   3.444246798557*^9, 3.444247035811*^9}, {3.4442473370620003`*^9, 
   3.4442473430629997`*^9}, {3.444247384594*^9, 3.444247403909*^9}, {
   3.444247438422*^9, 3.444247475071*^9}, {3.444247517374*^9, 
   3.4442475196540003`*^9}, {3.4442475783789997`*^9, 3.444247581238*^9}, {
   3.444247683613*^9, 3.4442476841210003`*^9}, {3.444247729227*^9, 
   3.444247760023*^9}, {3.4442958460555506`*^9, 3.4442958717965508`*^9}, 
   3.444303367568*^9, {3.444303935866*^9, 3.4443039648789997`*^9}, {
   3.4443082806359997`*^9, 3.444308301741*^9}, {3.444308464531*^9, 
   3.444308490216*^9}, {3.444309019499*^9, 3.444309132869*^9}, {
   3.444309172262*^9, 3.444309188049*^9}, {3.44430928763*^9, 
   3.4443094138780003`*^9}, {3.444309472855*^9, 3.444309509163*^9}}],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{
  RowBox[{"(", 
   RowBox[{
    TagBox[
     RowBox[{
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{-0.2, 0}, {0, 0}}], 
      AdjustmentBox[
       TagBox[
        RowBox[{
         SubscriptBox["\[Alpha]", "4"], ",", 
         SubscriptBox["\[Beta]", "3"]}],
        QuantumAlgebra`QuantumAlgebra`KetArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], "\[RightAngleBracket]"}],
     QuantumAlgebra`QuantumAlgebra`Ket,
     BaseStyle->"KetWrapper"], "\[CenterDot]", 
    TagBox[
     RowBox[{"\[LeftAngleBracket]", 
      AdjustmentBox[
       TagBox[
        RowBox[{
         SubscriptBox["\[Gamma]", "4"], ",", 
         SubscriptBox["\[Epsilon]", "3"]}],
        QuantumAlgebra`QuantumAlgebra`BraArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], 
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{0, -0.2}, {0, 0}}]}],
     QuantumAlgebra`QuantumAlgebra`Bra,
     BaseStyle->"BraWrapper"]}], ")"}], "\[CircleTimes]", 
  RowBox[{"(", 
   RowBox[{
    TagBox[
     RowBox[{
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{-0.2, 0}, {0, 0}}], 
      AdjustmentBox[
       TagBox[
        RowBox[{
         SubscriptBox["\[CurlyEpsilon]", "1"], ",", 
         SubscriptBox["\[Zeta]", "2"]}],
        QuantumAlgebra`QuantumAlgebra`KetArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], "\[RightAngleBracket]"}],
     QuantumAlgebra`QuantumAlgebra`Ket,
     BaseStyle->"KetWrapper"], "\[CenterDot]", 
    TagBox[
     RowBox[{"\[LeftAngleBracket]", 
      AdjustmentBox[
       TagBox[
        RowBox[{
         SubscriptBox["\[Eta]", "1"], ",", 
         SubscriptBox["\[Theta]", "2"]}],
        QuantumAlgebra`QuantumAlgebra`BraArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], 
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{0, -0.2}, {0, 0}}]}],
     QuantumAlgebra`QuantumAlgebra`Bra,
     BaseStyle->"BraWrapper"]}], ")"}]}]], "Input",
 CellChangeTimes->{{3.444495522389*^9, 3.4444955589110003`*^9}, {
  3.5946334663643694`*^9, 3.5946334767369623`*^9}}],

Cell[BoxData[
 RowBox[{
  TagBox[
   RowBox[{
    AdjustmentBox["\[VerticalSeparator]",
     BoxBaselineShift->-0.1,
     BoxMargins->{{-0.2, 0}, {0, 0}}], 
    AdjustmentBox[
     TagBox[
      RowBox[{
       SubscriptBox["\[CurlyEpsilon]", "1"], ",", 
       SubscriptBox["\[Zeta]", "2"], ",", 
       SubscriptBox["\[Beta]", "3"], ",", 
       SubscriptBox["\[Alpha]", "4"]}],
      QuantumAlgebra`QuantumAlgebra`KetArgs,
      BaseStyle->"BraKetArg"],
     BoxBaselineShift->0], "\[RightAngleBracket]"}],
   QuantumAlgebra`QuantumAlgebra`Ket,
   BaseStyle->"KetWrapper"], "\[CenterDot]", 
  TagBox[
   RowBox[{"\[LeftAngleBracket]", 
    AdjustmentBox[
     TagBox[
      RowBox[{
       SubscriptBox["\[Eta]", "1"], ",", 
       SubscriptBox["\[Theta]", "2"], ",", 
       SubscriptBox["\[Epsilon]", "3"], ",", 
       SubscriptBox["\[Gamma]", "4"]}],
      QuantumAlgebra`QuantumAlgebra`BraArgs,
      BaseStyle->"BraKetArg"],
     BoxBaselineShift->0], 
    AdjustmentBox["\[VerticalSeparator]",
     BoxBaselineShift->-0.1,
     BoxMargins->{{0, -0.2}, {0, 0}}]}],
   QuantumAlgebra`QuantumAlgebra`Bra,
   BaseStyle->"BraWrapper"]}]], "Output",
 CellChangeTimes->{3.4742399603540792`*^9, 3.5946334770059776`*^9}]
}, Open  ]],

Cell["\<\
We can take the non commutaive product of several operators. Note that \
parenthize is not really necesary.\
\>", "Text",
 CellChangeTimes->{{3.4442349225*^9, 3.4442349385220003`*^9}, {
   3.444234993856*^9, 3.444235028273*^9}, 3.444236440842*^9, {
   3.444246798557*^9, 3.444247035811*^9}, {3.4442473370620003`*^9, 
   3.4442473430629997`*^9}, {3.444247384594*^9, 3.444247403909*^9}, {
   3.444247438422*^9, 3.444247475071*^9}, {3.444247517374*^9, 
   3.4442475196540003`*^9}, {3.4442475783789997`*^9, 3.444247581238*^9}, {
   3.444247683613*^9, 3.4442476841210003`*^9}, {3.444247729227*^9, 
   3.444247760023*^9}, {3.4442958460555506`*^9, 3.4442958717965508`*^9}, {
   3.444303367568*^9, 3.444303385689*^9}, {3.44430967846*^9, 
   3.444309693646*^9}, {3.4452476708209457`*^9, 3.4452476816219454`*^9}, {
   3.5946335048815722`*^9, 3.594633506676675*^9}}],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{
  RowBox[{"(", 
   RowBox[{
    TagBox[
     RowBox[{
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{-0.2, 0}, {0, 0}}], 
      AdjustmentBox[
       TagBox[
        RowBox[{
         SubscriptBox["\[Alpha]", "1"], ",", 
         SubscriptBox["\[Beta]", "2"]}],
        QuantumAlgebra`QuantumAlgebra`KetArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], "\[RightAngleBracket]"}],
     QuantumAlgebra`QuantumAlgebra`Ket,
     BaseStyle->"KetWrapper"], "\[CenterDot]", 
    TagBox[
     RowBox[{"\[LeftAngleBracket]", 
      AdjustmentBox[
       TagBox[
        RowBox[{
         SubscriptBox["\[Gamma]", "1"], ",", 
         SubscriptBox["\[Epsilon]", "2"]}],
        QuantumAlgebra`QuantumAlgebra`BraArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], 
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{0, -0.2}, {0, 0}}]}],
     QuantumAlgebra`QuantumAlgebra`Bra,
     BaseStyle->"BraWrapper"]}], ")"}], "\[CenterDot]", 
  RowBox[{"(", 
   RowBox[{
    TagBox[
     RowBox[{
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{-0.2, 0}, {0, 0}}], 
      AdjustmentBox[
       TagBox[
        RowBox[{
         SubscriptBox["\[CurlyEpsilon]", "1"], ",", 
         SubscriptBox["\[Zeta]", "3"]}],
        QuantumAlgebra`QuantumAlgebra`KetArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], "\[RightAngleBracket]"}],
     QuantumAlgebra`QuantumAlgebra`Ket,
     BaseStyle->"KetWrapper"], "\[CenterDot]", 
    TagBox[
     RowBox[{"\[LeftAngleBracket]", 
      AdjustmentBox[
       TagBox[
        RowBox[{
         SubscriptBox["\[Eta]", "1"], ",", 
         SubscriptBox["\[Theta]", "3"]}],
        QuantumAlgebra`QuantumAlgebra`BraArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], 
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{0, -0.2}, {0, 0}}]}],
     QuantumAlgebra`QuantumAlgebra`Bra,
     BaseStyle->"BraWrapper"]}], ")"}], "\[CenterDot]", 
  RowBox[{"(", 
   RowBox[{
    TagBox[
     RowBox[{
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{-0.2, 0}, {0, 0}}], 
      AdjustmentBox[
       TagBox[
        RowBox[{
         SubscriptBox["\[CurlyEpsilon]", "2"], ",", 
         SubscriptBox["\[Zeta]", "3"]}],
        QuantumAlgebra`QuantumAlgebra`KetArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], "\[RightAngleBracket]"}],
     QuantumAlgebra`QuantumAlgebra`Ket,
     BaseStyle->"KetWrapper"], "\[CenterDot]", 
    TagBox[
     RowBox[{"\[LeftAngleBracket]", 
      AdjustmentBox[
       TagBox[
        RowBox[{
         SubscriptBox["\[Eta]", "2"], ",", 
         SubscriptBox["\[Theta]", "3"]}],
        QuantumAlgebra`QuantumAlgebra`BraArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], 
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{0, -0.2}, {0, 0}}]}],
     QuantumAlgebra`QuantumAlgebra`Bra,
     BaseStyle->"BraWrapper"]}], ")"}]}]], "Input",
 CellChangeTimes->{{3.444494876881*^9, 3.444494884916*^9}, {3.444495088027*^9,
   3.444495195601*^9}, {3.444495356446*^9, 3.4444953710480003`*^9}, {
  3.444495447352*^9, 3.444495450977*^9}, {3.444495689203*^9, 
  3.444495759994*^9}, {3.444495796757*^9, 3.444495807026*^9}, {
  3.444495881126*^9, 3.444495881436*^9}, {3.5946334839623756`*^9, 
  3.594633494235963*^9}}],

Cell[BoxData[
 RowBox[{
  TagBox[
   RowBox[{"\[LeftAngleBracket]", 
    AdjustmentBox[
     RowBox[{
      TagBox[
       SubscriptBox["\[Gamma]", "1"],
       QuantumAlgebra`QuantumAlgebra`BraKetArgs,
       BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
      TagBox[
       SubscriptBox["\[CurlyEpsilon]", "1"],
       QuantumAlgebra`QuantumAlgebra`BraKetArgs,
       BaseStyle->"BraKetArg"]}],
     BoxBaselineShift->0], "\[RightAngleBracket]"}],
   QuantumAlgebra`QuantumAlgebra`Braket,
   BaseStyle->"BraKetWrapper"], " ", 
  TagBox[
   RowBox[{"\[LeftAngleBracket]", 
    AdjustmentBox[
     RowBox[{
      TagBox[
       SubscriptBox["\[Epsilon]", "2"],
       QuantumAlgebra`QuantumAlgebra`BraKetArgs,
       BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
      TagBox[
       SubscriptBox["\[CurlyEpsilon]", "2"],
       QuantumAlgebra`QuantumAlgebra`BraKetArgs,
       BaseStyle->"BraKetArg"]}],
     BoxBaselineShift->0], "\[RightAngleBracket]"}],
   QuantumAlgebra`QuantumAlgebra`Braket,
   BaseStyle->"BraKetWrapper"], " ", 
  TagBox[
   RowBox[{"\[LeftAngleBracket]", 
    AdjustmentBox[
     RowBox[{
      TagBox[
       SubscriptBox["\[Theta]", "3"],
       QuantumAlgebra`QuantumAlgebra`BraKetArgs,
       BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
      TagBox[
       SubscriptBox["\[Zeta]", "3"],
       QuantumAlgebra`QuantumAlgebra`BraKetArgs,
       BaseStyle->"BraKetArg"]}],
     BoxBaselineShift->0], "\[RightAngleBracket]"}],
   QuantumAlgebra`QuantumAlgebra`Braket,
   BaseStyle->"BraKetWrapper"], " ", 
  RowBox[{
   TagBox[
    RowBox[{
     AdjustmentBox["\[VerticalSeparator]",
      BoxBaselineShift->-0.1,
      BoxMargins->{{-0.2, 0}, {0, 0}}], 
     AdjustmentBox[
      TagBox[
       RowBox[{
        SubscriptBox["\[Alpha]", "1"], ",", 
        SubscriptBox["\[Beta]", "2"], ",", 
        SubscriptBox["\[Zeta]", "3"]}],
       QuantumAlgebra`QuantumAlgebra`KetArgs,
       BaseStyle->"BraKetArg"],
      BoxBaselineShift->0], "\[RightAngleBracket]"}],
    QuantumAlgebra`QuantumAlgebra`Ket,
    BaseStyle->"KetWrapper"], "\[CenterDot]", 
   TagBox[
    RowBox[{"\[LeftAngleBracket]", 
     AdjustmentBox[
      TagBox[
       RowBox[{
        SubscriptBox["\[Eta]", "1"], ",", 
        SubscriptBox["\[Eta]", "2"], ",", 
        SubscriptBox["\[Theta]", "3"]}],
       QuantumAlgebra`QuantumAlgebra`BraArgs,
       BaseStyle->"BraKetArg"],
      BoxBaselineShift->0], 
     AdjustmentBox["\[VerticalSeparator]",
      BoxBaselineShift->-0.1,
      BoxMargins->{{0, -0.2}, {0, 0}}]}],
    QuantumAlgebra`QuantumAlgebra`Bra,
    BaseStyle->"BraWrapper"]}]}]], "Output",
 CellChangeTimes->{3.474239964320306*^9, 3.594633494735992*^9}]
}, Open  ]],

Cell["\<\
Here is a more complex calculation in which the linear properties of the non \
commutative product are used together with the braketing rules to somplify \
the expression.\
\>", "Text",
 CellChangeTimes->{{3.4443034068900003`*^9, 3.4443034176099997`*^9}, {
  3.444319812027*^9, 3.444319812992*^9}, {3.4452476979539456`*^9, 
  3.445247734778946*^9}}],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{
  SuperscriptBox[
   RowBox[{"(", 
    RowBox[{
     RowBox[{
      TagBox[
       RowBox[{
        AdjustmentBox["\[VerticalSeparator]",
         BoxBaselineShift->-0.1,
         BoxMargins->{{-0.2, 0}, {0, 0}}], 
        AdjustmentBox[
         TagBox[
          RowBox[{
           SubscriptBox["\[Alpha]", "1"], ",", 
           SubscriptBox["\[Beta]", "2"]}],
          QuantumAlgebra`QuantumAlgebra`KetArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0], "\[RightAngleBracket]"}],
       QuantumAlgebra`QuantumAlgebra`Ket,
       BaseStyle->"KetWrapper"], "\[CenterDot]", 
      TagBox[
       RowBox[{"\[LeftAngleBracket]", 
        AdjustmentBox[
         TagBox[
          RowBox[{
           SubscriptBox["\[Gamma]", "1"], ",", 
           SubscriptBox["\[Epsilon]", "2"]}],
          QuantumAlgebra`QuantumAlgebra`BraArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0], 
        AdjustmentBox["\[VerticalSeparator]",
         BoxBaselineShift->-0.1,
         BoxMargins->{{0, -0.2}, {0, 0}}]}],
       QuantumAlgebra`QuantumAlgebra`Bra,
       BaseStyle->"BraWrapper"]}], "+", 
     RowBox[{
      TagBox[
       RowBox[{
        AdjustmentBox["\[VerticalSeparator]",
         BoxBaselineShift->-0.1,
         BoxMargins->{{-0.2, 0}, {0, 0}}], 
        AdjustmentBox[
         TagBox[
          RowBox[{
           SubscriptBox["\[CurlyEpsilon]", "1"], ",", 
           SubscriptBox["\[Zeta]", "2"]}],
          QuantumAlgebra`QuantumAlgebra`KetArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0], "\[RightAngleBracket]"}],
       QuantumAlgebra`QuantumAlgebra`Ket,
       BaseStyle->"KetWrapper"], "\[CenterDot]", 
      TagBox[
       RowBox[{"\[LeftAngleBracket]", 
        AdjustmentBox[
         TagBox[
          RowBox[{
           SubscriptBox["\[Eta]", "1"], ",", 
           SubscriptBox["\[Theta]", "2"]}],
          QuantumAlgebra`QuantumAlgebra`BraArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0], 
        AdjustmentBox["\[VerticalSeparator]",
         BoxBaselineShift->-0.1,
         BoxMargins->{{0, -0.2}, {0, 0}}]}],
       QuantumAlgebra`QuantumAlgebra`Bra,
       BaseStyle->"BraWrapper"]}]}], ")"}], "3"], "//", 
  "QAPowerExpand"}]], "Input",
 CellChangeTimes->{{3.444495851377*^9, 3.444495925481*^9}, {
  3.594633517133273*^9, 3.594633535775339*^9}}],

Cell[BoxData[
 RowBox[{
  RowBox[{
   SuperscriptBox[
    TagBox[
     RowBox[{"\[LeftAngleBracket]", 
      AdjustmentBox[
       RowBox[{
        TagBox[
         SubscriptBox["\[Gamma]", "1"],
         QuantumAlgebra`QuantumAlgebra`BraKetArgs,
         BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
        TagBox[
         SubscriptBox["\[Alpha]", "1"],
         QuantumAlgebra`QuantumAlgebra`BraKetArgs,
         BaseStyle->"BraKetArg"]}],
       BoxBaselineShift->0], "\[RightAngleBracket]"}],
     QuantumAlgebra`QuantumAlgebra`Braket,
     BaseStyle->"BraKetWrapper"], "2"], " ", 
   SuperscriptBox[
    TagBox[
     RowBox[{"\[LeftAngleBracket]", 
      AdjustmentBox[
       RowBox[{
        TagBox[
         SubscriptBox["\[Epsilon]", "2"],
         QuantumAlgebra`QuantumAlgebra`BraKetArgs,
         BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
        TagBox[
         SubscriptBox["\[Beta]", "2"],
         QuantumAlgebra`QuantumAlgebra`BraKetArgs,
         BaseStyle->"BraKetArg"]}],
       BoxBaselineShift->0], "\[RightAngleBracket]"}],
     QuantumAlgebra`QuantumAlgebra`Braket,
     BaseStyle->"BraKetWrapper"], "2"], " ", 
   RowBox[{
    TagBox[
     RowBox[{
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{-0.2, 0}, {0, 0}}], 
      AdjustmentBox[
       TagBox[
        RowBox[{
         SubscriptBox["\[Alpha]", "1"], ",", 
         SubscriptBox["\[Beta]", "2"]}],
        QuantumAlgebra`QuantumAlgebra`KetArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], "\[RightAngleBracket]"}],
     QuantumAlgebra`QuantumAlgebra`Ket,
     BaseStyle->"KetWrapper"], "\[CenterDot]", 
    TagBox[
     RowBox[{"\[LeftAngleBracket]", 
      AdjustmentBox[
       TagBox[
        RowBox[{
         SubscriptBox["\[Gamma]", "1"], ",", 
         SubscriptBox["\[Epsilon]", "2"]}],
        QuantumAlgebra`QuantumAlgebra`BraArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], 
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{0, -0.2}, {0, 0}}]}],
     QuantumAlgebra`QuantumAlgebra`Bra,
     BaseStyle->"BraWrapper"]}]}], "+", 
  RowBox[{
   TagBox[
    RowBox[{"\[LeftAngleBracket]", 
     AdjustmentBox[
      RowBox[{
       TagBox[
        SubscriptBox["\[Gamma]", "1"],
        QuantumAlgebra`QuantumAlgebra`BraKetArgs,
        BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
       TagBox[
        SubscriptBox["\[CurlyEpsilon]", "1"],
        QuantumAlgebra`QuantumAlgebra`BraKetArgs,
        BaseStyle->"BraKetArg"]}],
      BoxBaselineShift->0], "\[RightAngleBracket]"}],
    QuantumAlgebra`QuantumAlgebra`Braket,
    BaseStyle->"BraKetWrapper"], " ", 
   TagBox[
    RowBox[{"\[LeftAngleBracket]", 
     AdjustmentBox[
      RowBox[{
       TagBox[
        SubscriptBox["\[Epsilon]", "2"],
        QuantumAlgebra`QuantumAlgebra`BraKetArgs,
        BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
       TagBox[
        SubscriptBox["\[Zeta]", "2"],
        QuantumAlgebra`QuantumAlgebra`BraKetArgs,
        BaseStyle->"BraKetArg"]}],
      BoxBaselineShift->0], "\[RightAngleBracket]"}],
    QuantumAlgebra`QuantumAlgebra`Braket,
    BaseStyle->"BraKetWrapper"], " ", 
   TagBox[
    RowBox[{"\[LeftAngleBracket]", 
     AdjustmentBox[
      RowBox[{
       TagBox[
        SubscriptBox["\[Eta]", "1"],
        QuantumAlgebra`QuantumAlgebra`BraKetArgs,
        BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
       TagBox[
        SubscriptBox["\[Alpha]", "1"],
        QuantumAlgebra`QuantumAlgebra`BraKetArgs,
        BaseStyle->"BraKetArg"]}],
      BoxBaselineShift->0], "\[RightAngleBracket]"}],
    QuantumAlgebra`QuantumAlgebra`Braket,
    BaseStyle->"BraKetWrapper"], " ", 
   TagBox[
    RowBox[{"\[LeftAngleBracket]", 
     AdjustmentBox[
      RowBox[{
       TagBox[
        SubscriptBox["\[Theta]", "2"],
        QuantumAlgebra`QuantumAlgebra`BraKetArgs,
        BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
       TagBox[
        SubscriptBox["\[Beta]", "2"],
        QuantumAlgebra`QuantumAlgebra`BraKetArgs,
        BaseStyle->"BraKetArg"]}],
      BoxBaselineShift->0], "\[RightAngleBracket]"}],
    QuantumAlgebra`QuantumAlgebra`Braket,
    BaseStyle->"BraKetWrapper"], " ", 
   RowBox[{
    TagBox[
     RowBox[{
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{-0.2, 0}, {0, 0}}], 
      AdjustmentBox[
       TagBox[
        RowBox[{
         SubscriptBox["\[Alpha]", "1"], ",", 
         SubscriptBox["\[Beta]", "2"]}],
        QuantumAlgebra`QuantumAlgebra`KetArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], "\[RightAngleBracket]"}],
     QuantumAlgebra`QuantumAlgebra`Ket,
     BaseStyle->"KetWrapper"], "\[CenterDot]", 
    TagBox[
     RowBox[{"\[LeftAngleBracket]", 
      AdjustmentBox[
       TagBox[
        RowBox[{
         SubscriptBox["\[Gamma]", "1"], ",", 
         SubscriptBox["\[Epsilon]", "2"]}],
        QuantumAlgebra`QuantumAlgebra`BraArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], 
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{0, -0.2}, {0, 0}}]}],
     QuantumAlgebra`QuantumAlgebra`Bra,
     BaseStyle->"BraWrapper"]}]}], "+", 
  RowBox[{
   TagBox[
    RowBox[{"\[LeftAngleBracket]", 
     AdjustmentBox[
      RowBox[{
       TagBox[
        SubscriptBox["\[Gamma]", "1"],
        QuantumAlgebra`QuantumAlgebra`BraKetArgs,
        BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
       TagBox[
        SubscriptBox["\[Alpha]", "1"],
        QuantumAlgebra`QuantumAlgebra`BraKetArgs,
        BaseStyle->"BraKetArg"]}],
      BoxBaselineShift->0], "\[RightAngleBracket]"}],
    QuantumAlgebra`QuantumAlgebra`Braket,
    BaseStyle->"BraKetWrapper"], " ", 
   TagBox[
    RowBox[{"\[LeftAngleBracket]", 
     AdjustmentBox[
      RowBox[{
       TagBox[
        SubscriptBox["\[Gamma]", "1"],
        QuantumAlgebra`QuantumAlgebra`BraKetArgs,
        BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
       TagBox[
        SubscriptBox["\[CurlyEpsilon]", "1"],
        QuantumAlgebra`QuantumAlgebra`BraKetArgs,
        BaseStyle->"BraKetArg"]}],
      BoxBaselineShift->0], "\[RightAngleBracket]"}],
    QuantumAlgebra`QuantumAlgebra`Braket,
    BaseStyle->"BraKetWrapper"], " ", 
   TagBox[
    RowBox[{"\[LeftAngleBracket]", 
     AdjustmentBox[
      RowBox[{
       TagBox[
        SubscriptBox["\[Epsilon]", "2"],
        QuantumAlgebra`QuantumAlgebra`BraKetArgs,
        BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
       TagBox[
        SubscriptBox["\[Beta]", "2"],
        QuantumAlgebra`QuantumAlgebra`BraKetArgs,
        BaseStyle->"BraKetArg"]}],
      BoxBaselineShift->0], "\[RightAngleBracket]"}],
    QuantumAlgebra`QuantumAlgebra`Braket,
    BaseStyle->"BraKetWrapper"], " ", 
   TagBox[
    RowBox[{"\[LeftAngleBracket]", 
     AdjustmentBox[
      RowBox[{
       TagBox[
        SubscriptBox["\[Epsilon]", "2"],
        QuantumAlgebra`QuantumAlgebra`BraKetArgs,
        BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
       TagBox[
        SubscriptBox["\[Zeta]", "2"],
        QuantumAlgebra`QuantumAlgebra`BraKetArgs,
        BaseStyle->"BraKetArg"]}],
      BoxBaselineShift->0], "\[RightAngleBracket]"}],
    QuantumAlgebra`QuantumAlgebra`Braket,
    BaseStyle->"BraKetWrapper"], " ", 
   RowBox[{
    TagBox[
     RowBox[{
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{-0.2, 0}, {0, 0}}], 
      AdjustmentBox[
       TagBox[
        RowBox[{
         SubscriptBox["\[Alpha]", "1"], ",", 
         SubscriptBox["\[Beta]", "2"]}],
        QuantumAlgebra`QuantumAlgebra`KetArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], "\[RightAngleBracket]"}],
     QuantumAlgebra`QuantumAlgebra`Ket,
     BaseStyle->"KetWrapper"], "\[CenterDot]", 
    TagBox[
     RowBox[{"\[LeftAngleBracket]", 
      AdjustmentBox[
       TagBox[
        RowBox[{
         SubscriptBox["\[Eta]", "1"], ",", 
         SubscriptBox["\[Theta]", "2"]}],
        QuantumAlgebra`QuantumAlgebra`BraArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], 
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{0, -0.2}, {0, 0}}]}],
     QuantumAlgebra`QuantumAlgebra`Bra,
     BaseStyle->"BraWrapper"]}]}], "+", 
  RowBox[{
   TagBox[
    RowBox[{"\[LeftAngleBracket]", 
     AdjustmentBox[
      RowBox[{
       TagBox[
        SubscriptBox["\[Gamma]", "1"],
        QuantumAlgebra`QuantumAlgebra`BraKetArgs,
        BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
       TagBox[
        SubscriptBox["\[CurlyEpsilon]", "1"],
        QuantumAlgebra`QuantumAlgebra`BraKetArgs,
        BaseStyle->"BraKetArg"]}],
      BoxBaselineShift->0], "\[RightAngleBracket]"}],
    QuantumAlgebra`QuantumAlgebra`Braket,
    BaseStyle->"BraKetWrapper"], " ", 
   TagBox[
    RowBox[{"\[LeftAngleBracket]", 
     AdjustmentBox[
      RowBox[{
       TagBox[
        SubscriptBox["\[Epsilon]", "2"],
        QuantumAlgebra`QuantumAlgebra`BraKetArgs,
        BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
       TagBox[
        SubscriptBox["\[Zeta]", "2"],
        QuantumAlgebra`QuantumAlgebra`BraKetArgs,
        BaseStyle->"BraKetArg"]}],
      BoxBaselineShift->0], "\[RightAngleBracket]"}],
    QuantumAlgebra`QuantumAlgebra`Braket,
    BaseStyle->"BraKetWrapper"], " ", 
   TagBox[
    RowBox[{"\[LeftAngleBracket]", 
     AdjustmentBox[
      RowBox[{
       TagBox[
        SubscriptBox["\[Eta]", "1"],
        QuantumAlgebra`QuantumAlgebra`BraKetArgs,
        BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
       TagBox[
        SubscriptBox["\[CurlyEpsilon]", "1"],
        QuantumAlgebra`QuantumAlgebra`BraKetArgs,
        BaseStyle->"BraKetArg"]}],
      BoxBaselineShift->0], "\[RightAngleBracket]"}],
    QuantumAlgebra`QuantumAlgebra`Braket,
    BaseStyle->"BraKetWrapper"], " ", 
   TagBox[
    RowBox[{"\[LeftAngleBracket]", 
     AdjustmentBox[
      RowBox[{
       TagBox[
        SubscriptBox["\[Theta]", "2"],
        QuantumAlgebra`QuantumAlgebra`BraKetArgs,
        BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
       TagBox[
        SubscriptBox["\[Zeta]", "2"],
        QuantumAlgebra`QuantumAlgebra`BraKetArgs,
        BaseStyle->"BraKetArg"]}],
      BoxBaselineShift->0], "\[RightAngleBracket]"}],
    QuantumAlgebra`QuantumAlgebra`Braket,
    BaseStyle->"BraKetWrapper"], " ", 
   RowBox[{
    TagBox[
     RowBox[{
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{-0.2, 0}, {0, 0}}], 
      AdjustmentBox[
       TagBox[
        RowBox[{
         SubscriptBox["\[Alpha]", "1"], ",", 
         SubscriptBox["\[Beta]", "2"]}],
        QuantumAlgebra`QuantumAlgebra`KetArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], "\[RightAngleBracket]"}],
     QuantumAlgebra`QuantumAlgebra`Ket,
     BaseStyle->"KetWrapper"], "\[CenterDot]", 
    TagBox[
     RowBox[{"\[LeftAngleBracket]", 
      AdjustmentBox[
       TagBox[
        RowBox[{
         SubscriptBox["\[Eta]", "1"], ",", 
         SubscriptBox["\[Theta]", "2"]}],
        QuantumAlgebra`QuantumAlgebra`BraArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], 
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{0, -0.2}, {0, 0}}]}],
     QuantumAlgebra`QuantumAlgebra`Bra,
     BaseStyle->"BraWrapper"]}]}], "+", 
  RowBox[{
   TagBox[
    RowBox[{"\[LeftAngleBracket]", 
     AdjustmentBox[
      RowBox[{
       TagBox[
        SubscriptBox["\[Gamma]", "1"],
        QuantumAlgebra`QuantumAlgebra`BraKetArgs,
        BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
       TagBox[
        SubscriptBox["\[Alpha]", "1"],
        QuantumAlgebra`QuantumAlgebra`BraKetArgs,
        BaseStyle->"BraKetArg"]}],
      BoxBaselineShift->0], "\[RightAngleBracket]"}],
    QuantumAlgebra`QuantumAlgebra`Braket,
    BaseStyle->"BraKetWrapper"], " ", 
   TagBox[
    RowBox[{"\[LeftAngleBracket]", 
     AdjustmentBox[
      RowBox[{
       TagBox[
        SubscriptBox["\[Epsilon]", "2"],
        QuantumAlgebra`QuantumAlgebra`BraKetArgs,
        BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
       TagBox[
        SubscriptBox["\[Beta]", "2"],
        QuantumAlgebra`QuantumAlgebra`BraKetArgs,
        BaseStyle->"BraKetArg"]}],
      BoxBaselineShift->0], "\[RightAngleBracket]"}],
    QuantumAlgebra`QuantumAlgebra`Braket,
    BaseStyle->"BraKetWrapper"], " ", 
   TagBox[
    RowBox[{"\[LeftAngleBracket]", 
     AdjustmentBox[
      RowBox[{
       TagBox[
        SubscriptBox["\[Eta]", "1"],
        QuantumAlgebra`QuantumAlgebra`BraKetArgs,
        BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
       TagBox[
        SubscriptBox["\[Alpha]", "1"],
        QuantumAlgebra`QuantumAlgebra`BraKetArgs,
        BaseStyle->"BraKetArg"]}],
      BoxBaselineShift->0], "\[RightAngleBracket]"}],
    QuantumAlgebra`QuantumAlgebra`Braket,
    BaseStyle->"BraKetWrapper"], " ", 
   TagBox[
    RowBox[{"\[LeftAngleBracket]", 
     AdjustmentBox[
      RowBox[{
       TagBox[
        SubscriptBox["\[Theta]", "2"],
        QuantumAlgebra`QuantumAlgebra`BraKetArgs,
        BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
       TagBox[
        SubscriptBox["\[Beta]", "2"],
        QuantumAlgebra`QuantumAlgebra`BraKetArgs,
        BaseStyle->"BraKetArg"]}],
      BoxBaselineShift->0], "\[RightAngleBracket]"}],
    QuantumAlgebra`QuantumAlgebra`Braket,
    BaseStyle->"BraKetWrapper"], " ", 
   RowBox[{
    TagBox[
     RowBox[{
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{-0.2, 0}, {0, 0}}], 
      AdjustmentBox[
       TagBox[
        RowBox[{
         SubscriptBox["\[CurlyEpsilon]", "1"], ",", 
         SubscriptBox["\[Zeta]", "2"]}],
        QuantumAlgebra`QuantumAlgebra`KetArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], "\[RightAngleBracket]"}],
     QuantumAlgebra`QuantumAlgebra`Ket,
     BaseStyle->"KetWrapper"], "\[CenterDot]", 
    TagBox[
     RowBox[{"\[LeftAngleBracket]", 
      AdjustmentBox[
       TagBox[
        RowBox[{
         SubscriptBox["\[Gamma]", "1"], ",", 
         SubscriptBox["\[Epsilon]", "2"]}],
        QuantumAlgebra`QuantumAlgebra`BraArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], 
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{0, -0.2}, {0, 0}}]}],
     QuantumAlgebra`QuantumAlgebra`Bra,
     BaseStyle->"BraWrapper"]}]}], "+", 
  RowBox[{
   TagBox[
    RowBox[{"\[LeftAngleBracket]", 
     AdjustmentBox[
      RowBox[{
       TagBox[
        SubscriptBox["\[Eta]", "1"],
        QuantumAlgebra`QuantumAlgebra`BraKetArgs,
        BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
       TagBox[
        SubscriptBox["\[Alpha]", "1"],
        QuantumAlgebra`QuantumAlgebra`BraKetArgs,
        BaseStyle->"BraKetArg"]}],
      BoxBaselineShift->0], "\[RightAngleBracket]"}],
    QuantumAlgebra`QuantumAlgebra`Braket,
    BaseStyle->"BraKetWrapper"], " ", 
   TagBox[
    RowBox[{"\[LeftAngleBracket]", 
     AdjustmentBox[
      RowBox[{
       TagBox[
        SubscriptBox["\[Eta]", "1"],
        QuantumAlgebra`QuantumAlgebra`BraKetArgs,
        BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
       TagBox[
        SubscriptBox["\[CurlyEpsilon]", "1"],
        QuantumAlgebra`QuantumAlgebra`BraKetArgs,
        BaseStyle->"BraKetArg"]}],
      BoxBaselineShift->0], "\[RightAngleBracket]"}],
    QuantumAlgebra`QuantumAlgebra`Braket,
    BaseStyle->"BraKetWrapper"], " ", 
   TagBox[
    RowBox[{"\[LeftAngleBracket]", 
     AdjustmentBox[
      RowBox[{
       TagBox[
        SubscriptBox["\[Theta]", "2"],
        QuantumAlgebra`QuantumAlgebra`BraKetArgs,
        BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
       TagBox[
        SubscriptBox["\[Beta]", "2"],
        QuantumAlgebra`QuantumAlgebra`BraKetArgs,
        BaseStyle->"BraKetArg"]}],
      BoxBaselineShift->0], "\[RightAngleBracket]"}],
    QuantumAlgebra`QuantumAlgebra`Braket,
    BaseStyle->"BraKetWrapper"], " ", 
   TagBox[
    RowBox[{"\[LeftAngleBracket]", 
     AdjustmentBox[
      RowBox[{
       TagBox[
        SubscriptBox["\[Theta]", "2"],
        QuantumAlgebra`QuantumAlgebra`BraKetArgs,
        BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
       TagBox[
        SubscriptBox["\[Zeta]", "2"],
        QuantumAlgebra`QuantumAlgebra`BraKetArgs,
        BaseStyle->"BraKetArg"]}],
      BoxBaselineShift->0], "\[RightAngleBracket]"}],
    QuantumAlgebra`QuantumAlgebra`Braket,
    BaseStyle->"BraKetWrapper"], " ", 
   RowBox[{
    TagBox[
     RowBox[{
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{-0.2, 0}, {0, 0}}], 
      AdjustmentBox[
       TagBox[
        RowBox[{
         SubscriptBox["\[CurlyEpsilon]", "1"], ",", 
         SubscriptBox["\[Zeta]", "2"]}],
        QuantumAlgebra`QuantumAlgebra`KetArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], "\[RightAngleBracket]"}],
     QuantumAlgebra`QuantumAlgebra`Ket,
     BaseStyle->"KetWrapper"], "\[CenterDot]", 
    TagBox[
     RowBox[{"\[LeftAngleBracket]", 
      AdjustmentBox[
       TagBox[
        RowBox[{
         SubscriptBox["\[Gamma]", "1"], ",", 
         SubscriptBox["\[Epsilon]", "2"]}],
        QuantumAlgebra`QuantumAlgebra`BraArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], 
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{0, -0.2}, {0, 0}}]}],
     QuantumAlgebra`QuantumAlgebra`Bra,
     BaseStyle->"BraWrapper"]}]}], "+", 
  RowBox[{
   TagBox[
    RowBox[{"\[LeftAngleBracket]", 
     AdjustmentBox[
      RowBox[{
       TagBox[
        SubscriptBox["\[Gamma]", "1"],
        QuantumAlgebra`QuantumAlgebra`BraKetArgs,
        BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
       TagBox[
        SubscriptBox["\[CurlyEpsilon]", "1"],
        QuantumAlgebra`QuantumAlgebra`BraKetArgs,
        BaseStyle->"BraKetArg"]}],
      BoxBaselineShift->0], "\[RightAngleBracket]"}],
    QuantumAlgebra`QuantumAlgebra`Braket,
    BaseStyle->"BraKetWrapper"], " ", 
   TagBox[
    RowBox[{"\[LeftAngleBracket]", 
     AdjustmentBox[
      RowBox[{
       TagBox[
        SubscriptBox["\[Epsilon]", "2"],
        QuantumAlgebra`QuantumAlgebra`BraKetArgs,
        BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
       TagBox[
        SubscriptBox["\[Zeta]", "2"],
        QuantumAlgebra`QuantumAlgebra`BraKetArgs,
        BaseStyle->"BraKetArg"]}],
      BoxBaselineShift->0], "\[RightAngleBracket]"}],
    QuantumAlgebra`QuantumAlgebra`Braket,
    BaseStyle->"BraKetWrapper"], " ", 
   TagBox[
    RowBox[{"\[LeftAngleBracket]", 
     AdjustmentBox[
      RowBox[{
       TagBox[
        SubscriptBox["\[Eta]", "1"],
        QuantumAlgebra`QuantumAlgebra`BraKetArgs,
        BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
       TagBox[
        SubscriptBox["\[Alpha]", "1"],
        QuantumAlgebra`QuantumAlgebra`BraKetArgs,
        BaseStyle->"BraKetArg"]}],
      BoxBaselineShift->0], "\[RightAngleBracket]"}],
    QuantumAlgebra`QuantumAlgebra`Braket,
    BaseStyle->"BraKetWrapper"], " ", 
   TagBox[
    RowBox[{"\[LeftAngleBracket]", 
     AdjustmentBox[
      RowBox[{
       TagBox[
        SubscriptBox["\[Theta]", "2"],
        QuantumAlgebra`QuantumAlgebra`BraKetArgs,
        BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
       TagBox[
        SubscriptBox["\[Beta]", "2"],
        QuantumAlgebra`QuantumAlgebra`BraKetArgs,
        BaseStyle->"BraKetArg"]}],
      BoxBaselineShift->0], "\[RightAngleBracket]"}],
    QuantumAlgebra`QuantumAlgebra`Braket,
    BaseStyle->"BraKetWrapper"], " ", 
   RowBox[{
    TagBox[
     RowBox[{
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{-0.2, 0}, {0, 0}}], 
      AdjustmentBox[
       TagBox[
        RowBox[{
         SubscriptBox["\[CurlyEpsilon]", "1"], ",", 
         SubscriptBox["\[Zeta]", "2"]}],
        QuantumAlgebra`QuantumAlgebra`KetArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], "\[RightAngleBracket]"}],
     QuantumAlgebra`QuantumAlgebra`Ket,
     BaseStyle->"KetWrapper"], "\[CenterDot]", 
    TagBox[
     RowBox[{"\[LeftAngleBracket]", 
      AdjustmentBox[
       TagBox[
        RowBox[{
         SubscriptBox["\[Eta]", "1"], ",", 
         SubscriptBox["\[Theta]", "2"]}],
        QuantumAlgebra`QuantumAlgebra`BraArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], 
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{0, -0.2}, {0, 0}}]}],
     QuantumAlgebra`QuantumAlgebra`Bra,
     BaseStyle->"BraWrapper"]}]}], "+", 
  RowBox[{
   SuperscriptBox[
    TagBox[
     RowBox[{"\[LeftAngleBracket]", 
      AdjustmentBox[
       RowBox[{
        TagBox[
         SubscriptBox["\[Eta]", "1"],
         QuantumAlgebra`QuantumAlgebra`BraKetArgs,
         BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
        TagBox[
         SubscriptBox["\[CurlyEpsilon]", "1"],
         QuantumAlgebra`QuantumAlgebra`BraKetArgs,
         BaseStyle->"BraKetArg"]}],
       BoxBaselineShift->0], "\[RightAngleBracket]"}],
     QuantumAlgebra`QuantumAlgebra`Braket,
     BaseStyle->"BraKetWrapper"], "2"], " ", 
   SuperscriptBox[
    TagBox[
     RowBox[{"\[LeftAngleBracket]", 
      AdjustmentBox[
       RowBox[{
        TagBox[
         SubscriptBox["\[Theta]", "2"],
         QuantumAlgebra`QuantumAlgebra`BraKetArgs,
         BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
        TagBox[
         SubscriptBox["\[Zeta]", "2"],
         QuantumAlgebra`QuantumAlgebra`BraKetArgs,
         BaseStyle->"BraKetArg"]}],
       BoxBaselineShift->0], "\[RightAngleBracket]"}],
     QuantumAlgebra`QuantumAlgebra`Braket,
     BaseStyle->"BraKetWrapper"], "2"], " ", 
   RowBox[{
    TagBox[
     RowBox[{
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{-0.2, 0}, {0, 0}}], 
      AdjustmentBox[
       TagBox[
        RowBox[{
         SubscriptBox["\[CurlyEpsilon]", "1"], ",", 
         SubscriptBox["\[Zeta]", "2"]}],
        QuantumAlgebra`QuantumAlgebra`KetArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], "\[RightAngleBracket]"}],
     QuantumAlgebra`QuantumAlgebra`Ket,
     BaseStyle->"KetWrapper"], "\[CenterDot]", 
    TagBox[
     RowBox[{"\[LeftAngleBracket]", 
      AdjustmentBox[
       TagBox[
        RowBox[{
         SubscriptBox["\[Eta]", "1"], ",", 
         SubscriptBox["\[Theta]", "2"]}],
        QuantumAlgebra`QuantumAlgebra`BraArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], 
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{0, -0.2}, {0, 0}}]}],
     QuantumAlgebra`QuantumAlgebra`Bra,
     BaseStyle->"BraWrapper"]}]}]}]], "Output",
 CellChangeTimes->{3.474239966851451*^9, 3.594633536114359*^9}]
}, Open  ]],

Cell[TextData[{
 "In the next example we compute the expectation value of the product of two \
operators ",
 Cell[BoxData[
  FormBox[
   OverscriptBox["\[ScriptCapitalA]", "^"], TraditionalForm]]],
 " and ",
 Cell[BoxData[
  FormBox[
   OverscriptBox["\[ScriptCapitalB]", "^"], TraditionalForm]]],
 " for a system in the state ",
 Cell[BoxData[
  FormBox[
   RowBox[{" ", 
    SubscriptBox[
     TagBox[
      RowBox[{
       AdjustmentBox["\[VerticalSeparator]",
        BoxMargins->{{-0.4, 0.}, {0., 0.}}], 
       AdjustmentBox[
        TagBox["n",
         QuantumAlgebra`QuantumAlgebra`KetArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0], "\[RightAngleBracket]"}],
      QuantumAlgebra`QuantumAlgebra`Ket,
      BaseStyle->"KetWrapper"], "x"]}], TraditionalForm]]],
 ", with all these objects belonging to a three rank state space ",
 Cell[BoxData[
  FormBox[
   RowBox[{"\[ScriptCapitalE]", "=", 
    RowBox[{
     SubscriptBox["\[ScriptCapitalE]", "1"], "\[CircleTimes]", 
     SubscriptBox["\[ScriptCapitalE]", "2"], "\[CircleTimes]", 
     SubscriptBox["\[ScriptCapitalE]", "3"]}]}], TraditionalForm]]],
 "."
}], "Text",
 CellChangeTimes->{{3.4442186444465485`*^9, 3.4442188754145484`*^9}, 
   3.4442189093335485`*^9, {3.4442189881805487`*^9, 3.4442190581145487`*^9}, {
   3.444491126962*^9, 3.4444912105690002`*^9}, {3.444495990133*^9, 
   3.44449600905*^9}, {3.4452477503719454`*^9, 3.445247838240946*^9}, {
   3.4452479433359456`*^9, 3.4452480204019456`*^9}, {3.4458427911540003`*^9, 
   3.4458428089969997`*^9}, {3.5946335653970337`*^9, 3.5946335885623584`*^9}}],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{
  TagBox[
   RowBox[{
    SubscriptBox["\[InvisiblePrefixScriptBase]", 
     TagBox[
      AdjustmentBox[
       TagBox["x",
        QuantumAlgebra`QuantumAlgebra`BraArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0],
      QuantumAlgebra`QuantumAlgebra`UDScript,
      BaseStyle->"LIndex"]], 
    RowBox[{"\[LeftAngleBracket]", 
     AdjustmentBox[
      TagBox["n",
       QuantumAlgebra`QuantumAlgebra`BraArgs,
       BaseStyle->"BraKetArg"],
      BoxBaselineShift->0], 
     AdjustmentBox["\[VerticalSeparator]",
      BoxBaselineShift->-0.1,
      BoxMargins->{{0, -0.2}, {0, 0}}]}]}],
   QuantumAlgebra`QuantumAlgebra`Bra,
   BaseStyle->"BraWrapper"], "\[CenterDot]", 
  OverscriptBox["\[ScriptCapitalA]", "^"], "\[CenterDot]", 
  OverscriptBox["\[ScriptCapitalB]", "^"], "\[CenterDot]", 
  TagBox[
   SubscriptBox[
    RowBox[{
     AdjustmentBox["\[VerticalSeparator]",
      BoxBaselineShift->-0.1,
      BoxMargins->{{-0.2, 0}, {0, 0}}], 
     AdjustmentBox[
      TagBox["n",
       QuantumAlgebra`QuantumAlgebra`KetArgs,
       BaseStyle->"BraKetArg"],
      BoxBaselineShift->0], "\[RightAngleBracket]"}], 
    TagBox[
     AdjustmentBox[
      TagBox["x",
       QuantumAlgebra`QuantumAlgebra`KetArgs,
       BaseStyle->"BraKetArg"],
      BoxBaselineShift->0],
     QuantumAlgebra`QuantumAlgebra`UDScript,
     BaseStyle->"RIndex"]],
   QuantumAlgebra`QuantumAlgebra`Ket,
   BaseStyle->"KetWrapper"]}]], "Input",
 CellChangeTimes->{{3.4441681081672*^9, 3.4441681329992*^9}, {
  3.5946335914485235`*^9, 3.5946336036302204`*^9}}],

Cell[BoxData[
 RowBox[{
  TagBox[
   RowBox[{
    SubscriptBox["\[InvisiblePrefixScriptBase]", 
     TagBox[
      AdjustmentBox[
       TagBox["x",
        QuantumAlgebra`QuantumAlgebra`BraArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0],
      QuantumAlgebra`QuantumAlgebra`UDScript,
      BaseStyle->"LIndex"]], 
    RowBox[{"\[LeftAngleBracket]", 
     AdjustmentBox[
      TagBox["n",
       QuantumAlgebra`QuantumAlgebra`BraArgs,
       BaseStyle->"BraKetArg"],
      BoxBaselineShift->0], 
     AdjustmentBox["\[VerticalSeparator]",
      BoxBaselineShift->-0.1,
      BoxMargins->{{0, -0.2}, {0, 0}}]}]}],
   QuantumAlgebra`QuantumAlgebra`Bra,
   BaseStyle->"BraWrapper"], "\[CenterDot]", 
  OverscriptBox["\[ScriptCapitalA]", "^"], "\[CenterDot]", 
  OverscriptBox["\[ScriptCapitalB]", "^"], "\[CenterDot]", 
  TagBox[
   SubscriptBox[
    RowBox[{
     AdjustmentBox["\[VerticalSeparator]",
      BoxBaselineShift->-0.1,
      BoxMargins->{{-0.2, 0}, {0, 0}}], 
     AdjustmentBox[
      TagBox["n",
       QuantumAlgebra`QuantumAlgebra`KetArgs,
       BaseStyle->"BraKetArg"],
      BoxBaselineShift->0], "\[RightAngleBracket]"}], 
    TagBox[
     AdjustmentBox[
      TagBox["x",
       QuantumAlgebra`QuantumAlgebra`KetArgs,
       BaseStyle->"BraKetArg"],
      BoxBaselineShift->0],
     QuantumAlgebra`QuantumAlgebra`UDScript,
     BaseStyle->"RIndex"]],
   QuantumAlgebra`QuantumAlgebra`Ket,
   BaseStyle->"KetWrapper"]}]], "Output",
 CellChangeTimes->{3.474239968781561*^9, 3.5946336038532333`*^9}]
}, Open  ]],

Cell["\<\
Now suppose that the outer representations of the two operators are known in \
some basis. These relations can be plugged into the expectation expression \
using local rules.\
\>", "Text",
 CellChangeTimes->{{3.4442190721915483`*^9, 3.4442191848545485`*^9}, {
  3.4443098213640003`*^9, 3.444309853505*^9}, {3.4443099075030003`*^9, 
  3.444309919908*^9}, {3.444310004778*^9, 3.4443100724519997`*^9}, {
  3.4452478513819456`*^9, 3.4452478784279456`*^9}, {3.5946336472067127`*^9, 
  3.594633648197769*^9}}],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{
  RowBox[{
   TagBox[
    RowBox[{
     SubscriptBox["\[InvisiblePrefixScriptBase]", 
      TagBox[
       AdjustmentBox[
        TagBox["x",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"LIndex"]], 
     RowBox[{"\[LeftAngleBracket]", 
      AdjustmentBox[
       TagBox["n",
        QuantumAlgebra`QuantumAlgebra`BraArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], 
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{0, -0.2}, {0, 0}}]}]}],
    QuantumAlgebra`QuantumAlgebra`Bra,
    BaseStyle->"BraWrapper"], "\[CenterDot]", 
   OverscriptBox["\[ScriptCapitalA]", "^"], "\[CenterDot]", 
   OverscriptBox["\[ScriptCapitalB]", "^"], "\[CenterDot]", 
   TagBox[
    SubscriptBox[
     RowBox[{
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{-0.2, 0}, {0, 0}}], 
      AdjustmentBox[
       TagBox["n",
        QuantumAlgebra`QuantumAlgebra`KetArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], "\[RightAngleBracket]"}], 
     TagBox[
      AdjustmentBox[
       TagBox["x",
        QuantumAlgebra`QuantumAlgebra`KetArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0],
      QuantumAlgebra`QuantumAlgebra`UDScript,
      BaseStyle->"RIndex"]],
    QuantumAlgebra`QuantumAlgebra`Ket,
    BaseStyle->"KetWrapper"]}], "/.", "\[VeryThinSpace]", 
  RowBox[{"{", 
   RowBox[{
    RowBox[{
     OverscriptBox["\[ScriptCapitalA]", "^"], "\[Rule]", 
     RowBox[{
      RowBox[{
       TagBox[
        RowBox[{
         AdjustmentBox["\[VerticalSeparator]",
          BoxBaselineShift->-0.1,
          BoxMargins->{{-0.2, 0}, {0, 0}}], 
         AdjustmentBox[
          TagBox[
           RowBox[{
            SubscriptBox["0", "1"], ",", 
            SubscriptBox["1", "2"]}],
           QuantumAlgebra`QuantumAlgebra`KetArgs,
           BaseStyle->"BraKetArg"],
          BoxBaselineShift->0], "\[RightAngleBracket]"}],
        QuantumAlgebra`QuantumAlgebra`Ket,
        BaseStyle->"KetWrapper"], "\[CenterDot]", 
       TagBox[
        RowBox[{"\[LeftAngleBracket]", 
         AdjustmentBox[
          TagBox[
           RowBox[{
            SubscriptBox["1", "1"], ",", 
            SubscriptBox["0", "2"]}],
           QuantumAlgebra`QuantumAlgebra`BraArgs,
           BaseStyle->"BraKetArg"],
          BoxBaselineShift->0], 
         AdjustmentBox["\[VerticalSeparator]",
          BoxBaselineShift->-0.1,
          BoxMargins->{{0, -0.2}, {0, 0}}]}],
        QuantumAlgebra`QuantumAlgebra`Bra,
        BaseStyle->"BraWrapper"]}], "+", 
      RowBox[{
       TagBox[
        RowBox[{
         AdjustmentBox["\[VerticalSeparator]",
          BoxBaselineShift->-0.1,
          BoxMargins->{{-0.2, 0}, {0, 0}}], 
         AdjustmentBox[
          TagBox[
           RowBox[{
            SubscriptBox["1", "1"], ",", 
            SubscriptBox["0", "2"]}],
           QuantumAlgebra`QuantumAlgebra`KetArgs,
           BaseStyle->"BraKetArg"],
          BoxBaselineShift->0], "\[RightAngleBracket]"}],
        QuantumAlgebra`QuantumAlgebra`Ket,
        BaseStyle->"KetWrapper"], "\[CenterDot]", 
       TagBox[
        RowBox[{"\[LeftAngleBracket]", 
         AdjustmentBox[
          TagBox[
           RowBox[{
            SubscriptBox["0", "1"], ",", 
            SubscriptBox["1", "2"]}],
           QuantumAlgebra`QuantumAlgebra`BraArgs,
           BaseStyle->"BraKetArg"],
          BoxBaselineShift->0], 
         AdjustmentBox["\[VerticalSeparator]",
          BoxBaselineShift->-0.1,
          BoxMargins->{{0, -0.2}, {0, 0}}]}],
        QuantumAlgebra`QuantumAlgebra`Bra,
        BaseStyle->"BraWrapper"]}]}]}], ",", 
    RowBox[{
     OverscriptBox["\[ScriptCapitalB]", "^"], "\[Rule]", 
     RowBox[{
      RowBox[{
       TagBox[
        RowBox[{
         AdjustmentBox["\[VerticalSeparator]",
          BoxBaselineShift->-0.1,
          BoxMargins->{{-0.2, 0}, {0, 0}}], 
         AdjustmentBox[
          TagBox[
           RowBox[{
            SubscriptBox["0", "1"], ",", 
            SubscriptBox["0", "3"]}],
           QuantumAlgebra`QuantumAlgebra`KetArgs,
           BaseStyle->"BraKetArg"],
          BoxBaselineShift->0], "\[RightAngleBracket]"}],
        QuantumAlgebra`QuantumAlgebra`Ket,
        BaseStyle->"KetWrapper"], "\[CenterDot]", 
       TagBox[
        RowBox[{"\[LeftAngleBracket]", 
         AdjustmentBox[
          TagBox[
           RowBox[{
            SubscriptBox["0", "1"], ",", 
            SubscriptBox["0", "3"]}],
           QuantumAlgebra`QuantumAlgebra`BraArgs,
           BaseStyle->"BraKetArg"],
          BoxBaselineShift->0], 
         AdjustmentBox["\[VerticalSeparator]",
          BoxBaselineShift->-0.1,
          BoxMargins->{{0, -0.2}, {0, 0}}]}],
        QuantumAlgebra`QuantumAlgebra`Bra,
        BaseStyle->"BraWrapper"]}], "+", 
      RowBox[{
       TagBox[
        RowBox[{
         AdjustmentBox["\[VerticalSeparator]",
          BoxBaselineShift->-0.1,
          BoxMargins->{{-0.2, 0}, {0, 0}}], 
         AdjustmentBox[
          TagBox[
           RowBox[{
            SubscriptBox["1", "1"], ",", 
            SubscriptBox["1", "3"]}],
           QuantumAlgebra`QuantumAlgebra`KetArgs,
           BaseStyle->"BraKetArg"],
          BoxBaselineShift->0], "\[RightAngleBracket]"}],
        QuantumAlgebra`QuantumAlgebra`Ket,
        BaseStyle->"KetWrapper"], "\[CenterDot]", 
       TagBox[
        RowBox[{"\[LeftAngleBracket]", 
         AdjustmentBox[
          TagBox[
           RowBox[{
            SubscriptBox["1", "1"], ",", 
            SubscriptBox["1", "3"]}],
           QuantumAlgebra`QuantumAlgebra`BraArgs,
           BaseStyle->"BraKetArg"],
          BoxBaselineShift->0], 
         AdjustmentBox["\[VerticalSeparator]",
          BoxBaselineShift->-0.1,
          BoxMargins->{{0, -0.2}, {0, 0}}]}],
        QuantumAlgebra`QuantumAlgebra`Bra,
        BaseStyle->"BraWrapper"]}]}]}]}], "}"}]}]], "Input",
 CellChangeTimes->{{3.4441681874972*^9, 3.4441682744642*^9}, {
   3.4441687987682*^9, 3.4441688077402*^9}, {3.4441692018132*^9, 
   3.4441692133972*^9}, {3.4442192315175486`*^9, 3.4442194626785483`*^9}, {
   3.4442195677505484`*^9, 3.4442196113435483`*^9}, {3.444220468542548*^9, 
   3.4442205130575485`*^9}, 3.444221872537548*^9, {3.444233069836*^9, 
   3.444233070216*^9}, {3.4443106527130003`*^9, 3.4443106545150003`*^9}, {
   3.444310717936*^9, 3.4443107183450003`*^9}, {3.44449123674*^9, 
   3.444491307551*^9}, {3.44449147996*^9, 3.4444915257390003`*^9}, 
   3.444491566554*^9, {3.5946336101925955`*^9, 3.594633623247342*^9}}],

Cell[BoxData[
 RowBox[{
  RowBox[{
   TagBox[
    RowBox[{"\[LeftAngleBracket]", 
     AdjustmentBox[
      RowBox[{
       TagBox[
        SubscriptBox["1", "1"],
        QuantumAlgebra`QuantumAlgebra`BraKetArgs,
        BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
       TagBox[
        SubscriptBox["0", "1"],
        QuantumAlgebra`QuantumAlgebra`BraKetArgs,
        BaseStyle->"BraKetArg"]}],
      BoxBaselineShift->0], "\[RightAngleBracket]"}],
    QuantumAlgebra`QuantumAlgebra`Braket,
    BaseStyle->"BraKetWrapper"], " ", 
   RowBox[{
    TagBox[
     RowBox[{
      SubscriptBox["\[InvisiblePrefixScriptBase]", 
       TagBox[
        AdjustmentBox[
         TagBox["x",
          QuantumAlgebra`QuantumAlgebra`BraArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0],
        QuantumAlgebra`QuantumAlgebra`UDScript,
        BaseStyle->"LIndex"]], 
      RowBox[{"\[LeftAngleBracket]", 
       AdjustmentBox[
        TagBox["n",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0], 
       AdjustmentBox["\[VerticalSeparator]",
        BoxBaselineShift->-0.1,
        BoxMargins->{{0, -0.2}, {0, 0}}]}]}],
     QuantumAlgebra`QuantumAlgebra`Bra,
     BaseStyle->"BraWrapper"], "\[CenterDot]", 
    TagBox[
     RowBox[{
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{-0.2, 0}, {0, 0}}], 
      AdjustmentBox[
       TagBox[
        RowBox[{
         SubscriptBox["0", "1"], ",", 
         SubscriptBox["1", "2"], ",", 
         SubscriptBox["0", "3"]}],
        QuantumAlgebra`QuantumAlgebra`KetArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], "\[RightAngleBracket]"}],
     QuantumAlgebra`QuantumAlgebra`Ket,
     BaseStyle->"KetWrapper"], "\[CenterDot]", 
    TagBox[
     RowBox[{"\[LeftAngleBracket]", 
      AdjustmentBox[
       TagBox[
        RowBox[{
         SubscriptBox["0", "1"], ",", 
         SubscriptBox["0", "2"], ",", 
         SubscriptBox["0", "3"]}],
        QuantumAlgebra`QuantumAlgebra`BraArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], 
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{0, -0.2}, {0, 0}}]}],
     QuantumAlgebra`QuantumAlgebra`Bra,
     BaseStyle->"BraWrapper"], "\[CenterDot]", 
    TagBox[
     SubscriptBox[
      RowBox[{
       AdjustmentBox["\[VerticalSeparator]",
        BoxBaselineShift->-0.1,
        BoxMargins->{{-0.2, 0}, {0, 0}}], 
       AdjustmentBox[
        TagBox["n",
         QuantumAlgebra`QuantumAlgebra`KetArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0], "\[RightAngleBracket]"}], 
      TagBox[
       AdjustmentBox[
        TagBox["x",
         QuantumAlgebra`QuantumAlgebra`KetArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"RIndex"]],
     QuantumAlgebra`QuantumAlgebra`Ket,
     BaseStyle->"KetWrapper"]}]}], "+", 
  RowBox[{
   TagBox[
    RowBox[{"\[LeftAngleBracket]", 
     AdjustmentBox[
      RowBox[{
       TagBox[
        SubscriptBox["1", "1"],
        QuantumAlgebra`QuantumAlgebra`BraKetArgs,
        BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
       TagBox[
        SubscriptBox["1", "1"],
        QuantumAlgebra`QuantumAlgebra`BraKetArgs,
        BaseStyle->"BraKetArg"]}],
      BoxBaselineShift->0], "\[RightAngleBracket]"}],
    QuantumAlgebra`QuantumAlgebra`Braket,
    BaseStyle->"BraKetWrapper"], " ", 
   RowBox[{
    TagBox[
     RowBox[{
      SubscriptBox["\[InvisiblePrefixScriptBase]", 
       TagBox[
        AdjustmentBox[
         TagBox["x",
          QuantumAlgebra`QuantumAlgebra`BraArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0],
        QuantumAlgebra`QuantumAlgebra`UDScript,
        BaseStyle->"LIndex"]], 
      RowBox[{"\[LeftAngleBracket]", 
       AdjustmentBox[
        TagBox["n",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0], 
       AdjustmentBox["\[VerticalSeparator]",
        BoxBaselineShift->-0.1,
        BoxMargins->{{0, -0.2}, {0, 0}}]}]}],
     QuantumAlgebra`QuantumAlgebra`Bra,
     BaseStyle->"BraWrapper"], "\[CenterDot]", 
    TagBox[
     RowBox[{
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{-0.2, 0}, {0, 0}}], 
      AdjustmentBox[
       TagBox[
        RowBox[{
         SubscriptBox["0", "1"], ",", 
         SubscriptBox["1", "2"], ",", 
         SubscriptBox["1", "3"]}],
        QuantumAlgebra`QuantumAlgebra`KetArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], "\[RightAngleBracket]"}],
     QuantumAlgebra`QuantumAlgebra`Ket,
     BaseStyle->"KetWrapper"], "\[CenterDot]", 
    TagBox[
     RowBox[{"\[LeftAngleBracket]", 
      AdjustmentBox[
       TagBox[
        RowBox[{
         SubscriptBox["1", "1"], ",", 
         SubscriptBox["0", "2"], ",", 
         SubscriptBox["1", "3"]}],
        QuantumAlgebra`QuantumAlgebra`BraArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], 
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{0, -0.2}, {0, 0}}]}],
     QuantumAlgebra`QuantumAlgebra`Bra,
     BaseStyle->"BraWrapper"], "\[CenterDot]", 
    TagBox[
     SubscriptBox[
      RowBox[{
       AdjustmentBox["\[VerticalSeparator]",
        BoxBaselineShift->-0.1,
        BoxMargins->{{-0.2, 0}, {0, 0}}], 
       AdjustmentBox[
        TagBox["n",
         QuantumAlgebra`QuantumAlgebra`KetArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0], "\[RightAngleBracket]"}], 
      TagBox[
       AdjustmentBox[
        TagBox["x",
         QuantumAlgebra`QuantumAlgebra`KetArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"RIndex"]],
     QuantumAlgebra`QuantumAlgebra`Ket,
     BaseStyle->"KetWrapper"]}]}], "+", 
  RowBox[{
   TagBox[
    RowBox[{"\[LeftAngleBracket]", 
     AdjustmentBox[
      RowBox[{
       TagBox[
        SubscriptBox["0", "1"],
        QuantumAlgebra`QuantumAlgebra`BraKetArgs,
        BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
       TagBox[
        SubscriptBox["0", "1"],
        QuantumAlgebra`QuantumAlgebra`BraKetArgs,
        BaseStyle->"BraKetArg"]}],
      BoxBaselineShift->0], "\[RightAngleBracket]"}],
    QuantumAlgebra`QuantumAlgebra`Braket,
    BaseStyle->"BraKetWrapper"], " ", 
   RowBox[{
    TagBox[
     RowBox[{
      SubscriptBox["\[InvisiblePrefixScriptBase]", 
       TagBox[
        AdjustmentBox[
         TagBox["x",
          QuantumAlgebra`QuantumAlgebra`BraArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0],
        QuantumAlgebra`QuantumAlgebra`UDScript,
        BaseStyle->"LIndex"]], 
      RowBox[{"\[LeftAngleBracket]", 
       AdjustmentBox[
        TagBox["n",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0], 
       AdjustmentBox["\[VerticalSeparator]",
        BoxBaselineShift->-0.1,
        BoxMargins->{{0, -0.2}, {0, 0}}]}]}],
     QuantumAlgebra`QuantumAlgebra`Bra,
     BaseStyle->"BraWrapper"], "\[CenterDot]", 
    TagBox[
     RowBox[{
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{-0.2, 0}, {0, 0}}], 
      AdjustmentBox[
       TagBox[
        RowBox[{
         SubscriptBox["1", "1"], ",", 
         SubscriptBox["0", "2"], ",", 
         SubscriptBox["0", "3"]}],
        QuantumAlgebra`QuantumAlgebra`KetArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], "\[RightAngleBracket]"}],
     QuantumAlgebra`QuantumAlgebra`Ket,
     BaseStyle->"KetWrapper"], "\[CenterDot]", 
    TagBox[
     RowBox[{"\[LeftAngleBracket]", 
      AdjustmentBox[
       TagBox[
        RowBox[{
         SubscriptBox["0", "1"], ",", 
         SubscriptBox["1", "2"], ",", 
         SubscriptBox["0", "3"]}],
        QuantumAlgebra`QuantumAlgebra`BraArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], 
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{0, -0.2}, {0, 0}}]}],
     QuantumAlgebra`QuantumAlgebra`Bra,
     BaseStyle->"BraWrapper"], "\[CenterDot]", 
    TagBox[
     SubscriptBox[
      RowBox[{
       AdjustmentBox["\[VerticalSeparator]",
        BoxBaselineShift->-0.1,
        BoxMargins->{{-0.2, 0}, {0, 0}}], 
       AdjustmentBox[
        TagBox["n",
         QuantumAlgebra`QuantumAlgebra`KetArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0], "\[RightAngleBracket]"}], 
      TagBox[
       AdjustmentBox[
        TagBox["x",
         QuantumAlgebra`QuantumAlgebra`KetArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"RIndex"]],
     QuantumAlgebra`QuantumAlgebra`Ket,
     BaseStyle->"KetWrapper"]}]}], "+", 
  RowBox[{
   TagBox[
    RowBox[{"\[LeftAngleBracket]", 
     AdjustmentBox[
      RowBox[{
       TagBox[
        SubscriptBox["0", "1"],
        QuantumAlgebra`QuantumAlgebra`BraKetArgs,
        BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
       TagBox[
        SubscriptBox["1", "1"],
        QuantumAlgebra`QuantumAlgebra`BraKetArgs,
        BaseStyle->"BraKetArg"]}],
      BoxBaselineShift->0], "\[RightAngleBracket]"}],
    QuantumAlgebra`QuantumAlgebra`Braket,
    BaseStyle->"BraKetWrapper"], " ", 
   RowBox[{
    TagBox[
     RowBox[{
      SubscriptBox["\[InvisiblePrefixScriptBase]", 
       TagBox[
        AdjustmentBox[
         TagBox["x",
          QuantumAlgebra`QuantumAlgebra`BraArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0],
        QuantumAlgebra`QuantumAlgebra`UDScript,
        BaseStyle->"LIndex"]], 
      RowBox[{"\[LeftAngleBracket]", 
       AdjustmentBox[
        TagBox["n",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0], 
       AdjustmentBox["\[VerticalSeparator]",
        BoxBaselineShift->-0.1,
        BoxMargins->{{0, -0.2}, {0, 0}}]}]}],
     QuantumAlgebra`QuantumAlgebra`Bra,
     BaseStyle->"BraWrapper"], "\[CenterDot]", 
    TagBox[
     RowBox[{
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{-0.2, 0}, {0, 0}}], 
      AdjustmentBox[
       TagBox[
        RowBox[{
         SubscriptBox["1", "1"], ",", 
         SubscriptBox["0", "2"], ",", 
         SubscriptBox["1", "3"]}],
        QuantumAlgebra`QuantumAlgebra`KetArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], "\[RightAngleBracket]"}],
     QuantumAlgebra`QuantumAlgebra`Ket,
     BaseStyle->"KetWrapper"], "\[CenterDot]", 
    TagBox[
     RowBox[{"\[LeftAngleBracket]", 
      AdjustmentBox[
       TagBox[
        RowBox[{
         SubscriptBox["1", "1"], ",", 
         SubscriptBox["1", "2"], ",", 
         SubscriptBox["1", "3"]}],
        QuantumAlgebra`QuantumAlgebra`BraArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], 
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{0, -0.2}, {0, 0}}]}],
     QuantumAlgebra`QuantumAlgebra`Bra,
     BaseStyle->"BraWrapper"], "\[CenterDot]", 
    TagBox[
     SubscriptBox[
      RowBox[{
       AdjustmentBox["\[VerticalSeparator]",
        BoxBaselineShift->-0.1,
        BoxMargins->{{-0.2, 0}, {0, 0}}], 
       AdjustmentBox[
        TagBox["n",
         QuantumAlgebra`QuantumAlgebra`KetArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0], "\[RightAngleBracket]"}], 
      TagBox[
       AdjustmentBox[
        TagBox["x",
         QuantumAlgebra`QuantumAlgebra`KetArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"RIndex"]],
     QuantumAlgebra`QuantumAlgebra`Ket,
     BaseStyle->"KetWrapper"]}]}]}]], "Output",
 CellChangeTimes->{3.474239972216758*^9, 3.5946336235613604`*^9, 
  3.594633720160886*^9}]
}, Open  ]],

Cell[TextData[{
 "Note that the operator ",
 Cell[BoxData[
  FormBox[
   OverscriptBox["\[ScriptCapitalA]", "^"], TraditionalForm]]],
 " live in the state space ",
 Cell[BoxData[
  FormBox[
   RowBox[{
    SubscriptBox["\[ScriptCapitalE]", "1"], "\[CircleTimes]", 
    SubscriptBox["\[ScriptCapitalE]", "2"]}], TraditionalForm]]],
 " while the operator ",
 Cell[BoxData[
  FormBox[
   OverscriptBox["\[ScriptCapitalB]", "^"], TraditionalForm]]],
 " lives in the state space ",
 Cell[BoxData[
  FormBox[
   RowBox[{
    SubscriptBox["\[ScriptCapitalE]", "1"], "\[CircleTimes]", 
    SubscriptBox["\[ScriptCapitalE]", "3"]}], TraditionalForm]]],
 ". The product of both operators live in the state space ",
 Cell[BoxData[
  FormBox["\[ScriptCapitalE]", TraditionalForm]]],
 ". "
}], "Text",
 CellChangeTimes->{{3.4443101214379997`*^9, 3.444310140626*^9}, {
   3.4443102205620003`*^9, 3.4443102855*^9}, {3.444310374066*^9, 
   3.444310535701*^9}, {3.444319878039*^9, 3.444319934847*^9}, 
   3.444319965559*^9, {3.4443200340959997`*^9, 3.444320119137*^9}, {
   3.444320345487*^9, 3.444320368427*^9}, {3.444470164705*^9, 
   3.4444702156540003`*^9}, {3.445247920971946*^9, 3.4452479363219457`*^9}, {
   3.594633665603765*^9, 3.594633669818006*^9}}],

Cell[TextData[{
 "We see that braketing has been done in the common state space of both \
operators, but brakets involving the state ",
 StyleBox["n ",
  FontSlant->"Italic"],
 "remains without evaluation. If this state is known in some basis, its \
definition can be plugged into the calculation using local rules:"
}], "Text",
 CellChangeTimes->{{3.4443101214379997`*^9, 3.444310140626*^9}, {
   3.4443102205620003`*^9, 3.4443102855*^9}, {3.444310374066*^9, 
   3.444310535701*^9}, {3.444319878039*^9, 3.444319934847*^9}, 
   3.444319965559*^9, {3.4443200340959997`*^9, 3.444320119137*^9}, {
   3.444320345487*^9, 3.444320368427*^9}, {3.444470164705*^9, 
   3.4444702156540003`*^9}, {3.445247920971946*^9, 3.4452479363219457`*^9}, {
   3.594633665603765*^9, 3.594633698931671*^9}, {3.594633755194889*^9, 
   3.5946337602701797`*^9}, 3.594716807432665*^9, {3.5947168665912924`*^9, 
   3.5947168809361134`*^9}, {3.5947169332284813`*^9, 3.5947170746357822`*^9}}],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"%", "/.", 
  RowBox[{"{", 
   RowBox[{
    RowBox[{
     TagBox[
      SubscriptBox[
       RowBox[{
        AdjustmentBox["\[VerticalSeparator]",
         BoxBaselineShift->-0.1,
         BoxMargins->{{-0.2, 0}, {0, 0}}], 
        AdjustmentBox[
         TagBox["n",
          QuantumAlgebra`QuantumAlgebra`KetArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0], "\[RightAngleBracket]"}], 
       TagBox[
        AdjustmentBox[
         TagBox["x",
          QuantumAlgebra`QuantumAlgebra`KetArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0],
        QuantumAlgebra`QuantumAlgebra`UDScript,
        BaseStyle->"RIndex"]],
      QuantumAlgebra`QuantumAlgebra`Ket,
      BaseStyle->"KetWrapper"], "\[Rule]", 
     TagBox[
      RowBox[{
       AdjustmentBox["\[VerticalSeparator]",
        BoxBaselineShift->-0.1,
        BoxMargins->{{-0.2, 0}, {0, 0}}], 
       AdjustmentBox[
        TagBox[
         RowBox[{
          SubscriptBox["1", "1"], ",", 
          SubscriptBox["0", "2"], ",", 
          SubscriptBox["1", "3"]}],
         QuantumAlgebra`QuantumAlgebra`KetArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0], "\[RightAngleBracket]"}],
      QuantumAlgebra`QuantumAlgebra`Ket,
      BaseStyle->"KetWrapper"]}], ",", 
    RowBox[{
     TagBox[
      RowBox[{
       SubscriptBox["\[InvisiblePrefixScriptBase]", 
        TagBox[
         AdjustmentBox[
          TagBox["x",
           QuantumAlgebra`QuantumAlgebra`BraArgs,
           BaseStyle->"BraKetArg"],
          BoxBaselineShift->0],
         QuantumAlgebra`QuantumAlgebra`UDScript,
         BaseStyle->"LIndex"]], 
       RowBox[{"\[LeftAngleBracket]", 
        AdjustmentBox[
         TagBox["n",
          QuantumAlgebra`QuantumAlgebra`BraArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0], 
        AdjustmentBox["\[VerticalSeparator]",
         BoxBaselineShift->-0.1,
         BoxMargins->{{0, -0.2}, {0, 0}}]}]}],
      QuantumAlgebra`QuantumAlgebra`Bra,
      BaseStyle->"BraWrapper"], "\[Rule]", 
     TagBox[
      RowBox[{"\[LeftAngleBracket]", 
       AdjustmentBox[
        TagBox[
         RowBox[{
          SubscriptBox["1", "1"], ",", 
          SubscriptBox["0", "2"], ",", 
          SubscriptBox["1", "3"]}],
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0], 
       AdjustmentBox["\[VerticalSeparator]",
        BoxBaselineShift->-0.1,
        BoxMargins->{{0, -0.2}, {0, 0}}]}],
      QuantumAlgebra`QuantumAlgebra`Bra,
      BaseStyle->"BraWrapper"]}]}], "}"}]}]], "Input",
 CellChangeTimes->{{3.4441681874972*^9, 3.4441682744642*^9}, {
  3.4441687987682*^9, 3.4441688077402*^9}, {3.4441692018132*^9, 
  3.4441692133972*^9}, {3.4442192315175486`*^9, 3.4442194626785483`*^9}, {
  3.4442195677505484`*^9, 3.4442196113435483`*^9}, {3.444219687924548*^9, 
  3.4442198075595484`*^9}, {3.4442203342185483`*^9, 3.4442203735935483`*^9}, {
  3.4442205289675484`*^9, 3.4442205339925485`*^9}, {3.4442219258995485`*^9, 
  3.4442219303245487`*^9}, {3.444493151783*^9, 3.444493185974*^9}, {
  3.59463370415397*^9, 3.594633715847639*^9}}],

Cell[BoxData[
 RowBox[{
  RowBox[{
   TagBox[
    RowBox[{"\[LeftAngleBracket]", 
     AdjustmentBox[
      RowBox[{
       TagBox[
        SubscriptBox["0", "1"],
        QuantumAlgebra`QuantumAlgebra`BraKetArgs,
        BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
       TagBox[
        SubscriptBox["1", "1"],
        QuantumAlgebra`QuantumAlgebra`BraKetArgs,
        BaseStyle->"BraKetArg"]}],
      BoxBaselineShift->0], "\[RightAngleBracket]"}],
    QuantumAlgebra`QuantumAlgebra`Braket,
    BaseStyle->"BraKetWrapper"], " ", 
   TagBox[
    RowBox[{"\[LeftAngleBracket]", 
     AdjustmentBox[
      RowBox[{
       TagBox[
        SubscriptBox["0", "2"],
        QuantumAlgebra`QuantumAlgebra`BraKetArgs,
        BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
       TagBox[
        SubscriptBox["0", "2"],
        QuantumAlgebra`QuantumAlgebra`BraKetArgs,
        BaseStyle->"BraKetArg"]}],
      BoxBaselineShift->0], "\[RightAngleBracket]"}],
    QuantumAlgebra`QuantumAlgebra`Braket,
    BaseStyle->"BraKetWrapper"], " ", 
   TagBox[
    RowBox[{"\[LeftAngleBracket]", 
     AdjustmentBox[
      RowBox[{
       TagBox[
        SubscriptBox["0", "2"],
        QuantumAlgebra`QuantumAlgebra`BraKetArgs,
        BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
       TagBox[
        SubscriptBox["1", "2"],
        QuantumAlgebra`QuantumAlgebra`BraKetArgs,
        BaseStyle->"BraKetArg"]}],
      BoxBaselineShift->0], "\[RightAngleBracket]"}],
    QuantumAlgebra`QuantumAlgebra`Braket,
    BaseStyle->"BraKetWrapper"], " ", 
   TagBox[
    RowBox[{"\[LeftAngleBracket]", 
     AdjustmentBox[
      RowBox[{
       TagBox[
        SubscriptBox["0", "3"],
        QuantumAlgebra`QuantumAlgebra`BraKetArgs,
        BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
       TagBox[
        SubscriptBox["1", "3"],
        QuantumAlgebra`QuantumAlgebra`BraKetArgs,
        BaseStyle->"BraKetArg"]}],
      BoxBaselineShift->0], "\[RightAngleBracket]"}],
    QuantumAlgebra`QuantumAlgebra`Braket,
    BaseStyle->"BraKetWrapper"], " ", 
   SuperscriptBox[
    TagBox[
     RowBox[{"\[LeftAngleBracket]", 
      AdjustmentBox[
       RowBox[{
        TagBox[
         SubscriptBox["1", "1"],
         QuantumAlgebra`QuantumAlgebra`BraKetArgs,
         BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
        TagBox[
         SubscriptBox["0", "1"],
         QuantumAlgebra`QuantumAlgebra`BraKetArgs,
         BaseStyle->"BraKetArg"]}],
       BoxBaselineShift->0], "\[RightAngleBracket]"}],
     QuantumAlgebra`QuantumAlgebra`Braket,
     BaseStyle->"BraKetWrapper"], "2"], " ", 
   TagBox[
    RowBox[{"\[LeftAngleBracket]", 
     AdjustmentBox[
      RowBox[{
       TagBox[
        SubscriptBox["1", "3"],
        QuantumAlgebra`QuantumAlgebra`BraKetArgs,
        BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
       TagBox[
        SubscriptBox["0", "3"],
        QuantumAlgebra`QuantumAlgebra`BraKetArgs,
        BaseStyle->"BraKetArg"]}],
      BoxBaselineShift->0], "\[RightAngleBracket]"}],
    QuantumAlgebra`QuantumAlgebra`Braket,
    BaseStyle->"BraKetWrapper"]}], "+", 
  RowBox[{
   TagBox[
    RowBox[{"\[LeftAngleBracket]", 
     AdjustmentBox[
      RowBox[{
       TagBox[
        SubscriptBox["0", "1"],
        QuantumAlgebra`QuantumAlgebra`BraKetArgs,
        BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
       TagBox[
        SubscriptBox["0", "1"],
        QuantumAlgebra`QuantumAlgebra`BraKetArgs,
        BaseStyle->"BraKetArg"]}],
      BoxBaselineShift->0], "\[RightAngleBracket]"}],
    QuantumAlgebra`QuantumAlgebra`Braket,
    BaseStyle->"BraKetWrapper"], " ", 
   TagBox[
    RowBox[{"\[LeftAngleBracket]", 
     AdjustmentBox[
      RowBox[{
       TagBox[
        SubscriptBox["0", "1"],
        QuantumAlgebra`QuantumAlgebra`BraKetArgs,
        BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
       TagBox[
        SubscriptBox["1", "1"],
        QuantumAlgebra`QuantumAlgebra`BraKetArgs,
        BaseStyle->"BraKetArg"]}],
      BoxBaselineShift->0], "\[RightAngleBracket]"}],
    QuantumAlgebra`QuantumAlgebra`Braket,
    BaseStyle->"BraKetWrapper"], " ", 
   TagBox[
    RowBox[{"\[LeftAngleBracket]", 
     AdjustmentBox[
      RowBox[{
       TagBox[
        SubscriptBox["0", "2"],
        QuantumAlgebra`QuantumAlgebra`BraKetArgs,
        BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
       TagBox[
        SubscriptBox["0", "2"],
        QuantumAlgebra`QuantumAlgebra`BraKetArgs,
        BaseStyle->"BraKetArg"]}],
      BoxBaselineShift->0], "\[RightAngleBracket]"}],
    QuantumAlgebra`QuantumAlgebra`Braket,
    BaseStyle->"BraKetWrapper"], " ", 
   TagBox[
    RowBox[{"\[LeftAngleBracket]", 
     AdjustmentBox[
      RowBox[{
       TagBox[
        SubscriptBox["0", "3"],
        QuantumAlgebra`QuantumAlgebra`BraKetArgs,
        BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
       TagBox[
        SubscriptBox["1", "3"],
        QuantumAlgebra`QuantumAlgebra`BraKetArgs,
        BaseStyle->"BraKetArg"]}],
      BoxBaselineShift->0], "\[RightAngleBracket]"}],
    QuantumAlgebra`QuantumAlgebra`Braket,
    BaseStyle->"BraKetWrapper"], " ", 
   TagBox[
    RowBox[{"\[LeftAngleBracket]", 
     AdjustmentBox[
      RowBox[{
       TagBox[
        SubscriptBox["1", "1"],
        QuantumAlgebra`QuantumAlgebra`BraKetArgs,
        BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
       TagBox[
        SubscriptBox["1", "1"],
        QuantumAlgebra`QuantumAlgebra`BraKetArgs,
        BaseStyle->"BraKetArg"]}],
      BoxBaselineShift->0], "\[RightAngleBracket]"}],
    QuantumAlgebra`QuantumAlgebra`Braket,
    BaseStyle->"BraKetWrapper"], " ", 
   TagBox[
    RowBox[{"\[LeftAngleBracket]", 
     AdjustmentBox[
      RowBox[{
       TagBox[
        SubscriptBox["1", "2"],
        QuantumAlgebra`QuantumAlgebra`BraKetArgs,
        BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
       TagBox[
        SubscriptBox["0", "2"],
        QuantumAlgebra`QuantumAlgebra`BraKetArgs,
        BaseStyle->"BraKetArg"]}],
      BoxBaselineShift->0], "\[RightAngleBracket]"}],
    QuantumAlgebra`QuantumAlgebra`Braket,
    BaseStyle->"BraKetWrapper"], " ", 
   TagBox[
    RowBox[{"\[LeftAngleBracket]", 
     AdjustmentBox[
      RowBox[{
       TagBox[
        SubscriptBox["1", "3"],
        QuantumAlgebra`QuantumAlgebra`BraKetArgs,
        BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
       TagBox[
        SubscriptBox["0", "3"],
        QuantumAlgebra`QuantumAlgebra`BraKetArgs,
        BaseStyle->"BraKetArg"]}],
      BoxBaselineShift->0], "\[RightAngleBracket]"}],
    QuantumAlgebra`QuantumAlgebra`Braket,
    BaseStyle->"BraKetWrapper"]}], "+", 
  RowBox[{
   TagBox[
    RowBox[{"\[LeftAngleBracket]", 
     AdjustmentBox[
      RowBox[{
       TagBox[
        SubscriptBox["0", "2"],
        QuantumAlgebra`QuantumAlgebra`BraKetArgs,
        BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
       TagBox[
        SubscriptBox["0", "2"],
        QuantumAlgebra`QuantumAlgebra`BraKetArgs,
        BaseStyle->"BraKetArg"]}],
      BoxBaselineShift->0], "\[RightAngleBracket]"}],
    QuantumAlgebra`QuantumAlgebra`Braket,
    BaseStyle->"BraKetWrapper"], " ", 
   TagBox[
    RowBox[{"\[LeftAngleBracket]", 
     AdjustmentBox[
      RowBox[{
       TagBox[
        SubscriptBox["0", "2"],
        QuantumAlgebra`QuantumAlgebra`BraKetArgs,
        BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
       TagBox[
        SubscriptBox["1", "2"],
        QuantumAlgebra`QuantumAlgebra`BraKetArgs,
        BaseStyle->"BraKetArg"]}],
      BoxBaselineShift->0], "\[RightAngleBracket]"}],
    QuantumAlgebra`QuantumAlgebra`Braket,
    BaseStyle->"BraKetWrapper"], " ", 
   TagBox[
    RowBox[{"\[LeftAngleBracket]", 
     AdjustmentBox[
      RowBox[{
       TagBox[
        SubscriptBox["1", "1"],
        QuantumAlgebra`QuantumAlgebra`BraKetArgs,
        BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
       TagBox[
        SubscriptBox["0", "1"],
        QuantumAlgebra`QuantumAlgebra`BraKetArgs,
        BaseStyle->"BraKetArg"]}],
      BoxBaselineShift->0], "\[RightAngleBracket]"}],
    QuantumAlgebra`QuantumAlgebra`Braket,
    BaseStyle->"BraKetWrapper"], " ", 
   SuperscriptBox[
    TagBox[
     RowBox[{"\[LeftAngleBracket]", 
      AdjustmentBox[
       RowBox[{
        TagBox[
         SubscriptBox["1", "1"],
         QuantumAlgebra`QuantumAlgebra`BraKetArgs,
         BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
        TagBox[
         SubscriptBox["1", "1"],
         QuantumAlgebra`QuantumAlgebra`BraKetArgs,
         BaseStyle->"BraKetArg"]}],
       BoxBaselineShift->0], "\[RightAngleBracket]"}],
     QuantumAlgebra`QuantumAlgebra`Braket,
     BaseStyle->"BraKetWrapper"], "2"], " ", 
   SuperscriptBox[
    TagBox[
     RowBox[{"\[LeftAngleBracket]", 
      AdjustmentBox[
       RowBox[{
        TagBox[
         SubscriptBox["1", "3"],
         QuantumAlgebra`QuantumAlgebra`BraKetArgs,
         BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
        TagBox[
         SubscriptBox["1", "3"],
         QuantumAlgebra`QuantumAlgebra`BraKetArgs,
         BaseStyle->"BraKetArg"]}],
       BoxBaselineShift->0], "\[RightAngleBracket]"}],
     QuantumAlgebra`QuantumAlgebra`Braket,
     BaseStyle->"BraKetWrapper"], "2"]}], "+", 
  RowBox[{
   TagBox[
    RowBox[{"\[LeftAngleBracket]", 
     AdjustmentBox[
      RowBox[{
       TagBox[
        SubscriptBox["0", "1"],
        QuantumAlgebra`QuantumAlgebra`BraKetArgs,
        BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
       TagBox[
        SubscriptBox["1", "1"],
        QuantumAlgebra`QuantumAlgebra`BraKetArgs,
        BaseStyle->"BraKetArg"]}],
      BoxBaselineShift->0], "\[RightAngleBracket]"}],
    QuantumAlgebra`QuantumAlgebra`Braket,
    BaseStyle->"BraKetWrapper"], " ", 
   TagBox[
    RowBox[{"\[LeftAngleBracket]", 
     AdjustmentBox[
      RowBox[{
       TagBox[
        SubscriptBox["0", "2"],
        QuantumAlgebra`QuantumAlgebra`BraKetArgs,
        BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
       TagBox[
        SubscriptBox["0", "2"],
        QuantumAlgebra`QuantumAlgebra`BraKetArgs,
        BaseStyle->"BraKetArg"]}],
      BoxBaselineShift->0], "\[RightAngleBracket]"}],
    QuantumAlgebra`QuantumAlgebra`Braket,
    BaseStyle->"BraKetWrapper"], " ", 
   SuperscriptBox[
    TagBox[
     RowBox[{"\[LeftAngleBracket]", 
      AdjustmentBox[
       RowBox[{
        TagBox[
         SubscriptBox["1", "1"],
         QuantumAlgebra`QuantumAlgebra`BraKetArgs,
         BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
        TagBox[
         SubscriptBox["1", "1"],
         QuantumAlgebra`QuantumAlgebra`BraKetArgs,
         BaseStyle->"BraKetArg"]}],
       BoxBaselineShift->0], "\[RightAngleBracket]"}],
     QuantumAlgebra`QuantumAlgebra`Braket,
     BaseStyle->"BraKetWrapper"], "2"], " ", 
   TagBox[
    RowBox[{"\[LeftAngleBracket]", 
     AdjustmentBox[
      RowBox[{
       TagBox[
        SubscriptBox["1", "2"],
        QuantumAlgebra`QuantumAlgebra`BraKetArgs,
        BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
       TagBox[
        SubscriptBox["0", "2"],
        QuantumAlgebra`QuantumAlgebra`BraKetArgs,
        BaseStyle->"BraKetArg"]}],
      BoxBaselineShift->0], "\[RightAngleBracket]"}],
    QuantumAlgebra`QuantumAlgebra`Braket,
    BaseStyle->"BraKetWrapper"], " ", 
   SuperscriptBox[
    TagBox[
     RowBox[{"\[LeftAngleBracket]", 
      AdjustmentBox[
       RowBox[{
        TagBox[
         SubscriptBox["1", "3"],
         QuantumAlgebra`QuantumAlgebra`BraKetArgs,
         BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
        TagBox[
         SubscriptBox["1", "3"],
         QuantumAlgebra`QuantumAlgebra`BraKetArgs,
         BaseStyle->"BraKetArg"]}],
       BoxBaselineShift->0], "\[RightAngleBracket]"}],
     QuantumAlgebra`QuantumAlgebra`Braket,
     BaseStyle->"BraKetWrapper"], "2"]}]}]], "Output",
 CellChangeTimes->{
  3.4742399758869677`*^9, {3.5946337161956587`*^9, 3.59463372234101*^9}}]
}, Open  ]]
}, Open  ]]
}, Open  ]]
},
AutoGeneratedPackage->None,
WindowSize->{593, 762},
WindowMargins->{{Automatic, 0}, {0, Automatic}},
DockedCells->Cell[
  BoxData[
   StyleBox[
   "\!\(\*FrameBox[\"\[CapitalPsi]\",\nStripOnInput->False]\)   \
QuantumAlgebra 2.0", FontFamily -> "Helvetica", FontWeight -> "Bold", 
    FontColor -> GrayLevel[1]]], "DockedCell", Background -> 
  RGBColor[0, 0.25098, 0.501961]],
InputAliases->{"ket" -> TagBox[
    RowBox[{
      AdjustmentBox[
      "\[VerticalSeparator]", BoxMargins -> {{-0.2, 0.}, {0., 0.}}, 
       BoxBaselineShift -> -0.1], 
      AdjustmentBox[
       TagBox[
       "\[SelectionPlaceholder]", QuantumAlgebra`QuantumAlgebra`KetArgs, 
        BaseStyle -> "BraKetArg"], BoxBaselineShift -> 0], 
      "\[RightAngleBracket]"}], QuantumAlgebra`QuantumAlgebra`Ket, BaseStyle -> 
    "KetWrapper"], "bra" -> TagBox[
    RowBox[{"\[LeftAngleBracket]", 
      AdjustmentBox[
       TagBox[
       "\[SelectionPlaceholder]", QuantumAlgebra`QuantumAlgebra`BraArgs, 
        BaseStyle -> "BraKetArg"], BoxBaselineShift -> 0], 
      AdjustmentBox[
      "\[VerticalSeparator]", BoxMargins -> {{0, -0.2}, {0, 0}}, 
       BoxBaselineShift -> -0.1]}], QuantumAlgebra`QuantumAlgebra`Bra, 
    BaseStyle -> "BraWrapper"], "braket" -> TagBox[
    RowBox[{"\[LeftAngleBracket]", 
      AdjustmentBox[
       RowBox[{
         TagBox[
         "\[SelectionPlaceholder]", QuantumAlgebra`QuantumAlgebra`BraKetArgs, 
          BaseStyle -> "BraKetArg"], "\[VerticalSeparator]", 
         TagBox[
         "\[SelectionPlaceholder]", QuantumAlgebra`QuantumAlgebra`BraKetArgs, 
          BaseStyle -> "BraKetArg"]}], BoxBaselineShift -> 0.], 
      "\[RightAngleBracket]"}], QuantumAlgebra`QuantumAlgebra`Braket, 
    BaseStyle -> "BraKetWrapper"], "ketd" -> TagBox[
    SubscriptBox[
     RowBox[{
       AdjustmentBox[
       "\[VerticalSeparator]", BoxMargins -> {{-0.2, 0}, {0, 0}}, 
        BoxBaselineShift -> -0.1], 
       AdjustmentBox[
        TagBox[
        "\[SelectionPlaceholder]", QuantumAlgebra`QuantumAlgebra`KetArgs, 
         BaseStyle -> "BraKetArg"], BoxBaselineShift -> 0], 
       "\[RightAngleBracket]"}], 
     TagBox[
      AdjustmentBox[
       TagBox[
       "\[SelectionPlaceholder]", QuantumAlgebra`QuantumAlgebra`KetArgs, 
        BaseStyle -> "BraKetArg"], BoxBaselineShift -> 0], 
      QuantumAlgebra`QuantumAlgebra`UDScript, BaseStyle -> "RIndex"]], 
    QuantumAlgebra`QuantumAlgebra`Ket, BaseStyle -> "KetWrapper"], "ketu" -> 
  TagBox[
    SuperscriptBox[
     RowBox[{
       AdjustmentBox[
       "\[VerticalSeparator]", BoxMargins -> {{-0.2, 0}, {0, 0}}, 
        BoxBaselineShift -> -0.1], 
       AdjustmentBox[
        TagBox[
        "\[SelectionPlaceholder]", QuantumAlgebra`QuantumAlgebra`KetArgs, 
         BaseStyle -> "BraKetArg"], BoxBaselineShift -> 0], 
       "\[RightAngleBracket]"}], 
     TagBox[
      AdjustmentBox[
       TagBox[
       "\[SelectionPlaceholder]", QuantumAlgebra`QuantumAlgebra`KetArgs, 
        BaseStyle -> "BraKetArg"], BoxBaselineShift -> 0], 
      QuantumAlgebra`QuantumAlgebra`UDScript, BaseStyle -> "RIndex"]], 
    QuantumAlgebra`QuantumAlgebra`Ket, BaseStyle -> "KetWrapper"], "ketdu" -> 
  TagBox[
    SubsuperscriptBox[
     RowBox[{
       AdjustmentBox[
       "\[VerticalSeparator]", BoxMargins -> {{-0.2, 0}, {0, 0}}, 
        BoxBaselineShift -> -0.1], 
       AdjustmentBox[
        TagBox[
        "\[SelectionPlaceholder]", QuantumAlgebra`QuantumAlgebra`KetArgs, 
         BaseStyle -> "BraKetArg"], BoxBaselineShift -> 0], 
       "\[RightAngleBracket]"}], 
     TagBox[
      AdjustmentBox[
       TagBox[
       "\[SelectionPlaceholder]", QuantumAlgebra`QuantumAlgebra`KetArgs, 
        BaseStyle -> "BraKetArg"], BoxBaselineShift -> 0], 
      QuantumAlgebra`QuantumAlgebra`UDScript, BaseStyle -> "RIndex"], 
     TagBox[
      AdjustmentBox[
       TagBox[
       "\[SelectionPlaceholder]", QuantumAlgebra`QuantumAlgebra`KetArgs, 
        BaseStyle -> "BraKetArg"], BoxBaselineShift -> 0], 
      QuantumAlgebra`QuantumAlgebra`UDScript, BaseStyle -> "RIndex"]], 
    QuantumAlgebra`QuantumAlgebra`Ket, BaseStyle -> "KetWrapper"], "dbra" -> 
  TagBox[
    RowBox[{
      SubscriptBox["\[InvisiblePrefixScriptBase]", 
       TagBox[
        AdjustmentBox[
         TagBox[
         "\[SelectionPlaceholder]", QuantumAlgebra`QuantumAlgebra`BraArgs, 
          BaseStyle -> "BraKetArg"], BoxBaselineShift -> 0], 
        QuantumAlgebra`QuantumAlgebra`UDScript, BaseStyle -> "LIndex"]], 
      RowBox[{"\[LeftAngleBracket]", 
        AdjustmentBox[
         TagBox[
         "\[SelectionPlaceholder]", QuantumAlgebra`QuantumAlgebra`BraArgs, 
          BaseStyle -> "BraKetArg"], BoxBaselineShift -> 0], 
        AdjustmentBox[
        "\[VerticalSeparator]", BoxMargins -> {{0, -0.2}, {0, 0}}, 
         BoxBaselineShift -> -0.1]}]}], QuantumAlgebra`QuantumAlgebra`Bra, 
    BaseStyle -> "BraWrapper"], "ubra" -> TagBox[
    RowBox[{
      SuperscriptBox["\[InvisiblePrefixScriptBase]", 
       TagBox[
        AdjustmentBox[
         TagBox[
         "\[SelectionPlaceholder]", QuantumAlgebra`QuantumAlgebra`BraArgs, 
          BaseStyle -> "BraKetArg"], BoxBaselineShift -> 0], 
        QuantumAlgebra`QuantumAlgebra`UDScript, BaseStyle -> "LIndex"]], 
      RowBox[{"\[LeftAngleBracket]", 
        AdjustmentBox[
         TagBox[
         "\[SelectionPlaceholder]", QuantumAlgebra`QuantumAlgebra`BraArgs, 
          BaseStyle -> "BraKetArg"], BoxBaselineShift -> 0], 
        AdjustmentBox[
        "\[VerticalSeparator]", BoxMargins -> {{0, -0.2}, {0, 0}}, 
         BoxBaselineShift -> -0.1]}]}], QuantumAlgebra`QuantumAlgebra`Bra, 
    BaseStyle -> "BraWrapper"], "dubra" -> TagBox[
    RowBox[{
      SubsuperscriptBox["\[InvisiblePrefixScriptBase]", 
       TagBox[
        AdjustmentBox[
         TagBox[
         "\[SelectionPlaceholder]", QuantumAlgebra`QuantumAlgebra`BraArgs, 
          BaseStyle -> "BraKetArg"], BoxBaselineShift -> 0], 
        QuantumAlgebra`QuantumAlgebra`UDScript, BaseStyle -> "LIndex"], 
       TagBox[
        AdjustmentBox[
         TagBox[
         "\[SelectionPlaceholder]", QuantumAlgebra`QuantumAlgebra`BraArgs, 
          BaseStyle -> "BraKetArg"], BoxBaselineShift -> 0], 
        QuantumAlgebra`QuantumAlgebra`UDScript, BaseStyle -> "LIndex"]], 
      RowBox[{"\[LeftAngleBracket]", 
        AdjustmentBox[
         TagBox[
         "\[SelectionPlaceholder]", QuantumAlgebra`QuantumAlgebra`BraArgs, 
          BaseStyle -> "BraKetArg"], BoxBaselineShift -> 0], 
        AdjustmentBox[
        "\[VerticalSeparator]", BoxMargins -> {{0, -0.2}, {0, 0}}, 
         BoxBaselineShift -> -0.1]}]}], QuantumAlgebra`QuantumAlgebra`Bra, 
    BaseStyle -> "BraWrapper"], "braketd" -> TagBox[
    SubscriptBox[
     RowBox[{"\[LeftAngleBracket]", 
       AdjustmentBox[
        RowBox[{
          TagBox[
          "\[SelectionPlaceholder]", QuantumAlgebra`QuantumAlgebra`BraKetArgs,
            BaseStyle -> "BraKetArg"], "\[VerticalSeparator]", 
          TagBox[
          "\[SelectionPlaceholder]", QuantumAlgebra`QuantumAlgebra`BraKetArgs,
            BaseStyle -> "BraKetArg"]}], BoxBaselineShift -> 0], 
       "\[RightAngleBracket]"}], 
     TagBox[
      AdjustmentBox[
       TagBox[
       "\[SelectionPlaceholder]", QuantumAlgebra`QuantumAlgebra`KetArgs, 
        BaseStyle -> "BraKetArg"], BoxBaselineShift -> 0], 
      QuantumAlgebra`QuantumAlgebra`UDScript, BaseStyle -> "RIndex"]], 
    QuantumAlgebra`QuantumAlgebra`Braket, BaseStyle -> "BraKetWrapper"], 
  "braketu" -> TagBox[
    SuperscriptBox[
     RowBox[{"\[LeftAngleBracket]", 
       AdjustmentBox[
        RowBox[{
          TagBox[
          "\[SelectionPlaceholder]", QuantumAlgebra`QuantumAlgebra`BraKetArgs,
            BaseStyle -> "BraKetArg"], "\[VerticalSeparator]", 
          TagBox[
          "\[SelectionPlaceholder]", QuantumAlgebra`QuantumAlgebra`BraKetArgs,
            BaseStyle -> "BraKetArg"]}], BoxBaselineShift -> 0], 
       "\[RightAngleBracket]"}], 
     TagBox[
      AdjustmentBox[
       TagBox[
       "\[SelectionPlaceholder]", QuantumAlgebra`QuantumAlgebra`KetArgs, 
        BaseStyle -> "BraKetArg"], BoxBaselineShift -> 0], 
      QuantumAlgebra`QuantumAlgebra`UDScript, BaseStyle -> "RIndex"]], 
    QuantumAlgebra`QuantumAlgebra`Braket, BaseStyle -> "BraKetWrapper"], 
  "braketdu" -> TagBox[
    SubsuperscriptBox[
     RowBox[{"\[LeftAngleBracket]", 
       AdjustmentBox[
        RowBox[{
          TagBox[
          "\[SelectionPlaceholder]", QuantumAlgebra`QuantumAlgebra`BraKetArgs,
            BaseStyle -> "BraKetArg"], "\[VerticalSeparator]", 
          TagBox[
          "\[SelectionPlaceholder]", QuantumAlgebra`QuantumAlgebra`BraKetArgs,
            BaseStyle -> "BraKetArg"]}], BoxBaselineShift -> 0], 
       "\[RightAngleBracket]"}], 
     TagBox[
      AdjustmentBox[
       TagBox[
       "\[SelectionPlaceholder]", QuantumAlgebra`QuantumAlgebra`KetArgs, 
        BaseStyle -> "BraKetArg"], BoxBaselineShift -> 0], 
      QuantumAlgebra`QuantumAlgebra`UDScript, BaseStyle -> "RIndex"], 
     TagBox[
      AdjustmentBox[
       TagBox[
       "\[SelectionPlaceholder]", QuantumAlgebra`QuantumAlgebra`KetArgs, 
        BaseStyle -> "BraKetArg"], BoxBaselineShift -> 0], 
      QuantumAlgebra`QuantumAlgebra`UDScript, BaseStyle -> "RIndex"]], 
    QuantumAlgebra`QuantumAlgebra`Braket, BaseStyle -> "BraKetWrapper"], 
  "dbraket" -> TagBox[
    RowBox[{
      SubscriptBox["\[InvisiblePrefixScriptBase]", 
       TagBox[
        AdjustmentBox[
         TagBox[
         "\[SelectionPlaceholder]", QuantumAlgebra`QuantumAlgebra`BraArgs, 
          BaseStyle -> "BraKetArg"], BoxBaselineShift -> 0], 
        QuantumAlgebra`QuantumAlgebra`UDScript, BaseStyle -> "LIndex"]], 
      RowBox[{"\[LeftAngleBracket]", 
        AdjustmentBox[
         RowBox[{
           TagBox[
           "\[SelectionPlaceholder]", 
            QuantumAlgebra`QuantumAlgebra`BraKetArgs, BaseStyle -> 
            "BraKetArg"], "\[VerticalSeparator]", 
           TagBox[
           "\[SelectionPlaceholder]", 
            QuantumAlgebra`QuantumAlgebra`BraKetArgs, BaseStyle -> 
            "BraKetArg"]}], BoxBaselineShift -> 0], 
        "\[RightAngleBracket]"}]}], QuantumAlgebra`QuantumAlgebra`Braket, 
    BaseStyle -> "BraKetWrapper"], "ubraket" -> TagBox[
    RowBox[{
      SuperscriptBox["\[InvisiblePrefixScriptBase]", 
       TagBox[
        AdjustmentBox[
         TagBox[
         "\[SelectionPlaceholder]", QuantumAlgebra`QuantumAlgebra`BraArgs, 
          BaseStyle -> "BraKetArg"], BoxBaselineShift -> 0], 
        QuantumAlgebra`QuantumAlgebra`UDScript, BaseStyle -> "LIndex"]], 
      RowBox[{"\[LeftAngleBracket]", 
        AdjustmentBox[
         RowBox[{
           TagBox[
           "\[SelectionPlaceholder]", 
            QuantumAlgebra`QuantumAlgebra`BraKetArgs, BaseStyle -> 
            "BraKetArg"], "\[VerticalSeparator]", 
           TagBox[
           "\[SelectionPlaceholder]", 
            QuantumAlgebra`QuantumAlgebra`BraKetArgs, BaseStyle -> 
            "BraKetArg"]}], BoxBaselineShift -> 0], 
        "\[RightAngleBracket]"}]}], QuantumAlgebra`QuantumAlgebra`Braket, 
    BaseStyle -> "BraKetWrapper"], "dubraket" -> TagBox[
    RowBox[{
      SubsuperscriptBox["\[InvisiblePrefixScriptBase]", 
       TagBox[
        AdjustmentBox[
         TagBox[
         "\[SelectionPlaceholder]", QuantumAlgebra`QuantumAlgebra`BraArgs, 
          BaseStyle -> "BraKetArg"], BoxBaselineShift -> 0], 
        QuantumAlgebra`QuantumAlgebra`UDScript, BaseStyle -> "LIndex"], 
       TagBox[
        AdjustmentBox[
         TagBox[
         "\[SelectionPlaceholder]", QuantumAlgebra`QuantumAlgebra`BraArgs, 
          BaseStyle -> "BraKetArg"], BoxBaselineShift -> 0], 
        QuantumAlgebra`QuantumAlgebra`UDScript, BaseStyle -> "LIndex"]], 
      RowBox[{"\[LeftAngleBracket]", 
        AdjustmentBox[
         RowBox[{
           TagBox[
           "\[SelectionPlaceholder]", 
            QuantumAlgebra`QuantumAlgebra`BraKetArgs, BaseStyle -> 
            "BraKetArg"], "\[VerticalSeparator]", 
           TagBox[
           "\[SelectionPlaceholder]", 
            QuantumAlgebra`QuantumAlgebra`BraKetArgs, BaseStyle -> 
            "BraKetArg"]}], BoxBaselineShift -> 0], 
        "\[RightAngleBracket]"}]}], QuantumAlgebra`QuantumAlgebra`Braket, 
    BaseStyle -> "BraKetWrapper"], "dbraketd" -> TagBox[
    RowBox[{
      SubscriptBox["\[InvisiblePrefixScriptBase]", 
       TagBox[
        AdjustmentBox[
         TagBox[
         "\[SelectionPlaceholder]", QuantumAlgebra`QuantumAlgebra`BraArgs, 
          BaseStyle -> "BraKetArg"], BoxBaselineShift -> 0], 
        QuantumAlgebra`QuantumAlgebra`UDScript, BaseStyle -> "LIndex"]], 
      SubscriptBox[
       RowBox[{"\[LeftAngleBracket]", 
         AdjustmentBox[
          RowBox[{
            TagBox[
            "\[SelectionPlaceholder]", 
             QuantumAlgebra`QuantumAlgebra`BraKetArgs, BaseStyle -> 
             "BraKetArg"], "\[VerticalSeparator]", 
            TagBox[
            "\[SelectionPlaceholder]", 
             QuantumAlgebra`QuantumAlgebra`BraKetArgs, BaseStyle -> 
             "BraKetArg"]}], BoxBaselineShift -> 0], "\[RightAngleBracket]"}], 
       TagBox[
        AdjustmentBox[
         TagBox[
         "\[SelectionPlaceholder]", QuantumAlgebra`QuantumAlgebra`BraArgs, 
          BaseStyle -> "BraKetArg"], BoxBaselineShift -> 0], 
        QuantumAlgebra`QuantumAlgebra`UDScript, BaseStyle -> "RIndex"]]}], 
    QuantumAlgebra`QuantumAlgebra`Braket, BaseStyle -> "BraKetWrapper"], 
  "dbraketu" -> TagBox[
    RowBox[{
      SubscriptBox["\[InvisiblePrefixScriptBase]", 
       TagBox[
        AdjustmentBox[
         TagBox[
         "\[SelectionPlaceholder]", QuantumAlgebra`QuantumAlgebra`BraArgs, 
          BaseStyle -> "BraKetArg"], BoxBaselineShift -> 0], 
        QuantumAlgebra`QuantumAlgebra`UDScript, BaseStyle -> "LIndex"]], 
      SuperscriptBox[
       RowBox[{"\[LeftAngleBracket]", 
         AdjustmentBox[
          RowBox[{
            TagBox[
            "\[SelectionPlaceholder]", 
             QuantumAlgebra`QuantumAlgebra`BraKetArgs, BaseStyle -> 
             "BraKetArg"], "\[VerticalSeparator]", 
            TagBox[
            "\[SelectionPlaceholder]", 
             QuantumAlgebra`QuantumAlgebra`BraKetArgs, BaseStyle -> 
             "BraKetArg"]}], BoxBaselineShift -> 0], "\[RightAngleBracket]"}], 
       TagBox[
        AdjustmentBox[
         TagBox[
         "\[SelectionPlaceholder]", QuantumAlgebra`QuantumAlgebra`BraArgs, 
          BaseStyle -> "BraKetArg"], BoxBaselineShift -> 0], 
        QuantumAlgebra`QuantumAlgebra`UDScript, BaseStyle -> "RIndex"]]}], 
    QuantumAlgebra`QuantumAlgebra`Braket, BaseStyle -> "BraKetWrapper"], 
  "ubraketd" -> TagBox[
    RowBox[{
      SuperscriptBox["\[InvisiblePrefixScriptBase]", 
       TagBox[
        AdjustmentBox[
         TagBox[
         "\[SelectionPlaceholder]", QuantumAlgebra`QuantumAlgebra`BraArgs, 
          BaseStyle -> "BraKetArg"], BoxBaselineShift -> 0], 
        QuantumAlgebra`QuantumAlgebra`UDScript, BaseStyle -> "LIndex"]], 
      SubscriptBox[
       RowBox[{"\[LeftAngleBracket]", 
         AdjustmentBox[
          RowBox[{
            TagBox[
            "\[SelectionPlaceholder]", 
             QuantumAlgebra`QuantumAlgebra`BraKetArgs, BaseStyle -> 
             "BraKetArg"], "\[VerticalSeparator]", 
            TagBox[
            "\[SelectionPlaceholder]", 
             QuantumAlgebra`QuantumAlgebra`BraKetArgs, BaseStyle -> 
             "BraKetArg"]}], BoxBaselineShift -> 0], "\[RightAngleBracket]"}], 
       TagBox[
        AdjustmentBox[
         TagBox[
         "\[SelectionPlaceholder]", QuantumAlgebra`QuantumAlgebra`BraArgs, 
          BaseStyle -> "BraKetArg"], BoxBaselineShift -> 0], 
        QuantumAlgebra`QuantumAlgebra`UDScript, BaseStyle -> "RIndex"]]}], 
    QuantumAlgebra`QuantumAlgebra`Braket, BaseStyle -> "BraKetWrapper"], 
  "ubraketu" -> TagBox[
    RowBox[{
      SuperscriptBox["\[InvisiblePrefixScriptBase]", 
       TagBox[
        AdjustmentBox[
         TagBox[
         "\[SelectionPlaceholder]", QuantumAlgebra`QuantumAlgebra`BraArgs, 
          BaseStyle -> "BraKetArg"], BoxBaselineShift -> 0], 
        QuantumAlgebra`QuantumAlgebra`UDScript, BaseStyle -> "LIndex"]], 
      SuperscriptBox[
       RowBox[{"\[LeftAngleBracket]", 
         AdjustmentBox[
          RowBox[{
            TagBox[
            "\[SelectionPlaceholder]", 
             QuantumAlgebra`QuantumAlgebra`BraKetArgs, BaseStyle -> 
             "BraKetArg"], "\[VerticalSeparator]", 
            TagBox[
            "\[SelectionPlaceholder]", 
             QuantumAlgebra`QuantumAlgebra`BraKetArgs, BaseStyle -> 
             "BraKetArg"]}], BoxBaselineShift -> 0], "\[RightAngleBracket]"}], 
       TagBox[
        AdjustmentBox[
         TagBox[
         "\[SelectionPlaceholder]", QuantumAlgebra`QuantumAlgebra`BraArgs, 
          BaseStyle -> "BraKetArg"], BoxBaselineShift -> 0], 
        QuantumAlgebra`QuantumAlgebra`UDScript, BaseStyle -> "RIndex"]]}], 
    QuantumAlgebra`QuantumAlgebra`Braket, BaseStyle -> "BraKetWrapper"], 
  "dbraketdu" -> TagBox[
    RowBox[{
      SubscriptBox["\[InvisiblePrefixScriptBase]", 
       TagBox[
        AdjustmentBox[
         TagBox[
         "\[SelectionPlaceholder]", QuantumAlgebra`QuantumAlgebra`BraArgs, 
          BaseStyle -> "BraKetArg"], BoxBaselineShift -> 0], 
        QuantumAlgebra`QuantumAlgebra`UDScript, BaseStyle -> "LIndex"]], 
      SubsuperscriptBox[
       RowBox[{"\[LeftAngleBracket]", 
         AdjustmentBox[
          RowBox[{
            TagBox[
            "\[SelectionPlaceholder]", 
             QuantumAlgebra`QuantumAlgebra`BraKetArgs, BaseStyle -> 
             "BraKetArg"], "\[VerticalSeparator]", 
            TagBox[
            "\[SelectionPlaceholder]", 
             QuantumAlgebra`QuantumAlgebra`BraKetArgs, BaseStyle -> 
             "BraKetArg"]}], BoxBaselineShift -> 0], "\[RightAngleBracket]"}], 
       TagBox[
        AdjustmentBox[
         TagBox[
         "\[SelectionPlaceholder]", QuantumAlgebra`QuantumAlgebra`BraArgs, 
          BaseStyle -> "BraKetArg"], BoxBaselineShift -> 0], 
        QuantumAlgebra`QuantumAlgebra`UDScript, BaseStyle -> "RIndex"], 
       TagBox[
        AdjustmentBox[
         TagBox[
         "\[SelectionPlaceholder]", QuantumAlgebra`QuantumAlgebra`BraArgs, 
          BaseStyle -> "BraKetArg"], BoxBaselineShift -> 0], 
        QuantumAlgebra`QuantumAlgebra`UDScript, BaseStyle -> "RIndex"]]}], 
    QuantumAlgebra`QuantumAlgebra`Braket, BaseStyle -> "BraKetWrapper"], 
  "ubraketdu" -> TagBox[
    RowBox[{
      SuperscriptBox["\[InvisiblePrefixScriptBase]", 
       TagBox[
        AdjustmentBox[
         TagBox[
         "\[SelectionPlaceholder]", QuantumAlgebra`QuantumAlgebra`BraArgs, 
          BaseStyle -> "BraKetArg"], BoxBaselineShift -> 0], 
        QuantumAlgebra`QuantumAlgebra`UDScript, BaseStyle -> "LIndex"]], 
      SubsuperscriptBox[
       RowBox[{"\[LeftAngleBracket]", 
         AdjustmentBox[
          RowBox[{
            TagBox[
            "\[SelectionPlaceholder]", 
             QuantumAlgebra`QuantumAlgebra`BraKetArgs, BaseStyle -> 
             "BraKetArg"], "\[VerticalSeparator]", 
            TagBox[
            "\[SelectionPlaceholder]", 
             QuantumAlgebra`QuantumAlgebra`BraKetArgs, BaseStyle -> 
             "BraKetArg"]}], BoxBaselineShift -> 0], "\[RightAngleBracket]"}], 
       TagBox[
        AdjustmentBox[
         TagBox[
         "\[SelectionPlaceholder]", QuantumAlgebra`QuantumAlgebra`BraArgs, 
          BaseStyle -> "BraKetArg"], BoxBaselineShift -> 0], 
        QuantumAlgebra`QuantumAlgebra`UDScript, BaseStyle -> "RIndex"], 
       TagBox[
        AdjustmentBox[
         TagBox[
         "\[SelectionPlaceholder]", QuantumAlgebra`QuantumAlgebra`BraArgs, 
          BaseStyle -> "BraKetArg"], BoxBaselineShift -> 0], 
        QuantumAlgebra`QuantumAlgebra`UDScript, BaseStyle -> "RIndex"]]}], 
    QuantumAlgebra`QuantumAlgebra`Braket, BaseStyle -> "BraKetWrapper"], 
  "dubraketd" -> TagBox[
    RowBox[{
      SubsuperscriptBox["\[InvisiblePrefixScriptBase]", 
       TagBox[
        AdjustmentBox[
         TagBox[
         "\[SelectionPlaceholder]", QuantumAlgebra`QuantumAlgebra`BraArgs, 
          BaseStyle -> "BraKetArg"], BoxBaselineShift -> 0], 
        QuantumAlgebra`QuantumAlgebra`UDScript, BaseStyle -> "LIndex"], 
       TagBox[
        AdjustmentBox[
         TagBox[
         "\[SelectionPlaceholder]", QuantumAlgebra`QuantumAlgebra`BraArgs, 
          TagStyle -> "BraKetArg"], BoxBaselineShift -> 0], 
        QuantumAlgebra`QuantumAlgebra`UDScript, BaseStyle -> "LIndex"]], 
      SubscriptBox[
       RowBox[{"\[LeftAngleBracket]", 
         AdjustmentBox[
          RowBox[{
            TagBox[
            "\[SelectionPlaceholder]", 
             QuantumAlgebra`QuantumAlgebra`BraKetArgs, BaseStyle -> 
             "BraKetArg"], "\[VerticalSeparator]", 
            TagBox[
            "\[SelectionPlaceholder]", 
             QuantumAlgebra`QuantumAlgebra`BraKetArgs, BaseStyle -> 
             "BraKetArg"]}], BoxBaselineShift -> 0], "\[RightAngleBracket]"}], 
       TagBox[
        AdjustmentBox[
         TagBox[
         "\[SelectionPlaceholder]", QuantumAlgebra`QuantumAlgebra`BraArgs, 
          BaseStyle -> "BraKetArg"], BoxBaselineShift -> 0], 
        QuantumAlgebra`QuantumAlgebra`UDScript, BaseStyle -> "RIndex"]]}], 
    QuantumAlgebra`QuantumAlgebra`Braket, BaseStyle -> "BraKetWrapper"], 
  "dubraketu" -> TagBox[
    RowBox[{
      SubsuperscriptBox["\[InvisiblePrefixScriptBase]", 
       TagBox[
        AdjustmentBox[
         TagBox[
         "\[SelectionPlaceholder]", QuantumAlgebra`QuantumAlgebra`BraArgs, 
          BaseStyle -> "BraKetArg"], BoxBaselineShift -> 0], 
        QuantumAlgebra`QuantumAlgebra`UDScript, BaseStyle -> "LIndex"], 
       TagBox[
        AdjustmentBox[
         TagBox[
         "\[SelectionPlaceholder]", QuantumAlgebra`QuantumAlgebra`BraArgs, 
          TagStyle -> "BraKetArg"], BoxBaselineShift -> 0], 
        QuantumAlgebra`QuantumAlgebra`UDScript, BaseStyle -> "LIndex"]], 
      SuperscriptBox[
       RowBox[{"\[LeftAngleBracket]", 
         AdjustmentBox[
          RowBox[{
            TagBox[
            "\[SelectionPlaceholder]", 
             QuantumAlgebra`QuantumAlgebra`BraKetArgs, BaseStyle -> 
             "BraKetArg"], "\[VerticalSeparator]", 
            TagBox[
            "\[SelectionPlaceholder]", 
             QuantumAlgebra`QuantumAlgebra`BraKetArgs, BaseStyle -> 
             "BraKetArg"]}], BoxBaselineShift -> 0], "\[RightAngleBracket]"}], 
       TagBox[
        AdjustmentBox[
         TagBox[
         "\[SelectionPlaceholder]", QuantumAlgebra`QuantumAlgebra`BraArgs, 
          BaseStyle -> "BraKetArg"], BoxBaselineShift -> 0], 
        QuantumAlgebra`QuantumAlgebra`UDScript, BaseStyle -> "RIndex"]]}], 
    QuantumAlgebra`QuantumAlgebra`Braket, BaseStyle -> "BraKetWrapper"], 
  "dubraketdu" -> TagBox[
    RowBox[{
      SubsuperscriptBox["\[InvisiblePrefixScriptBase]", 
       TagBox[
        AdjustmentBox[
         TagBox[
         "\[SelectionPlaceholder]", QuantumAlgebra`QuantumAlgebra`BraArgs, 
          BaseStyle -> "BraKetArg"], BoxBaselineShift -> 0.], 
        QuantumAlgebra`QuantumAlgebra`UDScript, BaseStyle -> "LIndex"], 
       TagBox[
        AdjustmentBox[
         TagBox[
         "\[SelectionPlaceholder]", QuantumAlgebra`QuantumAlgebra`BraArgs, 
          BaseStyle -> "BraKetArg"], BoxBaselineShift -> 0.], 
        QuantumAlgebra`QuantumAlgebra`UDScript, BaseStyle -> "LIndex"]], 
      SubsuperscriptBox[
       RowBox[{"\[LeftAngleBracket]", 
         AdjustmentBox[
          RowBox[{
            TagBox[
            "\[SelectionPlaceholder]", 
             QuantumAlgebra`QuantumAlgebra`BraKetArgs, BaseStyle -> 
             "BraKetArg"], "\[VerticalSeparator]", 
            TagBox[
            "\[SelectionPlaceholder]", 
             QuantumAlgebra`QuantumAlgebra`BraKetArgs, BaseStyle -> 
             "BraKetArg"]}], BoxBaselineShift -> 0.], 
         "\[RightAngleBracket]"}], 
       TagBox[
        AdjustmentBox[
         TagBox[
         "\[SelectionPlaceholder]", QuantumAlgebra`QuantumAlgebra`BraArgs, 
          BaseStyle -> "BraKetArg"], BoxBaselineShift -> 0.], 
        QuantumAlgebra`QuantumAlgebra`UDScript, BaseStyle -> "RIndex"], 
       TagBox[
        AdjustmentBox[
         TagBox[
         "\[SelectionPlaceholder]", QuantumAlgebra`QuantumAlgebra`BraArgs, 
          BaseStyle -> "BraKetArg"], BoxBaselineShift -> 0.], 
        QuantumAlgebra`QuantumAlgebra`UDScript, BaseStyle -> "RIndex"]]}], 
    QuantumAlgebra`QuantumAlgebra`Braket, BaseStyle -> "BraKetWrapper"], 
  "com" -> SubscriptBox[
    RowBox[{"[", 
      RowBox[{"\[SelectionPlaceholder]", ",", "\[SelectionPlaceholder]"}], 
      "]"}], "-"], "op" -> OverscriptBox["\[SelectionPlaceholder]", "^"], 
  "opd" -> SubscriptBox[
    OverscriptBox["\[SelectionPlaceholder]", "^"], "\[SelectionPlaceholder]"],
   "opu" -> TagBox[
    SuperscriptBox[
     OverscriptBox["\[SelectionPlaceholder]", "^"], 
     "\[SelectionPlaceholder]"], 
    QuantumAlgebra`QuantumAlgebra`Private`superscript], "opdu" -> TagBox[
    SubsuperscriptBox[
     OverscriptBox["\[SelectionPlaceholder]", "^"], "\[SelectionPlaceholder]",
      "\[SelectionPlaceholder]"], 
    QuantumAlgebra`QuantumAlgebra`Private`superscript], "hop" -> 
  SuperscriptBox[
    OverscriptBox["\[SelectionPlaceholder]", "^"], "\[Dagger]"]},
FrontEndVersion->"9.0 for Microsoft Windows (32-bit) (January 25, 2013)",
StyleDefinitions->Notebook[{
   Cell[
    StyleData[StyleDefinitions -> "QAStyles.nb"]], 
   Cell[
    CellGroupData[{
      Cell["Bra Ket Styles", "Section"], 
      Cell[
      " The cells below define certain styles needed for defining Bras&Kets. \
These styles serve to give the correct structural properties to Bras & Kets ",
        "Text"], 
      Cell[
       StyleData["BraKetArg"], SpanMinSize -> Automatic, StyleMenuListing -> 
       None, AdjustmentBoxOptions -> {BoxMargins -> {{0, 0}, {0, 0}}}, 
       TagBoxOptions -> {Editable -> True, Selectable -> True}], 
      Cell[
       StyleData["BraWrapper"], 
       AutoStyleOptions -> {"HighlightSyntaxErrors" -> False}, 
       ScriptBaselineShifts -> {0.6, 0.9}, SpanMinSize -> 1.5, 
       StyleMenuListing -> None, 
       AdjustmentBoxOptions -> {
        BoxBaselineShift -> -0.01, BoxMargins -> {{0.2, -0.13}, {0, 0}}}, 
       TagBoxOptions -> {Editable -> False}], 
      Cell[
       StyleData["KetWrapper"], 
       AutoStyleOptions -> {"HighlightSyntaxErrors" -> False}, 
       ScriptBaselineShifts -> {0.6, 0.9}, SpanMinSize -> 1.5, 
       StyleMenuListing -> None, 
       AdjustmentBoxOptions -> {
        BoxBaselineShift -> -0.01, BoxMargins -> {{-0.1, 0.2}, {0, 0}}}, 
       TagBoxOptions -> {Editable -> False}], 
      Cell[
       StyleData["BraKetWrapper"], ScriptBaselineShifts -> {0.6, 0.9}, 
       SpanMinSize -> 1.5, StyleMenuListing -> None, 
       AdjustmentBoxOptions -> {BoxMargins -> {{0.25, 0.25}, {0, 0}}}, 
       TagBoxOptions -> {Editable -> False}], 
      Cell[
       StyleData["RIndex"], StyleMenuListing -> None, 
       AdjustmentBoxOptions -> {BoxMargins -> {{-0.16, 0}, {0, 0}}}, 
       TagBoxOptions -> {Editable -> False}], 
      Cell[
       StyleData["LIndex"], StyleMenuListing -> None, 
       AdjustmentBoxOptions -> {BoxMargins -> {{0, -0.1}, {0, 0}}}, 
       TagBoxOptions -> {Editable -> False}]}, Open]]}, Visible -> False, 
  FrontEndVersion -> "9.0 for Microsoft Windows (32-bit) (January 25, 2013)", 
  StyleDefinitions -> "PrivateStylesheetFormatting.nb"]
]
(* End of Notebook Content *)

(* Internal cache information *)
(*CellTagsOutline
CellTagsIndex->{
 "qa:BR.0"->{
  Cell[567, 22, 56, 1, 99, "Section",
   CellTags->"qa:BR.0"]},
 "qa:BR.1"->{
  Cell[903, 34, 142, 2, 60, "Subsection",
   CellTags->"qa:BR.1"]},
 "qa:BR.2"->{
  Cell[58181, 1661, 165, 3, 60, "Subsection",
   CellTags->"qa:BR.2"]},
 "qa:BR.3"->{
  Cell[209260, 6080, 79, 1, 60, "Subsection",
   CellTags->"qa:BR.3"]},
 "qa:BR.4"->{
  Cell[368212, 10820, 68, 1, 60, "Subsection",
   CellTags->"qa:BR.4"]},
 "qa:BR.5"->{
  Cell[593869, 17488, 89, 1, 60, "Subsection",
   CellTags->"qa:BR.5"]}
 }
*)
(*CellTagsIndex
CellTagsIndex->{
 {"qa:BR.0", 734685, 21502},
 {"qa:BR.1", 734763, 21505},
 {"qa:BR.2", 734845, 21508},
 {"qa:BR.3", 734931, 21511},
 {"qa:BR.4", 735017, 21514},
 {"qa:BR.5", 735104, 21517}
 }
*)
(*NotebookFileOutline
Notebook[{
Cell[CellGroupData[{
Cell[567, 22, 56, 1, 99, "Section",
 CellTags->"qa:BR.0"],
Cell[626, 25, 101, 1, 33, "Text"],
Cell[730, 28, 148, 2, 50, "InputOnly"],
Cell[CellGroupData[{
Cell[903, 34, 142, 2, 60, "Subsection",
 CellTags->"qa:BR.1"],
Cell[1048, 38, 1762, 27, 143, "Text"],
Cell[CellGroupData[{
Cell[2835, 69, 1085, 30, 44, "Input"],
Cell[3923, 101, 555, 15, 45, "Output"]
}, Open  ]],
Cell[CellGroupData[{
Cell[4515, 121, 1156, 36, 45, "Input"],
Cell[5674, 159, 1102, 35, 45, "Output"]
}, Open  ]],
Cell[6791, 197, 1479, 22, 99, "Text"],
Cell[8273, 221, 1332, 19, 99, "Text"],
Cell[9608, 242, 1620, 35, 99, "Text"],
Cell[11231, 279, 2843, 82, 53, "InputOnly"],
Cell[CellGroupData[{
Cell[14099, 365, 1203, 31, 44, "Input"],
Cell[15305, 398, 721, 18, 45, "Output"]
}, Open  ]],
Cell[16041, 419, 270, 5, 77, "Text"],
Cell[CellGroupData[{
Cell[16336, 428, 1178, 31, 44, "Input"],
Cell[17517, 461, 1917, 56, 45, "Output"]
}, Open  ]],
Cell[CellGroupData[{
Cell[19471, 522, 2513, 71, 45, "Input"],
Cell[21987, 595, 1938, 56, 45, "Output"]
}, Open  ]],
Cell[23940, 654, 1355, 22, 121, "Text"],
Cell[25298, 678, 2051, 47, 121, "Text"],
Cell[CellGroupData[{
Cell[27374, 729, 1191, 37, 44, "Input"],
Cell[28568, 768, 1261, 38, 44, "Output"]
}, Open  ]],
Cell[29844, 809, 791, 12, 77, "Text"],
Cell[CellGroupData[{
Cell[30660, 825, 3189, 96, 45, "Input"],
Cell[33852, 923, 2948, 92, 45, "Output"]
}, Open  ]],
Cell[36815, 1018, 257, 5, 55, "Text"],
Cell[CellGroupData[{
Cell[37097, 1027, 2324, 71, 45, "Input"],
Cell[39424, 1100, 4171, 131, 45, "Output"]
}, Open  ]],
Cell[43610, 1234, 670, 10, 99, "Text"],
Cell[CellGroupData[{
Cell[44305, 1248, 3047, 92, 45, "Input"],
Cell[47355, 1342, 2233, 67, 45, "Output"]
}, Open  ]],
Cell[49603, 1412, 852, 15, 55, "Text"],
Cell[CellGroupData[{
Cell[50480, 1431, 4622, 132, 45, "Input"],
Cell[55105, 1565, 3027, 90, 45, "Output"]
}, Open  ]]
}, Open  ]],
Cell[CellGroupData[{
Cell[58181, 1661, 165, 3, 60, "Subsection",
 CellTags->"qa:BR.2"],
Cell[58349, 1666, 1070, 19, 99, "Text"],
Cell[59422, 1687, 990, 15, 77, "Text"],
Cell[CellGroupData[{
Cell[60437, 1706, 2014, 57, 44, "Input"],
Cell[62454, 1765, 1814, 48, 45, "Output"]
}, Open  ]],
Cell[CellGroupData[{
Cell[64305, 1818, 2765, 79, 44, "Input"],
Cell[67073, 1899, 2357, 72, 44, "Output"]
}, Open  ]],
Cell[CellGroupData[{
Cell[69467, 1976, 132, 2, 41, "Input"],
Cell[69602, 1980, 1973, 60, 45, "Output"]
}, Open  ]],
Cell[71590, 2043, 1193, 22, 121, "Text"],
Cell[72786, 2067, 906, 14, 55, "Text"],
Cell[CellGroupData[{
Cell[73717, 2085, 3689, 109, 44, "Input"],
Cell[77409, 2196, 1918, 56, 47, "Output"]
}, Open  ]],
Cell[79342, 2255, 374, 6, 77, "Text"],
Cell[CellGroupData[{
Cell[79741, 2265, 3367, 90, 46, "Input"],
Cell[83111, 2357, 10650, 318, 117, "Output"]
}, Open  ]],
Cell[93776, 2678, 2051, 37, 79, "Text"],
Cell[95830, 2717, 6839, 188, 105, "InputOnly"],
Cell[102672, 2907, 2201, 38, 55, "Text"],
Cell[CellGroupData[{
Cell[104898, 2949, 1362, 33, 45, "Input"],
Cell[106263, 2984, 13440, 408, 117, "Output"]
}, Open  ]],
Cell[119718, 3395, 1280, 19, 99, "Text"],
Cell[CellGroupData[{
Cell[121023, 3418, 289, 5, 41, "Input"],
Cell[121315, 3425, 10379, 316, 69, "Output"]
}, Open  ]],
Cell[131709, 3744, 1216, 20, 99, "Text"],
Cell[CellGroupData[{
Cell[132950, 3768, 4176, 120, 90, "Input"],
Cell[137129, 3890, 3889, 118, 45, "Output"]
}, Open  ]],
Cell[CellGroupData[{
Cell[141055, 4013, 752, 13, 41, "Input"],
Cell[141810, 4028, 27864, 853, 171, "Output"]
}, Open  ]],
Cell[169689, 4884, 494, 8, 99, "Text"],
Cell[CellGroupData[{
Cell[170208, 4896, 4391, 123, 66, "Input"],
Cell[174602, 5021, 6390, 186, 69, "Output"]
}, Open  ]],
Cell[CellGroupData[{
Cell[181029, 5212, 287, 6, 41, "Input"],
Cell[181319, 5220, 27892, 854, 171, "Output"]
}, Open  ]]
}, Open  ]],
Cell[CellGroupData[{
Cell[209260, 6080, 79, 1, 60, "Subsection",
 CellTags->"qa:BR.3"],
Cell[209342, 6083, 817, 14, 99, "Text"],
Cell[210162, 6099, 1202, 26, 143, "Text"],
Cell[211367, 6127, 645, 10, 99, "Text"],
Cell[CellGroupData[{
Cell[212037, 6141, 4446, 136, 45, "Input"],
Cell[216486, 6279, 3259, 100, 45, "Output"]
}, Open  ]],
Cell[CellGroupData[{
Cell[219782, 6384, 4552, 138, 45, "Input"],
Cell[224337, 6524, 3588, 112, 45, "Output"]
}, Open  ]],
Cell[227940, 6639, 1373, 20, 143, "Text"],
Cell[229316, 6661, 1623, 24, 121, "Text"],
Cell[230942, 6687, 1480, 21, 77, "Text"],
Cell[CellGroupData[{
Cell[232447, 6712, 3226, 95, 44, "Input"],
Cell[235676, 6809, 3121, 94, 44, "Output"]
}, Open  ]],
Cell[CellGroupData[{
Cell[238834, 6908, 1796, 50, 45, "Input"],
Cell[240633, 6960, 4586, 136, 45, "Output"]
}, Open  ]],
Cell[245234, 7099, 947, 14, 77, "Text"],
Cell[CellGroupData[{
Cell[246206, 7117, 2774, 83, 45, "Input"],
Cell[248983, 7202, 2295, 71, 45, "Output"]
}, Open  ]],
Cell[CellGroupData[{
Cell[251315, 7278, 2960, 91, 45, "Input"],
Cell[254278, 7371, 2565, 79, 45, "Output"]
}, Open  ]],
Cell[CellGroupData[{
Cell[256880, 7455, 4870, 142, 45, "Input"],
Cell[261753, 7599, 4113, 125, 45, "Output"]
}, Open  ]],
Cell[265881, 7727, 1280, 19, 77, "Text"],
Cell[CellGroupData[{
Cell[267186, 7750, 2645, 79, 44, "Input"],
Cell[269834, 7831, 2440, 76, 44, "Output"]
}, Open  ]],
Cell[272289, 7910, 720, 11, 121, "Text"],
Cell[CellGroupData[{
Cell[273034, 7925, 6324, 190, 89, "Input"],
Cell[279361, 8117, 5999, 188, 45, "Output"]
}, Open  ]],
Cell[CellGroupData[{
Cell[285397, 8310, 2722, 80, 44, "Input"],
Cell[288122, 8392, 13801, 425, 69, "Output"]
}, Open  ]],
Cell[301938, 8820, 977, 15, 99, "Text"],
Cell[CellGroupData[{
Cell[302940, 8839, 5568, 160, 44, "Input"],
Cell[308511, 9001, 33771, 1043, 189, "Output"]
}, Open  ]],
Cell[342297, 10047, 1062, 15, 77, "Text"],
Cell[343362, 10064, 758, 18, 99, "Text"],
Cell[344123, 10084, 1962, 45, 271, "InputOnly"],
Cell[CellGroupData[{
Cell[346110, 10133, 4241, 133, 45, "Input"],
Cell[350354, 10268, 4216, 133, 45, "Output"]
}, Open  ]],
Cell[CellGroupData[{
Cell[354607, 10406, 5031, 143, 45, "Input"],
Cell[359641, 10551, 4223, 134, 45, "Output"]
}, Open  ]],
Cell[CellGroupData[{
Cell[363901, 10690, 185, 3, 41, "Input"],
Cell[364089, 10695, 3210, 100, 45, "Output"]
}, Open  ]],
Cell[367314, 10798, 861, 17, 77, "Text"]
}, Open  ]],
Cell[CellGroupData[{
Cell[368212, 10820, 68, 1, 60, "Subsection",
 CellTags->"qa:BR.4"],
Cell[368283, 10823, 1650, 25, 99, "Text"],
Cell[CellGroupData[{
Cell[369958, 10852, 6502, 188, 45, "Input"],
Cell[376463, 11042, 5141, 157, 45, "Output"]
}, Open  ]],
Cell[CellGroupData[{
Cell[381641, 11204, 6383, 186, 45, "Input"],
Cell[388027, 11392, 5478, 167, 45, "Output"]
}, Open  ]],
Cell[CellGroupData[{
Cell[393542, 11564, 6528, 188, 45, "Input"],
Cell[400073, 11754, 5703, 177, 45, "Output"]
}, Open  ]],
Cell[405791, 11934, 1424, 22, 165, "Text"],
Cell[CellGroupData[{
Cell[407240, 11960, 6746, 192, 45, "Input"],
Cell[413989, 12154, 5676, 176, 45, "Output"]
}, Open  ]],
Cell[419680, 12333, 918, 14, 33, "Text"],
Cell[CellGroupData[{
Cell[420623, 12351, 10890, 321, 69, "Input"],
Cell[431516, 12674, 8548, 262, 69, "Output"]
}, Open  ]],
Cell[440079, 12939, 141, 3, 33, "Text"],
Cell[CellGroupData[{
Cell[440245, 12946, 6611, 186, 68, "Input"],
Cell[446859, 13134, 54001, 1622, 264, "Output"]
}, Open  ]],
Cell[500875, 14759, 1314, 33, 79, "Text"],
Cell[502192, 14794, 474, 8, 55, "Text"],
Cell[CellGroupData[{
Cell[502691, 14806, 13296, 367, 90, "Input"],
Cell[515990, 15175, 12823, 365, 69, "Output"]
}, Open  ]],
Cell[528828, 15543, 873, 26, 79, "Text"],
Cell[CellGroupData[{
Cell[529726, 15573, 1638, 38, 44, "Input"],
Cell[531367, 15613, 25311, 759, 141, "Output"]
}, Open  ]],
Cell[556693, 16375, 957, 15, 77, "Text"],
Cell[CellGroupData[{
Cell[557675, 16394, 5639, 162, 90, "Input"],
Cell[563317, 16558, 5351, 160, 45, "Output"]
}, Open  ]],
Cell[CellGroupData[{
Cell[568705, 16723, 619, 9, 41, "Input"],
Cell[569327, 16734, 24493, 748, 145, "Output"]
}, Open  ]]
}, Open  ]],
Cell[CellGroupData[{
Cell[593869, 17488, 89, 1, 60, "Subsection",
 CellTags->"qa:BR.5"],
Cell[593961, 17491, 522, 8, 77, "Text"],
Cell[CellGroupData[{
Cell[594508, 17503, 1040, 32, 47, "Input"],
Cell[595551, 17537, 1066, 32, 45, "Output"]
}, Open  ]],
Cell[596632, 17572, 459, 8, 77, "Text"],
Cell[CellGroupData[{
Cell[597116, 17584, 1743, 53, 45, "Input"],
Cell[598862, 17639, 2928, 92, 45, "Output"]
}, Open  ]],
Cell[CellGroupData[{
Cell[601827, 17736, 2844, 85, 47, "Input"],
Cell[604674, 17823, 3959, 123, 45, "Output"]
}, Open  ]],
Cell[608648, 17949, 600, 10, 77, "Text"],
Cell[CellGroupData[{
Cell[609273, 17963, 3058, 88, 47, "Input"],
Cell[612334, 18053, 2600, 81, 47, "Output"]
}, Open  ]],
Cell[614949, 18137, 563, 9, 99, "Text"],
Cell[CellGroupData[{
Cell[615537, 18150, 2363, 69, 44, "Input"],
Cell[617903, 18221, 2092, 63, 45, "Output"]
}, Open  ]],
Cell[CellGroupData[{
Cell[620032, 18289, 2241, 67, 44, "Input"],
Cell[622276, 18358, 1677, 50, 45, "Output"]
}, Open  ]],
Cell[CellGroupData[{
Cell[623990, 18413, 2232, 67, 44, "Input"],
Cell[626225, 18482, 1217, 36, 44, "Output"]
}, Open  ]],
Cell[627457, 18521, 1395, 21, 165, "Text"],
Cell[CellGroupData[{
Cell[628877, 18546, 2243, 67, 44, "Input"],
Cell[631123, 18615, 1221, 36, 44, "Output"]
}, Open  ]],
Cell[632359, 18654, 865, 14, 55, "Text"],
Cell[CellGroupData[{
Cell[633249, 18672, 3545, 103, 67, "Input"],
Cell[636797, 18777, 2687, 80, 45, "Output"]
}, Open  ]],
Cell[639499, 18860, 359, 7, 77, "Text"],
Cell[CellGroupData[{
Cell[639883, 18871, 2388, 69, 67, "Input"],
Cell[642274, 18942, 23045, 682, 216, "Output"]
}, Open  ]],
Cell[665334, 19627, 1595, 41, 83, "Text"],
Cell[CellGroupData[{
Cell[666954, 19672, 1583, 48, 45, "Input"],
Cell[668540, 19722, 1535, 47, 45, "Output"]
}, Open  ]],
Cell[670090, 19772, 513, 9, 77, "Text"],
Cell[CellGroupData[{
Cell[670628, 19785, 6719, 188, 91, "Input"],
Cell[677350, 19975, 12117, 371, 117, "Output"]
}, Open  ]],
Cell[689482, 20349, 1243, 32, 81, "Text"],
Cell[690728, 20383, 961, 16, 99, "Text"],
Cell[CellGroupData[{
Cell[691714, 20403, 3179, 88, 45, "Input"],
Cell[694896, 20493, 11968, 357, 145, "Output"]
}, Open  ]]
}, Open  ]]
}, Open  ]]
}
]
*)

(* End of internal cache information *)
