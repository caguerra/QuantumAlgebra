(* Content-type: application/mathematica *)

(*** Wolfram Notebook File ***)
(* http://www.wolfram.com/nb *)

(* CreatedBy='Mathematica 6.0' *)

(*CacheID: 234*)
(* Internal cache information:
NotebookFileLineBreakTest
NotebookFileLineBreakTest
NotebookDataPosition[       145,          7]
NotebookDataLength[    266845,       7675]
NotebookOptionsPosition[    229397,       6715]
NotebookOutlinePosition[    258228,       7404]
CellTagsIndexPosition[    258023,       7394]
WindowFrame->Normal*)

(* Beginning of Notebook Content *)
Notebook[{

Cell[CellGroupData[{
Cell["Setting New Definitions", "Section",
 CellChangeTimes->{{3.4447720002348003`*^9, 3.4447720215648003`*^9}, {
  3.4447726802497997`*^9, 3.4447726923988*^9}},
 CellTags->"qa:7.0"],

Cell["Load QuantumAlgebra", "Text",
 CellChangeTimes->{{3.444655902042*^9, 3.444655909105*^9}, {
  3.4447726353908*^9, 3.4447726398238*^9}}],

Cell[BoxData[
 RowBox[{"<<", "QuantumAlgebra`QuantumAlgebra`"}]], "InputOnly",
 CellChangeTimes->{{3.4446413030176*^9, 3.4446413140986*^9}, {
  3.4446413654066*^9, 3.4446413662396*^9}}],

Cell[CellGroupData[{

Cell["Inner Products in Single State Spaces", "Subsection",
 CellChangeTimes->{{3.445255226291*^9, 3.44525523324*^9}, {3.445255269887*^9, 
  3.445255287021*^9}, {3.445255361745*^9, 3.4452553685959997`*^9}},
 CellTags->"qa:7.1"],

Cell["\<\
To go further with a calculation we have to define rules between products of \
operators, bras and kets. We first consider inner products between bras and \
kets. \
\>", "Text",
 CellChangeTimes->{{3.444052605193*^9, 3.444052630333*^9}, {3.444088792321*^9,
    3.4440888394630003`*^9}, 3.4446406461966*^9, {3.445254775058*^9, 
   3.4452548054049997`*^9}, {3.5947172336134195`*^9, 
   3.5947172774582148`*^9}, {3.5947173614104853`*^9, 3.5947173892602386`*^9}},
 CellTags->"b:2.3"],

Cell["\<\
Suppose we want to define the orthonormality relation between the discrete \
states of some basis set. These states can be labeled by integer numbers, \
that run from 0 to the dimension of the state space. \
\>", "Text",
 CellChangeTimes->{{3.444052605193*^9, 3.444052630333*^9}, {3.444088792321*^9,
    3.4440888394630003`*^9}, 3.4446406461966*^9, {3.445254775058*^9, 
   3.4452548054049997`*^9}, {3.5947172336134195`*^9, 
   3.5947172774582148`*^9}, {3.5947173614104853`*^9, 3.594717408461317*^9}},
 CellTags->"b:2.3"],

Cell["\<\
The inner product betwen a bra and a ket gives:\
\>", "Text",
 CellChangeTimes->{{3.444052605193*^9, 3.444052630333*^9}, {3.444088792321*^9,
    3.4440888394630003`*^9}, 3.4446406461966*^9, {3.445254775058*^9, 
   3.4452548054049997`*^9}, {3.5947172336134195`*^9, 
   3.5947172774582148`*^9}, {3.5947173614104853`*^9, 3.59471741304758*^9}},
 CellTags->"b:2.3"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{
  TagBox[
   RowBox[{"\[LeftAngleBracket]", 
    AdjustmentBox[
     TagBox["m",
      QuantumAlgebra`QuantumAlgebra`BraArgs,
      BaseStyle->"BraKetArg"],
     BoxBaselineShift->0], 
    AdjustmentBox["\[VerticalSeparator]",
     BoxBaselineShift->-0.1,
     BoxMargins->{{0, -0.2}, {0, 0}}]}],
   QuantumAlgebra`QuantumAlgebra`Bra,
   BaseStyle->"BraWrapper"], "\[CenterDot]", 
  TagBox[
   RowBox[{
    AdjustmentBox["\[VerticalSeparator]",
     BoxBaselineShift->-0.1,
     BoxMargins->{{-0.2, 0}, {0, 0}}], 
    AdjustmentBox[
     TagBox["n",
      QuantumAlgebra`QuantumAlgebra`KetArgs,
      BaseStyle->"BraKetArg"],
     BoxBaselineShift->0], "\[RightAngleBracket]"}],
   QuantumAlgebra`QuantumAlgebra`Ket,
   BaseStyle->"KetWrapper"]}]], "Input",
 CellChangeTimes->{{3.444075972808*^9, 3.444075978211*^9}, {
  3.594717425066267*^9, 3.5947174396332035`*^9}}],

Cell[BoxData[
 TagBox[
  RowBox[{"\[LeftAngleBracket]", 
   AdjustmentBox[
    RowBox[{
     TagBox["m",
      QuantumAlgebra`QuantumAlgebra`BraKetArgs,
      BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
     TagBox["n",
      QuantumAlgebra`QuantumAlgebra`BraKetArgs,
      BaseStyle->"BraKetArg"]}],
    BoxBaselineShift->0], "\[RightAngleBracket]"}],
  QuantumAlgebra`QuantumAlgebra`Braket,
  BaseStyle->"BraKetWrapper"]], "Output",
 CellChangeTimes->{3.4446413690746*^9, 3.445254832936*^9, 
  3.594717440350805*^9}]
}, Open  ]],

Cell[TextData[{
 StyleBox["QuantumAlgebra",
  FontSlant->"Italic"],
 " has reduced the product to a braket object. So, it's en enough to define \
rules for these objects:"
}], "Text",
 CellChangeTimes->{{3.444076009171*^9, 3.444076054277*^9}, {3.444076098389*^9,
    3.444076109323*^9}, {3.4440761484700003`*^9, 3.4440762216280003`*^9}, {
   3.444076253641*^9, 3.44407648546*^9}, {3.44407657188*^9, 
   3.4440765986140003`*^9}, 3.444076646413*^9, {3.4440766764309998`*^9, 
   3.444076677961*^9}, {3.4440889297679996`*^9, 3.444088932524*^9}, {
   3.444089004466*^9, 3.4440890394960003`*^9}, {3.444090098782*^9, 
   3.4440901240690002`*^9}, {3.444090166565*^9, 3.444090203508*^9}, 
   3.4446413832046003`*^9, {3.4446415700206003`*^9, 3.4446415782326*^9}, 
   3.4446416310966*^9, {3.444655959251*^9, 3.444656019551*^9}, {
   3.594717317236707*^9, 3.594717326113123*^9}, {3.5947173693379383`*^9, 
   3.594717372963154*^9}, {3.5947174641771636`*^9, 3.5947174880952888`*^9}}],

Cell[BoxData[
 RowBox[{
  TagBox[
   RowBox[{"\[LeftAngleBracket]", 
    AdjustmentBox[
     RowBox[{
      TagBox["n_",
       QuantumAlgebra`QuantumAlgebra`BraKetArgs,
       BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
      TagBox["m_",
       QuantumAlgebra`QuantumAlgebra`BraKetArgs,
       BaseStyle->"BraKetArg"]}],
     BoxBaselineShift->0.], "\[RightAngleBracket]"}],
   QuantumAlgebra`QuantumAlgebra`Braket,
   BaseStyle->"BraKetWrapper"], ":=", 
  RowBox[{"KroneckerDelta", "[", 
   RowBox[{"n", ",", "m"}], "]"}]}]], "InputOnly",
 CellChangeTimes->{{3.444076115266*^9, 3.4440761429189997`*^9}, {
   3.444076631064*^9, 3.444076638359*^9}, {3.444078457225*^9, 
   3.4440784617720003`*^9}, 3.444088972521*^9, {3.4446416130056*^9, 
   3.4446416164416*^9}}],

Cell["Here are some examples:", "Text",
 CellChangeTimes->{{3.444088979903*^9, 3.444088988151*^9}, {3.444089081693*^9,
   3.444089101885*^9}, {3.4440894746029997`*^9, 3.444089474749*^9}, {
  3.444656089598*^9, 3.444656090108*^9}, {3.444656130659*^9, 
  3.444656131097*^9}}],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{
   TagBox[
    RowBox[{"\[LeftAngleBracket]", 
     AdjustmentBox[
      RowBox[{
       TagBox["2",
        QuantumAlgebra`QuantumAlgebra`BraKetArgs,
        BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
       TagBox["2",
        QuantumAlgebra`QuantumAlgebra`BraKetArgs,
        BaseStyle->"BraKetArg"]}],
      BoxBaselineShift->0.], "\[RightAngleBracket]"}],
    QuantumAlgebra`QuantumAlgebra`Braket,
    BaseStyle->"BraKetWrapper"], ",", 
   TagBox[
    RowBox[{"\[LeftAngleBracket]", 
     AdjustmentBox[
      RowBox[{
       TagBox["3",
        QuantumAlgebra`QuantumAlgebra`BraKetArgs,
        BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
       TagBox["5",
        QuantumAlgebra`QuantumAlgebra`BraKetArgs,
        BaseStyle->"BraKetArg"]}],
      BoxBaselineShift->0.], "\[RightAngleBracket]"}],
    QuantumAlgebra`QuantumAlgebra`Braket,
    BaseStyle->"BraKetWrapper"], ",", 
   TagBox[
    RowBox[{"\[LeftAngleBracket]", 
     AdjustmentBox[
      RowBox[{
       TagBox["n",
        QuantumAlgebra`QuantumAlgebra`BraKetArgs,
        BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
       TagBox["n",
        QuantumAlgebra`QuantumAlgebra`BraKetArgs,
        BaseStyle->"BraKetArg"]}],
      BoxBaselineShift->0.], "\[RightAngleBracket]"}],
    QuantumAlgebra`QuantumAlgebra`Braket,
    BaseStyle->"BraKetWrapper"], ",", 
   TagBox[
    RowBox[{"\[LeftAngleBracket]", 
     AdjustmentBox[
      RowBox[{
       TagBox["n",
        QuantumAlgebra`QuantumAlgebra`BraKetArgs,
        BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
       TagBox["m",
        QuantumAlgebra`QuantumAlgebra`BraKetArgs,
        BaseStyle->"BraKetArg"]}],
      BoxBaselineShift->0.], "\[RightAngleBracket]"}],
    QuantumAlgebra`QuantumAlgebra`Braket,
    BaseStyle->"BraKetWrapper"]}], "}"}]], "Input",
 CellChangeTimes->{{3.444076892641*^9, 3.444076954922*^9}, {
  3.4446416808585997`*^9, 3.4446416916796*^9}, {3.444656100094*^9, 
  3.444656112884*^9}}],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{"1", ",", "0", ",", "1", ",", 
   RowBox[{"KroneckerDelta", "[", 
    RowBox[{"m", ",", "n"}], "]"}]}], "}"}]], "Output",
 CellChangeTimes->{{3.444076917538*^9, 3.444076955394*^9}, 3.444078469962*^9, 
   3.444430602517*^9, 3.444432848484*^9, 3.4445821475150003`*^9, {
   3.4446416719876003`*^9, 3.4446416923076*^9}, 3.4446561146619997`*^9, 
   3.445254837847*^9, 3.594717493626605*^9}]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{
   RowBox[{
    TagBox[
     RowBox[{"\[LeftAngleBracket]", 
      AdjustmentBox[
       TagBox["0",
        QuantumAlgebra`QuantumAlgebra`BraArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], 
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{0, -0.2}, {0, 0}}]}],
     QuantumAlgebra`QuantumAlgebra`Bra,
     BaseStyle->"BraWrapper"], "\[CenterDot]", 
    TagBox[
     RowBox[{
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{-0.2, 0}, {0, 0}}], 
      AdjustmentBox[
       TagBox["1",
        QuantumAlgebra`QuantumAlgebra`KetArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], "\[RightAngleBracket]"}],
     QuantumAlgebra`QuantumAlgebra`Ket,
     BaseStyle->"KetWrapper"]}], ",", 
   RowBox[{
    TagBox[
     RowBox[{"\[LeftAngleBracket]", 
      AdjustmentBox[
       TagBox["2",
        QuantumAlgebra`QuantumAlgebra`BraArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], 
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{0, -0.2}, {0, 0}}]}],
     QuantumAlgebra`QuantumAlgebra`Bra,
     BaseStyle->"BraWrapper"], "\[CenterDot]", 
    TagBox[
     RowBox[{
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{-0.2, 0}, {0, 0}}], 
      AdjustmentBox[
       TagBox["2",
        QuantumAlgebra`QuantumAlgebra`KetArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], "\[RightAngleBracket]"}],
     QuantumAlgebra`QuantumAlgebra`Ket,
     BaseStyle->"KetWrapper"]}], ",", 
   RowBox[{
    TagBox[
     RowBox[{"\[LeftAngleBracket]", 
      AdjustmentBox[
       TagBox["m",
        QuantumAlgebra`QuantumAlgebra`BraArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], 
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{0, -0.2}, {0, 0}}]}],
     QuantumAlgebra`QuantumAlgebra`Bra,
     BaseStyle->"BraWrapper"], "\[CenterDot]", 
    TagBox[
     RowBox[{
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{-0.2, 0}, {0, 0}}], 
      AdjustmentBox[
       TagBox["n",
        QuantumAlgebra`QuantumAlgebra`KetArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], "\[RightAngleBracket]"}],
     QuantumAlgebra`QuantumAlgebra`Ket,
     BaseStyle->"KetWrapper"]}]}], "}"}]], "Input",
 CellChangeTimes->{{3.594717567587843*^9, 3.594717589439892*^9}}],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{"0", ",", "1", ",", 
   RowBox[{"KroneckerDelta", "[", 
    RowBox[{"m", ",", "n"}], "]"}]}], "}"}]], "Output",
 CellChangeTimes->{{3.5947175806882763`*^9, 3.5947175897830925`*^9}}]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{
  RowBox[{"(", 
   FractionBox[
    RowBox[{
     TagBox[
      RowBox[{"\[LeftAngleBracket]", 
       AdjustmentBox[
        TagBox["0",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0], 
       AdjustmentBox["\[VerticalSeparator]",
        BoxMargins->{{0, -0.2}, {0, 0}}]}],
      QuantumAlgebra`QuantumAlgebra`Bra,
      BaseStyle->"BraWrapper"], "-", 
     TagBox[
      RowBox[{"\[LeftAngleBracket]", 
       AdjustmentBox[
        TagBox["1",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0], 
       AdjustmentBox["\[VerticalSeparator]",
        BoxMargins->{{0, -0.2}, {0, 0}}]}],
      QuantumAlgebra`QuantumAlgebra`Bra,
      BaseStyle->"BraWrapper"], "-", 
     TagBox[
      RowBox[{"\[LeftAngleBracket]", 
       AdjustmentBox[
        TagBox["3",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0], 
       AdjustmentBox["\[VerticalSeparator]",
        BoxMargins->{{0, -0.2}, {0, 0}}]}],
      QuantumAlgebra`QuantumAlgebra`Bra,
      BaseStyle->"BraWrapper"]}], 
    SqrtBox["3"]], ")"}], "\[CenterDot]", 
  RowBox[{"(", 
   FractionBox[
    RowBox[{
     TagBox[
      RowBox[{
       AdjustmentBox["\[VerticalSeparator]",
        BoxMargins->{{-0.4, 0.}, {0., 0.}}], 
       AdjustmentBox[
        TagBox["0",
         QuantumAlgebra`QuantumAlgebra`KetArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0], "\[RightAngleBracket]"}],
      QuantumAlgebra`QuantumAlgebra`Ket,
      BaseStyle->"KetWrapper"], "-", 
     TagBox[
      RowBox[{
       AdjustmentBox["\[VerticalSeparator]",
        BoxMargins->{{-0.4, 0.}, {0., 0.}}], 
       AdjustmentBox[
        TagBox["1",
         QuantumAlgebra`QuantumAlgebra`KetArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0], "\[RightAngleBracket]"}],
      QuantumAlgebra`QuantumAlgebra`Ket,
      BaseStyle->"KetWrapper"], "+", 
     TagBox[
      RowBox[{
       AdjustmentBox["\[VerticalSeparator]",
        BoxMargins->{{-0.4, 0.}, {0., 0.}}], 
       AdjustmentBox[
        TagBox["2",
         QuantumAlgebra`QuantumAlgebra`KetArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0], "\[RightAngleBracket]"}],
      QuantumAlgebra`QuantumAlgebra`Ket,
      BaseStyle->"KetWrapper"]}], 
    SqrtBox["3"]], ")"}]}]], "Input",
 CellChangeTimes->{{3.4440774849110003`*^9, 3.4440775201210003`*^9}, {
  3.444077568382*^9, 3.444077598501*^9}, {3.444077721811*^9, 
  3.4440778044189997`*^9}, {3.4446420070685997`*^9, 3.4446420388966*^9}, {
  3.594717672312507*^9, 3.5947176736853094`*^9}}],

Cell[BoxData[
 FractionBox["2", "3"]], "Output",
 CellChangeTimes->{
  3.444077598745*^9, {3.444077725737*^9, 3.444077765329*^9}, 
   3.444077805106*^9, 3.4440784759779997`*^9, 3.444430602549*^9, 
   3.4444328502869997`*^9, 3.444582149799*^9, {3.4446420317716*^9, 
   3.4446420395446*^9}, 3.4452548789820004`*^9}]
}, Open  ]],

Cell["\<\
In the following example, the outer forms of the operators \[ScriptCapitalA] \
and \[ScriptCapitalB] are replaced using local rules and the result is \
automatically simplified by using the braket definition.\
\>", "Text",
 CellChangeTimes->{{3.4440921285039997`*^9, 3.444092312487*^9}, {
   3.444656413583*^9, 3.4446564954960003`*^9}, {3.4446569072460003`*^9, 
   3.4446571069890003`*^9}, {3.444657271101*^9, 3.444657337665*^9}, 
   3.44465738569*^9, {3.444657434086*^9, 3.4446574890810003`*^9}, {
   3.444657523601*^9, 3.444657544418*^9}, {3.445254891547*^9, 
   3.4452549038900003`*^9}, {3.5947176598912296`*^9, 3.594717694591259*^9}}],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{
  RowBox[{
   FractionBox[
    RowBox[{
     TagBox[
      RowBox[{"\[LeftAngleBracket]", 
       AdjustmentBox[
        TagBox["2",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0], 
       AdjustmentBox["\[VerticalSeparator]",
        BoxBaselineShift->-0.1,
        BoxMargins->{{0, -0.2}, {0, 0}}]}],
      QuantumAlgebra`QuantumAlgebra`Bra,
      BaseStyle->"BraWrapper"], "+", 
     TagBox[
      RowBox[{"\[LeftAngleBracket]", 
       AdjustmentBox[
        TagBox["5",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0], 
       AdjustmentBox["\[VerticalSeparator]",
        BoxBaselineShift->-0.1,
        BoxMargins->{{0, -0.2}, {0, 0}}]}],
      QuantumAlgebra`QuantumAlgebra`Bra,
      BaseStyle->"BraWrapper"]}], 
    SqrtBox["2"]], "\[CenterDot]", 
   OverscriptBox["\[ScriptCapitalA]", "^"], "\[CenterDot]", 
   OverscriptBox["\[ScriptCapitalB]", "^"], "\[CenterDot]", 
   FractionBox[
    RowBox[{
     TagBox[
      RowBox[{
       AdjustmentBox["\[VerticalSeparator]",
        BoxBaselineShift->-0.1,
        BoxMargins->{{-0.2, 0}, {0, 0}}], 
       AdjustmentBox[
        TagBox["2",
         QuantumAlgebra`QuantumAlgebra`KetArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0], "\[RightAngleBracket]"}],
      QuantumAlgebra`QuantumAlgebra`Ket,
      BaseStyle->"KetWrapper"], "+", 
     TagBox[
      RowBox[{
       AdjustmentBox["\[VerticalSeparator]",
        BoxBaselineShift->-0.1,
        BoxMargins->{{-0.2, 0}, {0, 0}}], 
       AdjustmentBox[
        TagBox["5",
         QuantumAlgebra`QuantumAlgebra`KetArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0], "\[RightAngleBracket]"}],
      QuantumAlgebra`QuantumAlgebra`Ket,
      BaseStyle->"KetWrapper"]}], 
    SqrtBox["2"]]}], "/.", "\[VeryThinSpace]", 
  RowBox[{"{", 
   RowBox[{
    RowBox[{
     OverscriptBox["\[ScriptCapitalA]", "^"], "\[Rule]", 
     RowBox[{
      TagBox[
       RowBox[{
        AdjustmentBox["\[VerticalSeparator]",
         BoxBaselineShift->-0.1,
         BoxMargins->{{-0.2, 0}, {0, 0}}], 
        AdjustmentBox[
         TagBox["2",
          QuantumAlgebra`QuantumAlgebra`KetArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0], "\[RightAngleBracket]"}],
       QuantumAlgebra`QuantumAlgebra`Ket,
       BaseStyle->"KetWrapper"], "\[CenterDot]", 
      TagBox[
       RowBox[{"\[LeftAngleBracket]", 
        AdjustmentBox[
         TagBox["5",
          QuantumAlgebra`QuantumAlgebra`BraArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0], 
        AdjustmentBox["\[VerticalSeparator]",
         BoxBaselineShift->-0.1,
         BoxMargins->{{0, -0.2}, {0, 0}}]}],
       QuantumAlgebra`QuantumAlgebra`Bra,
       BaseStyle->"BraWrapper"]}]}], ",", 
    RowBox[{
     OverscriptBox["\[ScriptCapitalB]", "^"], "\[Rule]", 
     RowBox[{
      TagBox[
       RowBox[{
        AdjustmentBox["\[VerticalSeparator]",
         BoxBaselineShift->-0.1,
         BoxMargins->{{-0.2, 0}, {0, 0}}], 
        AdjustmentBox[
         TagBox["5",
          QuantumAlgebra`QuantumAlgebra`KetArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0], "\[RightAngleBracket]"}],
       QuantumAlgebra`QuantumAlgebra`Ket,
       BaseStyle->"KetWrapper"], "\[CenterDot]", 
      TagBox[
       RowBox[{"\[LeftAngleBracket]", 
        AdjustmentBox[
         TagBox["2",
          QuantumAlgebra`QuantumAlgebra`BraArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0], 
        AdjustmentBox["\[VerticalSeparator]",
         BoxBaselineShift->-0.1,
         BoxMargins->{{0, -0.2}, {0, 0}}]}],
       QuantumAlgebra`QuantumAlgebra`Bra,
       BaseStyle->"BraWrapper"]}]}]}], "}"}]}]], "Input",
 CellChangeTimes->{{3.4440774849110003`*^9, 3.4440775201210003`*^9}, {
   3.444077568382*^9, 3.444077634205*^9}, 3.4440778335480003`*^9, {
   3.444077888377*^9, 3.444077896666*^9}, {3.4446565074119997`*^9, 
   3.444656525448*^9}, {3.4446567775880003`*^9, 3.4446568536219997`*^9}, {
   3.4446568941870003`*^9, 3.444656903545*^9}, {3.594717614664288*^9, 
   3.5947176315442533`*^9}}],

Cell[BoxData[
 FractionBox["1", "2"]], "Output",
 CellChangeTimes->{
  3.4440776348529997`*^9, 3.444077836396*^9, 3.444077898692*^9, 
   3.444078476887*^9, 3.444430602585*^9, 3.4444328526800003`*^9, 
   3.444582151953*^9, 3.444656849745*^9, 3.444656904059*^9, 
   3.4452549108190002`*^9, {3.594717607515582*^9, 3.5947176336143723`*^9}}]
}, Open  ]],

Cell["\<\
In some instances you may want to define a braket between a bra and ket that \
have different labels. In this case the braket don't evaluate automatically.\
\>", "Text",
 CellChangeTimes->{{3.444657560054*^9, 3.444657586273*^9}, {
   3.4446576368900003`*^9, 3.444657667605*^9}, {3.444657725426*^9, 
   3.444657783065*^9}, {3.4446584345889997`*^9, 3.444658493763*^9}, {
   3.4446586375810003`*^9, 3.444658641171*^9}, {3.444658676401*^9, 
   3.444658681082*^9}, {3.444660398582*^9, 3.444660422138*^9}, 
   3.445254932836*^9}],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{
  TagBox[
   RowBox[{"\[LeftAngleBracket]", 
    AdjustmentBox[
     TagBox["n",
      QuantumAlgebra`QuantumAlgebra`BraArgs,
      BaseStyle->"BraKetArg"],
     BoxBaselineShift->0], 
    AdjustmentBox["\[VerticalSeparator]",
     BoxBaselineShift->-0.1,
     BoxMargins->{{0, -0.2}, {0, 0}}]}],
   QuantumAlgebra`QuantumAlgebra`Bra,
   BaseStyle->"BraWrapper"], "\[CenterDot]", 
  TagBox[
   SubscriptBox[
    RowBox[{
     AdjustmentBox["\[VerticalSeparator]",
      BoxBaselineShift->-0.1,
      BoxMargins->{{-0.2, 0}, {0, 0}}], 
     AdjustmentBox[
      TagBox["m",
       QuantumAlgebra`QuantumAlgebra`KetArgs,
       BaseStyle->"BraKetArg"],
      BoxBaselineShift->0], "\[RightAngleBracket]"}], 
    TagBox[
     AdjustmentBox[
      TagBox["x",
       QuantumAlgebra`QuantumAlgebra`KetArgs,
       BaseStyle->"BraKetArg"],
      BoxBaselineShift->0],
     QuantumAlgebra`QuantumAlgebra`UDScript,
     BaseStyle->"RIndex"]],
   QuantumAlgebra`QuantumAlgebra`Ket,
   BaseStyle->"KetWrapper"]}]], "Input",
 CellChangeTimes->{{3.4446575942139997`*^9, 3.444657619825*^9}, {
  3.5947177322688637`*^9, 3.5947177413636794`*^9}}],

Cell[BoxData[
 RowBox[{
  TagBox[
   RowBox[{"\[LeftAngleBracket]", 
    AdjustmentBox[
     TagBox["n",
      QuantumAlgebra`QuantumAlgebra`BraArgs,
      BaseStyle->"BraKetArg"],
     BoxBaselineShift->0], 
    AdjustmentBox["\[VerticalSeparator]",
     BoxBaselineShift->-0.1,
     BoxMargins->{{0, -0.2}, {0, 0}}]}],
   QuantumAlgebra`QuantumAlgebra`Bra,
   BaseStyle->"BraWrapper"], "\[CenterDot]", 
  TagBox[
   SubscriptBox[
    RowBox[{
     AdjustmentBox["\[VerticalSeparator]",
      BoxBaselineShift->-0.1,
      BoxMargins->{{-0.2, 0}, {0, 0}}], 
     AdjustmentBox[
      TagBox["m",
       QuantumAlgebra`QuantumAlgebra`KetArgs,
       BaseStyle->"BraKetArg"],
      BoxBaselineShift->0], "\[RightAngleBracket]"}], 
    TagBox[
     AdjustmentBox[
      TagBox["x",
       QuantumAlgebra`QuantumAlgebra`KetArgs,
       BaseStyle->"BraKetArg"],
      BoxBaselineShift->0],
     QuantumAlgebra`QuantumAlgebra`UDScript,
     BaseStyle->"RIndex"]],
   QuantumAlgebra`QuantumAlgebra`Ket,
   BaseStyle->"KetWrapper"]}]], "Output",
 CellChangeTimes->{3.444657621848*^9, 3.4452549372060003`*^9, 
  3.59471774166008*^9}]
}, Open  ]],

Cell[TextData[{
 "We could try a definition like: ",
 Cell[BoxData[
  FormBox[
   RowBox[{
    RowBox[{"\[LeftAngleBracket]", 
     RowBox[{"n", 
      AdjustmentBox["|",
       BoxBaselineShift->0.14285714285714285`,
       BoxMargins->{{0., 0.}, {-0.14285714285714285`, 0.14285714285714285`}}], 
      RowBox[{"**", 
       RowBox[{
        AdjustmentBox["|",
         BoxBaselineShift->0.14285714285714285`,
         BoxMargins->{{0., 0.}, {-0.14285714285714285`, 
          0.14285714285714285`}}], "m"}]}]}], "\[RightAngleBracket]"}], ":=", 
    "rhs"}], TraditionalForm]],
  FormatType->"TraditionalForm"],
 ", however this is not straithforward, since the symbol ",
 StyleBox["NonCommutativeMultiply",
  FontWeight->"Bold"],
 " is protected by the system. If really necessary this symbol can be \
unprotected to make the definition anyway."
}], "Text",
 CellChangeTimes->CompressedData["
1:eJxTTMoPSmViYGAQB2IQbWx8eQ3fypeO5fv614HorD0p20A0k7b5DhC95QTb
SRD9qOrMeRD9q87ohyiQ9ngY9w9Eu3QbMIkB6T0l11lA9Lua2Rwg+slSf04Q
3TfdjR9E3zxXLQCiGRjuiILoL39ZbEC0dvsqLQkgPSPvmS6INuTgEdda9dJR
ZN17SRCtbrjGBER/02gxA9Hz3us7gmiONTfAdFraIQ8QverjNh8QHZXinQ+i
DTn21ILo5gNSMtpAOqbfCUybxilpgmiZqAxdEH1EwcUERB84NdUURJ9e+DXF
d/VLR/27OWkguvX1zywQHZWyPQdEv4mR9Eo88crxk6JlIIjml5wdD6LPLGvL
AdETeILKQfQinTVg+soh5noQ7fHtaAeIBgDpUbNg
  "]],

Cell["\<\
A better approach is to use tag assignments, taking as a tag any of the heads \
of the quatum objects that appear in the product. This will create the \
definition for the tag and not for the non commutative product.\
\>", "Text",
 CellChangeTimes->{{3.4440779266*^9, 3.444077940492*^9}, {3.444078003148*^9, 
   3.444078017724*^9}, {3.444078152212*^9, 3.4440782063900003`*^9}, {
   3.444092865578*^9, 3.444092914965*^9}, {3.444092945517*^9, 
   3.444092966733*^9}, {3.444092996859*^9, 3.4440930024890003`*^9}, {
   3.4440930502060003`*^9, 3.444093059869*^9}, {3.444093102875*^9, 
   3.444093408156*^9}, {3.444097365329*^9, 3.444097391201*^9}, {
   3.444658360376*^9, 3.44465838349*^9}, {3.444658597381*^9, 
   3.44465861213*^9}, {3.444658697498*^9, 3.444658702771*^9}, {
   3.444658758075*^9, 3.444658789717*^9}, {3.444659066356*^9, 
   3.444659181876*^9}, {3.444659217256*^9, 3.444659270467*^9}, {
   3.444659303568*^9, 3.4446593403789997`*^9}, {3.44465937367*^9, 
   3.444659425426*^9}, {3.4446595165*^9, 3.444659562686*^9}, {
   3.444660666177*^9, 3.444660748585*^9}, 3.5947180084480324`*^9, {
   3.594718066378023*^9, 3.5947180965785823`*^9}, {3.5947209487123003`*^9, 
   3.594720966667932*^9}}],

Cell[TextData[{
 "The following code defines a new braketing rule, and attaches the rule to \
the ",
 StyleBox["Bra",
  FontWeight->"Bold"],
 " object. "
}], "Text",
 CellChangeTimes->{{3.444659583881*^9, 3.444659669969*^9}, 
   3.5947178484082303`*^9}],

Cell[BoxData[
 RowBox[{"Bra", "/:", 
  RowBox[{
   TagBox[
    RowBox[{"\[LeftAngleBracket]", 
     AdjustmentBox[
      TagBox["n_",
       QuantumAlgebra`QuantumAlgebra`BraArgs,
       BaseStyle->"BraKetArg"],
      BoxBaselineShift->0], 
     AdjustmentBox["\[VerticalSeparator]",
      BoxMargins->{{0, -0.2}, {0, 0}}]}],
    QuantumAlgebra`QuantumAlgebra`Bra,
    BaseStyle->"BraWrapper"], "\[CenterDot]", 
   TagBox[
    SubscriptBox[
     RowBox[{
      AdjustmentBox["\[VerticalSeparator]",
       BoxMargins->{{-0.4, 0}, {0, 0}}], 
      AdjustmentBox[
       TagBox["m_",
        QuantumAlgebra`QuantumAlgebra`KetArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], "\[RightAngleBracket]"}], 
     TagBox[
      AdjustmentBox[
       TagBox["x",
        QuantumAlgebra`QuantumAlgebra`KetArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0],
      QuantumAlgebra`QuantumAlgebra`UDScript,
      BaseStyle->"RIndex"]],
    QuantumAlgebra`QuantumAlgebra`Ket,
    BaseStyle->"KetWrapper"]}], ":=", 
  TagBox[
   SubscriptBox[
    RowBox[{"\[LeftAngleBracket]", 
     AdjustmentBox[
      RowBox[{
       TagBox["n",
        QuantumAlgebra`QuantumAlgebra`BraKetArgs,
        BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
       TagBox["m",
        QuantumAlgebra`QuantumAlgebra`BraKetArgs,
        BaseStyle->"BraKetArg"]}],
      BoxBaselineShift->0], "\[RightAngleBracket]"}], 
    TagBox[
     AdjustmentBox[
      TagBox["x",
       QuantumAlgebra`QuantumAlgebra`KetArgs,
       BaseStyle->"BraKetArg"],
      BoxBaselineShift->0],
     QuantumAlgebra`QuantumAlgebra`UDScript,
     BaseStyle->"RIndex"]],
   QuantumAlgebra`QuantumAlgebra`Braket,
   BaseStyle->"BraKetWrapper"]}]], "InputOnly",
 CellChangeTimes->{{3.444657807223*^9, 3.4446578464379997`*^9}, {
  3.444657941262*^9, 3.4446579501140003`*^9}, {3.444658003417*^9, 
  3.4446580060150003`*^9}, {3.444658112133*^9, 3.444658122153*^9}, {
  3.4446581857460003`*^9, 3.4446582437130003`*^9}, {3.4446582961029997`*^9, 
  3.444658297509*^9}, {3.594718283521523*^9, 3.5947182940203414`*^9}}],

Cell["\<\
Now, inner products of bras and kets that matches this rule will be \
automatically simplified to a braket object:\
\>", "Text",
 CellChangeTimes->{{3.444659950045*^9, 3.44466001096*^9}, {3.444660771356*^9, 
  3.4446608085550003`*^9}, {3.5947183534235797`*^9, 3.5947183797175198`*^9}}],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{
   RowBox[{
    TagBox[
     RowBox[{"\[LeftAngleBracket]", 
      AdjustmentBox[
       TagBox["2",
        QuantumAlgebra`QuantumAlgebra`BraArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], 
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{0, -0.2}, {0, 0}}]}],
     QuantumAlgebra`QuantumAlgebra`Bra,
     BaseStyle->"BraWrapper"], "\[CenterDot]", 
    TagBox[
     SubscriptBox[
      RowBox[{
       AdjustmentBox["\[VerticalSeparator]",
        BoxBaselineShift->-0.1,
        BoxMargins->{{-0.2, 0}, {0, 0}}], 
       AdjustmentBox[
        TagBox["5",
         QuantumAlgebra`QuantumAlgebra`KetArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0], "\[RightAngleBracket]"}], 
      TagBox[
       AdjustmentBox[
        TagBox["x",
         QuantumAlgebra`QuantumAlgebra`KetArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"RIndex"]],
     QuantumAlgebra`QuantumAlgebra`Ket,
     BaseStyle->"KetWrapper"]}], ",", 
   RowBox[{
    TagBox[
     RowBox[{"\[LeftAngleBracket]", 
      AdjustmentBox[
       TagBox["p",
        QuantumAlgebra`QuantumAlgebra`BraArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], 
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{0, -0.2}, {0, 0}}]}],
     QuantumAlgebra`QuantumAlgebra`Bra,
     BaseStyle->"BraWrapper"], "\[CenterDot]", 
    TagBox[
     SubscriptBox[
      RowBox[{
       AdjustmentBox["\[VerticalSeparator]",
        BoxBaselineShift->-0.1,
        BoxMargins->{{-0.2, 0}, {0, 0}}], 
       AdjustmentBox[
        TagBox["q",
         QuantumAlgebra`QuantumAlgebra`KetArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0], "\[RightAngleBracket]"}], 
      TagBox[
       AdjustmentBox[
        TagBox["x",
         QuantumAlgebra`QuantumAlgebra`KetArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"RIndex"]],
     QuantumAlgebra`QuantumAlgebra`Ket,
     BaseStyle->"KetWrapper"]}]}], "}"}]], "Input",
 CellChangeTimes->{{3.444659760034*^9, 3.444659780788*^9}, {
  3.5947183028968086`*^9, 3.594718313334406*^9}}],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{
   TagBox[
    SubscriptBox[
     RowBox[{"\[LeftAngleBracket]", 
      AdjustmentBox[
       RowBox[{
        TagBox["2",
         QuantumAlgebra`QuantumAlgebra`BraKetArgs,
         BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
        TagBox["5",
         QuantumAlgebra`QuantumAlgebra`BraKetArgs,
         BaseStyle->"BraKetArg"]}],
       BoxBaselineShift->0], "\[RightAngleBracket]"}], 
     TagBox[
      AdjustmentBox[
       TagBox["x",
        QuantumAlgebra`QuantumAlgebra`KetArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0],
      QuantumAlgebra`QuantumAlgebra`UDScript,
      BaseStyle->"RIndex"]],
    QuantumAlgebra`QuantumAlgebra`Braket,
    BaseStyle->"BraKetWrapper"], ",", 
   TagBox[
    SubscriptBox[
     RowBox[{"\[LeftAngleBracket]", 
      AdjustmentBox[
       RowBox[{
        TagBox["p",
         QuantumAlgebra`QuantumAlgebra`BraKetArgs,
         BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
        TagBox["q",
         QuantumAlgebra`QuantumAlgebra`BraKetArgs,
         BaseStyle->"BraKetArg"]}],
       BoxBaselineShift->0], "\[RightAngleBracket]"}], 
     TagBox[
      AdjustmentBox[
       TagBox["x",
        QuantumAlgebra`QuantumAlgebra`KetArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0],
      QuantumAlgebra`QuantumAlgebra`UDScript,
      BaseStyle->"RIndex"]],
    QuantumAlgebra`QuantumAlgebra`Braket,
    BaseStyle->"BraKetWrapper"]}], "}"}]], "Output",
 GeneratedCell->False,
 CellAutoOverwrite->False,
 CellChangeTimes->{
  3.444659781368*^9, 3.4446598578599997`*^9, {3.444660035064*^9, 
   3.444660058225*^9}, 3.445255105756*^9, 3.5947179786418095`*^9, 
   3.5947183136114216`*^9}]
}, Open  ]],

Cell["\<\
The braket object that appears in the rhs of the definition can be further \
reduced by doing a definition for it:\
\>", "Text",
 CellChangeTimes->{{3.444660027663*^9, 3.444660027992*^9}, {3.444660070795*^9,
    3.444660103799*^9}, {3.444660134223*^9, 3.4446601981400003`*^9}, 
   3.444660249965*^9, {3.444660824395*^9, 3.444660832717*^9}, {
   3.4452551184440002`*^9, 3.4452551189849997`*^9}, {3.5947184152144885`*^9, 
   3.5947184154935045`*^9}}],

Cell[BoxData[
 RowBox[{
  TagBox[
   SubscriptBox[
    RowBox[{"\[LeftAngleBracket]", 
     AdjustmentBox[
      RowBox[{
       TagBox["n_",
        QuantumAlgebra`QuantumAlgebra`BraKetArgs,
        BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
       TagBox["m_",
        QuantumAlgebra`QuantumAlgebra`BraKetArgs,
        BaseStyle->"BraKetArg"]}],
      BoxBaselineShift->0], "\[RightAngleBracket]"}], 
    TagBox[
     AdjustmentBox[
      TagBox["x",
       QuantumAlgebra`QuantumAlgebra`KetArgs,
       BaseStyle->"BraKetArg"],
      BoxBaselineShift->0],
     QuantumAlgebra`QuantumAlgebra`UDScript,
     BaseStyle->"RIndex"]],
   QuantumAlgebra`QuantumAlgebra`Braket,
   BaseStyle->"BraKetWrapper"], ":=", 
  SubscriptBox["\[Xi]", 
   RowBox[{"n", ",", "m"}]]}]], "InputOnly",
 CellChangeTimes->{{3.444659823565*^9, 3.444659839929*^9}}],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{
   RowBox[{
    TagBox[
     RowBox[{"\[LeftAngleBracket]", 
      AdjustmentBox[
       TagBox["2",
        QuantumAlgebra`QuantumAlgebra`BraArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], 
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{0, -0.2}, {0, 0}}]}],
     QuantumAlgebra`QuantumAlgebra`Bra,
     BaseStyle->"BraWrapper"], "\[CenterDot]", 
    TagBox[
     SubscriptBox[
      RowBox[{
       AdjustmentBox["\[VerticalSeparator]",
        BoxBaselineShift->-0.1,
        BoxMargins->{{-0.2, 0}, {0, 0}}], 
       AdjustmentBox[
        TagBox["5",
         QuantumAlgebra`QuantumAlgebra`KetArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0], "\[RightAngleBracket]"}], 
      TagBox[
       AdjustmentBox[
        TagBox["x",
         QuantumAlgebra`QuantumAlgebra`KetArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"RIndex"]],
     QuantumAlgebra`QuantumAlgebra`Ket,
     BaseStyle->"KetWrapper"]}], ",", 
   RowBox[{
    TagBox[
     RowBox[{"\[LeftAngleBracket]", 
      AdjustmentBox[
       TagBox["p",
        QuantumAlgebra`QuantumAlgebra`BraArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], 
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{0, -0.2}, {0, 0}}]}],
     QuantumAlgebra`QuantumAlgebra`Bra,
     BaseStyle->"BraWrapper"], "\[CenterDot]", 
    TagBox[
     SubscriptBox[
      RowBox[{
       AdjustmentBox["\[VerticalSeparator]",
        BoxBaselineShift->-0.1,
        BoxMargins->{{-0.2, 0}, {0, 0}}], 
       AdjustmentBox[
        TagBox["q",
         QuantumAlgebra`QuantumAlgebra`KetArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0], "\[RightAngleBracket]"}], 
      TagBox[
       AdjustmentBox[
        TagBox["x",
         QuantumAlgebra`QuantumAlgebra`KetArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"RIndex"]],
     QuantumAlgebra`QuantumAlgebra`Ket,
     BaseStyle->"KetWrapper"]}]}], "}"}]], "Input",
 CellChangeTimes->{{3.444658035292*^9, 3.444658080949*^9}, {3.444658178682*^9,
    3.444658178966*^9}, 3.4446596838970003`*^9, {3.4446598118120003`*^9, 
   3.444659814597*^9}, 3.444659848237*^9, {3.5947184244853573`*^9, 
   3.5947184289118176`*^9}}],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{
   SubscriptBox["\[Xi]", 
    RowBox[{"2", ",", "5"}]], ",", 
   SubscriptBox["\[Xi]", 
    RowBox[{"p", ",", "q"}]]}], "}"}]], "Output",
 CellChangeTimes->{{3.4446580448199997`*^9, 3.444658081646*^9}, 
   3.444658127385*^9, 3.444658179736*^9, {3.444659834066*^9, 
   3.444659863767*^9}, 3.444660215516*^9, 3.445255130517*^9, 
   3.5947184292706175`*^9}]
}, Open  ]],

Cell[TextData[{
 "To clear the definitions we have to use the Unset and TagUnset commands. In \
short, we just have to copy the lhs of our definitions followed by the (",
 Cell[BoxData[
  FormBox["=.", TraditionalForm]],
  FontWeight->"Bold"],
 ") operator. "
}], "Text",
 CellChangeTimes->{{3.444094750285*^9, 3.444094822241*^9}, {3.444094856046*^9,
   3.444094950418*^9}, {3.444095919751*^9, 3.444095970749*^9}, {
  3.4440960657*^9, 3.444096066421*^9}, {3.444096543975*^9, 
  3.444096598995*^9}, {3.444096653027*^9, 3.444096674035*^9}, {
  3.44525515437*^9, 3.4452551578929996`*^9}, {3.594718435619829*^9, 
  3.5947184359474297`*^9}}],

Cell[BoxData[{
 RowBox[{
  TagBox[
   RowBox[{"\[LeftAngleBracket]", 
    AdjustmentBox[
     RowBox[{
      TagBox["n_",
       QuantumAlgebra`QuantumAlgebra`BraKetArgs,
       BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
      TagBox["m_",
       QuantumAlgebra`QuantumAlgebra`BraKetArgs,
       BaseStyle->"BraKetArg"]}],
     BoxBaselineShift->0.], "\[RightAngleBracket]"}],
   QuantumAlgebra`QuantumAlgebra`Braket,
   BaseStyle->"BraKetWrapper"], "=."}], "\[IndentingNewLine]", 
 RowBox[{
  TagBox[
   SubscriptBox[
    RowBox[{"\[LeftAngleBracket]", 
     AdjustmentBox[
      RowBox[{
       TagBox["n_",
        QuantumAlgebra`QuantumAlgebra`BraKetArgs,
        BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
       TagBox["m_",
        QuantumAlgebra`QuantumAlgebra`BraKetArgs,
        BaseStyle->"BraKetArg"]}],
      BoxBaselineShift->0], "\[RightAngleBracket]"}], 
    TagBox[
     AdjustmentBox[
      TagBox["x",
       QuantumAlgebra`QuantumAlgebra`KetArgs,
       BaseStyle->"BraKetArg"],
      BoxBaselineShift->0],
     QuantumAlgebra`QuantumAlgebra`UDScript,
     BaseStyle->"RIndex"]],
   QuantumAlgebra`QuantumAlgebra`Braket,
   BaseStyle->"BraKetWrapper"], "=."}], "\[IndentingNewLine]", 
 RowBox[{"Bra", "/:", 
  RowBox[{
   RowBox[{
    TagBox[
     RowBox[{"\[LeftAngleBracket]", 
      AdjustmentBox[
       TagBox["n_",
        QuantumAlgebra`QuantumAlgebra`BraArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], 
      AdjustmentBox["\[VerticalSeparator]",
       BoxMargins->{{0, -0.2}, {0, 0}}]}],
     QuantumAlgebra`QuantumAlgebra`Bra,
     BaseStyle->"BraWrapper"], "\[CenterDot]", 
    TagBox[
     SubscriptBox[
      RowBox[{
       AdjustmentBox["\[VerticalSeparator]",
        BoxMargins->{{-0.4, 0}, {0, 0}}], 
       AdjustmentBox[
        TagBox["m_",
         QuantumAlgebra`QuantumAlgebra`KetArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0], "\[RightAngleBracket]"}], 
      TagBox[
       AdjustmentBox[
        TagBox["x",
         QuantumAlgebra`QuantumAlgebra`KetArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"RIndex"]],
     QuantumAlgebra`QuantumAlgebra`Ket,
     BaseStyle->"KetWrapper"]}], "=."}]}]}], "InputOnly",
 CellChangeTimes->{{3.444076115266*^9, 3.4440761429189997`*^9}, {
   3.444076631064*^9, 3.444076638359*^9}, {3.444078457225*^9, 
   3.4440784617720003`*^9}, {3.444080089828*^9, 3.444080090799*^9}, {
   3.444080217523*^9, 3.444080225086*^9}, 3.4440947458719997`*^9, {
   3.44409490924*^9, 3.444094910442*^9}, {3.444658923047*^9, 
   3.444658937627*^9}, {3.5947184647725554`*^9, 3.594718466564658*^9}},
 CellTags->"b:2.3"]
}, Open  ]],

Cell[CellGroupData[{

Cell["Operators in Single State Spaces", "Subsection",
 CellChangeTimes->{{3.445255378906*^9, 3.445255383467*^9}},
 CellTags->"qa:7.2"],

Cell["\<\
To define the action of operators on kets or bras, tag definitions should be \
used, taking as a tag any of the heads of the quantum objects that appear in \
the product.  \
\>", "Text",
 CellChangeTimes->{{3.4440779266*^9, 3.444077940492*^9}, {3.444078003148*^9, 
  3.444078017724*^9}, {3.444078152212*^9, 3.4440782063900003`*^9}, {
  3.444092865578*^9, 3.444092914965*^9}, {3.444092945517*^9, 
  3.444092966733*^9}, {3.444092996859*^9, 3.4440930024890003`*^9}, {
  3.4440930502060003`*^9, 3.444093059869*^9}, {3.444093102875*^9, 
  3.444093408156*^9}, {3.444097365329*^9, 3.444097391201*^9}, {
  3.444660994609*^9, 3.444660995834*^9}, {3.4446612877799997`*^9, 
  3.44466137863*^9}, {3.4447630240558*^9, 3.4447630273338003`*^9}, {
  3.445843161065*^9, 3.445843187998*^9}, {3.5947207369604797`*^9, 
  3.59472073728808*^9}, {3.594720774513402*^9, 3.594720839113806*^9}, {
  3.594720911043103*^9, 3.5947209300511904`*^9}, {3.5947209845467496`*^9, 
  3.5947209886269827`*^9}}],

Cell[TextData[{
 "In the following example, the action of an operator ",
 Cell[BoxData[
  FormBox[
   OverscriptBox["A", "^"], TraditionalForm]]],
 " on a ket is defined using the head ",
 StyleBox["Operator",
  FontWeight->"Bold"],
 " as a tag. The corresponding definition for its Hermitian operator in the \
dual space is also defined. In the section about ",
 StyleBox[ButtonBox["Setting Several Definitions ",
  BaseStyle->"Hyperlink",
  ButtonData->{"Setting Several Definitions.nb", None}],
  FontSlant->"Italic"],
 "we will see how to make both definitions at once."
}], "Text",
 CellChangeTimes->{{3.4440779266*^9, 3.444077940492*^9}, {3.444078003148*^9, 
   3.444078017724*^9}, {3.444078152212*^9, 3.4440782063900003`*^9}, {
   3.444092865578*^9, 3.444092914965*^9}, {3.444092945517*^9, 
   3.444092966733*^9}, {3.444092996859*^9, 3.4440930024890003`*^9}, {
   3.4440930502060003`*^9, 3.444093059869*^9}, {3.444093102875*^9, 
   3.444093408156*^9}, {3.444097365329*^9, 3.444097391201*^9}, {
   3.444660994609*^9, 3.444660995834*^9}, {3.4446612877799997`*^9, 
   3.444661515657*^9}, {3.444661561153*^9, 3.44466160399*^9}, {
   3.444663152738*^9, 3.444663309856*^9}, {3.444663887649*^9, 
   3.444663891229*^9}, {3.4452554814049997`*^9, 3.445255492274*^9}, {
   3.44525553456*^9, 3.445255698875*^9}, {3.4452564913599997`*^9, 
   3.4452565011359997`*^9}, 3.594717861550028*^9, {3.5947210059109716`*^9, 
   3.5947210304441996`*^9}, {3.5947211069824543`*^9, 3.594721141285551*^9}}],

Cell[BoxData[{
 RowBox[{"Operator", "/:", 
  RowBox[{
   OverscriptBox["\[ScriptCapitalA]", "^"], "\[CenterDot]", 
   TagBox[
    RowBox[{
     AdjustmentBox["\[VerticalSeparator]",
      BoxBaselineShift->-0.1,
      BoxMargins->{{-0.2, 0}, {0, 0}}], 
     AdjustmentBox[
      TagBox["n_",
       QuantumAlgebra`QuantumAlgebra`KetArgs,
       BaseStyle->"BraKetArg"],
      BoxBaselineShift->0], "\[RightAngleBracket]"}],
    QuantumAlgebra`QuantumAlgebra`Ket,
    BaseStyle->"KetWrapper"]}], ":=", 
  RowBox[{
   RowBox[{"f", "[", "n", "]"}], " ", 
   TagBox[
    RowBox[{
     AdjustmentBox["\[VerticalSeparator]",
      BoxBaselineShift->-0.1,
      BoxMargins->{{-0.2, 0}, {0, 0}}], 
     AdjustmentBox[
      TagBox[
       RowBox[{"1", "+", "n"}],
       QuantumAlgebra`QuantumAlgebra`KetArgs,
       BaseStyle->"BraKetArg"],
      BoxBaselineShift->0], "\[RightAngleBracket]"}],
    QuantumAlgebra`QuantumAlgebra`Ket,
    BaseStyle->"KetWrapper"]}]}], "\[IndentingNewLine]", 
 RowBox[{"Operator", "/:", 
  RowBox[{
   TagBox[
    RowBox[{"\[LeftAngleBracket]", 
     AdjustmentBox[
      TagBox["n_",
       QuantumAlgebra`QuantumAlgebra`BraArgs,
       BaseStyle->"BraKetArg"],
      BoxBaselineShift->0], 
     AdjustmentBox["\[VerticalSeparator]",
      BoxBaselineShift->-0.1,
      BoxMargins->{{0, -0.2}, {0, 0}}]}],
    QuantumAlgebra`QuantumAlgebra`Bra,
    BaseStyle->"BraWrapper"], "\[CenterDot]", 
   SuperscriptBox[
    OverscriptBox["\[ScriptCapitalA]", "^"], "\[Dagger]"]}], ":=", 
  RowBox[{
   SuperscriptBox[
    RowBox[{"f", "[", "n", "]"}], "*"], " ", 
   TagBox[
    RowBox[{"\[LeftAngleBracket]", 
     AdjustmentBox[
      TagBox[
       RowBox[{"1", "+", "n"}],
       QuantumAlgebra`QuantumAlgebra`BraArgs,
       BaseStyle->"BraKetArg"],
      BoxBaselineShift->0], 
     AdjustmentBox["\[VerticalSeparator]",
      BoxBaselineShift->-0.1,
      BoxMargins->{{0, -0.2}, {0, 0}}]}],
    QuantumAlgebra`QuantumAlgebra`Bra,
    BaseStyle->"BraWrapper"]}]}]}], "InputOnly",
 CellChangeTimes->{{3.444077238092*^9, 3.444077266414*^9}, {
   3.4440783283719997`*^9, 3.444078328672*^9}, {3.4440937641210003`*^9, 
   3.444093772343*^9}, 3.4444329350369997`*^9, {3.44466100083*^9, 
   3.444661048105*^9}, {3.4446610824700003`*^9, 3.444661134852*^9}, {
   3.444662330675*^9, 3.444662350146*^9}, {3.444662402913*^9, 
   3.4446624286400003`*^9}, {3.444662498909*^9, 3.444662530486*^9}, {
   3.444662669723*^9, 3.444662685132*^9}, {3.444662874074*^9, 
   3.444662876535*^9}, {3.5947211518491554`*^9, 3.594721191283763*^9}},
 CellTags->"b:2.3"],

Cell["\<\
In the following examples, these definitions are used togeher with the \
associative property of the non commutative product to simplify the \
calculations: \
\>", "Text",
 CellChangeTimes->{{3.444093632099*^9, 3.444093641561*^9}, {3.444094044492*^9,
    3.444094045825*^9}, {3.444094159619*^9, 3.44409423537*^9}, {
   3.444095250144*^9, 3.4440952504639997`*^9}, {3.444095284276*^9, 
   3.444095298501*^9}, {3.4440954206940002`*^9, 3.444095427138*^9}, 
   3.4440974350439997`*^9, {3.444663328769*^9, 3.444663329916*^9}, {
   3.444663505781*^9, 3.4446636163859997`*^9}, {3.44525605826*^9, 
   3.445256069065*^9}, 3.594717864623233*^9, {3.594721390117757*^9, 
   3.5947214159175177`*^9}, {3.5947214941715746`*^9, 3.594721547396187*^9}, {
   3.5947215849150305`*^9, 3.5947216331156044`*^9}, 3.5947216633315897`*^9, {
   3.594721775165187*^9, 3.594721848705555*^9}, {3.5947220933403425`*^9, 
   3.5947221442883205`*^9}}],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{
   RowBox[{
    OverscriptBox["\[ScriptCapitalA]", "^"], "\[CenterDot]", 
    TagBox[
     RowBox[{
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{-0.2, 0}, {0, 0}}], 
      AdjustmentBox[
       TagBox["p",
        QuantumAlgebra`QuantumAlgebra`KetArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], "\[RightAngleBracket]"}],
     QuantumAlgebra`QuantumAlgebra`Ket,
     BaseStyle->"KetWrapper"]}], ",", 
   RowBox[{
    OverscriptBox["\[ScriptCapitalA]", "^"], "\[CenterDot]", 
    OverscriptBox["\[ScriptCapitalA]", "^"], "\[CenterDot]", 
    TagBox[
     RowBox[{
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{-0.2, 0}, {0, 0}}], 
      AdjustmentBox[
       TagBox["p",
        QuantumAlgebra`QuantumAlgebra`KetArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], "\[RightAngleBracket]"}],
     QuantumAlgebra`QuantumAlgebra`Ket,
     BaseStyle->"KetWrapper"]}], ",", 
   RowBox[{
    OverscriptBox["\[ScriptCapitalA]", "^"], "\[CenterDot]", 
    OverscriptBox["\[ScriptCapitalA]", "^"], "\[CenterDot]", 
    OverscriptBox["\[ScriptCapitalA]", "^"], "\[CenterDot]", 
    OverscriptBox["\[ScriptCapitalA]", "^"], "\[CenterDot]", 
    TagBox[
     RowBox[{
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{-0.2, 0}, {0, 0}}], 
      AdjustmentBox[
       TagBox["p",
        QuantumAlgebra`QuantumAlgebra`KetArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], "\[RightAngleBracket]"}],
     QuantumAlgebra`QuantumAlgebra`Ket,
     BaseStyle->"KetWrapper"]}]}], "}"}]], "Input",
 CellChangeTimes->{{3.444093651473*^9, 3.444093741582*^9}, {
   3.4440938732200003`*^9, 3.444093898531*^9}, {3.4440939333970003`*^9, 
   3.44409395859*^9}, {3.4440941204820004`*^9, 3.4440941207*^9}, {
   3.44466168079*^9, 3.4446617015769997`*^9}, {3.444661749927*^9, 
   3.444661786008*^9}, 3.5947212333332014`*^9}],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{
   RowBox[{
    RowBox[{"f", "[", "p", "]"}], " ", 
    TagBox[
     RowBox[{
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{-0.2, 0}, {0, 0}}], 
      AdjustmentBox[
       TagBox[
        RowBox[{"1", "+", "p"}],
        QuantumAlgebra`QuantumAlgebra`KetArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], "\[RightAngleBracket]"}],
     QuantumAlgebra`QuantumAlgebra`Ket,
     BaseStyle->"KetWrapper"]}], ",", 
   RowBox[{
    RowBox[{"f", "[", "p", "]"}], " ", 
    RowBox[{"f", "[", 
     RowBox[{"1", "+", "p"}], "]"}], " ", 
    TagBox[
     RowBox[{
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{-0.2, 0}, {0, 0}}], 
      AdjustmentBox[
       TagBox[
        RowBox[{"2", "+", "p"}],
        QuantumAlgebra`QuantumAlgebra`KetArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], "\[RightAngleBracket]"}],
     QuantumAlgebra`QuantumAlgebra`Ket,
     BaseStyle->"KetWrapper"]}], ",", 
   RowBox[{
    RowBox[{"f", "[", "p", "]"}], " ", 
    RowBox[{"f", "[", 
     RowBox[{"1", "+", "p"}], "]"}], " ", 
    RowBox[{"f", "[", 
     RowBox[{"2", "+", "p"}], "]"}], " ", 
    RowBox[{"f", "[", 
     RowBox[{"3", "+", "p"}], "]"}], " ", 
    TagBox[
     RowBox[{
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{-0.2, 0}, {0, 0}}], 
      AdjustmentBox[
       TagBox[
        RowBox[{"4", "+", "p"}],
        QuantumAlgebra`QuantumAlgebra`KetArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], "\[RightAngleBracket]"}],
     QuantumAlgebra`QuantumAlgebra`Ket,
     BaseStyle->"KetWrapper"]}]}], "}"}]], "Output",
 CellChangeTimes->{{3.444093658166*^9, 3.444093691966*^9}, {3.444093730177*^9,
    3.444093741865*^9}, {3.444093874267*^9, 3.444093898869*^9}, {
   3.444093934382*^9, 3.4440939590290003`*^9}, 3.444094121341*^9, 
   3.444430622417*^9, {3.444432886658*^9, 3.4444329094119997`*^9}, {
   3.444661773467*^9, 3.444661786631*^9}, {3.444662338449*^9, 
   3.44466236425*^9}, {3.444662407176*^9, 3.444662431951*^9}, 
   3.44466253331*^9, 3.444662688675*^9, {3.445256075422*^9, 3.44525608004*^9},
    3.5947212336296015`*^9}]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{
   RowBox[{
    TagBox[
     RowBox[{"\[LeftAngleBracket]", 
      AdjustmentBox[
       TagBox["p",
        QuantumAlgebra`QuantumAlgebra`BraArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], 
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{0, -0.2}, {0, 0}}]}],
     QuantumAlgebra`QuantumAlgebra`Bra,
     BaseStyle->"BraWrapper"], "\[CenterDot]", 
    SuperscriptBox[
     OverscriptBox["\[ScriptCapitalA]", "^"], "\[Dagger]"]}], ",", 
   RowBox[{
    TagBox[
     RowBox[{"\[LeftAngleBracket]", 
      AdjustmentBox[
       TagBox["p",
        QuantumAlgebra`QuantumAlgebra`BraArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], 
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{0, -0.2}, {0, 0}}]}],
     QuantumAlgebra`QuantumAlgebra`Bra,
     BaseStyle->"BraWrapper"], "\[CenterDot]", 
    SuperscriptBox[
     OverscriptBox["\[ScriptCapitalA]", "^"], "\[Dagger]"], "\[CenterDot]", 
    SuperscriptBox[
     OverscriptBox["\[ScriptCapitalA]", "^"], "\[Dagger]"]}], ",", 
   RowBox[{
    TagBox[
     RowBox[{"\[LeftAngleBracket]", 
      AdjustmentBox[
       TagBox["p",
        QuantumAlgebra`QuantumAlgebra`BraArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], 
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{0, -0.2}, {0, 0}}]}],
     QuantumAlgebra`QuantumAlgebra`Bra,
     BaseStyle->"BraWrapper"], "\[CenterDot]", 
    SuperscriptBox[
     OverscriptBox["\[ScriptCapitalA]", "^"], "\[Dagger]"], "\[CenterDot]", 
    SuperscriptBox[
     OverscriptBox["\[ScriptCapitalA]", "^"], "\[Dagger]"], "\[CenterDot]", 
    SuperscriptBox[
     OverscriptBox["\[ScriptCapitalA]", "^"], "\[Dagger]"], "\[CenterDot]", 
    SuperscriptBox[
     OverscriptBox["\[ScriptCapitalA]", "^"], "\[Dagger]"]}]}], 
  "}"}]], "Input",
 CellChangeTimes->{{3.444093651473*^9, 3.444093741582*^9}, {
  3.4440938732200003`*^9, 3.444093898531*^9}, {3.4440939333970003`*^9, 
  3.44409395859*^9}, {3.4440941204820004`*^9, 3.4440941207*^9}, {
  3.44466168079*^9, 3.4446617015769997`*^9}, {3.444661749927*^9, 
  3.444661786008*^9}, {3.4446618500039997`*^9, 3.444661875683*^9}, {
  3.444662693811*^9, 3.444662712855*^9}, {3.5947212465932245`*^9, 
  3.594721255163127*^9}}],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{
   RowBox[{
    TagBox[
     RowBox[{"\[LeftAngleBracket]", 
      AdjustmentBox[
       TagBox[
        RowBox[{"1", "+", "p"}],
        QuantumAlgebra`QuantumAlgebra`BraArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], 
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{0, -0.2}, {0, 0}}]}],
     QuantumAlgebra`QuantumAlgebra`Bra,
     BaseStyle->"BraWrapper"], " ", 
    SuperscriptBox[
     RowBox[{"(", 
      RowBox[{"f", "[", "p", "]"}], ")"}], "*"]}], ",", 
   RowBox[{
    TagBox[
     RowBox[{"\[LeftAngleBracket]", 
      AdjustmentBox[
       TagBox[
        RowBox[{"2", "+", "p"}],
        QuantumAlgebra`QuantumAlgebra`BraArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], 
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{0, -0.2}, {0, 0}}]}],
     QuantumAlgebra`QuantumAlgebra`Bra,
     BaseStyle->"BraWrapper"], " ", 
    SuperscriptBox[
     RowBox[{"(", 
      RowBox[{"f", "[", "p", "]"}], ")"}], "*"], " ", 
    SuperscriptBox[
     RowBox[{"(", 
      RowBox[{"f", "[", 
       RowBox[{"1", "+", "p"}], "]"}], ")"}], "*"]}], ",", 
   RowBox[{
    TagBox[
     RowBox[{"\[LeftAngleBracket]", 
      AdjustmentBox[
       TagBox[
        RowBox[{"4", "+", "p"}],
        QuantumAlgebra`QuantumAlgebra`BraArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], 
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{0, -0.2}, {0, 0}}]}],
     QuantumAlgebra`QuantumAlgebra`Bra,
     BaseStyle->"BraWrapper"], " ", 
    SuperscriptBox[
     RowBox[{"(", 
      RowBox[{"f", "[", "p", "]"}], ")"}], "*"], " ", 
    SuperscriptBox[
     RowBox[{"(", 
      RowBox[{"f", "[", 
       RowBox[{"1", "+", "p"}], "]"}], ")"}], "*"], " ", 
    SuperscriptBox[
     RowBox[{"(", 
      RowBox[{"f", "[", 
       RowBox[{"2", "+", "p"}], "]"}], ")"}], "*"], " ", 
    SuperscriptBox[
     RowBox[{"(", 
      RowBox[{"f", "[", 
       RowBox[{"3", "+", "p"}], "]"}], ")"}], "*"]}]}], "}"}]], "Output",
 CellChangeTimes->{3.444661876882*^9, 3.444662367264*^9, 3.444662440258*^9, 
  3.444662534969*^9, 3.444662713541*^9, 3.44525610148*^9, 
  3.594721255506328*^9}]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{
   RowBox[{
    TagBox[
     RowBox[{"\[LeftAngleBracket]", 
      AdjustmentBox[
       TagBox["p",
        QuantumAlgebra`QuantumAlgebra`BraArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], 
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{0, -0.2}, {0, 0}}]}],
     QuantumAlgebra`QuantumAlgebra`Bra,
     BaseStyle->"BraWrapper"], "\[CenterDot]", 
    SuperscriptBox[
     OverscriptBox["\[ScriptCapitalA]", "^"], "\[Dagger]"], "\[CenterDot]", 
    OverscriptBox["\[ScriptCapitalA]", "^"], "\[CenterDot]", 
    TagBox[
     RowBox[{
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{-0.2, 0}, {0, 0}}], 
      AdjustmentBox[
       TagBox["q",
        QuantumAlgebra`QuantumAlgebra`KetArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], "\[RightAngleBracket]"}],
     QuantumAlgebra`QuantumAlgebra`Ket,
     BaseStyle->"KetWrapper"]}], ",", 
   RowBox[{
    TagBox[
     RowBox[{"\[LeftAngleBracket]", 
      AdjustmentBox[
       TagBox["p",
        QuantumAlgebra`QuantumAlgebra`BraArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], 
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{0, -0.2}, {0, 0}}]}],
     QuantumAlgebra`QuantumAlgebra`Bra,
     BaseStyle->"BraWrapper"], "\[CenterDot]", 
    SuperscriptBox[
     OverscriptBox["\[ScriptCapitalA]", "^"], "\[Dagger]"], "\[CenterDot]", 
    SuperscriptBox[
     OverscriptBox["\[ScriptCapitalA]", "^"], "\[Dagger]"], "\[CenterDot]", 
    OverscriptBox["\[ScriptCapitalA]", "^"], "\[CenterDot]", 
    OverscriptBox["\[ScriptCapitalA]", "^"], "\[CenterDot]", 
    TagBox[
     RowBox[{
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{-0.2, 0}, {0, 0}}], 
      AdjustmentBox[
       TagBox["q",
        QuantumAlgebra`QuantumAlgebra`KetArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], "\[RightAngleBracket]"}],
     QuantumAlgebra`QuantumAlgebra`Ket,
     BaseStyle->"KetWrapper"]}]}], "}"}]], "Input",
 CellChangeTimes->{{3.4446621683789997`*^9, 3.444662180307*^9}, {
   3.444662718094*^9, 3.4446627499639997`*^9}, {3.5947212586419334`*^9, 
   3.5947212671599026`*^9}, 3.5947213760465317`*^9}],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{
   RowBox[{
    TagBox[
     RowBox[{"\[LeftAngleBracket]", 
      AdjustmentBox[
       RowBox[{
        TagBox[
         RowBox[{"1", "+", "p"}],
         QuantumAlgebra`QuantumAlgebra`BraKetArgs,
         BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
        TagBox[
         RowBox[{"1", "+", "q"}],
         QuantumAlgebra`QuantumAlgebra`BraKetArgs,
         BaseStyle->"BraKetArg"]}],
       BoxBaselineShift->0], "\[RightAngleBracket]"}],
     QuantumAlgebra`QuantumAlgebra`Braket,
     BaseStyle->"BraKetWrapper"], " ", 
    SuperscriptBox[
     RowBox[{"(", 
      RowBox[{"f", "[", "p", "]"}], ")"}], "*"], " ", 
    RowBox[{"f", "[", "q", "]"}]}], ",", 
   RowBox[{
    TagBox[
     RowBox[{"\[LeftAngleBracket]", 
      AdjustmentBox[
       RowBox[{
        TagBox[
         RowBox[{"2", "+", "p"}],
         QuantumAlgebra`QuantumAlgebra`BraKetArgs,
         BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
        TagBox[
         RowBox[{"2", "+", "q"}],
         QuantumAlgebra`QuantumAlgebra`BraKetArgs,
         BaseStyle->"BraKetArg"]}],
       BoxBaselineShift->0], "\[RightAngleBracket]"}],
     QuantumAlgebra`QuantumAlgebra`Braket,
     BaseStyle->"BraKetWrapper"], " ", 
    SuperscriptBox[
     RowBox[{"(", 
      RowBox[{"f", "[", "p", "]"}], ")"}], "*"], " ", 
    SuperscriptBox[
     RowBox[{"(", 
      RowBox[{"f", "[", 
       RowBox[{"1", "+", "p"}], "]"}], ")"}], "*"], " ", 
    RowBox[{"f", "[", "q", "]"}], " ", 
    RowBox[{"f", "[", 
     RowBox[{"1", "+", "q"}], "]"}]}]}], "}"}]], "Output",
 CellChangeTimes->{
  3.444662181582*^9, 3.44466236946*^9, 3.4446625361540003`*^9, {
   3.444662729052*^9, 3.444662788769*^9}, 3.445256105633*^9, 
   3.594721267421917*^9, 3.594721376701733*^9}]
}, Open  ]],

Cell[TextData[{
 "The action of some operator involving a power of ",
 Cell[BoxData[
  FormBox[
   OverscriptBox["A", "^"], TraditionalForm]]],
 " can also be computed. We don't need to do any new definition. We just \
expand the operator using ",
 StyleBox["QAPowerExpand",
  FontWeight->"Bold"],
 "."
}], "Text",
 CellChangeTimes->{{3.444093632099*^9, 3.444093641561*^9}, {
  3.4440940097320004`*^9, 3.444094049217*^9}, {3.444094244413*^9, 
  3.444094343974*^9}, {3.444097451557*^9, 3.444097453321*^9}, {
  3.444663344028*^9, 3.444663413657*^9}, {3.444663789007*^9, 
  3.444663800915*^9}, {3.4452561279189997`*^9, 3.445256181875*^9}}],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{
  RowBox[{
   SuperscriptBox[
    OverscriptBox["\[ScriptCapitalA]", "^"], "10"], "\[CenterDot]", 
   TagBox[
    RowBox[{
     AdjustmentBox["\[VerticalSeparator]",
      BoxBaselineShift->-0.1,
      BoxMargins->{{-0.2, 0.}, {0., 0.}}], 
     AdjustmentBox[
      TagBox["n",
       QuantumAlgebra`QuantumAlgebra`KetArgs,
       BaseStyle->"BraKetArg"],
      BoxBaselineShift->0], "\[RightAngleBracket]"}],
    QuantumAlgebra`QuantumAlgebra`Ket,
    BaseStyle->"KetWrapper"]}], "//", "QAPowerExpand"}]], "Input",
 CellChangeTimes->{{3.444093651473*^9, 3.444093741582*^9}, {
  3.4440938732200003`*^9, 3.444093898531*^9}, {3.4440939333970003`*^9, 
  3.44409395859*^9}, {3.444094060368*^9, 3.444094101865*^9}, {
  3.444553327993*^9, 3.444553346231*^9}, {3.444662830934*^9, 
  3.4446628556029997`*^9}, {3.5947215624277444`*^9, 3.5947215635148067`*^9}}],

Cell[BoxData[
 RowBox[{
  RowBox[{"f", "[", "n", "]"}], " ", 
  RowBox[{"f", "[", 
   RowBox[{"1", "+", "n"}], "]"}], " ", 
  RowBox[{"f", "[", 
   RowBox[{"2", "+", "n"}], "]"}], " ", 
  RowBox[{"f", "[", 
   RowBox[{"3", "+", "n"}], "]"}], " ", 
  RowBox[{"f", "[", 
   RowBox[{"4", "+", "n"}], "]"}], " ", 
  RowBox[{"f", "[", 
   RowBox[{"5", "+", "n"}], "]"}], " ", 
  RowBox[{"f", "[", 
   RowBox[{"6", "+", "n"}], "]"}], " ", 
  RowBox[{"f", "[", 
   RowBox[{"7", "+", "n"}], "]"}], " ", 
  RowBox[{"f", "[", 
   RowBox[{"8", "+", "n"}], "]"}], " ", 
  RowBox[{"f", "[", 
   RowBox[{"9", "+", "n"}], "]"}], " ", 
  TagBox[
   RowBox[{
    AdjustmentBox["\[VerticalSeparator]",
     BoxBaselineShift->-0.1,
     BoxMargins->{{-0.2, 0}, {0, 0}}], 
    AdjustmentBox[
     TagBox[
      RowBox[{"10", "+", "n"}],
      QuantumAlgebra`QuantumAlgebra`KetArgs,
      BaseStyle->"BraKetArg"],
     BoxBaselineShift->0], "\[RightAngleBracket]"}],
   QuantumAlgebra`QuantumAlgebra`Ket,
   BaseStyle->"KetWrapper"]}]], "Output",
 CellChangeTimes->{{3.444094068193*^9, 3.444094102141*^9}, 
   3.444430622457*^9, {3.444432889617*^9, 3.444432911178*^9}, {
   3.444662851209*^9, 3.444662857045*^9}, 3.444662890745*^9, 
   3.4452561879309998`*^9, 3.594721564256849*^9}]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{
  RowBox[{
   SuperscriptBox[
    RowBox[{"(", 
     RowBox[{
      OverscriptBox["\[ScriptCapitalA]", "^"], "+", 
      OverscriptBox["1", "^"]}], ")"}], "4"], "\[CenterDot]", 
   TagBox[
    RowBox[{
     AdjustmentBox["\[VerticalSeparator]",
      BoxBaselineShift->-0.1,
      BoxMargins->{{-0.2, 0.}, {0., 0.}}], 
     AdjustmentBox[
      TagBox["n",
       QuantumAlgebra`QuantumAlgebra`KetArgs,
       BaseStyle->"BraKetArg"],
      BoxBaselineShift->0], "\[RightAngleBracket]"}],
    QuantumAlgebra`QuantumAlgebra`Ket,
    BaseStyle->"KetWrapper"]}], "//", "QAPowerExpand"}]], "Input",
 CellChangeTimes->{{3.444093651473*^9, 3.444093741582*^9}, {
  3.4440938732200003`*^9, 3.444093898531*^9}, {3.4440939333970003`*^9, 
  3.44409395859*^9}, {3.444094060368*^9, 3.444094101865*^9}, {
  3.444553327993*^9, 3.444553346231*^9}, {3.444662830934*^9, 
  3.4446628556029997`*^9}, {3.4446634316029997`*^9, 3.444663442283*^9}, {
  3.594721569049123*^9, 3.594721570495206*^9}}],

Cell[BoxData[
 RowBox[{
  TagBox[
   RowBox[{
    AdjustmentBox["\[VerticalSeparator]",
     BoxBaselineShift->-0.1,
     BoxMargins->{{-0.2, 0}, {0, 0}}], 
    AdjustmentBox[
     TagBox["n",
      QuantumAlgebra`QuantumAlgebra`KetArgs,
      BaseStyle->"BraKetArg"],
     BoxBaselineShift->0], "\[RightAngleBracket]"}],
   QuantumAlgebra`QuantumAlgebra`Ket,
   BaseStyle->"KetWrapper"], "+", 
  RowBox[{"4", " ", 
   RowBox[{"f", "[", "n", "]"}], " ", 
   TagBox[
    RowBox[{
     AdjustmentBox["\[VerticalSeparator]",
      BoxBaselineShift->-0.1,
      BoxMargins->{{-0.2, 0}, {0, 0}}], 
     AdjustmentBox[
      TagBox[
       RowBox[{"1", "+", "n"}],
       QuantumAlgebra`QuantumAlgebra`KetArgs,
       BaseStyle->"BraKetArg"],
      BoxBaselineShift->0], "\[RightAngleBracket]"}],
    QuantumAlgebra`QuantumAlgebra`Ket,
    BaseStyle->"KetWrapper"]}], "+", 
  RowBox[{"6", " ", 
   RowBox[{"f", "[", "n", "]"}], " ", 
   RowBox[{"f", "[", 
    RowBox[{"1", "+", "n"}], "]"}], " ", 
   TagBox[
    RowBox[{
     AdjustmentBox["\[VerticalSeparator]",
      BoxBaselineShift->-0.1,
      BoxMargins->{{-0.2, 0}, {0, 0}}], 
     AdjustmentBox[
      TagBox[
       RowBox[{"2", "+", "n"}],
       QuantumAlgebra`QuantumAlgebra`KetArgs,
       BaseStyle->"BraKetArg"],
      BoxBaselineShift->0], "\[RightAngleBracket]"}],
    QuantumAlgebra`QuantumAlgebra`Ket,
    BaseStyle->"KetWrapper"]}], "+", 
  RowBox[{"4", " ", 
   RowBox[{"f", "[", "n", "]"}], " ", 
   RowBox[{"f", "[", 
    RowBox[{"1", "+", "n"}], "]"}], " ", 
   RowBox[{"f", "[", 
    RowBox[{"2", "+", "n"}], "]"}], " ", 
   TagBox[
    RowBox[{
     AdjustmentBox["\[VerticalSeparator]",
      BoxBaselineShift->-0.1,
      BoxMargins->{{-0.2, 0}, {0, 0}}], 
     AdjustmentBox[
      TagBox[
       RowBox[{"3", "+", "n"}],
       QuantumAlgebra`QuantumAlgebra`KetArgs,
       BaseStyle->"BraKetArg"],
      BoxBaselineShift->0], "\[RightAngleBracket]"}],
    QuantumAlgebra`QuantumAlgebra`Ket,
    BaseStyle->"KetWrapper"]}], "+", 
  RowBox[{
   RowBox[{"f", "[", "n", "]"}], " ", 
   RowBox[{"f", "[", 
    RowBox[{"1", "+", "n"}], "]"}], " ", 
   RowBox[{"f", "[", 
    RowBox[{"2", "+", "n"}], "]"}], " ", 
   RowBox[{"f", "[", 
    RowBox[{"3", "+", "n"}], "]"}], " ", 
   TagBox[
    RowBox[{
     AdjustmentBox["\[VerticalSeparator]",
      BoxBaselineShift->-0.1,
      BoxMargins->{{-0.2, 0}, {0, 0}}], 
     AdjustmentBox[
      TagBox[
       RowBox[{"4", "+", "n"}],
       QuantumAlgebra`QuantumAlgebra`KetArgs,
       BaseStyle->"BraKetArg"],
      BoxBaselineShift->0], "\[RightAngleBracket]"}],
    QuantumAlgebra`QuantumAlgebra`Ket,
    BaseStyle->"KetWrapper"]}]}]], "Output",
 CellChangeTimes->{3.444663442516*^9, 3.4452561899230003`*^9, 
  3.594721571076239*^9}]
}, Open  ]],

Cell[TextData[{
 "The following code defines an eigenvalue equation for an Hermitian operator \
",
 Cell[BoxData[
  FormBox[
   OverscriptBox["Q", "^"], TraditionalForm]]],
 ". It's dual definitions is also given."
}], "Text",
 CellChangeTimes->{{3.444663961038*^9, 3.444664025085*^9}, 
   3.5947178663392363`*^9}],

Cell[BoxData[{
 RowBox[{
  RowBox[{
   SuperscriptBox[
    OverscriptBox["\[ScriptCapitalQ]", "^"], "\[Dagger]"], "=", 
   OverscriptBox["\[ScriptCapitalQ]", "^"]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{"Operator", "/:", 
  RowBox[{
   OverscriptBox["\[ScriptCapitalQ]", "^"], "\[CenterDot]", 
   TagBox[
    RowBox[{
     AdjustmentBox["\[VerticalSeparator]",
      BoxBaselineShift->-0.1,
      BoxMargins->{{-0.2, 0}, {0, 0}}], 
     AdjustmentBox[
      TagBox["q_",
       QuantumAlgebra`QuantumAlgebra`KetArgs,
       BaseStyle->"BraKetArg"],
      BoxBaselineShift->0], "\[RightAngleBracket]"}],
    QuantumAlgebra`QuantumAlgebra`Ket,
    BaseStyle->"KetWrapper"]}], ":=", 
  RowBox[{"q", " ", 
   TagBox[
    RowBox[{
     AdjustmentBox["\[VerticalSeparator]",
      BoxBaselineShift->-0.1,
      BoxMargins->{{-0.2, 0}, {0, 0}}], 
     AdjustmentBox[
      TagBox["q",
       QuantumAlgebra`QuantumAlgebra`KetArgs,
       BaseStyle->"BraKetArg"],
      BoxBaselineShift->0], "\[RightAngleBracket]"}],
    QuantumAlgebra`QuantumAlgebra`Ket,
    BaseStyle->"KetWrapper"]}]}], "\[IndentingNewLine]", 
 RowBox[{"Operator", "/:", 
  RowBox[{
   TagBox[
    RowBox[{"\[LeftAngleBracket]", 
     AdjustmentBox[
      TagBox["q_",
       QuantumAlgebra`QuantumAlgebra`BraArgs,
       BaseStyle->"BraKetArg"],
      BoxBaselineShift->0], 
     AdjustmentBox["\[VerticalSeparator]",
      BoxMargins->{{0, -0.2}, {0, 0}}]}],
    QuantumAlgebra`QuantumAlgebra`Bra,
    BaseStyle->"BraWrapper"], "\[CenterDot]", 
   OverscriptBox["\[ScriptCapitalQ]", "^"]}], ":=", 
  RowBox[{"q", 
   TagBox[
    RowBox[{"\[LeftAngleBracket]", 
     AdjustmentBox[
      TagBox["q",
       QuantumAlgebra`QuantumAlgebra`BraArgs,
       BaseStyle->"BraKetArg"],
      BoxBaselineShift->0], 
     AdjustmentBox["\[VerticalSeparator]",
      BoxMargins->{{0, -0.2}, {0, 0}}]}],
    QuantumAlgebra`QuantumAlgebra`Bra,
    BaseStyle->"BraWrapper"]}]}]}], "InputOnly",
 CellChangeTimes->{{3.444077238092*^9, 3.444077266414*^9}, {
   3.4440783283719997`*^9, 3.444078328672*^9}, {3.4440937641210003`*^9, 
   3.444093772343*^9}, 3.4444329350369997`*^9, {3.44466100083*^9, 
   3.444661048105*^9}, {3.4446610824700003`*^9, 3.444661134852*^9}, {
   3.444662330675*^9, 3.444662350146*^9}, {3.444662402913*^9, 
   3.4446624286400003`*^9}, {3.444662498909*^9, 3.444662530486*^9}, {
   3.444662669723*^9, 3.444662685132*^9}, {3.444662874074*^9, 
   3.444662876535*^9}, {3.444663915842*^9, 3.4446639552799997`*^9}, {
   3.444664241296*^9, 3.444664246901*^9}, {3.445256247144*^9, 
   3.4452562871689997`*^9}, 3.5947223720059566`*^9, {3.5947233231313944`*^9, 
   3.5947233356490536`*^9}, {3.664892892119383*^9, 3.664892896974987*^9}},
 CellTags->"b:2.3"],

Cell["Here are some examples.", "Text",
 CellChangeTimes->{{3.444664388408*^9, 3.444664506554*^9}, {3.445256312119*^9,
   3.445256341815*^9}, {3.594723352855147*^9, 3.5947234089128637`*^9}}],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{
   RowBox[{
    OverscriptBox["\[ScriptCapitalQ]", "^"], "\[CenterDot]", 
    TagBox[
     RowBox[{
      AdjustmentBox["\[VerticalSeparator]",
       BoxMargins->{{-0.4, 0.}, {0., 0.}}], 
      AdjustmentBox[
       TagBox["2",
        QuantumAlgebra`QuantumAlgebra`KetArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], "\[RightAngleBracket]"}],
     QuantumAlgebra`QuantumAlgebra`Ket,
     BaseStyle->"KetWrapper"]}], ",", 
   RowBox[{
    TagBox[
     RowBox[{"\[LeftAngleBracket]", 
      AdjustmentBox[
       TagBox[
        RowBox[{"q", "-", "1"}],
        QuantumAlgebra`QuantumAlgebra`BraArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], 
      AdjustmentBox["\[VerticalSeparator]",
       BoxMargins->{{0, -0.2}, {0, 0}}]}],
     QuantumAlgebra`QuantumAlgebra`Bra,
     BaseStyle->"BraWrapper"], "\[CenterDot]", 
    SuperscriptBox[
     OverscriptBox["\[ScriptCapitalQ]", "^"], "\[Dagger]"]}], ",", 
   RowBox[{
    RowBox[{"Exp", "[", 
     OverscriptBox["\[ScriptCapitalQ]", "^"], "]"}], "\[CenterDot]", 
    TagBox[
     RowBox[{
      AdjustmentBox["\[VerticalSeparator]",
       BoxMargins->{{-0.4, 0.}, {0., 0.}}], 
      AdjustmentBox[
       TagBox["q",
        QuantumAlgebra`QuantumAlgebra`KetArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], "\[RightAngleBracket]"}],
     QuantumAlgebra`QuantumAlgebra`Ket,
     BaseStyle->"KetWrapper"]}]}], "}"}]], "Input",
 CellChangeTimes->{{3.444664206758*^9, 3.444664371414*^9}, {3.444664428601*^9,
   3.4446644295179996`*^9}, {3.445256294502*^9, 3.445256295303*^9}}],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{
   RowBox[{"2", " ", 
    TagBox[
     RowBox[{
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{-0.2, 0}, {0, 0}}], 
      AdjustmentBox[
       TagBox["2",
        QuantumAlgebra`QuantumAlgebra`KetArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], "\[RightAngleBracket]"}],
     QuantumAlgebra`QuantumAlgebra`Ket,
     BaseStyle->"KetWrapper"]}], ",", 
   RowBox[{
    RowBox[{"(", 
     RowBox[{
      RowBox[{"-", "1"}], "+", "q"}], ")"}], " ", 
    TagBox[
     RowBox[{"\[LeftAngleBracket]", 
      AdjustmentBox[
       TagBox[
        RowBox[{
         RowBox[{"-", "1"}], "+", "q"}],
        QuantumAlgebra`QuantumAlgebra`BraArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], 
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{0, -0.2}, {0, 0}}]}],
     QuantumAlgebra`QuantumAlgebra`Bra,
     BaseStyle->"BraWrapper"]}], ",", 
   RowBox[{
    SuperscriptBox["\[ExponentialE]", 
     OverscriptBox["\[ScriptCapitalQ]", "^"]], "\[CenterDot]", 
    TagBox[
     RowBox[{
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{-0.2, 0}, {0, 0}}], 
      AdjustmentBox[
       TagBox["q",
        QuantumAlgebra`QuantumAlgebra`KetArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], "\[RightAngleBracket]"}],
     QuantumAlgebra`QuantumAlgebra`Ket,
     BaseStyle->"KetWrapper"]}]}], "}"}]], "Output",
 CellChangeTimes->{{3.444664233859*^9, 3.444664254178*^9}, {3.444664301513*^9,
    3.4446643623570004`*^9}, 3.444664430389*^9, {3.44525627517*^9, 
   3.445256296212*^9}, 3.6648929004463415`*^9}]
}, Open  ]],

Cell[TextData[{
 "Note that in the last example the expression is not simplified at all. This \
is because we didn\[CloseCurlyQuote]t make an explicit definition fot this. \
In the section about ",
 StyleBox[ButtonBox["Setting Several Definitions",
  BaseStyle->"Hyperlink",
  ButtonData->{"Setting Several Definitions.nb", None}],
  FontSlant->"Italic"],
 ", we will see how to do make it work automatically."
}], "Text",
 CellChangeTimes->{{3.5947234261197023`*^9, 3.594723460446293*^9}, {
  3.594723513988712*^9, 3.594723603079241*^9}, {3.594723634057395*^9, 
  3.594723635976198*^9}, {3.5947236968953466`*^9, 3.594723702603979*^9}}],

Cell["\<\
There is another useful way to define an operator. If the action of this \
operator in a basis of the state space is known, then its outer form can be \
deduced and so we can use this representation. \
\>", "Text",
 CellChangeTimes->{{3.444668642597*^9, 3.4446687859119997`*^9}, {
  3.444670041895*^9, 3.444670050892*^9}, {3.4452565902279997`*^9, 
  3.445256611356*^9}}],

Cell[TextData[{
 "Take an n\[Dash]dimensional system, with basis elements labeled by integer \
numbers. Then the following code defines an operator in the subspace spanned \
by states ",
 Cell[BoxData[
  FormBox[
   RowBox[{" ", 
    TagBox[
     RowBox[{
      AdjustmentBox["\[VerticalSeparator]",
       BoxMargins->{{-0.4, 0.}, {0., 0.}}], 
      AdjustmentBox[
       TagBox["1",
        QuantumAlgebra`QuantumAlgebra`KetArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], "\[RightAngleBracket]"}],
     QuantumAlgebra`QuantumAlgebra`Ket,
     BaseStyle->"KetWrapper"]}], TraditionalForm]]],
 " and ",
 Cell[BoxData[
  FormBox[
   RowBox[{" ", 
    TagBox[
     RowBox[{
      AdjustmentBox["\[VerticalSeparator]",
       BoxMargins->{{-0.4, 0.}, {0., 0.}}], 
      AdjustmentBox[
       TagBox["2",
        QuantumAlgebra`QuantumAlgebra`KetArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], "\[RightAngleBracket]"}],
     QuantumAlgebra`QuantumAlgebra`Ket,
     BaseStyle->"KetWrapper"]}], TraditionalForm]]],
 "."
}], "Text",
 CellChangeTimes->{{3.444668642597*^9, 3.4446687859119997`*^9}, {
  3.444670041895*^9, 3.444670135519*^9}, {3.444670295781*^9, 
  3.444670298422*^9}}],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{
  OverscriptBox["\[ScriptCapitalB]", "^"], "=", 
  RowBox[{
   RowBox[{"\[Xi]", " ", 
    RowBox[{
     TagBox[
      RowBox[{
       AdjustmentBox["\[VerticalSeparator]",
        BoxBaselineShift->-0.1,
        BoxMargins->{{-0.2, 0}, {0, 0}}], 
       AdjustmentBox[
        TagBox["1",
         QuantumAlgebra`QuantumAlgebra`KetArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0], "\[RightAngleBracket]"}],
      QuantumAlgebra`QuantumAlgebra`Ket,
      BaseStyle->"KetWrapper"], "\[CenterDot]", 
     TagBox[
      RowBox[{"\[LeftAngleBracket]", 
       AdjustmentBox[
        TagBox["2",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0], 
       AdjustmentBox["\[VerticalSeparator]",
        BoxBaselineShift->-0.1,
        BoxMargins->{{0, -0.2}, {0, 0}}]}],
      QuantumAlgebra`QuantumAlgebra`Bra,
      BaseStyle->"BraWrapper"]}]}], "+", 
   RowBox[{"\[Chi]", " ", 
    RowBox[{
     TagBox[
      RowBox[{
       AdjustmentBox["\[VerticalSeparator]",
        BoxBaselineShift->-0.1,
        BoxMargins->{{-0.2, 0}, {0, 0}}], 
       AdjustmentBox[
        TagBox["1",
         QuantumAlgebra`QuantumAlgebra`KetArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0], "\[RightAngleBracket]"}],
      QuantumAlgebra`QuantumAlgebra`Ket,
      BaseStyle->"KetWrapper"], "\[CenterDot]", 
     TagBox[
      RowBox[{"\[LeftAngleBracket]", 
       AdjustmentBox[
        TagBox["2",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0], 
       AdjustmentBox["\[VerticalSeparator]",
        BoxBaselineShift->-0.1,
        BoxMargins->{{0, -0.2}, {0, 0}}]}],
      QuantumAlgebra`QuantumAlgebra`Bra,
      BaseStyle->"BraWrapper"]}]}]}]}]], "InputOnly",
 CellChangeTimes->{{3.444668971109*^9, 3.444669006512*^9}, {
  3.4446691961219997`*^9, 3.444669198365*^9}, {3.4446693234119997`*^9, 
  3.444669378618*^9}, {3.4446694320950003`*^9, 3.444669469178*^9}, {
  3.444669534672*^9, 3.444669555942*^9}, {3.444669839017*^9, 
  3.444669887075*^9}, {3.4446699845299997`*^9, 3.444670036584*^9}, {
  3.594723761679576*^9, 3.5947237650467687`*^9}}],

Cell[BoxData[
 RowBox[{
  RowBox[{"\[Xi]", " ", 
   RowBox[{
    TagBox[
     RowBox[{
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{-0.2, 0}, {0, 0}}], 
      AdjustmentBox[
       TagBox["1",
        QuantumAlgebra`QuantumAlgebra`KetArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], "\[RightAngleBracket]"}],
     QuantumAlgebra`QuantumAlgebra`Ket,
     BaseStyle->"KetWrapper"], "\[CenterDot]", 
    TagBox[
     RowBox[{"\[LeftAngleBracket]", 
      AdjustmentBox[
       TagBox["2",
        QuantumAlgebra`QuantumAlgebra`BraArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], 
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{0, -0.2}, {0, 0}}]}],
     QuantumAlgebra`QuantumAlgebra`Bra,
     BaseStyle->"BraWrapper"]}]}], "+", 
  RowBox[{"\[Chi]", " ", 
   RowBox[{
    TagBox[
     RowBox[{
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{-0.2, 0}, {0, 0}}], 
      AdjustmentBox[
       TagBox["1",
        QuantumAlgebra`QuantumAlgebra`KetArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], "\[RightAngleBracket]"}],
     QuantumAlgebra`QuantumAlgebra`Ket,
     BaseStyle->"KetWrapper"], "\[CenterDot]", 
    TagBox[
     RowBox[{"\[LeftAngleBracket]", 
      AdjustmentBox[
       TagBox["2",
        QuantumAlgebra`QuantumAlgebra`BraArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], 
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{0, -0.2}, {0, 0}}]}],
     QuantumAlgebra`QuantumAlgebra`Bra,
     BaseStyle->"BraWrapper"]}]}]}]], "Output",
 CellChangeTimes->{3.5947237653187838`*^9}]
}, Open  ]],

Cell["\<\
In the next example, this definition is used and the inner products are \
simplified using the braketing rules.\
\>", "Text",
 CellChangeTimes->{{3.444670217534*^9, 3.4446702754630003`*^9}, {
  3.444670424493*^9, 3.444670428847*^9}, {3.445256643999*^9, 
  3.445256668177*^9}, {3.445256750045*^9, 3.4452569051619997`*^9}, {
  3.594723825708681*^9, 3.59472386581705*^9}}],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{
   RowBox[{
    OverscriptBox["\[ScriptCapitalB]", "^"], "\[CenterDot]", 
    TagBox[
     RowBox[{
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{-0.2, 0}, {0, 0}}], 
      AdjustmentBox[
       TagBox["2",
        QuantumAlgebra`QuantumAlgebra`KetArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], "\[RightAngleBracket]"}],
     QuantumAlgebra`QuantumAlgebra`Ket,
     BaseStyle->"KetWrapper"]}], ",", 
   RowBox[{
    TagBox[
     RowBox[{"\[LeftAngleBracket]", 
      AdjustmentBox[
       TagBox["1",
        QuantumAlgebra`QuantumAlgebra`BraArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], 
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{0, -0.2}, {0, 0}}]}],
     QuantumAlgebra`QuantumAlgebra`Bra,
     BaseStyle->"BraWrapper"], "\[CenterDot]", 
    OverscriptBox["\[ScriptCapitalB]", "^"], "\[CenterDot]", 
    TagBox[
     RowBox[{
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{-0.2, 0}, {0, 0}}], 
      AdjustmentBox[
       TagBox["3",
        QuantumAlgebra`QuantumAlgebra`KetArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], "\[RightAngleBracket]"}],
     QuantumAlgebra`QuantumAlgebra`Ket,
     BaseStyle->"KetWrapper"]}]}], "}"}]], "Input",
 CellChangeTimes->{{3.444669489775*^9, 3.44466951756*^9}, {3.444670144013*^9, 
  3.444670214208*^9}, {3.594723799519797*^9, 3.594723808067315*^9}}],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{
   RowBox[{
    RowBox[{"\[Xi]", " ", 
     TagBox[
      RowBox[{"\[LeftAngleBracket]", 
       AdjustmentBox[
        RowBox[{
         TagBox["2",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
         TagBox["2",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"]}],
        BoxBaselineShift->0], "\[RightAngleBracket]"}],
      QuantumAlgebra`QuantumAlgebra`Braket,
      BaseStyle->"BraKetWrapper"], " ", 
     TagBox[
      RowBox[{
       AdjustmentBox["\[VerticalSeparator]",
        BoxBaselineShift->-0.1,
        BoxMargins->{{-0.2, 0}, {0, 0}}], 
       AdjustmentBox[
        TagBox["1",
         QuantumAlgebra`QuantumAlgebra`KetArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0], "\[RightAngleBracket]"}],
      QuantumAlgebra`QuantumAlgebra`Ket,
      BaseStyle->"KetWrapper"]}], "+", 
    RowBox[{"\[Chi]", " ", 
     TagBox[
      RowBox[{"\[LeftAngleBracket]", 
       AdjustmentBox[
        RowBox[{
         TagBox["2",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
         TagBox["2",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"]}],
        BoxBaselineShift->0], "\[RightAngleBracket]"}],
      QuantumAlgebra`QuantumAlgebra`Braket,
      BaseStyle->"BraKetWrapper"], " ", 
     TagBox[
      RowBox[{
       AdjustmentBox["\[VerticalSeparator]",
        BoxBaselineShift->-0.1,
        BoxMargins->{{-0.2, 0}, {0, 0}}], 
       AdjustmentBox[
        TagBox["1",
         QuantumAlgebra`QuantumAlgebra`KetArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0], "\[RightAngleBracket]"}],
      QuantumAlgebra`QuantumAlgebra`Ket,
      BaseStyle->"KetWrapper"]}]}], ",", 
   RowBox[{
    RowBox[{"\[Xi]", " ", 
     TagBox[
      RowBox[{"\[LeftAngleBracket]", 
       AdjustmentBox[
        RowBox[{
         TagBox["1",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
         TagBox["1",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"]}],
        BoxBaselineShift->0], "\[RightAngleBracket]"}],
      QuantumAlgebra`QuantumAlgebra`Braket,
      BaseStyle->"BraKetWrapper"], " ", 
     TagBox[
      RowBox[{"\[LeftAngleBracket]", 
       AdjustmentBox[
        RowBox[{
         TagBox["2",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
         TagBox["3",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"]}],
        BoxBaselineShift->0], "\[RightAngleBracket]"}],
      QuantumAlgebra`QuantumAlgebra`Braket,
      BaseStyle->"BraKetWrapper"]}], "+", 
    RowBox[{"\[Chi]", " ", 
     TagBox[
      RowBox[{"\[LeftAngleBracket]", 
       AdjustmentBox[
        RowBox[{
         TagBox["1",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
         TagBox["1",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"]}],
        BoxBaselineShift->0], "\[RightAngleBracket]"}],
      QuantumAlgebra`QuantumAlgebra`Braket,
      BaseStyle->"BraKetWrapper"], " ", 
     TagBox[
      RowBox[{"\[LeftAngleBracket]", 
       AdjustmentBox[
        RowBox[{
         TagBox["2",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
         TagBox["3",
          QuantumAlgebra`QuantumAlgebra`BraKetArgs,
          BaseStyle->"BraKetArg"]}],
        BoxBaselineShift->0], "\[RightAngleBracket]"}],
      QuantumAlgebra`QuantumAlgebra`Braket,
      BaseStyle->"BraKetWrapper"]}]}]}], "}"}]], "Output",
 CellChangeTimes->{{3.444669501493*^9, 3.4446695181619997`*^9}, {
   3.444670146285*^9, 3.444670165487*^9}, {3.444670195602*^9, 
   3.444670214716*^9}, 3.445256676115*^9, 3.5947238083793154`*^9}]
}, Open  ]],

Cell[TextData[{
 "We clear all our definitions using the ",
 StyleBox["Unset",
  FontWeight->"Bold"],
 " and ",
 StyleBox["TagUnset",
  FontWeight->"Bold"],
 " commands."
}], "Text",
 CellChangeTimes->{{3.444094750285*^9, 3.444094822241*^9}, {3.444094856046*^9,
   3.444094950418*^9}, {3.444095919751*^9, 3.444095970749*^9}, {
  3.4440960657*^9, 3.444096066421*^9}, {3.444096543975*^9, 
  3.444096598995*^9}, {3.444096653027*^9, 3.444096674035*^9}, {
  3.444664151856*^9, 3.444664182884*^9}, {3.444670367974*^9, 
  3.444670379087*^9}, {3.445256693291*^9, 3.445256695117*^9}}],

Cell[BoxData[{
 RowBox[{
  RowBox[{
   OverscriptBox["\[ScriptCapitalB]", "^"], "=."}], ";", 
  RowBox[{
   SuperscriptBox[
    OverscriptBox["\[ScriptCapitalQ]", "^"], "\[Dagger]"], "=."}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{"Operator", "/:", 
  RowBox[{
   RowBox[{
    OverscriptBox["\[ScriptCapitalA]", "^"], "\[CenterDot]", 
    TagBox[
     RowBox[{
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{-0.2, 0.}, {0., 0.}}], 
      AdjustmentBox[
       TagBox["n_",
        QuantumAlgebra`QuantumAlgebra`KetArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], "\[RightAngleBracket]"}],
     QuantumAlgebra`QuantumAlgebra`Ket,
     BaseStyle->"KetWrapper"]}], "=."}]}], "\[IndentingNewLine]", 
 RowBox[{"Operator", "/:", 
  RowBox[{
   RowBox[{
    TagBox[
     RowBox[{"\[LeftAngleBracket]", 
      AdjustmentBox[
       TagBox["n_",
        QuantumAlgebra`QuantumAlgebra`BraArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], 
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{0, -0.2}, {0, 0}}]}],
     QuantumAlgebra`QuantumAlgebra`Bra,
     BaseStyle->"BraWrapper"], "\[CenterDot]", 
    SuperscriptBox[
     OverscriptBox["\[ScriptCapitalA]", "^"], "\[Dagger]"]}], 
   "=."}]}], "\[IndentingNewLine]", 
 RowBox[{"Operator", "/:", 
  RowBox[{
   RowBox[{
    OverscriptBox["\[ScriptCapitalQ]", "^"], "\[CenterDot]", 
    TagBox[
     RowBox[{
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{-0.2, 0}, {0, 0}}], 
      AdjustmentBox[
       TagBox["q_",
        QuantumAlgebra`QuantumAlgebra`KetArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], "\[RightAngleBracket]"}],
     QuantumAlgebra`QuantumAlgebra`Ket,
     BaseStyle->"KetWrapper"]}], "=."}]}], "\[IndentingNewLine]", 
 RowBox[{"Operator", "/:", 
  RowBox[{
   RowBox[{
    TagBox[
     RowBox[{"\[LeftAngleBracket]", 
      AdjustmentBox[
       TagBox["q_",
        QuantumAlgebra`QuantumAlgebra`BraArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], 
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{0, -0.2}, {0, 0}}]}],
     QuantumAlgebra`QuantumAlgebra`Bra,
     BaseStyle->"BraWrapper"], "\[CenterDot]", 
    OverscriptBox["\[ScriptCapitalQ]", "^"]}], "=."}]}]}], "InputOnly",
 CellChangeTimes->{{3.5947242415125904`*^9, 3.594724273467238*^9}, {
  3.6648929317871723`*^9, 3.66489293787191*^9}},
 CellTags->"b:2.3"]
}, Open  ]],

Cell[CellGroupData[{

Cell["Inner Products in Composite State Spaces", "Subsection",
 CellChangeTimes->{{3.4452553913599997`*^9, 3.445255405914*^9}},
 CellTags->"qa:7.3"],

Cell["\<\
The inner product of a composite system can be reduced to inner products of \
the individual systems. It means, that in principle, it`s only necessary to \
setup definitions for the individual systems. See the following examples:\
\>", "Text",
 CellChangeTimes->{{3.44408032906*^9, 3.444080358649*^9}, {3.444507006388*^9, 
   3.444507084656*^9}, {3.444507376043*^9, 3.444507438019*^9}, {
   3.4445074830299997`*^9, 3.4445076108389997`*^9}, {3.444507669189*^9, 
   3.4445076999040003`*^9}, {3.444507866085*^9, 3.4445080234449997`*^9}, {
   3.444508244462*^9, 3.444508263038*^9}, {3.4445085578719997`*^9, 
   3.444508605*^9}, 3.444508689242*^9, 3.445257136199*^9, 
   3.5947178774255147`*^9, {3.594724538516334*^9, 3.5947245556913166`*^9}, {
   3.595102735407777*^9, 3.5951027709178076`*^9}, {3.5995583559430366`*^9, 
   3.5995583577370396`*^9}, {3.5995585526135817`*^9, 3.5995585531127825`*^9}}],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{
  TagBox[
   RowBox[{"\[LeftAngleBracket]", 
    AdjustmentBox[
     TagBox[
      RowBox[{
       SubscriptBox["n", "1"], ",", 
       SubscriptBox["m", "2"]}],
      QuantumAlgebra`QuantumAlgebra`BraArgs,
      BaseStyle->"BraKetArg"],
     BoxBaselineShift->0], 
    AdjustmentBox["\[VerticalSeparator]",
     BoxBaselineShift->-0.1,
     BoxMargins->{{0, -0.2}, {0, 0}}]}],
   QuantumAlgebra`QuantumAlgebra`Bra,
   BaseStyle->"BraWrapper"], "\[CenterDot]", 
  TagBox[
   RowBox[{
    AdjustmentBox["\[VerticalSeparator]",
     BoxBaselineShift->-0.1,
     BoxMargins->{{-0.2, 0}, {0, 0}}], 
    AdjustmentBox[
     TagBox[
      RowBox[{
       SubscriptBox["p", "1"], ",", 
       SubscriptBox["q", "2"]}],
      QuantumAlgebra`QuantumAlgebra`KetArgs,
      BaseStyle->"BraKetArg"],
     BoxBaselineShift->0], "\[RightAngleBracket]"}],
   QuantumAlgebra`QuantumAlgebra`Ket,
   BaseStyle->"KetWrapper"]}]], "Input",
 CellChangeTimes->{{3.44450920333*^9, 3.4445092414440002`*^9}, {
  3.5995585644696026`*^9, 3.5995585728000174`*^9}}],

Cell[BoxData[
 RowBox[{
  TagBox[
   RowBox[{"\[LeftAngleBracket]", 
    AdjustmentBox[
     RowBox[{
      TagBox[
       SubscriptBox["m", "2"],
       QuantumAlgebra`QuantumAlgebra`BraKetArgs,
       BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
      TagBox[
       SubscriptBox["q", "2"],
       QuantumAlgebra`QuantumAlgebra`BraKetArgs,
       BaseStyle->"BraKetArg"]}],
     BoxBaselineShift->0], "\[RightAngleBracket]"}],
   QuantumAlgebra`QuantumAlgebra`Braket,
   BaseStyle->"BraKetWrapper"], " ", 
  TagBox[
   RowBox[{"\[LeftAngleBracket]", 
    AdjustmentBox[
     RowBox[{
      TagBox[
       SubscriptBox["n", "1"],
       QuantumAlgebra`QuantumAlgebra`BraKetArgs,
       BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
      TagBox[
       SubscriptBox["p", "1"],
       QuantumAlgebra`QuantumAlgebra`BraKetArgs,
       BaseStyle->"BraKetArg"]}],
     BoxBaselineShift->0], "\[RightAngleBracket]"}],
   QuantumAlgebra`QuantumAlgebra`Braket,
   BaseStyle->"BraKetWrapper"]}]], "Output",
 CellChangeTimes->{3.444509242352*^9, 3.4445512445690002`*^9, 
  3.4445818411689997`*^9, 3.444665545939*^9, 3.445257196054*^9, 
  3.599558573704819*^9}]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{
  RowBox[{
   TagBox[
    RowBox[{
     SubscriptBox["\[InvisiblePrefixScriptBase]", 
      TagBox[
       AdjustmentBox[
        TagBox["1",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"LIndex"]], 
     RowBox[{"\[LeftAngleBracket]", 
      AdjustmentBox[
       TagBox["n",
        QuantumAlgebra`QuantumAlgebra`BraArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], 
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{0, -0.2}, {0, 0}}]}]}],
    QuantumAlgebra`QuantumAlgebra`Bra,
    BaseStyle->"BraWrapper"], "\[CircleTimes]", 
   TagBox[
    RowBox[{
     SubscriptBox["\[InvisiblePrefixScriptBase]", 
      TagBox[
       AdjustmentBox[
        TagBox["2",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"LIndex"]], 
     RowBox[{"\[LeftAngleBracket]", 
      AdjustmentBox[
       TagBox["m",
        QuantumAlgebra`QuantumAlgebra`BraArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], 
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{0, -0.2}, {0, 0}}]}]}],
    QuantumAlgebra`QuantumAlgebra`Bra,
    BaseStyle->"BraWrapper"]}], "\[CenterDot]", 
  RowBox[{
   TagBox[
    SubscriptBox[
     RowBox[{
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{-0.2, 0}, {0, 0}}], 
      AdjustmentBox[
       TagBox["p",
        QuantumAlgebra`QuantumAlgebra`KetArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], "\[RightAngleBracket]"}], 
     TagBox[
      AdjustmentBox[
       TagBox["1",
        QuantumAlgebra`QuantumAlgebra`KetArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0],
      QuantumAlgebra`QuantumAlgebra`UDScript,
      BaseStyle->"RIndex"]],
    QuantumAlgebra`QuantumAlgebra`Ket,
    BaseStyle->"KetWrapper"], "\[CircleTimes]", 
   TagBox[
    SubscriptBox[
     RowBox[{
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{-0.2, 0}, {0, 0}}], 
      AdjustmentBox[
       TagBox["q",
        QuantumAlgebra`QuantumAlgebra`KetArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], "\[RightAngleBracket]"}], 
     TagBox[
      AdjustmentBox[
       TagBox["2",
        QuantumAlgebra`QuantumAlgebra`KetArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0],
      QuantumAlgebra`QuantumAlgebra`UDScript,
      BaseStyle->"RIndex"]],
    QuantumAlgebra`QuantumAlgebra`Ket,
    BaseStyle->"KetWrapper"]}]}]], "Input",
 CellChangeTimes->{{3.444509265179*^9, 3.4445093046809998`*^9}, {
  3.599558576544024*^9, 3.5995586132196884`*^9}}],

Cell[BoxData[
 RowBox[{
  TagBox[
   RowBox[{
    SubscriptBox["\[InvisiblePrefixScriptBase]", 
     TagBox[
      AdjustmentBox[
       TagBox["2",
        QuantumAlgebra`QuantumAlgebra`BraArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0],
      QuantumAlgebra`QuantumAlgebra`UDScript,
      BaseStyle->"LIndex"]], 
    SubscriptBox[
     RowBox[{"\[LeftAngleBracket]", 
      AdjustmentBox[
       RowBox[{
        TagBox["m",
         QuantumAlgebra`QuantumAlgebra`BraKetArgs,
         BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
        TagBox["q",
         QuantumAlgebra`QuantumAlgebra`BraKetArgs,
         BaseStyle->"BraKetArg"]}],
       BoxBaselineShift->0], "\[RightAngleBracket]"}], 
     TagBox[
      AdjustmentBox[
       TagBox["2",
        QuantumAlgebra`QuantumAlgebra`BraArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0],
      QuantumAlgebra`QuantumAlgebra`UDScript,
      BaseStyle->"RIndex"]]}],
   QuantumAlgebra`QuantumAlgebra`Braket,
   BaseStyle->"BraKetWrapper"], " ", 
  TagBox[
   RowBox[{
    SubscriptBox["\[InvisiblePrefixScriptBase]", 
     TagBox[
      AdjustmentBox[
       TagBox["1",
        QuantumAlgebra`QuantumAlgebra`BraArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0],
      QuantumAlgebra`QuantumAlgebra`UDScript,
      BaseStyle->"LIndex"]], 
    SubscriptBox[
     RowBox[{"\[LeftAngleBracket]", 
      AdjustmentBox[
       RowBox[{
        TagBox["n",
         QuantumAlgebra`QuantumAlgebra`BraKetArgs,
         BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
        TagBox["p",
         QuantumAlgebra`QuantumAlgebra`BraKetArgs,
         BaseStyle->"BraKetArg"]}],
       BoxBaselineShift->0], "\[RightAngleBracket]"}], 
     TagBox[
      AdjustmentBox[
       TagBox["1",
        QuantumAlgebra`QuantumAlgebra`BraArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0],
      QuantumAlgebra`QuantumAlgebra`UDScript,
      BaseStyle->"RIndex"]]}],
   QuantumAlgebra`QuantumAlgebra`Braket,
   BaseStyle->"BraKetWrapper"]}]], "Output",
 CellChangeTimes->{
  3.444509305731*^9, 3.4445512455629997`*^9, 3.444665548084*^9, 
   3.445257197125*^9, {3.599558587885244*^9, 3.5995586166516943`*^9}}]
}, Open  ]],

Cell["\<\
In both cases the inner product reduces to brakets of the individual systems. \
So, in the first case, for example, there is no need to make a definition for \
the braket: \
\>", "Text",
 CellChangeTimes->{{3.444509595472*^9, 3.444509752276*^9}, 
   3.444509971962*^9, {3.444510277171*^9, 3.444510280634*^9}, {
   3.4445105930030003`*^9, 3.444510610881*^9}, {3.4445111944230003`*^9, 
   3.444511209086*^9}, {3.4445115275699997`*^9, 3.4445116289849997`*^9}, {
   3.444511671834*^9, 3.4445117041809998`*^9}, {3.444511813776*^9, 
   3.444511815342*^9}, {3.444511855991*^9, 3.4445120218780003`*^9}, {
   3.44451205358*^9, 3.444512102582*^9}, {3.444665558966*^9, 
   3.444665562791*^9}, {3.444665606341*^9, 3.444665612507*^9}, {
   3.444667737559*^9, 3.444667749094*^9}, {3.4446917853599997`*^9, 
   3.44469180671*^9}, 3.4446919770030003`*^9, {3.5995587007398424`*^9, 
   3.599558796633211*^9}}],

Cell[CellGroupData[{

Cell[BoxData[
 TagBox[
  RowBox[{"\[LeftAngleBracket]", 
   AdjustmentBox[
    RowBox[{
     TagBox[
      RowBox[{
       SubscriptBox["n", "1"], ",", 
       SubscriptBox["m", "2"]}],
      QuantumAlgebra`QuantumAlgebra`BraKetArgs,
      BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
     TagBox[
      RowBox[{
       SubscriptBox["p", "1"], ",", 
       SubscriptBox["q", "2"]}],
      QuantumAlgebra`QuantumAlgebra`BraKetArgs,
      BaseStyle->"BraKetArg"]}],
    BoxBaselineShift->0], "\[RightAngleBracket]"}],
  QuantumAlgebra`QuantumAlgebra`Braket,
  BaseStyle->"BraKetWrapper"]], "Input",
 CellChangeTimes->{{3.4445068202060003`*^9, 3.444506839538*^9}, {
  3.444508123691*^9, 3.444508139539*^9}, {3.444508415204*^9, 
  3.444508423796*^9}, {3.444508774675*^9, 3.44450879401*^9}, {
  3.444508843587*^9, 3.4445088641689997`*^9}, {3.444511297359*^9, 
  3.444511307267*^9}, {3.444511565809*^9, 3.44451157258*^9}, {
  3.599558423912356*^9, 3.5995584491542006`*^9}}],

Cell[BoxData[
 TagBox[
  RowBox[{"\[LeftAngleBracket]", 
   AdjustmentBox[
    RowBox[{
     TagBox[
      RowBox[{
       SubscriptBox["n", "1"], ",", 
       SubscriptBox["m", "2"]}],
      QuantumAlgebra`QuantumAlgebra`BraKetArgs,
      BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
     TagBox[
      RowBox[{
       SubscriptBox["p", "1"], ",", 
       SubscriptBox["q", "2"]}],
      QuantumAlgebra`QuantumAlgebra`BraKetArgs,
      BaseStyle->"BraKetArg"]}],
    BoxBaselineShift->0], "\[RightAngleBracket]"}],
  QuantumAlgebra`QuantumAlgebra`Braket,
  BaseStyle->"BraKetWrapper"]], "Output",
 CellChangeTimes->{3.599558450012202*^9}]
}, Open  ]],

Cell["\<\
This is not true, if subscripts are not used. In that case, the more general \
rule of braketing applies, or if indices are used by they don't match, no \
rule is applied at all. In these cases we will need to setup definitions for \
the resulting objects to go further.\
\>", "Text",
 CellChangeTimes->{{3.444509595472*^9, 3.444509752276*^9}, 
   3.444509971962*^9, {3.444510277171*^9, 3.444510280634*^9}, {
   3.4445105930030003`*^9, 3.444510610881*^9}, {3.4445111944230003`*^9, 
   3.444511209086*^9}, {3.4445115275699997`*^9, 3.4445116289849997`*^9}, {
   3.444511671834*^9, 3.4445117041809998`*^9}, {3.444511813776*^9, 
   3.444511815342*^9}, {3.444511855991*^9, 3.4445120218780003`*^9}, {
   3.44451205358*^9, 3.444512102582*^9}, {3.444665558966*^9, 
   3.444665562791*^9}, {3.444665606341*^9, 3.444665612507*^9}, {
   3.444667737559*^9, 3.444667749094*^9}, {3.4446917853599997`*^9, 
   3.44469180671*^9}, {3.4446919770030003`*^9, 3.444691996894*^9}, {
   3.599558809768434*^9, 3.599558830875271*^9}, {3.5995589587018957`*^9, 
   3.5995590130679913`*^9}, {3.5995591043613515`*^9, 3.5995591674634624`*^9}}],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{
   RowBox[{
    TagBox[
     RowBox[{"\[LeftAngleBracket]", 
      AdjustmentBox[
       TagBox[
        RowBox[{"n", ",", "m"}],
        QuantumAlgebra`QuantumAlgebra`BraArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], 
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{0, -0.2}, {0, 0}}]}],
     QuantumAlgebra`QuantumAlgebra`Bra,
     BaseStyle->"BraWrapper"], "\[CenterDot]", 
    TagBox[
     RowBox[{
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{-0.2, 0}, {0, 0}}], 
      AdjustmentBox[
       TagBox[
        RowBox[{"p", ",", "q"}],
        QuantumAlgebra`QuantumAlgebra`KetArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], "\[RightAngleBracket]"}],
     QuantumAlgebra`QuantumAlgebra`Ket,
     BaseStyle->"KetWrapper"]}], ",", 
   RowBox[{
    TagBox[
     RowBox[{"\[LeftAngleBracket]", 
      AdjustmentBox[
       TagBox[
        RowBox[{
         SubscriptBox["n", "b1"], ",", 
         SubscriptBox["m", "b2"]}],
        QuantumAlgebra`QuantumAlgebra`BraArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], 
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{0, -0.2}, {0, 0}}]}],
     QuantumAlgebra`QuantumAlgebra`Bra,
     BaseStyle->"BraWrapper"], "\[CenterDot]", 
    TagBox[
     RowBox[{
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{-0.2, 0}, {0, 0}}], 
      AdjustmentBox[
       TagBox[
        RowBox[{
         SubscriptBox["p", "k1"], ",", 
         SubscriptBox["q", "k2"]}],
        QuantumAlgebra`QuantumAlgebra`KetArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], "\[RightAngleBracket]"}],
     QuantumAlgebra`QuantumAlgebra`Ket,
     BaseStyle->"KetWrapper"]}]}], "}"}]], "Input",
 CellChangeTimes->{{3.444511511343*^9, 3.444511518329*^9}, {3.444511637414*^9,
    3.444511653111*^9}, {3.444511705689*^9, 3.444511706677*^9}, {
   3.444511762633*^9, 3.4445117748190002`*^9}, {3.444511808988*^9, 
   3.444511811395*^9}, {3.444691809027*^9, 3.444691830178*^9}, 
   3.5995588615293245`*^9}],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{
   TagBox[
    RowBox[{"\[LeftAngleBracket]", 
     AdjustmentBox[
      RowBox[{
       TagBox[
        RowBox[{"n", ",", "m"}],
        QuantumAlgebra`QuantumAlgebra`BraKetArgs,
        BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
       TagBox[
        RowBox[{"p", ",", "q"}],
        QuantumAlgebra`QuantumAlgebra`BraKetArgs,
        BaseStyle->"BraKetArg"]}],
      BoxBaselineShift->0], "\[RightAngleBracket]"}],
    QuantumAlgebra`QuantumAlgebra`Braket,
    BaseStyle->"BraKetWrapper"], ",", 
   RowBox[{
    TagBox[
     RowBox[{"\[LeftAngleBracket]", 
      AdjustmentBox[
       TagBox[
        RowBox[{
         SubscriptBox["n", "b1"], ",", 
         SubscriptBox["m", "b2"]}],
        QuantumAlgebra`QuantumAlgebra`BraArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], 
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{0, -0.2}, {0, 0}}]}],
     QuantumAlgebra`QuantumAlgebra`Bra,
     BaseStyle->"BraWrapper"], "\[CenterDot]", 
    TagBox[
     RowBox[{
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{-0.2, 0}, {0, 0}}], 
      AdjustmentBox[
       TagBox[
        RowBox[{
         SubscriptBox["p", "k1"], ",", 
         SubscriptBox["q", "k2"]}],
        QuantumAlgebra`QuantumAlgebra`KetArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], "\[RightAngleBracket]"}],
     QuantumAlgebra`QuantumAlgebra`Ket,
     BaseStyle->"KetWrapper"]}]}], "}"}]], "Output",
 CellChangeTimes->{
  3.444511518907*^9, 3.444511654495*^9, 3.4445117072019997`*^9, 
   3.4445117752060003`*^9, 3.4445118118389997`*^9, 3.4445512475699997`*^9, 
   3.444691831689*^9, 3.445257244724*^9, {3.5995588437452936`*^9, 
   3.5995588618413253`*^9}}]
}, Open  ]],

Cell["\<\
Returning to the case in which the braketing rules produces inner products of \
individual systems, we only have to define brakets between states of these \
systems. We can do all definitions at once using patterns. \
\>", "Text",
 CellChangeTimes->{{3.444512281998*^9, 3.444512353574*^9}, {3.444512424841*^9,
   3.4445124368120003`*^9}, {3.4445125217799997`*^9, 3.444512601575*^9}, {
  3.444512919315*^9, 3.444512946016*^9}, {3.444665694825*^9, 
  3.444665757591*^9}, {3.444665874734*^9, 3.444665949141*^9}, {
  3.44466655812*^9, 3.44466655992*^9}, {3.444667769408*^9, 
  3.444667771234*^9}, {3.444692020847*^9, 3.4446920547*^9}, {
  3.5995590469668503`*^9, 3.599559068855689*^9}, {3.599559187010297*^9, 
  3.5995592661960354`*^9}}],

Cell[BoxData[
 RowBox[{
  TagBox[
   RowBox[{
    SubscriptBox["\[InvisiblePrefixScriptBase]", 
     TagBox[
      AdjustmentBox[
       TagBox["k_",
        QuantumAlgebra`QuantumAlgebra`BraArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0],
      QuantumAlgebra`QuantumAlgebra`UDScript,
      BaseStyle->"LIndex"]], 
    SubscriptBox[
     RowBox[{"\[LeftAngleBracket]", 
      AdjustmentBox[
       RowBox[{
        TagBox["n_",
         QuantumAlgebra`QuantumAlgebra`BraKetArgs,
         BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
        TagBox["m_",
         QuantumAlgebra`QuantumAlgebra`BraKetArgs,
         BaseStyle->"BraKetArg"]}],
       BoxBaselineShift->0], "\[RightAngleBracket]"}], 
     TagBox[
      AdjustmentBox[
       TagBox["k_",
        QuantumAlgebra`QuantumAlgebra`BraArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0],
      QuantumAlgebra`QuantumAlgebra`UDScript,
      BaseStyle->"RIndex"]]}],
   QuantumAlgebra`QuantumAlgebra`Braket,
   BaseStyle->"BraKetWrapper"], ":=", 
  SubscriptBox["\[Xi]", 
   RowBox[{"n", ",", "m"}]]}]], "InputOnly",
 CellChangeTimes->{{3.4440979810629997`*^9, 3.444098052491*^9}, {
   3.444512372432*^9, 3.444512411094*^9}, {3.4446657691949997`*^9, 
   3.4446657726210003`*^9}, 3.5995593030277004`*^9}],

Cell["Here we have brakets for each system.", "Text",
 CellChangeTimes->{{3.444512734664*^9, 3.444512739486*^9}, {3.444666062328*^9,
   3.4446660738789997`*^9}, {3.444667798542*^9, 3.4446677989440002`*^9}, {
  3.445257276834*^9, 3.44525728094*^9}}],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{
   RowBox[{
    TagBox[
     RowBox[{
      SubscriptBox["\[InvisiblePrefixScriptBase]", 
       TagBox[
        AdjustmentBox[
         TagBox["1",
          QuantumAlgebra`QuantumAlgebra`BraArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0],
        QuantumAlgebra`QuantumAlgebra`UDScript,
        BaseStyle->"LIndex"]], 
      RowBox[{"\[LeftAngleBracket]", 
       AdjustmentBox[
        TagBox["2",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0], 
       AdjustmentBox["\[VerticalSeparator]",
        BoxBaselineShift->-0.1,
        BoxMargins->{{0, -0.2}, {0, 0}}]}]}],
     QuantumAlgebra`QuantumAlgebra`Bra,
     BaseStyle->"BraWrapper"], "\[CenterDot]", 
    TagBox[
     SubscriptBox[
      RowBox[{
       AdjustmentBox["\[VerticalSeparator]",
        BoxBaselineShift->-0.1,
        BoxMargins->{{-0.2, 0}, {0, 0}}], 
       AdjustmentBox[
        TagBox["3",
         QuantumAlgebra`QuantumAlgebra`KetArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0], "\[RightAngleBracket]"}], 
      TagBox[
       AdjustmentBox[
        TagBox["1",
         QuantumAlgebra`QuantumAlgebra`KetArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"RIndex"]],
     QuantumAlgebra`QuantumAlgebra`Ket,
     BaseStyle->"KetWrapper"]}], ",", 
   RowBox[{
    TagBox[
     RowBox[{
      SubscriptBox["\[InvisiblePrefixScriptBase]", 
       TagBox[
        AdjustmentBox[
         TagBox["2",
          QuantumAlgebra`QuantumAlgebra`BraArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0],
        QuantumAlgebra`QuantumAlgebra`UDScript,
        BaseStyle->"LIndex"]], 
      RowBox[{"\[LeftAngleBracket]", 
       AdjustmentBox[
        TagBox["p",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0], 
       AdjustmentBox["\[VerticalSeparator]",
        BoxBaselineShift->-0.1,
        BoxMargins->{{0, -0.2}, {0, 0}}]}]}],
     QuantumAlgebra`QuantumAlgebra`Bra,
     BaseStyle->"BraWrapper"], "\[CenterDot]", 
    TagBox[
     SubscriptBox[
      RowBox[{
       AdjustmentBox["\[VerticalSeparator]",
        BoxBaselineShift->-0.1,
        BoxMargins->{{-0.2, 0}, {0, 0}}], 
       AdjustmentBox[
        TagBox["q",
         QuantumAlgebra`QuantumAlgebra`KetArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0], "\[RightAngleBracket]"}], 
      TagBox[
       AdjustmentBox[
        TagBox["2",
         QuantumAlgebra`QuantumAlgebra`KetArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"RIndex"]],
     QuantumAlgebra`QuantumAlgebra`Ket,
     BaseStyle->"KetWrapper"]}]}], "}"}]], "Input",
 CellChangeTimes->{{3.444098166132*^9, 3.444098211325*^9}, {3.444512643999*^9,
   3.4445127283929996`*^9}, {3.4445128408859997`*^9, 3.444512844892*^9}, {
  3.444665812961*^9, 3.444665813396*^9}, {3.44466794988*^9, 
  3.444667963641*^9}, {3.5995593083005095`*^9, 3.599559318003727*^9}}],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{
   SubscriptBox["\[Xi]", 
    RowBox[{"2", ",", "3"}]], ",", 
   SubscriptBox["\[Xi]", 
    RowBox[{"p", ",", "q"}]]}], "}"}]], "Output",
 CellChangeTimes->{{3.444512631826*^9, 3.444512665558*^9}, {3.44451270183*^9, 
   3.444512729276*^9}, 3.4445128453570004`*^9, 3.4445512527390003`*^9, 
   3.444665776539*^9, {3.444667957061*^9, 3.444667964297*^9}, 
   3.445257286599*^9, 3.5995593184561276`*^9}]
}, Open  ]],

Cell["Here there is a braket for the composite system.", "Text",
 CellChangeTimes->{{3.444666110275*^9, 3.444666120616*^9}, {3.445257290486*^9,
   3.445257295191*^9}}],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{
  RowBox[{
   TagBox[
    RowBox[{
     SubscriptBox["\[InvisiblePrefixScriptBase]", 
      TagBox[
       AdjustmentBox[
        TagBox["1",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"LIndex"]], 
     RowBox[{"\[LeftAngleBracket]", 
      AdjustmentBox[
       TagBox["p",
        QuantumAlgebra`QuantumAlgebra`BraArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], 
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{0, -0.2}, {0, 0}}]}]}],
    QuantumAlgebra`QuantumAlgebra`Bra,
    BaseStyle->"BraWrapper"], "\[CircleTimes]", 
   TagBox[
    RowBox[{
     SubscriptBox["\[InvisiblePrefixScriptBase]", 
      TagBox[
       AdjustmentBox[
        TagBox["2",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"LIndex"]], 
     RowBox[{"\[LeftAngleBracket]", 
      AdjustmentBox[
       TagBox["q",
        QuantumAlgebra`QuantumAlgebra`BraArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], 
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{0, -0.2}, {0, 0}}]}]}],
    QuantumAlgebra`QuantumAlgebra`Bra,
    BaseStyle->"BraWrapper"]}], "\[CenterDot]", 
  RowBox[{
   TagBox[
    SubscriptBox[
     RowBox[{
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{-0.2, 0}, {0, 0}}], 
      AdjustmentBox[
       TagBox["r",
        QuantumAlgebra`QuantumAlgebra`KetArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], "\[RightAngleBracket]"}], 
     TagBox[
      AdjustmentBox[
       TagBox["1",
        QuantumAlgebra`QuantumAlgebra`KetArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0],
      QuantumAlgebra`QuantumAlgebra`UDScript,
      BaseStyle->"RIndex"]],
    QuantumAlgebra`QuantumAlgebra`Ket,
    BaseStyle->"KetWrapper"], "\[CircleTimes]", 
   TagBox[
    SubscriptBox[
     RowBox[{
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{-0.2, 0}, {0, 0}}], 
      AdjustmentBox[
       TagBox["s",
        QuantumAlgebra`QuantumAlgebra`KetArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], "\[RightAngleBracket]"}], 
     TagBox[
      AdjustmentBox[
       TagBox["2",
        QuantumAlgebra`QuantumAlgebra`KetArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0],
      QuantumAlgebra`QuantumAlgebra`UDScript,
      BaseStyle->"RIndex"]],
    QuantumAlgebra`QuantumAlgebra`Ket,
    BaseStyle->"KetWrapper"]}]}]], "Input",
 CellChangeTimes->{{3.444666094685*^9, 3.444666105017*^9}, {
  3.599559333494554*^9, 3.599559346192976*^9}}],

Cell[BoxData[
 RowBox[{
  SubscriptBox["\[Xi]", 
   RowBox[{"p", ",", "r"}]], " ", 
  SubscriptBox["\[Xi]", 
   RowBox[{"q", ",", "s"}]]}]], "Output",
 CellChangeTimes->{3.444665816101*^9, 3.444666106183*^9, 3.445257299087*^9, 
  3.5995593469729776`*^9}]
}, Open  ]],

Cell["\<\
These definitions can be used together with the predefined linear properties \
to do calculations. In the following example, we compute the braket between \
two superposition states.\
\>", "Text",
 CellChangeTimes->{{3.444076995711*^9, 3.4440770424379997`*^9}, 
   3.444077074624*^9, {3.444077407677*^9, 3.444077432086*^9}, {3.444078062*^9,
    3.4440780852200003`*^9}, {3.444089108491*^9, 3.444089115299*^9}, {
   3.444089159184*^9, 3.4440891600439997`*^9}, {3.444089234898*^9, 
   3.4440893979519997`*^9}, {3.444089454933*^9, 3.444089603145*^9}, 
   3.4440896742320004`*^9, {3.444089849383*^9, 3.4440900176800003`*^9}, {
   3.444090225141*^9, 3.444090376641*^9}, {3.4440904594370003`*^9, 
   3.444090480663*^9}, {3.444090664789*^9, 3.444090737977*^9}, {
   3.444090770783*^9, 3.4440908319379997`*^9}, 3.444090938112*^9, {
   3.444091132449*^9, 3.444091225954*^9}, {3.4440912563*^9, 
   3.444091297659*^9}, {3.444091340959*^9, 3.444091496968*^9}, {
   3.444091566142*^9, 3.444092099665*^9}, {3.4446417529916*^9, 
   3.4446418219236*^9}, 3.4446420644496*^9, {3.444656317774*^9, 
   3.444656385403*^9}, {3.4446662678459997`*^9, 3.4446662683719997`*^9}, {
   3.444666387395*^9, 3.444666404704*^9}, {3.4452573373789997`*^9, 
   3.445257371021*^9}, {3.5995593679082146`*^9, 3.5995593679862146`*^9}}],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{
  RowBox[{"(", 
   FractionBox[
    RowBox[{
     RowBox[{
      TagBox[
       RowBox[{
        SubscriptBox["\[InvisiblePrefixScriptBase]", 
         TagBox[
          AdjustmentBox[
           TagBox["1",
            QuantumAlgebra`QuantumAlgebra`BraArgs,
            BaseStyle->"BraKetArg"],
           BoxBaselineShift->0],
          QuantumAlgebra`QuantumAlgebra`UDScript,
          BaseStyle->"LIndex"]], 
        RowBox[{"\[LeftAngleBracket]", 
         AdjustmentBox[
          TagBox["3",
           QuantumAlgebra`QuantumAlgebra`BraArgs,
           BaseStyle->"BraKetArg"],
          BoxBaselineShift->0], 
         AdjustmentBox["\[VerticalSeparator]",
          BoxBaselineShift->-0.1,
          BoxMargins->{{0, -0.2}, {0, 0}}]}]}],
       QuantumAlgebra`QuantumAlgebra`Bra,
       BaseStyle->"BraWrapper"], "\[CircleTimes]", 
      TagBox[
       RowBox[{
        SubscriptBox["\[InvisiblePrefixScriptBase]", 
         TagBox[
          AdjustmentBox[
           TagBox["2",
            QuantumAlgebra`QuantumAlgebra`BraArgs,
            BaseStyle->"BraKetArg"],
           BoxBaselineShift->0],
          QuantumAlgebra`QuantumAlgebra`UDScript,
          BaseStyle->"LIndex"]], 
        RowBox[{"\[LeftAngleBracket]", 
         AdjustmentBox[
          TagBox["4",
           QuantumAlgebra`QuantumAlgebra`BraArgs,
           BaseStyle->"BraKetArg"],
          BoxBaselineShift->0], 
         AdjustmentBox["\[VerticalSeparator]",
          BoxBaselineShift->-0.1,
          BoxMargins->{{0, -0.2}, {0, 0}}]}]}],
       QuantumAlgebra`QuantumAlgebra`Bra,
       BaseStyle->"BraWrapper"]}], "+", 
     RowBox[{
      TagBox[
       RowBox[{
        SubscriptBox["\[InvisiblePrefixScriptBase]", 
         TagBox[
          AdjustmentBox[
           TagBox["1",
            QuantumAlgebra`QuantumAlgebra`BraArgs,
            BaseStyle->"BraKetArg"],
           BoxBaselineShift->0],
          QuantumAlgebra`QuantumAlgebra`UDScript,
          BaseStyle->"LIndex"]], 
        RowBox[{"\[LeftAngleBracket]", 
         AdjustmentBox[
          TagBox["4",
           QuantumAlgebra`QuantumAlgebra`BraArgs,
           BaseStyle->"BraKetArg"],
          BoxBaselineShift->0], 
         AdjustmentBox["\[VerticalSeparator]",
          BoxBaselineShift->-0.1,
          BoxMargins->{{0, -0.2}, {0, 0}}]}]}],
       QuantumAlgebra`QuantumAlgebra`Bra,
       BaseStyle->"BraWrapper"], "\[CircleTimes]", 
      TagBox[
       RowBox[{
        SubscriptBox["\[InvisiblePrefixScriptBase]", 
         TagBox[
          AdjustmentBox[
           TagBox["2",
            QuantumAlgebra`QuantumAlgebra`BraArgs,
            BaseStyle->"BraKetArg"],
           BoxBaselineShift->0],
          QuantumAlgebra`QuantumAlgebra`UDScript,
          BaseStyle->"LIndex"]], 
        RowBox[{"\[LeftAngleBracket]", 
         AdjustmentBox[
          TagBox["3",
           QuantumAlgebra`QuantumAlgebra`BraArgs,
           BaseStyle->"BraKetArg"],
          BoxBaselineShift->0], 
         AdjustmentBox["\[VerticalSeparator]",
          BoxBaselineShift->-0.1,
          BoxMargins->{{0, -0.2}, {0, 0}}]}]}],
       QuantumAlgebra`QuantumAlgebra`Bra,
       BaseStyle->"BraWrapper"]}]}], 
    SqrtBox["2"]], ")"}], "\[CenterDot]", 
  RowBox[{"(", 
   FractionBox[
    RowBox[{
     RowBox[{
      TagBox[
       SubscriptBox[
        RowBox[{
         AdjustmentBox["\[VerticalSeparator]",
          BoxBaselineShift->-0.1,
          BoxMargins->{{-0.2, 0}, {0, 0}}], 
         AdjustmentBox[
          TagBox["1",
           QuantumAlgebra`QuantumAlgebra`KetArgs,
           BaseStyle->"BraKetArg"],
          BoxBaselineShift->0], "\[RightAngleBracket]"}], 
        TagBox[
         AdjustmentBox[
          TagBox["1",
           QuantumAlgebra`QuantumAlgebra`KetArgs,
           BaseStyle->"BraKetArg"],
          BoxBaselineShift->0],
         QuantumAlgebra`QuantumAlgebra`UDScript,
         BaseStyle->"RIndex"]],
       QuantumAlgebra`QuantumAlgebra`Ket,
       BaseStyle->"KetWrapper"], "\[CircleTimes]", 
      TagBox[
       SubscriptBox[
        RowBox[{
         AdjustmentBox["\[VerticalSeparator]",
          BoxBaselineShift->-0.1,
          BoxMargins->{{-0.2, 0}, {0, 0}}], 
         AdjustmentBox[
          TagBox["2",
           QuantumAlgebra`QuantumAlgebra`KetArgs,
           BaseStyle->"BraKetArg"],
          BoxBaselineShift->0], "\[RightAngleBracket]"}], 
        TagBox[
         AdjustmentBox[
          TagBox["2",
           QuantumAlgebra`QuantumAlgebra`KetArgs,
           BaseStyle->"BraKetArg"],
          BoxBaselineShift->0],
         QuantumAlgebra`QuantumAlgebra`UDScript,
         BaseStyle->"RIndex"]],
       QuantumAlgebra`QuantumAlgebra`Ket,
       BaseStyle->"KetWrapper"]}], "+", 
     RowBox[{
      TagBox[
       SubscriptBox[
        RowBox[{
         AdjustmentBox["\[VerticalSeparator]",
          BoxBaselineShift->-0.1,
          BoxMargins->{{-0.2, 0}, {0, 0}}], 
         AdjustmentBox[
          TagBox["2",
           QuantumAlgebra`QuantumAlgebra`KetArgs,
           BaseStyle->"BraKetArg"],
          BoxBaselineShift->0], "\[RightAngleBracket]"}], 
        TagBox[
         AdjustmentBox[
          TagBox["1",
           QuantumAlgebra`QuantumAlgebra`KetArgs,
           BaseStyle->"BraKetArg"],
          BoxBaselineShift->0],
         QuantumAlgebra`QuantumAlgebra`UDScript,
         BaseStyle->"RIndex"]],
       QuantumAlgebra`QuantumAlgebra`Ket,
       BaseStyle->"KetWrapper"], "\[CircleTimes]", 
      TagBox[
       SubscriptBox[
        RowBox[{
         AdjustmentBox["\[VerticalSeparator]",
          BoxBaselineShift->-0.1,
          BoxMargins->{{-0.2, 0}, {0, 0}}], 
         AdjustmentBox[
          TagBox["1",
           QuantumAlgebra`QuantumAlgebra`KetArgs,
           BaseStyle->"BraKetArg"],
          BoxBaselineShift->0], "\[RightAngleBracket]"}], 
        TagBox[
         AdjustmentBox[
          TagBox["2",
           QuantumAlgebra`QuantumAlgebra`KetArgs,
           BaseStyle->"BraKetArg"],
          BoxBaselineShift->0],
         QuantumAlgebra`QuantumAlgebra`UDScript,
         BaseStyle->"RIndex"]],
       QuantumAlgebra`QuantumAlgebra`Ket,
       BaseStyle->"KetWrapper"]}]}], 
    SqrtBox["2"]], ")"}]}]], "Input",
 CellChangeTimes->{{3.4440774849110003`*^9, 3.4440775201210003`*^9}, {
   3.444077568382*^9, 3.444077598501*^9}, {3.444077721811*^9, 
   3.4440778044189997`*^9}, {3.4440982637*^9, 3.4440983750810003`*^9}, {
   3.4446662948389997`*^9, 3.444666361384*^9}, {3.444666757318*^9, 
   3.4446667712790003`*^9}, 3.444667059599*^9, {3.5995593865658474`*^9, 
   3.599559394443861*^9}}],

Cell[BoxData[
 RowBox[{
  RowBox[{
   SubscriptBox["\[Xi]", 
    RowBox[{"3", ",", "2"}]], " ", 
   SubscriptBox["\[Xi]", 
    RowBox[{"4", ",", "1"}]]}], "+", 
  RowBox[{
   SubscriptBox["\[Xi]", 
    RowBox[{"3", ",", "1"}]], " ", 
   SubscriptBox["\[Xi]", 
    RowBox[{"4", ",", "2"}]]}]}]], "Output",
 CellChangeTimes->{
  3.444506921043*^9, 3.444513062844*^9, 3.444551257078*^9, 
   3.444553038541*^9, {3.4446663249300003`*^9, 3.444666362244*^9}, {
   3.444666758134*^9, 3.444666771797*^9}, 3.4446670599049997`*^9, 
   3.445257375875*^9, 3.5995593952706623`*^9}]
}, Open  ]],

Cell[TextData[{
 "In the next example, the operators \[ScriptCapitalA] and \[ScriptCapitalB] \
are expressed in their outer form in the basis set ",
 Cell[BoxData[
  FormBox[
   RowBox[{" ", 
    TagBox[
     RowBox[{
      AdjustmentBox["\[VerticalSeparator]",
       BoxMargins->{{-0.4, 0.}, {0., 0.}}], 
      AdjustmentBox[
       TagBox[
        RowBox[{"n", ",", "m"}],
        QuantumAlgebra`QuantumAlgebra`KetArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], "\[RightAngleBracket]"}],
     QuantumAlgebra`QuantumAlgebra`Ket,
     BaseStyle->"KetWrapper"]}], TraditionalForm]]],
 ". Then, they are plugged into the braket using local rules. The expression \
is simplified using the braket definitions."
}], "Text",
 CellChangeTimes->{{3.4440921285039997`*^9, 3.444092312487*^9}, {
   3.444656413583*^9, 3.4446564954960003`*^9}, {3.4446569072460003`*^9, 
   3.4446571069890003`*^9}, {3.444657271101*^9, 3.444657337665*^9}, 
   3.44465738569*^9, {3.444657434086*^9, 3.4446574890810003`*^9}, {
   3.444657523601*^9, 3.444657544418*^9}, {3.444666467131*^9, 
   3.4446665091*^9}, {3.444667273323*^9, 3.444667391645*^9}, {
   3.444667828119*^9, 3.444667833106*^9}, {3.44525740879*^9, 
   3.4452574420369997`*^9}, 3.594717885022728*^9}],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{
  RowBox[{
   RowBox[{"(", 
    FractionBox[
     RowBox[{
      RowBox[{
       TagBox[
        RowBox[{
         SubscriptBox["\[InvisiblePrefixScriptBase]", 
          TagBox[
           AdjustmentBox[
            TagBox["1",
             QuantumAlgebra`QuantumAlgebra`BraArgs,
             BaseStyle->"BraKetArg"],
            BoxBaselineShift->0],
           QuantumAlgebra`QuantumAlgebra`UDScript,
           BaseStyle->"LIndex"]], 
         RowBox[{"\[LeftAngleBracket]", 
          AdjustmentBox[
           TagBox["3",
            QuantumAlgebra`QuantumAlgebra`BraArgs,
            BaseStyle->"BraKetArg"],
           BoxBaselineShift->0], 
          AdjustmentBox["\[VerticalSeparator]",
           BoxBaselineShift->-0.1,
           BoxMargins->{{0, -0.2}, {0, 0}}]}]}],
        QuantumAlgebra`QuantumAlgebra`Bra,
        BaseStyle->"BraWrapper"], "\[CircleTimes]", 
       TagBox[
        RowBox[{
         SubscriptBox["\[InvisiblePrefixScriptBase]", 
          TagBox[
           AdjustmentBox[
            TagBox["2",
             QuantumAlgebra`QuantumAlgebra`BraArgs,
             BaseStyle->"BraKetArg"],
            BoxBaselineShift->0],
           QuantumAlgebra`QuantumAlgebra`UDScript,
           BaseStyle->"LIndex"]], 
         RowBox[{"\[LeftAngleBracket]", 
          AdjustmentBox[
           TagBox["4",
            QuantumAlgebra`QuantumAlgebra`BraArgs,
            BaseStyle->"BraKetArg"],
           BoxBaselineShift->0], 
          AdjustmentBox["\[VerticalSeparator]",
           BoxBaselineShift->-0.1,
           BoxMargins->{{0, -0.2}, {0, 0}}]}]}],
        QuantumAlgebra`QuantumAlgebra`Bra,
        BaseStyle->"BraWrapper"]}], "+", 
      RowBox[{
       TagBox[
        RowBox[{
         SubscriptBox["\[InvisiblePrefixScriptBase]", 
          TagBox[
           AdjustmentBox[
            TagBox["1",
             QuantumAlgebra`QuantumAlgebra`BraArgs,
             BaseStyle->"BraKetArg"],
            BoxBaselineShift->0],
           QuantumAlgebra`QuantumAlgebra`UDScript,
           BaseStyle->"LIndex"]], 
         RowBox[{"\[LeftAngleBracket]", 
          AdjustmentBox[
           TagBox["4",
            QuantumAlgebra`QuantumAlgebra`BraArgs,
            BaseStyle->"BraKetArg"],
           BoxBaselineShift->0], 
          AdjustmentBox["\[VerticalSeparator]",
           BoxBaselineShift->-0.1,
           BoxMargins->{{0, -0.2}, {0, 0}}]}]}],
        QuantumAlgebra`QuantumAlgebra`Bra,
        BaseStyle->"BraWrapper"], "\[CircleTimes]", 
       TagBox[
        RowBox[{
         SubscriptBox["\[InvisiblePrefixScriptBase]", 
          TagBox[
           AdjustmentBox[
            TagBox["2",
             QuantumAlgebra`QuantumAlgebra`BraArgs,
             BaseStyle->"BraKetArg"],
            BoxBaselineShift->0],
           QuantumAlgebra`QuantumAlgebra`UDScript,
           BaseStyle->"LIndex"]], 
         RowBox[{"\[LeftAngleBracket]", 
          AdjustmentBox[
           TagBox["3",
            QuantumAlgebra`QuantumAlgebra`BraArgs,
            BaseStyle->"BraKetArg"],
           BoxBaselineShift->0], 
          AdjustmentBox["\[VerticalSeparator]",
           BoxBaselineShift->-0.1,
           BoxMargins->{{0, -0.2}, {0, 0}}]}]}],
        QuantumAlgebra`QuantumAlgebra`Bra,
        BaseStyle->"BraWrapper"]}]}], 
     SqrtBox["2"]], ")"}], "\[CenterDot]", 
   OverscriptBox["\[ScriptCapitalA]", "^"], "\[CenterDot]", 
   OverscriptBox["\[ScriptCapitalB]", "^"], "\[CenterDot]", 
   RowBox[{"(", 
    FractionBox[
     RowBox[{
      RowBox[{
       TagBox[
        SubscriptBox[
         RowBox[{
          AdjustmentBox["\[VerticalSeparator]",
           BoxBaselineShift->-0.1,
           BoxMargins->{{-0.2, 0}, {0, 0}}], 
          AdjustmentBox[
           TagBox["1",
            QuantumAlgebra`QuantumAlgebra`KetArgs,
            BaseStyle->"BraKetArg"],
           BoxBaselineShift->0], "\[RightAngleBracket]"}], 
         TagBox[
          AdjustmentBox[
           TagBox["1",
            QuantumAlgebra`QuantumAlgebra`KetArgs,
            BaseStyle->"BraKetArg"],
           BoxBaselineShift->0],
          QuantumAlgebra`QuantumAlgebra`UDScript,
          BaseStyle->"RIndex"]],
        QuantumAlgebra`QuantumAlgebra`Ket,
        BaseStyle->"KetWrapper"], "\[CircleTimes]", 
       TagBox[
        SubscriptBox[
         RowBox[{
          AdjustmentBox["\[VerticalSeparator]",
           BoxBaselineShift->-0.1,
           BoxMargins->{{-0.2, 0}, {0, 0}}], 
          AdjustmentBox[
           TagBox["2",
            QuantumAlgebra`QuantumAlgebra`KetArgs,
            BaseStyle->"BraKetArg"],
           BoxBaselineShift->0], "\[RightAngleBracket]"}], 
         TagBox[
          AdjustmentBox[
           TagBox["2",
            QuantumAlgebra`QuantumAlgebra`KetArgs,
            BaseStyle->"BraKetArg"],
           BoxBaselineShift->0],
          QuantumAlgebra`QuantumAlgebra`UDScript,
          BaseStyle->"RIndex"]],
        QuantumAlgebra`QuantumAlgebra`Ket,
        BaseStyle->"KetWrapper"]}], "+", 
      RowBox[{
       TagBox[
        SubscriptBox[
         RowBox[{
          AdjustmentBox["\[VerticalSeparator]",
           BoxBaselineShift->-0.1,
           BoxMargins->{{-0.2, 0}, {0, 0}}], 
          AdjustmentBox[
           TagBox["2",
            QuantumAlgebra`QuantumAlgebra`KetArgs,
            BaseStyle->"BraKetArg"],
           BoxBaselineShift->0], "\[RightAngleBracket]"}], 
         TagBox[
          AdjustmentBox[
           TagBox["1",
            QuantumAlgebra`QuantumAlgebra`KetArgs,
            BaseStyle->"BraKetArg"],
           BoxBaselineShift->0],
          QuantumAlgebra`QuantumAlgebra`UDScript,
          BaseStyle->"RIndex"]],
        QuantumAlgebra`QuantumAlgebra`Ket,
        BaseStyle->"KetWrapper"], "\[CircleTimes]", 
       TagBox[
        SubscriptBox[
         RowBox[{
          AdjustmentBox["\[VerticalSeparator]",
           BoxBaselineShift->-0.1,
           BoxMargins->{{-0.2, 0}, {0, 0}}], 
          AdjustmentBox[
           TagBox["1",
            QuantumAlgebra`QuantumAlgebra`KetArgs,
            BaseStyle->"BraKetArg"],
           BoxBaselineShift->0], "\[RightAngleBracket]"}], 
         TagBox[
          AdjustmentBox[
           TagBox["2",
            QuantumAlgebra`QuantumAlgebra`KetArgs,
            BaseStyle->"BraKetArg"],
           BoxBaselineShift->0],
          QuantumAlgebra`QuantumAlgebra`UDScript,
          BaseStyle->"RIndex"]],
        QuantumAlgebra`QuantumAlgebra`Ket,
        BaseStyle->"KetWrapper"]}]}], 
     SqrtBox["2"]], ")"}]}], "/.", "\[VeryThinSpace]", "\[IndentingNewLine]", 
  RowBox[{"{", 
   RowBox[{
    RowBox[{
     OverscriptBox["\[ScriptCapitalA]", "^"], "\[Rule]", 
     RowBox[{
      RowBox[{
       TagBox[
        SubscriptBox[
         RowBox[{
          AdjustmentBox["\[VerticalSeparator]",
           BoxBaselineShift->-0.1,
           BoxMargins->{{-0.2, 0}, {0, 0}}], 
          AdjustmentBox[
           TagBox["2",
            QuantumAlgebra`QuantumAlgebra`KetArgs,
            BaseStyle->"BraKetArg"],
           BoxBaselineShift->0], "\[RightAngleBracket]"}], 
         TagBox[
          AdjustmentBox[
           TagBox["1",
            QuantumAlgebra`QuantumAlgebra`KetArgs,
            BaseStyle->"BraKetArg"],
           BoxBaselineShift->0],
          QuantumAlgebra`QuantumAlgebra`UDScript,
          BaseStyle->"RIndex"]],
        QuantumAlgebra`QuantumAlgebra`Ket,
        BaseStyle->"KetWrapper"], "\[CircleTimes]", 
       TagBox[
        SubscriptBox[
         RowBox[{
          AdjustmentBox["\[VerticalSeparator]",
           BoxBaselineShift->-0.1,
           BoxMargins->{{-0.2, 0}, {0, 0}}], 
          AdjustmentBox[
           TagBox["2",
            QuantumAlgebra`QuantumAlgebra`KetArgs,
            BaseStyle->"BraKetArg"],
           BoxBaselineShift->0], "\[RightAngleBracket]"}], 
         TagBox[
          AdjustmentBox[
           TagBox["2",
            QuantumAlgebra`QuantumAlgebra`KetArgs,
            BaseStyle->"BraKetArg"],
           BoxBaselineShift->0],
          QuantumAlgebra`QuantumAlgebra`UDScript,
          BaseStyle->"RIndex"]],
        QuantumAlgebra`QuantumAlgebra`Ket,
        BaseStyle->"KetWrapper"]}], "\[CenterDot]", 
      RowBox[{
       TagBox[
        RowBox[{
         SubscriptBox["\[InvisiblePrefixScriptBase]", 
          TagBox[
           AdjustmentBox[
            TagBox["1",
             QuantumAlgebra`QuantumAlgebra`BraArgs,
             BaseStyle->"BraKetArg"],
            BoxBaselineShift->0],
           QuantumAlgebra`QuantumAlgebra`UDScript,
           BaseStyle->"LIndex"]], 
         RowBox[{"\[LeftAngleBracket]", 
          AdjustmentBox[
           TagBox["4",
            QuantumAlgebra`QuantumAlgebra`BraArgs,
            BaseStyle->"BraKetArg"],
           BoxBaselineShift->0], 
          AdjustmentBox["\[VerticalSeparator]",
           BoxBaselineShift->-0.1,
           BoxMargins->{{0, -0.2}, {0, 0}}]}]}],
        QuantumAlgebra`QuantumAlgebra`Bra,
        BaseStyle->"BraWrapper"], "\[CircleTimes]", 
       TagBox[
        RowBox[{
         SubscriptBox["\[InvisiblePrefixScriptBase]", 
          TagBox[
           AdjustmentBox[
            TagBox["2",
             QuantumAlgebra`QuantumAlgebra`BraArgs,
             BaseStyle->"BraKetArg"],
            BoxBaselineShift->0],
           QuantumAlgebra`QuantumAlgebra`UDScript,
           BaseStyle->"LIndex"]], 
         RowBox[{"\[LeftAngleBracket]", 
          AdjustmentBox[
           TagBox["4",
            QuantumAlgebra`QuantumAlgebra`BraArgs,
            BaseStyle->"BraKetArg"],
           BoxBaselineShift->0], 
          AdjustmentBox["\[VerticalSeparator]",
           BoxBaselineShift->-0.1,
           BoxMargins->{{0, -0.2}, {0, 0}}]}]}],
        QuantumAlgebra`QuantumAlgebra`Bra,
        BaseStyle->"BraWrapper"]}]}]}], ",", 
    RowBox[{
     OverscriptBox["\[ScriptCapitalB]", "^"], "\[Rule]", 
     RowBox[{
      RowBox[{
       TagBox[
        SubscriptBox[
         RowBox[{
          AdjustmentBox["\[VerticalSeparator]",
           BoxBaselineShift->-0.1,
           BoxMargins->{{-0.2, 0}, {0, 0}}], 
          AdjustmentBox[
           TagBox["1",
            QuantumAlgebra`QuantumAlgebra`KetArgs,
            BaseStyle->"BraKetArg"],
           BoxBaselineShift->0], "\[RightAngleBracket]"}], 
         TagBox[
          AdjustmentBox[
           TagBox["1",
            QuantumAlgebra`QuantumAlgebra`KetArgs,
            BaseStyle->"BraKetArg"],
           BoxBaselineShift->0],
          QuantumAlgebra`QuantumAlgebra`UDScript,
          BaseStyle->"RIndex"]],
        QuantumAlgebra`QuantumAlgebra`Ket,
        BaseStyle->"KetWrapper"], "\[CircleTimes]", 
       TagBox[
        SubscriptBox[
         RowBox[{
          AdjustmentBox["\[VerticalSeparator]",
           BoxBaselineShift->-0.1,
           BoxMargins->{{-0.2, 0}, {0, 0}}], 
          AdjustmentBox[
           TagBox["1",
            QuantumAlgebra`QuantumAlgebra`KetArgs,
            BaseStyle->"BraKetArg"],
           BoxBaselineShift->0], "\[RightAngleBracket]"}], 
         TagBox[
          AdjustmentBox[
           TagBox["2",
            QuantumAlgebra`QuantumAlgebra`KetArgs,
            BaseStyle->"BraKetArg"],
           BoxBaselineShift->0],
          QuantumAlgebra`QuantumAlgebra`UDScript,
          BaseStyle->"RIndex"]],
        QuantumAlgebra`QuantumAlgebra`Ket,
        BaseStyle->"KetWrapper"]}], "\[CenterDot]", 
      RowBox[{
       TagBox[
        RowBox[{
         SubscriptBox["\[InvisiblePrefixScriptBase]", 
          TagBox[
           AdjustmentBox[
            TagBox["1",
             QuantumAlgebra`QuantumAlgebra`BraArgs,
             BaseStyle->"BraKetArg"],
            BoxBaselineShift->0],
           QuantumAlgebra`QuantumAlgebra`UDScript,
           BaseStyle->"LIndex"]], 
         RowBox[{"\[LeftAngleBracket]", 
          AdjustmentBox[
           TagBox["3",
            QuantumAlgebra`QuantumAlgebra`BraArgs,
            BaseStyle->"BraKetArg"],
           BoxBaselineShift->0], 
          AdjustmentBox["\[VerticalSeparator]",
           BoxBaselineShift->-0.1,
           BoxMargins->{{0, -0.2}, {0, 0}}]}]}],
        QuantumAlgebra`QuantumAlgebra`Bra,
        BaseStyle->"BraWrapper"], "\[CircleTimes]", 
       TagBox[
        RowBox[{
         SubscriptBox["\[InvisiblePrefixScriptBase]", 
          TagBox[
           AdjustmentBox[
            TagBox["2",
             QuantumAlgebra`QuantumAlgebra`BraArgs,
             BaseStyle->"BraKetArg"],
            BoxBaselineShift->0],
           QuantumAlgebra`QuantumAlgebra`UDScript,
           BaseStyle->"LIndex"]], 
         RowBox[{"\[LeftAngleBracket]", 
          AdjustmentBox[
           TagBox["3",
            QuantumAlgebra`QuantumAlgebra`BraArgs,
            BaseStyle->"BraKetArg"],
           BoxBaselineShift->0], 
          AdjustmentBox["\[VerticalSeparator]",
           BoxBaselineShift->-0.1,
           BoxMargins->{{0, -0.2}, {0, 0}}]}]}],
        QuantumAlgebra`QuantumAlgebra`Bra,
        BaseStyle->"BraWrapper"]}]}]}]}], "}"}]}]], "Input",
 CellChangeTimes->{{3.4440774849110003`*^9, 3.4440775201210003`*^9}, {
  3.444077568382*^9, 3.444077598501*^9}, {3.444077721811*^9, 
  3.4440778044189997`*^9}, {3.4440982637*^9, 3.4440983750810003`*^9}, {
  3.4446666048199997`*^9, 3.444666749178*^9}, {3.4446667875699997`*^9, 
  3.444666880336*^9}, {3.5995594470627537`*^9, 3.5995595254226913`*^9}}],

Cell[BoxData[
 RowBox[{"2", " ", 
  SubscriptBox["\[Xi]", 
   RowBox[{"3", ",", "1"}]], " ", 
  SubsuperscriptBox["\[Xi]", 
   RowBox[{"3", ",", "2"}], "2"], " ", 
  SubsuperscriptBox["\[Xi]", 
   RowBox[{"4", ",", "1"}], "2"], " ", 
  SubscriptBox["\[Xi]", 
   RowBox[{"4", ",", "2"}]]}]], "Output",
 CellChangeTimes->{3.599559525968692*^9}]
}, Open  ]],

Cell["\<\
The same computations can be carried using the short tensor notation. We just \
need to define the appropriate brakets (with subscripts inside the quantum \
objects) for each individual system.\
\>", "Text",
 CellChangeTimes->{{3.444512281998*^9, 3.444512353574*^9}, {3.444512424841*^9,
    3.4445124368120003`*^9}, {3.4445125217799997`*^9, 3.444512601575*^9}, {
   3.4445127568599997`*^9, 3.444512817064*^9}, {3.44466614813*^9, 
   3.44466614854*^9}, {3.444666958741*^9, 3.444666978741*^9}, {
   3.444667234583*^9, 3.444667249943*^9}, {3.444667408866*^9, 
   3.444667421506*^9}, {3.444667862341*^9, 3.444667879492*^9}, 
   3.5947178872106466`*^9}],

Cell[BoxData[
 RowBox[{
  TagBox[
   RowBox[{"\[LeftAngleBracket]", 
    AdjustmentBox[
     RowBox[{
      TagBox[
       SubscriptBox["n_", "k_"],
       QuantumAlgebra`QuantumAlgebra`BraKetArgs,
       BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
      TagBox[
       SubscriptBox["m_", "k_"],
       QuantumAlgebra`QuantumAlgebra`BraKetArgs,
       BaseStyle->"BraKetArg"]}],
     BoxBaselineShift->0.], "\[RightAngleBracket]"}],
   QuantumAlgebra`QuantumAlgebra`Braket,
   BaseStyle->"BraKetWrapper"], ":=", 
  SubscriptBox["\[Xi]", 
   RowBox[{"n", ",", "m"}]]}]], "InputOnly",
 CellChangeTimes->{{3.4440979810629997`*^9, 3.444098052491*^9}, {
   3.444512372432*^9, 3.444512411094*^9}, 3.4446661675550003`*^9}],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{
   RowBox[{
    TagBox[
     RowBox[{"\[LeftAngleBracket]", 
      AdjustmentBox[
       TagBox[
        SubscriptBox["2", "1"],
        QuantumAlgebra`QuantumAlgebra`BraArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], 
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{0, -0.2}, {0, 0}}]}],
     QuantumAlgebra`QuantumAlgebra`Bra,
     BaseStyle->"BraWrapper"], "\[CenterDot]", 
    TagBox[
     RowBox[{
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{-0.2, 0}, {0, 0}}], 
      AdjustmentBox[
       TagBox[
        SubscriptBox["3", "1"],
        QuantumAlgebra`QuantumAlgebra`KetArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], "\[RightAngleBracket]"}],
     QuantumAlgebra`QuantumAlgebra`Ket,
     BaseStyle->"KetWrapper"]}], ",", 
   RowBox[{
    TagBox[
     RowBox[{"\[LeftAngleBracket]", 
      AdjustmentBox[
       TagBox[
        SubscriptBox["p", "2"],
        QuantumAlgebra`QuantumAlgebra`BraArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], 
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{0, -0.2}, {0, 0}}]}],
     QuantumAlgebra`QuantumAlgebra`Bra,
     BaseStyle->"BraWrapper"], "\[CenterDot]", 
    TagBox[
     RowBox[{
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{-0.2, 0}, {0, 0}}], 
      AdjustmentBox[
       TagBox[
        SubscriptBox["q", "2"],
        QuantumAlgebra`QuantumAlgebra`KetArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], "\[RightAngleBracket]"}],
     QuantumAlgebra`QuantumAlgebra`Ket,
     BaseStyle->"KetWrapper"]}], ",", 
   RowBox[{
    TagBox[
     RowBox[{"\[LeftAngleBracket]", 
      AdjustmentBox[
       TagBox[
        RowBox[{
         SubscriptBox["2", "1"], ",", 
         SubscriptBox["p", "2"]}],
        QuantumAlgebra`QuantumAlgebra`BraArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], 
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{0, -0.2}, {0, 0}}]}],
     QuantumAlgebra`QuantumAlgebra`Bra,
     BaseStyle->"BraWrapper"], "\[CenterDot]", 
    TagBox[
     RowBox[{
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{-0.2, 0}, {0, 0}}], 
      AdjustmentBox[
       TagBox[
        RowBox[{
         SubscriptBox["3", "1"], ",", 
         SubscriptBox["q", "2"]}],
        QuantumAlgebra`QuantumAlgebra`KetArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], "\[RightAngleBracket]"}],
     QuantumAlgebra`QuantumAlgebra`Ket,
     BaseStyle->"KetWrapper"]}]}], "}"}]], "Input",
 CellChangeTimes->{{3.444098166132*^9, 3.444098211325*^9}, {3.444512643999*^9,
   3.4445127283929996`*^9}, {3.4445128408859997`*^9, 3.444512844892*^9}, {
  3.444665812961*^9, 3.444665813396*^9}, {3.444667916869*^9, 
  3.444667940849*^9}, {3.444667972847*^9, 3.4446680189560003`*^9}, {
  3.445257484521*^9, 3.445257498549*^9}, {3.5995595442519245`*^9, 
  3.5995595535495405`*^9}}],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{
   SubscriptBox["\[Xi]", 
    RowBox[{"2", ",", "3"}]], ",", 
   SubscriptBox["\[Xi]", 
    RowBox[{"p", ",", "q"}]], ",", 
   RowBox[{
    SubscriptBox["\[Xi]", 
     RowBox[{"2", ",", "3"}]], " ", 
    SubscriptBox["\[Xi]", 
     RowBox[{"p", ",", "q"}]]}]}], "}"}]], "Output",
 CellChangeTimes->{
  3.444667937451*^9, {3.444667976605*^9, 3.4446680194189997`*^9}, 
   3.4452574587349997`*^9, 3.445257499045*^9, 3.599559554157942*^9}]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{
  RowBox[{"(", 
   FractionBox[
    RowBox[{
     TagBox[
      RowBox[{"\[LeftAngleBracket]", 
       AdjustmentBox[
        TagBox[
         RowBox[{
          SubscriptBox["3", "1"], ",", 
          SubscriptBox["4", "2"]}],
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0], 
       AdjustmentBox["\[VerticalSeparator]",
        BoxBaselineShift->-0.1,
        BoxMargins->{{0, -0.2}, {0, 0}}]}],
      QuantumAlgebra`QuantumAlgebra`Bra,
      BaseStyle->"BraWrapper"], "+", 
     TagBox[
      RowBox[{"\[LeftAngleBracket]", 
       AdjustmentBox[
        TagBox[
         RowBox[{
          SubscriptBox["4", "1"], ",", 
          SubscriptBox["3", "2"]}],
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0], 
       AdjustmentBox["\[VerticalSeparator]",
        BoxBaselineShift->-0.1,
        BoxMargins->{{0, -0.2}, {0, 0}}]}],
      QuantumAlgebra`QuantumAlgebra`Bra,
      BaseStyle->"BraWrapper"]}], 
    SqrtBox["2"]], ")"}], "\[CenterDot]", 
  RowBox[{"(", 
   FractionBox[
    RowBox[{
     TagBox[
      RowBox[{
       AdjustmentBox["\[VerticalSeparator]",
        BoxBaselineShift->-0.1,
        BoxMargins->{{-0.2, 0}, {0, 0}}], 
       AdjustmentBox[
        TagBox[
         RowBox[{
          SubscriptBox["1", "1"], ",", 
          SubscriptBox["2", "2"]}],
         QuantumAlgebra`QuantumAlgebra`KetArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0], "\[RightAngleBracket]"}],
      QuantumAlgebra`QuantumAlgebra`Ket,
      BaseStyle->"KetWrapper"], "+", 
     TagBox[
      RowBox[{
       AdjustmentBox["\[VerticalSeparator]",
        BoxBaselineShift->-0.1,
        BoxMargins->{{-0.2, 0}, {0, 0}}], 
       AdjustmentBox[
        TagBox[
         RowBox[{
          SubscriptBox["2", "1"], ",", 
          SubscriptBox["1", "2"]}],
         QuantumAlgebra`QuantumAlgebra`KetArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0], "\[RightAngleBracket]"}],
      QuantumAlgebra`QuantumAlgebra`Ket,
      BaseStyle->"KetWrapper"]}], 
    SqrtBox["2"]], ")"}]}]], "Input",
 CellChangeTimes->{{3.444667014641*^9, 3.4446670926879997`*^9}, 
   3.444667132717*^9, {3.5995595602107525`*^9, 3.5995595769651814`*^9}}],

Cell[BoxData[
 RowBox[{
  RowBox[{
   SubscriptBox["\[Xi]", 
    RowBox[{"3", ",", "2"}]], " ", 
   SubscriptBox["\[Xi]", 
    RowBox[{"4", ",", "1"}]]}], "+", 
  RowBox[{
   SubscriptBox["\[Xi]", 
    RowBox[{"3", ",", "1"}]], " ", 
   SubscriptBox["\[Xi]", 
    RowBox[{"4", ",", "2"}]]}]}]], "Output",
 CellChangeTimes->{3.444667092977*^9, 3.44466713306*^9, 3.445257501078*^9, 
  3.599559577620383*^9}]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{
  RowBox[{
   RowBox[{"(", 
    FractionBox[
     RowBox[{
      TagBox[
       RowBox[{"\[LeftAngleBracket]", 
        AdjustmentBox[
         TagBox[
          RowBox[{
           SubscriptBox["3", "1"], ",", 
           SubscriptBox["4", "2"]}],
          QuantumAlgebra`QuantumAlgebra`BraArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0], 
        AdjustmentBox["\[VerticalSeparator]",
         BoxBaselineShift->-0.1,
         BoxMargins->{{0, -0.2}, {0, 0}}]}],
       QuantumAlgebra`QuantumAlgebra`Bra,
       BaseStyle->"BraWrapper"], "+", 
      TagBox[
       RowBox[{"\[LeftAngleBracket]", 
        AdjustmentBox[
         TagBox[
          RowBox[{
           SubscriptBox["4", "1"], ",", 
           SubscriptBox["3", "2"]}],
          QuantumAlgebra`QuantumAlgebra`BraArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0], 
        AdjustmentBox["\[VerticalSeparator]",
         BoxBaselineShift->-0.1,
         BoxMargins->{{0, -0.2}, {0, 0}}]}],
       QuantumAlgebra`QuantumAlgebra`Bra,
       BaseStyle->"BraWrapper"]}], 
     SqrtBox["2"]], ")"}], "\[CenterDot]", 
   OverscriptBox["\[ScriptCapitalA]", "^"], "\[CenterDot]", 
   OverscriptBox["\[ScriptCapitalB]", "^"], "\[CenterDot]", 
   RowBox[{"(", 
    FractionBox[
     RowBox[{
      TagBox[
       RowBox[{
        AdjustmentBox["\[VerticalSeparator]",
         BoxBaselineShift->-0.1,
         BoxMargins->{{-0.2, 0}, {0, 0}}], 
        AdjustmentBox[
         TagBox[
          RowBox[{
           SubscriptBox["1", "1"], ",", 
           SubscriptBox["2", "2"]}],
          QuantumAlgebra`QuantumAlgebra`KetArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0], "\[RightAngleBracket]"}],
       QuantumAlgebra`QuantumAlgebra`Ket,
       BaseStyle->"KetWrapper"], "+", 
      TagBox[
       RowBox[{
        AdjustmentBox["\[VerticalSeparator]",
         BoxBaselineShift->-0.1,
         BoxMargins->{{-0.2, 0}, {0, 0}}], 
        AdjustmentBox[
         TagBox[
          RowBox[{
           SubscriptBox["2", "1"], ",", 
           SubscriptBox["1", "2"]}],
          QuantumAlgebra`QuantumAlgebra`KetArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0], "\[RightAngleBracket]"}],
       QuantumAlgebra`QuantumAlgebra`Ket,
       BaseStyle->"KetWrapper"]}], 
     SqrtBox["2"]], ")"}]}], "/.", "\[VeryThinSpace]", 
  RowBox[{"{", 
   RowBox[{
    RowBox[{
     OverscriptBox["\[ScriptCapitalA]", "^"], "\[Rule]", 
     RowBox[{
      TagBox[
       RowBox[{
        AdjustmentBox["\[VerticalSeparator]",
         BoxBaselineShift->-0.1,
         BoxMargins->{{-0.2, 0}, {0, 0}}], 
        AdjustmentBox[
         TagBox[
          RowBox[{
           SubscriptBox["2", "1"], ",", 
           SubscriptBox["2", "2"]}],
          QuantumAlgebra`QuantumAlgebra`KetArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0], "\[RightAngleBracket]"}],
       QuantumAlgebra`QuantumAlgebra`Ket,
       BaseStyle->"KetWrapper"], "\[CenterDot]", 
      TagBox[
       RowBox[{"\[LeftAngleBracket]", 
        AdjustmentBox[
         TagBox[
          RowBox[{
           SubscriptBox["4", "1"], ",", 
           SubscriptBox["4", "2"]}],
          QuantumAlgebra`QuantumAlgebra`BraArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0], 
        AdjustmentBox["\[VerticalSeparator]",
         BoxBaselineShift->-0.1,
         BoxMargins->{{0, -0.2}, {0, 0}}]}],
       QuantumAlgebra`QuantumAlgebra`Bra,
       BaseStyle->"BraWrapper"]}]}], ",", 
    RowBox[{
     OverscriptBox["\[ScriptCapitalB]", "^"], "\[Rule]", 
     RowBox[{
      TagBox[
       RowBox[{
        AdjustmentBox["\[VerticalSeparator]",
         BoxBaselineShift->-0.1,
         BoxMargins->{{-0.2, 0}, {0, 0}}], 
        AdjustmentBox[
         TagBox[
          RowBox[{
           SubscriptBox["1", "1"], ",", 
           SubscriptBox["1", "2"]}],
          QuantumAlgebra`QuantumAlgebra`KetArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0], "\[RightAngleBracket]"}],
       QuantumAlgebra`QuantumAlgebra`Ket,
       BaseStyle->"KetWrapper"], "\[CenterDot]", 
      TagBox[
       RowBox[{"\[LeftAngleBracket]", 
        AdjustmentBox[
         TagBox[
          RowBox[{
           SubscriptBox["3", "1"], ",", 
           SubscriptBox["3", "2"]}],
          QuantumAlgebra`QuantumAlgebra`BraArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0], 
        AdjustmentBox["\[VerticalSeparator]",
         BoxBaselineShift->-0.1,
         BoxMargins->{{0, -0.2}, {0, 0}}]}],
       QuantumAlgebra`QuantumAlgebra`Bra,
       BaseStyle->"BraWrapper"]}]}]}], "}"}]}]], "Input",
 CellChangeTimes->{{3.444667014641*^9, 3.4446672117469997`*^9}, {
  3.599559580833988*^9, 3.5995596023776264`*^9}}],

Cell[BoxData[
 RowBox[{"2", " ", 
  SubscriptBox["\[Xi]", 
   RowBox[{"3", ",", "1"}]], " ", 
  SubsuperscriptBox["\[Xi]", 
   RowBox[{"3", ",", "2"}], "2"], " ", 
  SubsuperscriptBox["\[Xi]", 
   RowBox[{"4", ",", "1"}], "2"], " ", 
  SubscriptBox["\[Xi]", 
   RowBox[{"4", ",", "2"}]]}]], "Output",
 CellChangeTimes->{3.444667212783*^9, 3.44525750208*^9, 3.59955960451483*^9}]
}, Open  ]],

Cell["\<\
Finally, we clear our definitions with:\
\>", "Text",
 CellChangeTimes->{{3.445257752316*^9, 3.445257771604*^9}, {
  3.599559610973241*^9, 3.599559612408444*^9}}],

Cell[BoxData[{
 RowBox[{
  TagBox[
   RowBox[{"\[LeftAngleBracket]", 
    AdjustmentBox[
     RowBox[{
      TagBox[
       SubscriptBox["n_", "k_"],
       QuantumAlgebra`QuantumAlgebra`BraKetArgs,
       BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
      TagBox[
       SubscriptBox["m_", "k_"],
       QuantumAlgebra`QuantumAlgebra`BraKetArgs,
       BaseStyle->"BraKetArg"]}],
     BoxBaselineShift->0.], "\[RightAngleBracket]"}],
   QuantumAlgebra`QuantumAlgebra`Braket,
   BaseStyle->"BraKetWrapper"], "=."}], "\n", 
 RowBox[{
  TagBox[
   RowBox[{
    SubscriptBox["\[InvisiblePrefixScriptBase]", 
     TagBox[
      AdjustmentBox[
       TagBox["k_",
        QuantumAlgebra`QuantumAlgebra`BraArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0],
      QuantumAlgebra`QuantumAlgebra`UDScript,
      BaseStyle->"LIndex"]], 
    SubscriptBox[
     RowBox[{"\[LeftAngleBracket]", 
      AdjustmentBox[
       RowBox[{
        TagBox["n_",
         QuantumAlgebra`QuantumAlgebra`BraKetArgs,
         BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
        TagBox["m_",
         QuantumAlgebra`QuantumAlgebra`BraKetArgs,
         BaseStyle->"BraKetArg"]}],
       BoxBaselineShift->0], "\[RightAngleBracket]"}], 
     TagBox[
      AdjustmentBox[
       TagBox["k_",
        QuantumAlgebra`QuantumAlgebra`BraArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0],
      QuantumAlgebra`QuantumAlgebra`UDScript,
      BaseStyle->"RIndex"]]}],
   QuantumAlgebra`QuantumAlgebra`Braket,
   BaseStyle->"BraKetWrapper"], "=."}]}], "InputOnly",
 CellChangeTimes->{{3.445257630573*^9, 3.445257631016*^9}, 3.445257693021*^9}]
}, Open  ]],

Cell[CellGroupData[{

Cell["Operators in Composite State Spaces", "Subsection",
 CellChangeTimes->{{3.4452554168970003`*^9, 3.445255419104*^9}},
 CellTags->"qa:7.4"],

Cell[TextData[{
 "Let's begin our discussion with operators in their outer form. They are \
easy to define and very powerful indeed. The following line defines an \
operator, which acts in the state space spanned by the basis set ",
 Cell[BoxData[
  FormBox[
   RowBox[{" ", 
    TagBox[
     RowBox[{
      AdjustmentBox["\[VerticalSeparator]",
       BoxMargins->{{-0.4, 0.}, {0., 0.}}], 
      AdjustmentBox[
       TagBox[
        RowBox[{"n", ",", "m"}],
        QuantumAlgebra`QuantumAlgebra`KetArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], "\[RightAngleBracket]"}],
     QuantumAlgebra`QuantumAlgebra`Ket,
     BaseStyle->"KetWrapper"]}], TraditionalForm]]],
 " with ",
 Cell[BoxData[
  RowBox[{" ", 
   RowBox[{
    StyleBox["n",
     FontSlant->"Italic"], ",", 
    RowBox[{
     StyleBox["m",
      FontSlant->"Italic"], "\[Element]", 
     SuperscriptBox["Z", "+"]}]}]}]]],
 "."
}], "Text",
 CellChangeTimes->{{3.4446708015290003`*^9, 3.44467086762*^9}, 
   3.444677069835*^9, {3.44468557796*^9, 3.4446855935880003`*^9}, {
   3.444685732832*^9, 3.444685860407*^9}, {3.444685989271*^9, 
   3.4446860280950003`*^9}, {3.5995596874289756`*^9, 3.599559697319393*^9}}],

Cell[BoxData[
 RowBox[{
  OverscriptBox["\[ScriptCapitalB]", "^"], ":=", 
  RowBox[{
   SubscriptBox["B", 
    RowBox[{"m", ",", "n", ",", "p", ",", "q"}]], " ", 
   RowBox[{
    TagBox[
     RowBox[{
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{-0.2, 0}, {0, 0}}], 
      AdjustmentBox[
       TagBox[
        RowBox[{
         SubscriptBox["m", "1"], ",", 
         SubscriptBox["n", "2"]}],
        QuantumAlgebra`QuantumAlgebra`KetArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], "\[RightAngleBracket]"}],
     QuantumAlgebra`QuantumAlgebra`Ket,
     BaseStyle->"KetWrapper"], "\[CenterDot]", 
    TagBox[
     RowBox[{"\[LeftAngleBracket]", 
      AdjustmentBox[
       TagBox[
        RowBox[{
         SubscriptBox["p", "1"], ",", 
         SubscriptBox["q", "2"]}],
        QuantumAlgebra`QuantumAlgebra`BraArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], 
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{0, -0.2}, {0, 0}}]}],
     QuantumAlgebra`QuantumAlgebra`Bra,
     BaseStyle->"BraWrapper"]}]}]}]], "InputOnly",
 CellChangeTimes->{{3.444670508301*^9, 3.4446705272469997`*^9}, {
  3.444670615875*^9, 3.444670619917*^9}, {3.4446706566*^9, 
  3.444670657666*^9}, {3.444670716473*^9, 3.4446707828459997`*^9}, {
  3.444670877042*^9, 3.4446709339230003`*^9}, {3.444670993512*^9, 
  3.444671015625*^9}, {3.444671082895*^9, 3.444671103243*^9}, {
  3.444689003648*^9, 3.44468901365*^9}, {3.4446890528380003`*^9, 
  3.4446890561210003`*^9}, {3.444689431032*^9, 3.4446894662530003`*^9}, {
  3.599559705057007*^9, 3.599559721873836*^9}}],

Cell["\<\
Now we can apply this operator both sides, i. e. to a ket or to a bra. \
\>", "Text",
 CellChangeTimes->{{3.44468606737*^9, 3.4446861091809998`*^9}}],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{
   RowBox[{
    OverscriptBox["\[ScriptCapitalB]", "^"], "\[CenterDot]", 
    TagBox[
     RowBox[{
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{-0.2, 0}, {0, 0}}], 
      AdjustmentBox[
       TagBox[
        RowBox[{
         SubscriptBox["a", "1"], ",", 
         SubscriptBox["b", "2"]}],
        QuantumAlgebra`QuantumAlgebra`KetArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], "\[RightAngleBracket]"}],
     QuantumAlgebra`QuantumAlgebra`Ket,
     BaseStyle->"KetWrapper"]}], ",", 
   RowBox[{
    TagBox[
     RowBox[{"\[LeftAngleBracket]", 
      AdjustmentBox[
       TagBox[
        RowBox[{
         SubscriptBox["k", "1"], ",", 
         SubscriptBox["l", "2"]}],
        QuantumAlgebra`QuantumAlgebra`BraArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], 
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{0, -0.2}, {0, 0}}]}],
     QuantumAlgebra`QuantumAlgebra`Bra,
     BaseStyle->"BraWrapper"], "\[CenterDot]", 
    OverscriptBox["\[ScriptCapitalB]", "^"]}]}], "}"}]], "Input",
 CellChangeTimes->{{3.44467102845*^9, 3.444671073318*^9}, 3.444671108697*^9, {
   3.4446861156809998`*^9, 3.4446861396029997`*^9}, {3.5995597338702574`*^9, 
   3.599559741763871*^9}}],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{
   RowBox[{
    TagBox[
     RowBox[{"\[LeftAngleBracket]", 
      AdjustmentBox[
       RowBox[{
        TagBox[
         SubscriptBox["p", "1"],
         QuantumAlgebra`QuantumAlgebra`BraKetArgs,
         BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
        TagBox[
         SubscriptBox["a", "1"],
         QuantumAlgebra`QuantumAlgebra`BraKetArgs,
         BaseStyle->"BraKetArg"]}],
       BoxBaselineShift->0], "\[RightAngleBracket]"}],
     QuantumAlgebra`QuantumAlgebra`Braket,
     BaseStyle->"BraKetWrapper"], " ", 
    TagBox[
     RowBox[{"\[LeftAngleBracket]", 
      AdjustmentBox[
       RowBox[{
        TagBox[
         SubscriptBox["q", "2"],
         QuantumAlgebra`QuantumAlgebra`BraKetArgs,
         BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
        TagBox[
         SubscriptBox["b", "2"],
         QuantumAlgebra`QuantumAlgebra`BraKetArgs,
         BaseStyle->"BraKetArg"]}],
       BoxBaselineShift->0], "\[RightAngleBracket]"}],
     QuantumAlgebra`QuantumAlgebra`Braket,
     BaseStyle->"BraKetWrapper"], " ", 
    TagBox[
     RowBox[{
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{-0.2, 0}, {0, 0}}], 
      AdjustmentBox[
       TagBox[
        RowBox[{
         SubscriptBox["m", "1"], ",", 
         SubscriptBox["n", "2"]}],
        QuantumAlgebra`QuantumAlgebra`KetArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], "\[RightAngleBracket]"}],
     QuantumAlgebra`QuantumAlgebra`Ket,
     BaseStyle->"KetWrapper"], " ", 
    SubscriptBox["B", 
     RowBox[{"m", ",", "n", ",", "p", ",", "q"}]]}], ",", 
   RowBox[{
    TagBox[
     RowBox[{"\[LeftAngleBracket]", 
      AdjustmentBox[
       TagBox[
        RowBox[{
         SubscriptBox["p", "1"], ",", 
         SubscriptBox["q", "2"]}],
        QuantumAlgebra`QuantumAlgebra`BraArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], 
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{0, -0.2}, {0, 0}}]}],
     QuantumAlgebra`QuantumAlgebra`Bra,
     BaseStyle->"BraWrapper"], " ", 
    TagBox[
     RowBox[{"\[LeftAngleBracket]", 
      AdjustmentBox[
       RowBox[{
        TagBox[
         SubscriptBox["k", "1"],
         QuantumAlgebra`QuantumAlgebra`BraKetArgs,
         BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
        TagBox[
         SubscriptBox["m", "1"],
         QuantumAlgebra`QuantumAlgebra`BraKetArgs,
         BaseStyle->"BraKetArg"]}],
       BoxBaselineShift->0], "\[RightAngleBracket]"}],
     QuantumAlgebra`QuantumAlgebra`Braket,
     BaseStyle->"BraKetWrapper"], " ", 
    TagBox[
     RowBox[{"\[LeftAngleBracket]", 
      AdjustmentBox[
       RowBox[{
        TagBox[
         SubscriptBox["l", "2"],
         QuantumAlgebra`QuantumAlgebra`BraKetArgs,
         BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
        TagBox[
         SubscriptBox["n", "2"],
         QuantumAlgebra`QuantumAlgebra`BraKetArgs,
         BaseStyle->"BraKetArg"]}],
       BoxBaselineShift->0], "\[RightAngleBracket]"}],
     QuantumAlgebra`QuantumAlgebra`Braket,
     BaseStyle->"BraKetWrapper"], " ", 
    SubscriptBox["B", 
     RowBox[{"m", ",", "n", ",", "p", ",", "q"}]]}]}], "}"}]], "Output",
 CellChangeTimes->{{3.4446710394379997`*^9, 3.444671073766*^9}, 
   3.444671109197*^9, 3.444686144532*^9, 3.444689058856*^9, 
   3.4452472646629457`*^9, 3.4452575825*^9, {3.445257739079*^9, 
   3.445257745571*^9}, 3.5995597420602713`*^9}]
}, Open  ]],

Cell["\<\
This operator is constructed with bras and kets, and simplifies when acting \
upon a ket or bra using the braketing rules, this simplification would work \
even if the ket or bra are objects of larger rank. \
\>", "Text",
 CellChangeTimes->{{3.44468619077*^9, 3.4446863124119997`*^9}, {
   3.444686348803*^9, 3.444686389066*^9}, {3.4446867696070004`*^9, 
   3.4446867793929996`*^9}, 3.4446868126879997`*^9, {3.4446868458389997`*^9, 
   3.444686898494*^9}, {3.445257815349*^9, 3.445257815883*^9}, 
   3.5947178967161903`*^9, 3.599559765678713*^9}],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{
  OverscriptBox["\[ScriptCapitalB]", "^"], "\[CenterDot]", 
  RowBox[{
   TagBox[
    SubscriptBox[
     RowBox[{
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{-0.2, 0}, {0, 0}}], 
      AdjustmentBox[
       TagBox["d",
        QuantumAlgebra`QuantumAlgebra`KetArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], "\[RightAngleBracket]"}], 
     TagBox[
      AdjustmentBox[
       TagBox["x",
        QuantumAlgebra`QuantumAlgebra`KetArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0],
      QuantumAlgebra`QuantumAlgebra`UDScript,
      BaseStyle->"RIndex"]],
    QuantumAlgebra`QuantumAlgebra`Ket,
    BaseStyle->"KetWrapper"], "\[CircleTimes]", 
   TagBox[
    RowBox[{
     AdjustmentBox["\[VerticalSeparator]",
      BoxBaselineShift->-0.1,
      BoxMargins->{{-0.2, 0}, {0, 0}}], 
     AdjustmentBox[
      TagBox[
       RowBox[{
        SubscriptBox["a", "1"], ",", 
        SubscriptBox["b", "2"], ",", 
        SubscriptBox["c", "3"]}],
       QuantumAlgebra`QuantumAlgebra`KetArgs,
       BaseStyle->"BraKetArg"],
      BoxBaselineShift->0], "\[RightAngleBracket]"}],
    QuantumAlgebra`QuantumAlgebra`Ket,
    BaseStyle->"KetWrapper"]}]}]], "Input",
 CellChangeTimes->{{3.4446711672469997`*^9, 3.444671171716*^9}, {
  3.444686904873*^9, 3.4446869768599997`*^9}, {3.4446879307609997`*^9, 
  3.444687936583*^9}, {3.4452473434379454`*^9, 3.4452473462909455`*^9}, {
  3.5995597857247486`*^9, 3.5995597930567613`*^9}}],

Cell[BoxData[
 RowBox[{
  TagBox[
   RowBox[{"\[LeftAngleBracket]", 
    AdjustmentBox[
     RowBox[{
      TagBox[
       SubscriptBox["p", "1"],
       QuantumAlgebra`QuantumAlgebra`BraKetArgs,
       BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
      TagBox[
       SubscriptBox["a", "1"],
       QuantumAlgebra`QuantumAlgebra`BraKetArgs,
       BaseStyle->"BraKetArg"]}],
     BoxBaselineShift->0], "\[RightAngleBracket]"}],
   QuantumAlgebra`QuantumAlgebra`Braket,
   BaseStyle->"BraKetWrapper"], " ", 
  TagBox[
   RowBox[{"\[LeftAngleBracket]", 
    AdjustmentBox[
     RowBox[{
      TagBox[
       SubscriptBox["q", "2"],
       QuantumAlgebra`QuantumAlgebra`BraKetArgs,
       BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
      TagBox[
       SubscriptBox["b", "2"],
       QuantumAlgebra`QuantumAlgebra`BraKetArgs,
       BaseStyle->"BraKetArg"]}],
     BoxBaselineShift->0], "\[RightAngleBracket]"}],
   QuantumAlgebra`QuantumAlgebra`Braket,
   BaseStyle->"BraKetWrapper"], " ", 
  SubscriptBox["B", 
   RowBox[{"m", ",", "n", ",", "p", ",", "q"}]], " ", 
  RowBox[{
   TagBox[
    SubscriptBox[
     RowBox[{
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{-0.2, 0}, {0, 0}}], 
      AdjustmentBox[
       TagBox["d",
        QuantumAlgebra`QuantumAlgebra`KetArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], "\[RightAngleBracket]"}], 
     TagBox[
      AdjustmentBox[
       TagBox["x",
        QuantumAlgebra`QuantumAlgebra`KetArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0],
      QuantumAlgebra`QuantumAlgebra`UDScript,
      BaseStyle->"RIndex"]],
    QuantumAlgebra`QuantumAlgebra`Ket,
    BaseStyle->"KetWrapper"], "\[CircleTimes]", 
   TagBox[
    RowBox[{
     AdjustmentBox["\[VerticalSeparator]",
      BoxBaselineShift->-0.1,
      BoxMargins->{{-0.2, 0}, {0, 0}}], 
     AdjustmentBox[
      TagBox[
       RowBox[{
        SubscriptBox["m", "1"], ",", 
        SubscriptBox["n", "2"], ",", 
        SubscriptBox["c", "3"]}],
       QuantumAlgebra`QuantumAlgebra`KetArgs,
       BaseStyle->"BraKetArg"],
      BoxBaselineShift->0], "\[RightAngleBracket]"}],
    QuantumAlgebra`QuantumAlgebra`Ket,
    BaseStyle->"KetWrapper"]}]}]], "Output",
 CellChangeTimes->{
  3.444671171943*^9, {3.444686921166*^9, 3.444686977899*^9}, 
   3.4452472686709456`*^9, 3.445247347035946*^9, 3.445257829123*^9, 
   3.599559793649562*^9}]
}, Open  ]],

Cell["\<\
This behavior eliminates the necessity of using the unity operator in the \
tensorial form of an enlarged operator. However, note that the following \
construction don't work, i.e braketing is not performed:\
\>", "Text",
 CellChangeTimes->{{3.444687352727*^9, 3.4446873767349997`*^9}, {
   3.444687408135*^9, 3.444687474067*^9}, {3.444687510708*^9, 
   3.4446875499440002`*^9}, {3.444687656574*^9, 3.444687736043*^9}, 
   3.594717898892315*^9, {3.5995602259731216`*^9, 3.599560241635549*^9}}],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{
  RowBox[{
   OverscriptBox["\[ScriptCapitalA]", "^"], "\[CircleTimes]", 
   OverscriptBox["\[ScriptCapitalB]", "^"]}], "\[CenterDot]", 
  RowBox[{
   TagBox[
    RowBox[{
     AdjustmentBox["\[VerticalSeparator]",
      BoxBaselineShift->-0.1,
      BoxMargins->{{-0.2, 0}, {0, 0}}], 
     AdjustmentBox[
      TagBox[
       SubscriptBox["a", "1"],
       QuantumAlgebra`QuantumAlgebra`KetArgs,
       BaseStyle->"BraKetArg"],
      BoxBaselineShift->0], "\[RightAngleBracket]"}],
    QuantumAlgebra`QuantumAlgebra`Ket,
    BaseStyle->"KetWrapper"], "\[CircleTimes]", 
   TagBox[
    SubscriptBox[
     RowBox[{
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{-0.2, 0}, {0, 0}}], 
      AdjustmentBox[
       TagBox["d",
        QuantumAlgebra`QuantumAlgebra`KetArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], "\[RightAngleBracket]"}], 
     TagBox[
      AdjustmentBox[
       TagBox["x",
        QuantumAlgebra`QuantumAlgebra`KetArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0],
      QuantumAlgebra`QuantumAlgebra`UDScript,
      BaseStyle->"RIndex"]],
    QuantumAlgebra`QuantumAlgebra`Ket,
    BaseStyle->"KetWrapper"]}]}]], "Input",
 CellChangeTimes->{{3.5995599857015*^9, 3.5995599875735025`*^9}, {
  3.5995602033062816`*^9, 3.5995602049286847`*^9}}],

Cell[BoxData[
 RowBox[{
  RowBox[{
   RowBox[{
    RowBox[{
     TagBox[
      RowBox[{
       AdjustmentBox["\[VerticalSeparator]",
        BoxBaselineShift->-0.1,
        BoxMargins->{{-0.2, 0}, {0, 0}}], 
       AdjustmentBox[
        TagBox[
         RowBox[{
          SubscriptBox["m", "1"], ",", 
          SubscriptBox["n", "2"]}],
         QuantumAlgebra`QuantumAlgebra`KetArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0], "\[RightAngleBracket]"}],
      QuantumAlgebra`QuantumAlgebra`Ket,
      BaseStyle->"KetWrapper"], "\[CenterDot]", 
     TagBox[
      RowBox[{"\[LeftAngleBracket]", 
       AdjustmentBox[
        TagBox[
         RowBox[{
          SubscriptBox["p", "1"], ",", 
          SubscriptBox["q", "2"]}],
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0], 
       AdjustmentBox["\[VerticalSeparator]",
        BoxBaselineShift->-0.1,
        BoxMargins->{{0, -0.2}, {0, 0}}]}],
      QuantumAlgebra`QuantumAlgebra`Bra,
      BaseStyle->"BraWrapper"]}], "\[CircleTimes]", 
    OverscriptBox["\[ScriptCapitalA]", "^"]}], "\[CenterDot]", 
   RowBox[{
    TagBox[
     RowBox[{
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{-0.2, 0}, {0, 0}}], 
      AdjustmentBox[
       TagBox[
        SubscriptBox["a", "1"],
        QuantumAlgebra`QuantumAlgebra`KetArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], "\[RightAngleBracket]"}],
     QuantumAlgebra`QuantumAlgebra`Ket,
     BaseStyle->"KetWrapper"], "\[CircleTimes]", 
    TagBox[
     SubscriptBox[
      RowBox[{
       AdjustmentBox["\[VerticalSeparator]",
        BoxBaselineShift->-0.1,
        BoxMargins->{{-0.2, 0}, {0, 0}}], 
       AdjustmentBox[
        TagBox["d",
         QuantumAlgebra`QuantumAlgebra`KetArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0], "\[RightAngleBracket]"}], 
      TagBox[
       AdjustmentBox[
        TagBox["x",
         QuantumAlgebra`QuantumAlgebra`KetArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"RIndex"]],
     QuantumAlgebra`QuantumAlgebra`Ket,
     BaseStyle->"KetWrapper"]}]}], " ", 
  SubscriptBox["B", 
   RowBox[{"m", ",", "n", ",", "p", ",", "q"}]]}]], "Output",
 CellChangeTimes->{3.5995599894767065`*^9, 3.5995602078146896`*^9}]
}, Open  ]],

Cell[TextData[{
 "The reason is that there are no predefined definitions for composite \
operators acting on composite kets or bras. See below for further discussion \
about this point. However, we can give an outer form for the operator ",
 Cell[BoxData[
  FormBox[
   OverscriptBox["\[ScriptCapitalA]", "^"], TraditionalForm]]],
 "  and then everything works as expected:"
}], "Text",
 CellChangeTimes->{{3.444687753442*^9, 3.4446878770360003`*^9}, {
   3.444688005373*^9, 3.444688031358*^9}, {3.444688151674*^9, 
   3.4446881658190002`*^9}, {3.444688218366*^9, 3.4446882559890003`*^9}, {
   3.444688346888*^9, 3.4446883760629997`*^9}, {3.444688510541*^9, 
   3.4446887626400003`*^9}, {3.444744252623*^9, 3.444744269192*^9}, {
   3.445257887697*^9, 3.445257889579*^9}, 3.5947179050286655`*^9, {
   3.599560253023569*^9, 3.599560290557235*^9}, {3.5995618004150686`*^9, 
   3.5995618025366726`*^9}}],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{
  RowBox[{
   RowBox[{
    OverscriptBox["\[ScriptCapitalA]", "^"], "\[CircleTimes]", 
    OverscriptBox["\[ScriptCapitalB]", "^"]}], "\[CenterDot]", 
   RowBox[{
    TagBox[
     RowBox[{
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{-0.2, 0}, {0, 0}}], 
      AdjustmentBox[
       TagBox[
        RowBox[{
         SubscriptBox["a", "1"], ",", 
         SubscriptBox["b", "2"], ",", 
         SubscriptBox["c", "3"]}],
        QuantumAlgebra`QuantumAlgebra`KetArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], "\[RightAngleBracket]"}],
     QuantumAlgebra`QuantumAlgebra`Ket,
     BaseStyle->"KetWrapper"], "\[CircleTimes]", 
    TagBox[
     SubscriptBox[
      RowBox[{
       AdjustmentBox["\[VerticalSeparator]",
        BoxBaselineShift->-0.1,
        BoxMargins->{{-0.2, 0}, {0, 0}}], 
       AdjustmentBox[
        TagBox["d",
         QuantumAlgebra`QuantumAlgebra`KetArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0], "\[RightAngleBracket]"}], 
      TagBox[
       AdjustmentBox[
        TagBox["x",
         QuantumAlgebra`QuantumAlgebra`KetArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"RIndex"]],
     QuantumAlgebra`QuantumAlgebra`Ket,
     BaseStyle->"KetWrapper"]}]}], "/.", "\[VeryThinSpace]", 
  RowBox[{
   OverscriptBox["\[ScriptCapitalA]", "^"], "\[Rule]", 
   RowBox[{
    TagBox[
     SubscriptBox[
      RowBox[{
       AdjustmentBox["\[VerticalSeparator]",
        BoxBaselineShift->-0.1,
        BoxMargins->{{-0.2, 0}, {0, 0}}], 
       AdjustmentBox[
        TagBox["a",
         QuantumAlgebra`QuantumAlgebra`KetArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0], "\[RightAngleBracket]"}], 
      TagBox[
       AdjustmentBox[
        TagBox["x",
         QuantumAlgebra`QuantumAlgebra`KetArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"RIndex"]],
     QuantumAlgebra`QuantumAlgebra`Ket,
     BaseStyle->"KetWrapper"], "\[CenterDot]", 
    TagBox[
     RowBox[{
      SubscriptBox["\[InvisiblePrefixScriptBase]", 
       TagBox[
        AdjustmentBox[
         TagBox["x",
          QuantumAlgebra`QuantumAlgebra`BraArgs,
          BaseStyle->"BraKetArg"],
         BoxBaselineShift->0],
        QuantumAlgebra`QuantumAlgebra`UDScript,
        BaseStyle->"LIndex"]], 
      RowBox[{"\[LeftAngleBracket]", 
       AdjustmentBox[
        TagBox["a",
         QuantumAlgebra`QuantumAlgebra`BraArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0], 
       AdjustmentBox["\[VerticalSeparator]",
        BoxBaselineShift->-0.1,
        BoxMargins->{{0, -0.2}, {0, 0}}]}]}],
     QuantumAlgebra`QuantumAlgebra`Bra,
     BaseStyle->"BraWrapper"]}]}]}]], "Input",
 CellChangeTimes->{{3.444690667998*^9, 3.444690756572*^9}, {
   3.4452473190069456`*^9, 3.4452473202379456`*^9}, 3.445257975426*^9, {
   3.5995602966100454`*^9, 3.5995603215700893`*^9}}],

Cell[BoxData[
 RowBox[{
  TagBox[
   RowBox[{"\[LeftAngleBracket]", 
    AdjustmentBox[
     RowBox[{
      TagBox[
       SubscriptBox["p", "1"],
       QuantumAlgebra`QuantumAlgebra`BraKetArgs,
       BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
      TagBox[
       SubscriptBox["a", "1"],
       QuantumAlgebra`QuantumAlgebra`BraKetArgs,
       BaseStyle->"BraKetArg"]}],
     BoxBaselineShift->0], "\[RightAngleBracket]"}],
   QuantumAlgebra`QuantumAlgebra`Braket,
   BaseStyle->"BraKetWrapper"], " ", 
  TagBox[
   RowBox[{"\[LeftAngleBracket]", 
    AdjustmentBox[
     RowBox[{
      TagBox[
       SubscriptBox["q", "2"],
       QuantumAlgebra`QuantumAlgebra`BraKetArgs,
       BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
      TagBox[
       SubscriptBox["b", "2"],
       QuantumAlgebra`QuantumAlgebra`BraKetArgs,
       BaseStyle->"BraKetArg"]}],
     BoxBaselineShift->0], "\[RightAngleBracket]"}],
   QuantumAlgebra`QuantumAlgebra`Braket,
   BaseStyle->"BraKetWrapper"], " ", 
  TagBox[
   RowBox[{
    SubscriptBox["\[InvisiblePrefixScriptBase]", 
     TagBox[
      AdjustmentBox[
       TagBox["x",
        QuantumAlgebra`QuantumAlgebra`BraArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0],
      QuantumAlgebra`QuantumAlgebra`UDScript,
      BaseStyle->"LIndex"]], 
    SubscriptBox[
     RowBox[{"\[LeftAngleBracket]", 
      AdjustmentBox[
       RowBox[{
        TagBox["a",
         QuantumAlgebra`QuantumAlgebra`BraKetArgs,
         BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
        TagBox["d",
         QuantumAlgebra`QuantumAlgebra`BraKetArgs,
         BaseStyle->"BraKetArg"]}],
       BoxBaselineShift->0], "\[RightAngleBracket]"}], 
     TagBox[
      AdjustmentBox[
       TagBox["x",
        QuantumAlgebra`QuantumAlgebra`BraArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0],
      QuantumAlgebra`QuantumAlgebra`UDScript,
      BaseStyle->"RIndex"]]}],
   QuantumAlgebra`QuantumAlgebra`Braket,
   BaseStyle->"BraKetWrapper"], " ", 
  SubscriptBox["B", 
   RowBox[{"m", ",", "n", ",", "p", ",", "q"}]], " ", 
  RowBox[{
   TagBox[
    SubscriptBox[
     RowBox[{
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{-0.2, 0}, {0, 0}}], 
      AdjustmentBox[
       TagBox["a",
        QuantumAlgebra`QuantumAlgebra`KetArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], "\[RightAngleBracket]"}], 
     TagBox[
      AdjustmentBox[
       TagBox["x",
        QuantumAlgebra`QuantumAlgebra`KetArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0],
      QuantumAlgebra`QuantumAlgebra`UDScript,
      BaseStyle->"RIndex"]],
    QuantumAlgebra`QuantumAlgebra`Ket,
    BaseStyle->"KetWrapper"], "\[CircleTimes]", 
   TagBox[
    RowBox[{
     AdjustmentBox["\[VerticalSeparator]",
      BoxBaselineShift->-0.1,
      BoxMargins->{{-0.2, 0}, {0, 0}}], 
     AdjustmentBox[
      TagBox[
       RowBox[{
        SubscriptBox["m", "1"], ",", 
        SubscriptBox["n", "2"], ",", 
        SubscriptBox["c", "3"]}],
       QuantumAlgebra`QuantumAlgebra`KetArgs,
       BaseStyle->"BraKetArg"],
      BoxBaselineShift->0], "\[RightAngleBracket]"}],
    QuantumAlgebra`QuantumAlgebra`Ket,
    BaseStyle->"KetWrapper"]}]}]], "Output",
 CellChangeTimes->{3.444690697842*^9, 3.445247310983946*^9, 
  3.4452474260129457`*^9, 3.445257901351*^9, 3.445257976289*^9, 
  3.599560324814895*^9}]
}, Open  ]],

Cell["\<\
Suppose that we want to define a set of operators with similar behavior but \
with each one acting on different state spaces. We can do all definitions at \
once using named patterns to specify the state spaces. \
\>", "Text",
 CellChangeTimes->{{3.444688824108*^9, 3.444688973741*^9}, {3.444689121591*^9,
    3.4446892254960003`*^9}, {3.445258007186*^9, 3.445258025242*^9}, {
   3.445258060538*^9, 3.4452580793599997`*^9}, 3.5947179102769656`*^9, {
   3.599561828799615*^9, 3.5995618298406744`*^9}}],

Cell["\<\
Let's take the same operator as before, but this time let it work in any two\
\[Dash]rank tensor subspace of a n\[Dash]rank tensor space. The definition is \
almost the same:\
\>", "Text",
 CellChangeTimes->{{3.444688824108*^9, 3.444688973741*^9}, {3.444689121591*^9,
    3.444689347967*^9}, {3.445258099493*^9, 3.4452581575480003`*^9}, 
   3.5995618619085903`*^9}],

Cell[BoxData[
 RowBox[{
  SubscriptBox[
   OverscriptBox["\[ScriptCapitalB]", "^"], 
   RowBox[{"i_", ",", "j_"}]], ":=", 
  RowBox[{
   SubscriptBox["B", 
    RowBox[{"m", ",", "n", ",", "p", ",", "q"}]], " ", 
   RowBox[{
    TagBox[
     RowBox[{
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{-0.2, 0}, {0, 0}}], 
      AdjustmentBox[
       TagBox[
        RowBox[{
         SubscriptBox["m", "i"], ",", 
         SubscriptBox["n", "j"]}],
        QuantumAlgebra`QuantumAlgebra`KetArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], "\[RightAngleBracket]"}],
     QuantumAlgebra`QuantumAlgebra`Ket,
     BaseStyle->"KetWrapper"], "\[CenterDot]", 
    TagBox[
     RowBox[{"\[LeftAngleBracket]", 
      AdjustmentBox[
       TagBox[
        RowBox[{
         SubscriptBox["p", "i"], ",", 
         SubscriptBox["q", "j"]}],
        QuantumAlgebra`QuantumAlgebra`BraArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], 
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{0, -0.2}, {0, 0}}]}],
     QuantumAlgebra`QuantumAlgebra`Bra,
     BaseStyle->"BraWrapper"]}]}]}]], "InputOnly",
 CellChangeTimes->{{3.444670508301*^9, 3.4446705272469997`*^9}, {
  3.444670615875*^9, 3.444670619917*^9}, {3.4446706566*^9, 
  3.444670657666*^9}, {3.444670716473*^9, 3.4446707828459997`*^9}, {
  3.444670877042*^9, 3.4446709339230003`*^9}, {3.444670993512*^9, 
  3.444671015625*^9}, {3.444671082895*^9, 3.444671103243*^9}, {
  3.444689003648*^9, 3.44468901365*^9}, {3.4446890528380003`*^9, 
  3.444689102007*^9}, {3.5995648975021296`*^9, 3.5995649106395397`*^9}}],

Cell["Here are two examples:", "Text",
 CellChangeTimes->{{3.4446907631940002`*^9, 3.4446908667320004`*^9}, {
  3.4452582063310003`*^9, 3.4452582261879997`*^9}, {3.599565140248515*^9, 
  3.5995651422609186`*^9}}],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{
  SubscriptBox[
   OverscriptBox["\[ScriptCapitalB]", "^"], 
   RowBox[{"4", ",", "5"}]], "\[CenterDot]", 
  TagBox[
   RowBox[{
    AdjustmentBox["\[VerticalSeparator]",
     BoxBaselineShift->-0.1,
     BoxMargins->{{-0.2, 0}, {0, 0}}], 
    AdjustmentBox[
     TagBox[
      RowBox[{
       SubscriptBox["a", "1"], ",", 
       SubscriptBox["b", "2"], ",", 
       SubscriptBox["c", "3"], ",", 
       SubscriptBox["d", "4"], ",", 
       SubscriptBox["e", "5"], ",", 
       SubscriptBox["f", "6"]}],
      QuantumAlgebra`QuantumAlgebra`KetArgs,
      BaseStyle->"BraKetArg"],
     BoxBaselineShift->0], "\[RightAngleBracket]"}],
   QuantumAlgebra`QuantumAlgebra`Ket,
   BaseStyle->"KetWrapper"]}]], "Input",
 CellChangeTimes->{{3.44467102845*^9, 3.444671073318*^9}, 3.444671108697*^9, {
   3.4446861156809998`*^9, 3.4446861396029997`*^9}, {3.444689378185*^9, 
   3.4446893992349997`*^9}, {3.5995649250227647`*^9, 3.599564934476241*^9}}],

Cell[BoxData[
 RowBox[{
  TagBox[
   RowBox[{"\[LeftAngleBracket]", 
    AdjustmentBox[
     RowBox[{
      TagBox[
       SubscriptBox["p", "4"],
       QuantumAlgebra`QuantumAlgebra`BraKetArgs,
       BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
      TagBox[
       SubscriptBox["d", "4"],
       QuantumAlgebra`QuantumAlgebra`BraKetArgs,
       BaseStyle->"BraKetArg"]}],
     BoxBaselineShift->0], "\[RightAngleBracket]"}],
   QuantumAlgebra`QuantumAlgebra`Braket,
   BaseStyle->"BraKetWrapper"], " ", 
  TagBox[
   RowBox[{"\[LeftAngleBracket]", 
    AdjustmentBox[
     RowBox[{
      TagBox[
       SubscriptBox["q", "5"],
       QuantumAlgebra`QuantumAlgebra`BraKetArgs,
       BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
      TagBox[
       SubscriptBox["e", "5"],
       QuantumAlgebra`QuantumAlgebra`BraKetArgs,
       BaseStyle->"BraKetArg"]}],
     BoxBaselineShift->0], "\[RightAngleBracket]"}],
   QuantumAlgebra`QuantumAlgebra`Braket,
   BaseStyle->"BraKetWrapper"], " ", 
  TagBox[
   RowBox[{
    AdjustmentBox["\[VerticalSeparator]",
     BoxBaselineShift->-0.1,
     BoxMargins->{{-0.2, 0}, {0, 0}}], 
    AdjustmentBox[
     TagBox[
      RowBox[{
       SubscriptBox["a", "1"], ",", 
       SubscriptBox["b", "2"], ",", 
       SubscriptBox["c", "3"], ",", 
       SubscriptBox["m", "4"], ",", 
       SubscriptBox["n", "5"], ",", 
       SubscriptBox["f", "6"]}],
      QuantumAlgebra`QuantumAlgebra`KetArgs,
      BaseStyle->"BraKetArg"],
     BoxBaselineShift->0], "\[RightAngleBracket]"}],
   QuantumAlgebra`QuantumAlgebra`Ket,
   BaseStyle->"KetWrapper"], " ", 
  SubscriptBox["B", 
   RowBox[{"m", ",", "n", ",", "p", ",", "q"}]]}]], "Output",
 CellChangeTimes->{{3.4446894000769997`*^9, 3.444689404026*^9}, 
   3.4452474345699453`*^9, 3.445258237189*^9, {3.599564921169558*^9, 
   3.5995649349598417`*^9}}]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{
  TagBox[
   RowBox[{"\[LeftAngleBracket]", 
    AdjustmentBox[
     TagBox[
      RowBox[{
       SubscriptBox["a", "1"], ",", 
       SubscriptBox["b", "2"], ",", 
       SubscriptBox["c", "3"], ",", 
       SubscriptBox["d", "4"], ",", 
       SubscriptBox["e", "5"], ",", 
       SubscriptBox["f", "6"]}],
      QuantumAlgebra`QuantumAlgebra`BraArgs,
      BaseStyle->"BraKetArg"],
     BoxBaselineShift->0], 
    AdjustmentBox["\[VerticalSeparator]",
     BoxBaselineShift->-0.1,
     BoxMargins->{{0, -0.2}, {0, 0}}]}],
   QuantumAlgebra`QuantumAlgebra`Bra,
   BaseStyle->"BraWrapper"], "\[CenterDot]", 
  SubscriptBox[
   OverscriptBox["\[ScriptCapitalB]", "^"], 
   RowBox[{"1", ",", "6"}]]}]], "Input",
 CellChangeTimes->{{3.444689518553*^9, 3.4446895622019997`*^9}, {
  3.599564959474785*^9, 3.599564968048275*^9}}],

Cell[BoxData[
 RowBox[{
  TagBox[
   RowBox[{"\[LeftAngleBracket]", 
    AdjustmentBox[
     TagBox[
      RowBox[{
       SubscriptBox["p", "1"], ",", 
       SubscriptBox["b", "2"], ",", 
       SubscriptBox["c", "3"], ",", 
       SubscriptBox["d", "4"], ",", 
       SubscriptBox["e", "5"], ",", 
       SubscriptBox["q", "6"]}],
      QuantumAlgebra`QuantumAlgebra`BraArgs,
      BaseStyle->"BraKetArg"],
     BoxBaselineShift->0], 
    AdjustmentBox["\[VerticalSeparator]",
     BoxBaselineShift->-0.1,
     BoxMargins->{{0, -0.2}, {0, 0}}]}],
   QuantumAlgebra`QuantumAlgebra`Bra,
   BaseStyle->"BraWrapper"], " ", 
  TagBox[
   RowBox[{"\[LeftAngleBracket]", 
    AdjustmentBox[
     RowBox[{
      TagBox[
       SubscriptBox["a", "1"],
       QuantumAlgebra`QuantumAlgebra`BraKetArgs,
       BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
      TagBox[
       SubscriptBox["m", "1"],
       QuantumAlgebra`QuantumAlgebra`BraKetArgs,
       BaseStyle->"BraKetArg"]}],
     BoxBaselineShift->0], "\[RightAngleBracket]"}],
   QuantumAlgebra`QuantumAlgebra`Braket,
   BaseStyle->"BraKetWrapper"], " ", 
  TagBox[
   RowBox[{"\[LeftAngleBracket]", 
    AdjustmentBox[
     RowBox[{
      TagBox[
       SubscriptBox["f", "6"],
       QuantumAlgebra`QuantumAlgebra`BraKetArgs,
       BaseStyle->"BraKetArg"], "\[VerticalSeparator]", 
      TagBox[
       SubscriptBox["n", "6"],
       QuantumAlgebra`QuantumAlgebra`BraKetArgs,
       BaseStyle->"BraKetArg"]}],
     BoxBaselineShift->0], "\[RightAngleBracket]"}],
   QuantumAlgebra`QuantumAlgebra`Braket,
   BaseStyle->"BraKetWrapper"], " ", 
  SubscriptBox["B", 
   RowBox[{"m", ",", "n", ",", "p", ",", "q"}]]}]], "Output",
 CellChangeTimes->{3.444689562852*^9, 3.4452474358249454`*^9, 
  3.445258240665*^9, 3.599564971246785*^9}]
}, Open  ]],

Cell["\<\
In the first one, our operator is acting in the state space spanned by the \
systems 4 and 5, and in the second one, it is acting in the state space \
spanned by the systems 1 and 6. We clear our definitions with:\
\>", "Text",
 CellChangeTimes->{{3.599565144772523*^9, 3.5995651823785305`*^9}}],

Cell[BoxData[
 RowBox[{
  RowBox[{
   SubscriptBox[
    OverscriptBox["\[ScriptCapitalB]", "^"], 
    RowBox[{"i_", ",", "j_"}]], "=."}], ";", 
  RowBox[{
   OverscriptBox["\[ScriptCapitalB]", "^"], "=."}]}]], "InputOnly",
 CellChangeTimes->{{3.4446915202530003`*^9, 3.4446915370769997`*^9}}],

Cell["\<\
Finally let\[CloseCurlyQuote]s mention that all we did with the short tensor \
form can be done using the tensorial product form, so that there is great \
flexibility for defining operators in its outer form. \
\>", "Text",
 CellChangeTimes->{{3.444690383245*^9, 3.4446906283929996`*^9}, {
   3.444690884384*^9, 3.444690931041*^9}, 3.445258258189*^9, {
   3.445258340008*^9, 3.445258365193*^9}, {3.5995653489493213`*^9, 
   3.599565359846262*^9}}],

Cell["\<\
Now, let's turn our attention to the problem of defining the action of a \
composite operator on a composite bra or a composite ket. The idea to \
simplify this operaton is to apply each operator of the composite one in the \
ket or bra of its corresponding state space. This rule does not apply \
automatically:\
\>", "Text",
 CellChangeTimes->{{3.444690959784*^9, 3.444691081709*^9}, {3.444691277574*^9,
   3.444691287726*^9}, {3.444723483178*^9, 3.444723485328*^9}, {
  3.444744508743*^9, 3.44474465191*^9}, {3.444744695602*^9, 
  3.44474470437*^9}, {3.444744927133*^9, 3.444744952727*^9}, {
  3.444745004766*^9, 3.4447450853710003`*^9}, {3.4447451261549997`*^9, 
  3.444745145091*^9}, {3.4447453954379997`*^9, 3.444745485186*^9}, {
  3.445258391877*^9, 3.4452583920299997`*^9}, {3.5995653999968657`*^9, 
  3.5995654013228683`*^9}}],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{
  RowBox[{
   SubscriptBox[
    OverscriptBox["\[ScriptCapitalA]", "^"], "1"], "\[CircleTimes]", 
   SubscriptBox[
    OverscriptBox["\[ScriptCapitalB]", "^"], "2"], "\[CircleTimes]", 
   SubscriptBox[
    OverscriptBox["\[ScriptCapitalC]", "^"], "3"]}], "\[CenterDot]", 
  RowBox[{
   TagBox[
    SubscriptBox[
     RowBox[{
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{-0.2, 0}, {0, 0}}], 
      AdjustmentBox[
       TagBox["\[Alpha]",
        QuantumAlgebra`QuantumAlgebra`KetArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], "\[RightAngleBracket]"}], 
     TagBox[
      AdjustmentBox[
       TagBox["1",
        QuantumAlgebra`QuantumAlgebra`KetArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0],
      QuantumAlgebra`QuantumAlgebra`UDScript,
      BaseStyle->"RIndex"]],
    QuantumAlgebra`QuantumAlgebra`Ket,
    BaseStyle->"KetWrapper"], "\[CircleTimes]", 
   TagBox[
    SubscriptBox[
     RowBox[{
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{-0.2, 0}, {0, 0}}], 
      AdjustmentBox[
       TagBox["\[Beta]",
        QuantumAlgebra`QuantumAlgebra`KetArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], "\[RightAngleBracket]"}], 
     TagBox[
      AdjustmentBox[
       TagBox["2",
        QuantumAlgebra`QuantumAlgebra`KetArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0],
      QuantumAlgebra`QuantumAlgebra`UDScript,
      BaseStyle->"RIndex"]],
    QuantumAlgebra`QuantumAlgebra`Ket,
    BaseStyle->"KetWrapper"], "\[CircleTimes]", 
   TagBox[
    SubscriptBox[
     RowBox[{
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{-0.2, 0}, {0, 0}}], 
      AdjustmentBox[
       TagBox["\[Gamma]",
        QuantumAlgebra`QuantumAlgebra`KetArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], "\[RightAngleBracket]"}], 
     TagBox[
      AdjustmentBox[
       TagBox["3",
        QuantumAlgebra`QuantumAlgebra`KetArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0],
      QuantumAlgebra`QuantumAlgebra`UDScript,
      BaseStyle->"RIndex"]],
    QuantumAlgebra`QuantumAlgebra`Ket,
    BaseStyle->"KetWrapper"]}]}]], "Input",
 CellChangeTimes->{{3.4446910857720003`*^9, 3.444691176597*^9}, {
  3.444691486657*^9, 3.444691497347*^9}, {3.44469155183*^9, 
  3.44469155491*^9}, {3.4447447260439997`*^9, 3.444744732433*^9}, {
  3.444744803983*^9, 3.444744842991*^9}, {3.5995654081214027`*^9, 
  3.5995654187538805`*^9}}],

Cell[BoxData[
 RowBox[{
  RowBox[{
   SubscriptBox[
    OverscriptBox["\[ScriptCapitalA]", "^"], "1"], "\[CircleTimes]", 
   SubscriptBox[
    OverscriptBox["\[ScriptCapitalB]", "^"], "2"], "\[CircleTimes]", 
   SubscriptBox[
    OverscriptBox["\[ScriptCapitalC]", "^"], "3"]}], "\[CenterDot]", 
  RowBox[{
   TagBox[
    SubscriptBox[
     RowBox[{
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{-0.2, 0}, {0, 0}}], 
      AdjustmentBox[
       TagBox["\[Alpha]",
        QuantumAlgebra`QuantumAlgebra`KetArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], "\[RightAngleBracket]"}], 
     TagBox[
      AdjustmentBox[
       TagBox["1",
        QuantumAlgebra`QuantumAlgebra`KetArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0],
      QuantumAlgebra`QuantumAlgebra`UDScript,
      BaseStyle->"RIndex"]],
    QuantumAlgebra`QuantumAlgebra`Ket,
    BaseStyle->"KetWrapper"], "\[CircleTimes]", 
   TagBox[
    SubscriptBox[
     RowBox[{
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{-0.2, 0}, {0, 0}}], 
      AdjustmentBox[
       TagBox["\[Beta]",
        QuantumAlgebra`QuantumAlgebra`KetArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], "\[RightAngleBracket]"}], 
     TagBox[
      AdjustmentBox[
       TagBox["2",
        QuantumAlgebra`QuantumAlgebra`KetArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0],
      QuantumAlgebra`QuantumAlgebra`UDScript,
      BaseStyle->"RIndex"]],
    QuantumAlgebra`QuantumAlgebra`Ket,
    BaseStyle->"KetWrapper"], "\[CircleTimes]", 
   TagBox[
    SubscriptBox[
     RowBox[{
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{-0.2, 0}, {0, 0}}], 
      AdjustmentBox[
       TagBox["\[Gamma]",
        QuantumAlgebra`QuantumAlgebra`KetArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], "\[RightAngleBracket]"}], 
     TagBox[
      AdjustmentBox[
       TagBox["3",
        QuantumAlgebra`QuantumAlgebra`KetArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0],
      QuantumAlgebra`QuantumAlgebra`UDScript,
      BaseStyle->"RIndex"]],
    QuantumAlgebra`QuantumAlgebra`Ket,
    BaseStyle->"KetWrapper"]}]}]], "Output",
 CellChangeTimes->{3.444744875523*^9, 3.445258408708*^9, 
  3.5995654190648985`*^9}]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{
  RowBox[{
   SubscriptBox[
    OverscriptBox["\[ScriptCapitalA]", "^"], "1"], "\[CircleTimes]", 
   SubscriptBox[
    OverscriptBox["\[ScriptCapitalB]", "^"], "2"], "\[CircleTimes]", 
   SubscriptBox[
    OverscriptBox["\[ScriptCapitalC]", "^"], "3"]}], "\[CenterDot]", 
  TagBox[
   RowBox[{
    AdjustmentBox["\[VerticalSeparator]",
     BoxBaselineShift->-0.1,
     BoxMargins->{{-0.2, 0}, {0, 0}}], 
    AdjustmentBox[
     TagBox[
      RowBox[{
       SubscriptBox["\[Alpha]", "1"], ",", 
       SubscriptBox["\[Beta]", "2"], ",", 
       SubscriptBox["\[Gamma]", "3"]}],
      QuantumAlgebra`QuantumAlgebra`KetArgs,
      BaseStyle->"BraKetArg"],
     BoxBaselineShift->0], "\[RightAngleBracket]"}],
   QuantumAlgebra`QuantumAlgebra`Ket,
   BaseStyle->"KetWrapper"]}]], "Input",
 CellChangeTimes->{{3.4446910857720003`*^9, 3.444691176597*^9}, {
  3.444691486657*^9, 3.444691497347*^9}, {3.44469155183*^9, 
  3.44469155491*^9}, {3.4447447260439997`*^9, 3.444744732433*^9}, {
  3.599565421623169*^9, 3.5995654340389214`*^9}}],

Cell[BoxData[
 RowBox[{
  RowBox[{
   SubscriptBox[
    OverscriptBox["\[ScriptCapitalA]", "^"], "1"], "\[CircleTimes]", 
   SubscriptBox[
    OverscriptBox["\[ScriptCapitalB]", "^"], "2"], "\[CircleTimes]", 
   SubscriptBox[
    OverscriptBox["\[ScriptCapitalC]", "^"], "3"]}], "\[CenterDot]", 
  TagBox[
   RowBox[{
    AdjustmentBox["\[VerticalSeparator]",
     BoxBaselineShift->-0.1,
     BoxMargins->{{-0.2, 0}, {0, 0}}], 
    AdjustmentBox[
     TagBox[
      RowBox[{
       SubscriptBox["\[Alpha]", "1"], ",", 
       SubscriptBox["\[Beta]", "2"], ",", 
       SubscriptBox["\[Gamma]", "3"]}],
      QuantumAlgebra`QuantumAlgebra`KetArgs,
      BaseStyle->"BraKetArg"],
     BoxBaselineShift->0], "\[RightAngleBracket]"}],
   QuantumAlgebra`QuantumAlgebra`Ket,
   BaseStyle->"KetWrapper"]}]], "Output",
 CellChangeTimes->{
  3.44469149966*^9, {3.444691540434*^9, 3.444691555736*^9}, 3.444744876895*^9,
    3.445258409731*^9, 3.599565434335322*^9}]
}, Open  ]],

Cell["\<\
Assuming that the subscripts are labeling each state space, we would like \
that these expressions should be transformed to the following ones, \
respectively:\
\>", "Text",
 CellChangeTimes->{{3.444745520461*^9, 3.444745526288*^9}, {3.444745589766*^9,
   3.4447456734969997`*^9}, {3.444745857394*^9, 3.444745907358*^9}, {
  3.444745958079*^9, 3.444745970943*^9}}],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{
  RowBox[{"(", 
   RowBox[{
    SubscriptBox[
     OverscriptBox["\[ScriptCapitalA]", "^"], "1"], "\[CenterDot]", 
    TagBox[
     SubscriptBox[
      RowBox[{
       AdjustmentBox["\[VerticalSeparator]",
        BoxBaselineShift->-0.1,
        BoxMargins->{{-0.2, 0}, {0, 0}}], 
       AdjustmentBox[
        TagBox["\[Alpha]",
         QuantumAlgebra`QuantumAlgebra`KetArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0], "\[RightAngleBracket]"}], 
      TagBox[
       AdjustmentBox[
        TagBox["1",
         QuantumAlgebra`QuantumAlgebra`KetArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"RIndex"]],
     QuantumAlgebra`QuantumAlgebra`Ket,
     BaseStyle->"KetWrapper"]}], ")"}], "\[CircleTimes]", 
  RowBox[{"(", 
   RowBox[{
    SubscriptBox[
     OverscriptBox["\[ScriptCapitalB]", "^"], "2"], "\[CenterDot]", 
    TagBox[
     SubscriptBox[
      RowBox[{
       AdjustmentBox["\[VerticalSeparator]",
        BoxBaselineShift->-0.1,
        BoxMargins->{{-0.2, 0}, {0, 0}}], 
       AdjustmentBox[
        TagBox["\[Beta]",
         QuantumAlgebra`QuantumAlgebra`KetArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0], "\[RightAngleBracket]"}], 
      TagBox[
       AdjustmentBox[
        TagBox["2",
         QuantumAlgebra`QuantumAlgebra`KetArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"RIndex"]],
     QuantumAlgebra`QuantumAlgebra`Ket,
     BaseStyle->"KetWrapper"]}], ")"}], "\[CircleTimes]", 
  RowBox[{"(", 
   RowBox[{
    SubscriptBox[
     OverscriptBox["\[ScriptCapitalC]", "^"], "3"], "\[CenterDot]", 
    TagBox[
     SubscriptBox[
      RowBox[{
       AdjustmentBox["\[VerticalSeparator]",
        BoxBaselineShift->-0.1,
        BoxMargins->{{-0.2, 0}, {0, 0}}], 
       AdjustmentBox[
        TagBox["\[Gamma]",
         QuantumAlgebra`QuantumAlgebra`KetArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0], "\[RightAngleBracket]"}], 
      TagBox[
       AdjustmentBox[
        TagBox["3",
         QuantumAlgebra`QuantumAlgebra`KetArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0],
       QuantumAlgebra`QuantumAlgebra`UDScript,
       BaseStyle->"RIndex"]],
     QuantumAlgebra`QuantumAlgebra`Ket,
     BaseStyle->"KetWrapper"]}], ")"}]}]], "Input",
 CellChangeTimes->{{3.4447457081800003`*^9, 3.444745756468*^9}, 
   3.5995654547966747`*^9}],

Cell[BoxData[
 RowBox[{
  RowBox[{
   SubscriptBox[
    OverscriptBox["\[ScriptCapitalA]", "^"], "1"], "\[CenterDot]", 
   TagBox[
    SubscriptBox[
     RowBox[{
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{-0.2, 0}, {0, 0}}], 
      AdjustmentBox[
       TagBox["\[Alpha]",
        QuantumAlgebra`QuantumAlgebra`KetArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], "\[RightAngleBracket]"}], 
     TagBox[
      AdjustmentBox[
       TagBox["1",
        QuantumAlgebra`QuantumAlgebra`KetArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0],
      QuantumAlgebra`QuantumAlgebra`UDScript,
      BaseStyle->"RIndex"]],
    QuantumAlgebra`QuantumAlgebra`Ket,
    BaseStyle->"KetWrapper"]}], "\[CircleTimes]", 
  RowBox[{
   SubscriptBox[
    OverscriptBox["\[ScriptCapitalB]", "^"], "2"], "\[CenterDot]", 
   TagBox[
    SubscriptBox[
     RowBox[{
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{-0.2, 0}, {0, 0}}], 
      AdjustmentBox[
       TagBox["\[Beta]",
        QuantumAlgebra`QuantumAlgebra`KetArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], "\[RightAngleBracket]"}], 
     TagBox[
      AdjustmentBox[
       TagBox["2",
        QuantumAlgebra`QuantumAlgebra`KetArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0],
      QuantumAlgebra`QuantumAlgebra`UDScript,
      BaseStyle->"RIndex"]],
    QuantumAlgebra`QuantumAlgebra`Ket,
    BaseStyle->"KetWrapper"]}], "\[CircleTimes]", 
  RowBox[{
   SubscriptBox[
    OverscriptBox["\[ScriptCapitalC]", "^"], "3"], "\[CenterDot]", 
   TagBox[
    SubscriptBox[
     RowBox[{
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{-0.2, 0}, {0, 0}}], 
      AdjustmentBox[
       TagBox["\[Gamma]",
        QuantumAlgebra`QuantumAlgebra`KetArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], "\[RightAngleBracket]"}], 
     TagBox[
      AdjustmentBox[
       TagBox["3",
        QuantumAlgebra`QuantumAlgebra`KetArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0],
      QuantumAlgebra`QuantumAlgebra`UDScript,
      BaseStyle->"RIndex"]],
    QuantumAlgebra`QuantumAlgebra`Ket,
    BaseStyle->"KetWrapper"]}]}]], "Output",
 CellChangeTimes->{3.44474576006*^9, 3.445258419087*^9, 3.599565455249075*^9}]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{
  RowBox[{"(", 
   RowBox[{
    SubscriptBox[
     OverscriptBox["\[ScriptCapitalA]", "^"], "1"], "\[CenterDot]", 
    TagBox[
     RowBox[{
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{-0.2, 0}, {0, 0}}], 
      AdjustmentBox[
       TagBox[
        SubscriptBox["\[Alpha]", "1"],
        QuantumAlgebra`QuantumAlgebra`KetArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], "\[RightAngleBracket]"}],
     QuantumAlgebra`QuantumAlgebra`Ket,
     BaseStyle->"KetWrapper"]}], ")"}], "\[CircleTimes]", 
  RowBox[{"(", 
   RowBox[{
    SubscriptBox[
     OverscriptBox["\[ScriptCapitalB]", "^"], "2"], "\[CenterDot]", 
    TagBox[
     RowBox[{
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{-0.2, 0}, {0, 0}}], 
      AdjustmentBox[
       TagBox[
        SubscriptBox["\[Beta]", "2"],
        QuantumAlgebra`QuantumAlgebra`KetArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], "\[RightAngleBracket]"}],
     QuantumAlgebra`QuantumAlgebra`Ket,
     BaseStyle->"KetWrapper"]}], ")"}], "\[CircleTimes]", 
  RowBox[{"(", 
   RowBox[{
    SubscriptBox[
     OverscriptBox["\[ScriptCapitalC]", "^"], "3"], "\[CenterDot]", 
    TagBox[
     RowBox[{
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{-0.2, 0}, {0, 0}}], 
      AdjustmentBox[
       TagBox[
        SubscriptBox["\[Gamma]", "3"],
        QuantumAlgebra`QuantumAlgebra`KetArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], "\[RightAngleBracket]"}],
     QuantumAlgebra`QuantumAlgebra`Ket,
     BaseStyle->"KetWrapper"]}], ")"}]}]], "Input",
 CellChangeTimes->{{3.4447457081800003`*^9, 3.444745756468*^9}, {
  3.444745924184*^9, 3.444745939408*^9}, {3.599565459055482*^9, 
  3.599565468933213*^9}}],

Cell[BoxData[
 RowBox[{
  RowBox[{
   SubscriptBox[
    OverscriptBox["\[ScriptCapitalA]", "^"], "1"], "\[CenterDot]", 
   TagBox[
    RowBox[{
     AdjustmentBox["\[VerticalSeparator]",
      BoxBaselineShift->-0.1,
      BoxMargins->{{-0.2, 0}, {0, 0}}], 
     AdjustmentBox[
      TagBox[
       SubscriptBox["\[Alpha]", "1"],
       QuantumAlgebra`QuantumAlgebra`KetArgs,
       BaseStyle->"BraKetArg"],
      BoxBaselineShift->0], "\[RightAngleBracket]"}],
    QuantumAlgebra`QuantumAlgebra`Ket,
    BaseStyle->"KetWrapper"]}], "\[CircleTimes]", 
  RowBox[{
   SubscriptBox[
    OverscriptBox["\[ScriptCapitalB]", "^"], "2"], "\[CenterDot]", 
   TagBox[
    RowBox[{
     AdjustmentBox["\[VerticalSeparator]",
      BoxBaselineShift->-0.1,
      BoxMargins->{{-0.2, 0}, {0, 0}}], 
     AdjustmentBox[
      TagBox[
       SubscriptBox["\[Beta]", "2"],
       QuantumAlgebra`QuantumAlgebra`KetArgs,
       BaseStyle->"BraKetArg"],
      BoxBaselineShift->0], "\[RightAngleBracket]"}],
    QuantumAlgebra`QuantumAlgebra`Ket,
    BaseStyle->"KetWrapper"]}], "\[CircleTimes]", 
  RowBox[{
   SubscriptBox[
    OverscriptBox["\[ScriptCapitalC]", "^"], "3"], "\[CenterDot]", 
   TagBox[
    RowBox[{
     AdjustmentBox["\[VerticalSeparator]",
      BoxBaselineShift->-0.1,
      BoxMargins->{{-0.2, 0}, {0, 0}}], 
     AdjustmentBox[
      TagBox[
       SubscriptBox["\[Gamma]", "3"],
       QuantumAlgebra`QuantumAlgebra`KetArgs,
       BaseStyle->"BraKetArg"],
      BoxBaselineShift->0], "\[RightAngleBracket]"}],
    QuantumAlgebra`QuantumAlgebra`Ket,
    BaseStyle->"KetWrapper"]}]}]], "Output",
 CellChangeTimes->{3.444745941094*^9, 3.445258420064*^9, 
  3.5995654693076143`*^9}]
}, Open  ]],

Cell["\<\
This simplification doesn\[CloseCurlyQuote]t apply automatically because it \
could happens that one (or more) of the individual operators belongs to a \
state space of rank greater than one, i. e. it applies to several kets of the \
composite one. Another possible issue would be, if the composite ket has \
greater rank that the composite operator, i. e. in the composite operator \
there are implicit identity operators.\
\>", "Text",
 CellChangeTimes->{{3.444746897075*^9, 3.444747029391*^9}, {3.444747222242*^9,
    3.444747283722*^9}, {3.444748041889*^9, 3.4447481181219997`*^9}, {
   3.444748187465*^9, 3.444748250876*^9}, 3.4447483069639997`*^9, {
   3.5995657057126937`*^9, 3.599565760045784*^9}, {3.5995658453778915`*^9, 
   3.59956593401822*^9}, {3.5995659961972656`*^9, 3.5995659984593945`*^9}}],

Cell["\<\
Of course, we can setup rules to handle particular problems. In this case, \
the first step is to define the action of each operator in its corresponding \
state space. \
\>", "Text",
 CellChangeTimes->{{3.444749904302*^9, 3.444749908513*^9}, {3.444749944424*^9,
    3.444750044271*^9}, 3.4447501949630003`*^9, {3.4447698776448*^9, 
   3.4447698880838003`*^9}, {3.599565962488068*^9, 3.599565985870675*^9}, {
   3.5995660634937677`*^9, 3.5995660677190094`*^9}, {3.5995661356004076`*^9, 
   3.5995661420904284`*^9}, {3.5995662451392093`*^9, 3.5995662667044697`*^9}}],

Cell[BoxData[{
 RowBox[{
  RowBox[{"Operator", "/:", 
   RowBox[{
    SubscriptBox[
     OverscriptBox["\[ScriptCapitalA]", "^"], "1"], "\[CenterDot]", 
    TagBox[
     RowBox[{
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{-0.2, 0}, {0, 0}}], 
      AdjustmentBox[
       TagBox[
        SubscriptBox["a_", "1"],
        QuantumAlgebra`QuantumAlgebra`KetArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], "\[RightAngleBracket]"}],
     QuantumAlgebra`QuantumAlgebra`Ket,
     BaseStyle->"KetWrapper"]}], ":=", 
   RowBox[{
    RowBox[{"f", "[", "a", "]"}], " ", 
    TagBox[
     RowBox[{
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{-0.2, 0}, {0, 0}}], 
      AdjustmentBox[
       TagBox[
        SubscriptBox["a", "1"],
        QuantumAlgebra`QuantumAlgebra`KetArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], "\[RightAngleBracket]"}],
     QuantumAlgebra`QuantumAlgebra`Ket,
     BaseStyle->"KetWrapper"]}]}], " "}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"Operator", "/:", 
   RowBox[{
    SubscriptBox[
     OverscriptBox["\[ScriptCapitalB]", "^"], "2"], "\[CenterDot]", 
    TagBox[
     RowBox[{
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{-0.2, 0}, {0, 0}}], 
      AdjustmentBox[
       TagBox[
        SubscriptBox["b_", "2"],
        QuantumAlgebra`QuantumAlgebra`KetArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], "\[RightAngleBracket]"}],
     QuantumAlgebra`QuantumAlgebra`Ket,
     BaseStyle->"KetWrapper"]}], ":=", 
   RowBox[{
    RowBox[{"g", "[", "b", "]"}], " ", 
    TagBox[
     RowBox[{
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{-0.2, 0}, {0, 0}}], 
      AdjustmentBox[
       TagBox[
        SubscriptBox["b", "2"],
        QuantumAlgebra`QuantumAlgebra`KetArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], "\[RightAngleBracket]"}],
     QuantumAlgebra`QuantumAlgebra`Ket,
     BaseStyle->"KetWrapper"]}]}], " "}], "\[IndentingNewLine]", 
 RowBox[{"Operator", "/:", 
  RowBox[{
   SubscriptBox[
    OverscriptBox["\[ScriptCapitalC]", "^"], "i_"], "\[CenterDot]", 
   TagBox[
    RowBox[{
     AdjustmentBox["\[VerticalSeparator]",
      BoxBaselineShift->-0.1,
      BoxMargins->{{-0.2, 0}, {0, 0}}], 
     AdjustmentBox[
      TagBox[
       SubscriptBox["c_", "i_"],
       QuantumAlgebra`QuantumAlgebra`KetArgs,
       BaseStyle->"BraKetArg"],
      BoxBaselineShift->0], "\[RightAngleBracket]"}],
    QuantumAlgebra`QuantumAlgebra`Ket,
    BaseStyle->"KetWrapper"]}], ":=", 
  RowBox[{
   RowBox[{"h", "[", "c", "]"}], " ", 
   TagBox[
    RowBox[{
     AdjustmentBox["\[VerticalSeparator]",
      BoxBaselineShift->-0.1,
      BoxMargins->{{-0.2, 0}, {0, 0}}], 
     AdjustmentBox[
      TagBox[
       SubscriptBox["c", "i"],
       QuantumAlgebra`QuantumAlgebra`KetArgs,
       BaseStyle->"BraKetArg"],
      BoxBaselineShift->0], "\[RightAngleBracket]"}],
    QuantumAlgebra`QuantumAlgebra`Ket,
    BaseStyle->"KetWrapper"]}]}]}], "InputOnly",
 CellChangeTimes->{{3.444750046865*^9, 3.444750168748*^9}, {3.444750199816*^9,
   3.444750208541*^9}, {3.444750249538*^9, 3.4447502806689997`*^9}, {
  3.444750460524*^9, 3.444750463573*^9}, {3.599566278643152*^9, 
  3.599566294362047*^9}, {3.5995663393483095`*^9, 3.5995663507889633`*^9}}],

Cell["\<\
Note that in the last definition I have used a pattern for the subscript, so \
that this operator can work in any of the state spaces. Here are some \
examples:\
\>", "Text",
 CellChangeTimes->{{3.444750324651*^9, 3.4447503957390003`*^9}, {
  3.444750507377*^9, 3.444750518632*^9}, {3.4447699078358*^9, 
  3.4447699472448*^9}}],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{
   RowBox[{
    SubscriptBox[
     OverscriptBox["\[ScriptCapitalA]", "^"], "1"], "\[CenterDot]", 
    TagBox[
     RowBox[{
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{-0.2, 0}, {0, 0}}], 
      AdjustmentBox[
       TagBox[
        SubscriptBox["a", "1"],
        QuantumAlgebra`QuantumAlgebra`KetArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], "\[RightAngleBracket]"}],
     QuantumAlgebra`QuantumAlgebra`Ket,
     BaseStyle->"KetWrapper"]}], ",", 
   RowBox[{
    SubscriptBox[
     OverscriptBox["\[ScriptCapitalB]", "^"], "2"], "\[CenterDot]", 
    TagBox[
     RowBox[{
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{-0.2, 0}, {0, 0}}], 
      AdjustmentBox[
       TagBox[
        SubscriptBox["2", "2"],
        QuantumAlgebra`QuantumAlgebra`KetArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], "\[RightAngleBracket]"}],
     QuantumAlgebra`QuantumAlgebra`Ket,
     BaseStyle->"KetWrapper"]}], ",", 
   RowBox[{
    SubscriptBox[
     OverscriptBox["\[ScriptCapitalC]", "^"], "3"], "\[CenterDot]", 
    TagBox[
     RowBox[{
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{-0.2, 0}, {0, 0}}], 
      AdjustmentBox[
       TagBox[
        SubscriptBox["c", "3"],
        QuantumAlgebra`QuantumAlgebra`KetArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], "\[RightAngleBracket]"}],
     QuantumAlgebra`QuantumAlgebra`Ket,
     BaseStyle->"KetWrapper"]}], ",", 
   RowBox[{
    SubscriptBox[
     OverscriptBox["\[ScriptCapitalC]", "^"], "2"], "\[CenterDot]", 
    TagBox[
     RowBox[{
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{-0.2, 0}, {0, 0}}], 
      AdjustmentBox[
       TagBox[
        SubscriptBox["3", "2"],
        QuantumAlgebra`QuantumAlgebra`KetArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], "\[RightAngleBracket]"}],
     QuantumAlgebra`QuantumAlgebra`Ket,
     BaseStyle->"KetWrapper"]}]}], "}"}]], "Input",
 CellChangeTimes->{{3.4447504049969997`*^9, 3.444750502785*^9}, {
  3.445258557242*^9, 3.445258572841*^9}, {3.599566455005124*^9, 
  3.5995664670468855`*^9}}],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{
   RowBox[{
    RowBox[{"f", "[", "a", "]"}], " ", 
    TagBox[
     RowBox[{
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{-0.2, 0}, {0, 0}}], 
      AdjustmentBox[
       TagBox[
        SubscriptBox["a", "1"],
        QuantumAlgebra`QuantumAlgebra`KetArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], "\[RightAngleBracket]"}],
     QuantumAlgebra`QuantumAlgebra`Ket,
     BaseStyle->"KetWrapper"]}], ",", 
   RowBox[{
    RowBox[{"g", "[", "2", "]"}], " ", 
    TagBox[
     RowBox[{
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{-0.2, 0}, {0, 0}}], 
      AdjustmentBox[
       TagBox[
        SubscriptBox["2", "2"],
        QuantumAlgebra`QuantumAlgebra`KetArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], "\[RightAngleBracket]"}],
     QuantumAlgebra`QuantumAlgebra`Ket,
     BaseStyle->"KetWrapper"]}], ",", 
   RowBox[{
    RowBox[{"h", "[", "c", "]"}], " ", 
    TagBox[
     RowBox[{
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{-0.2, 0}, {0, 0}}], 
      AdjustmentBox[
       TagBox[
        SubscriptBox["c", "3"],
        QuantumAlgebra`QuantumAlgebra`KetArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], "\[RightAngleBracket]"}],
     QuantumAlgebra`QuantumAlgebra`Ket,
     BaseStyle->"KetWrapper"]}], ",", 
   RowBox[{
    RowBox[{"h", "[", "3", "]"}], " ", 
    TagBox[
     RowBox[{
      AdjustmentBox["\[VerticalSeparator]",
       BoxBaselineShift->-0.1,
       BoxMargins->{{-0.2, 0}, {0, 0}}], 
      AdjustmentBox[
       TagBox[
        SubscriptBox["3", "2"],
        QuantumAlgebra`QuantumAlgebra`KetArgs,
        BaseStyle->"BraKetArg"],
       BoxBaselineShift->0], "\[RightAngleBracket]"}],
     QuantumAlgebra`QuantumAlgebra`Ket,
     BaseStyle->"KetWrapper"]}]}], "}"}]], "Output",
 CellChangeTimes->{{3.4447504184110003`*^9, 3.444750503406*^9}, 
   3.4447694093948*^9, {3.4452585583780003`*^9, 3.445258573218*^9}, 
   3.59956646747191*^9}]
}, Open  ]],

Cell["\<\
The next step is to make the definition for the composite system. A simple \
definition would be to do it for fixed subscripts and use patterns for the \
operators and ket labels.\
\>", "Text",
 CellChangeTimes->{{3.444750837683*^9, 3.4447508708570004`*^9}, {
   3.444759645058*^9, 3.444759646112*^9}, 3.4447630501418*^9, {
   3.4447631078568*^9, 3.4447631347198*^9}, 3.4447682933288*^9, {
   3.4447684145308*^9, 3.4447685608258*^9}, {3.4447702076558*^9, 
   3.4447702497637997`*^9}, {3.4447702925678*^9, 3.4447703029538*^9}}],

Cell[BoxData[
 RowBox[{"TensorProduct", "/:", 
  RowBox[{
   RowBox[{
    SubscriptBox[
     OverscriptBox["x_", "^"], "1"], "\[CircleTimes]", 
    SubscriptBox[
     OverscriptBox["y_", "^"], "2"], "\[CircleTimes]", 
    SubscriptBox[
     OverscriptBox["z_", "^"], "3"]}], "\[CenterDot]", 
   TagBox[
    RowBox[{
     AdjustmentBox["\[VerticalSeparator]",
      BoxBaselineShift->-0.1,
      BoxMargins->{{-0.2, 0}, {0, 0}}], 
     AdjustmentBox[
      TagBox[
       RowBox[{
        SubscriptBox["a_", "1"], ",", 
        SubscriptBox["b_", "2"], ",", 
        SubscriptBox["c_", "3"]}],
       QuantumAlgebra`QuantumAlgebra`KetArgs,
       BaseStyle->"BraKetArg"],
      BoxBaselineShift->0], "\[RightAngleBracket]"}],
    QuantumAlgebra`QuantumAlgebra`Ket,
    BaseStyle->"KetWrapper"]}], ":=", 
  RowBox[{
   RowBox[{"(", 
    RowBox[{
     SubscriptBox[
      OverscriptBox["x", "^"], "1"], "\[CenterDot]", 
     TagBox[
      RowBox[{
       AdjustmentBox["\[VerticalSeparator]",
        BoxBaselineShift->-0.1,
        BoxMargins->{{-0.2, 0}, {0, 0}}], 
       AdjustmentBox[
        TagBox[
         SubscriptBox["a", "1"],
         QuantumAlgebra`QuantumAlgebra`KetArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0], "\[RightAngleBracket]"}],
      QuantumAlgebra`QuantumAlgebra`Ket,
      BaseStyle->"KetWrapper"]}], ")"}], "\[CircleTimes]", 
   RowBox[{"(", 
    RowBox[{
     SubscriptBox[
      OverscriptBox["y", "^"], "2"], "\[CenterDot]", 
     TagBox[
      RowBox[{
       AdjustmentBox["\[VerticalSeparator]",
        BoxBaselineShift->-0.1,
        BoxMargins->{{-0.2, 0}, {0, 0}}], 
       AdjustmentBox[
        TagBox[
         SubscriptBox["b", "2"],
         QuantumAlgebra`QuantumAlgebra`KetArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0], "\[RightAngleBracket]"}],
      QuantumAlgebra`QuantumAlgebra`Ket,
      BaseStyle->"KetWrapper"]}], ")"}], "\[CircleTimes]", 
   RowBox[{"(", 
    RowBox[{
     SubscriptBox[
      OverscriptBox["z", "^"], "3"], "\[CenterDot]", 
     TagBox[
      RowBox[{
       AdjustmentBox["\[VerticalSeparator]",
        BoxBaselineShift->-0.1,
        BoxMargins->{{-0.2, 0}, {0, 0}}], 
       AdjustmentBox[
        TagBox[
         SubscriptBox["c", "3"],
         QuantumAlgebra`QuantumAlgebra`KetArgs,
         BaseStyle->"BraKetArg"],
        BoxBaselineShift->0], "\[RightAngleBracket]"}],
      QuantumAlgebra`QuantumAlgebra`Ket,
      BaseStyle->"KetWrapper"]}], ")"}]}]}]], "InputOnly",
 CellChangeTimes->{{3.4447508884110003`*^9, 3.444750937008*^9}, {
  3.444750990224*^9, 3.444751016809*^9}, {3.4447510969449997`*^9, 
  3.44475111995*^9}, {3.444751607474*^9, 3.4447516438050003`*^9}, {
  3.4447517421800003`*^9, 3.444751753234*^9}, {3.44475179294*^9, 
  3.4447518012320004`*^9}, {3.599567037114957*^9, 3.5995670533545856`*^9}}],

Cell["Here are some examples.", "Text",
 CellChangeTimes->{{3.4447631689007998`*^9, 3.4447632016858*^9}, {
  3.4447685870098*^9, 3.4447688374098*^9}, {3.4447690956258*^9, 
  3.4447692292278*^9}, {3.4447703642978*^9, 3.4447703689038*^9}, {
  3.4447719650198*^9, 3.4447719682938004`*^9}}],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{
  RowBox[{
   SubscriptBox[
    OverscriptBox["\[ScriptCapitalP]", "^"], "1"], "\[CircleTimes]", 
   SubscriptBox[
    OverscriptBox["\[ScriptCapitalQ]", "^"], "2"], "\[CircleTimes]", 
   SubscriptBox[
    OverscriptBox["\[ScriptCapitalR]", "^"], "3"]}], "\[CenterDot]", 
  TagBox[
   RowBox[{
    AdjustmentBox["\[VerticalSeparator]",
     BoxBaselineShift->-0.1,
     BoxMargins->{{-0.2, 0}, {0, 0}}], 
    AdjustmentBox[
     TagBox[
      RowBox[{
       SubscriptBox["p", "1"], ",", 
       SubscriptBox["q", "2"], ",", 
       SubscriptBox["r", "3"]}],
      QuantumAlgebra`QuantumAlgebra`KetArgs,
      BaseStyle->"BraKetArg"],
     BoxBaselineShift->0], "\[RightAngleBracket]"}],
   QuantumAlgebra`QuantumAlgebra`Ket,
   BaseStyle->"KetWrapper"]}]], "Input",
 CellChangeTimes->{{3.4447511674189997`*^9, 3.444751196925*^9}, {
  3.4447692412967997`*^9, 3.4447692429908*^9}, {3.4447693347678003`*^9, 
  3.4447693499068003`*^9}, {3.4447706295968*^9, 3.4447706450797997`*^9}, {
  3.5995670668870707`*^9, 3.5995670763046093`*^9}}],

Cell[BoxData[
 RowBox[{
  RowBox[{
   SubscriptBox[
    OverscriptBox["\[ScriptCapitalP]", "^"], "1"], "\[CenterDot]", 
   TagBox[
    RowBox[{
     AdjustmentBox["\[VerticalSeparator]",
      BoxBaselineShift->-0.1,
      BoxMargins->{{-0.2, 0}, {0, 0}}], 
     AdjustmentBox[
      TagBox[
       SubscriptBox["p", "1"],
       QuantumAlgebra`QuantumAlgebra`KetArgs,
       BaseStyle->"BraKetArg"],
      BoxBaselineShift->0], "\[RightAngleBracket]"}],
    QuantumAlgebra`QuantumAlgebra`Ket,
    BaseStyle->"KetWrapper"]}], "\[CircleTimes]", 
  RowBox[{
   SubscriptBox[
    OverscriptBox["\[ScriptCapitalQ]", "^"], "2"], "\[CenterDot]", 
   TagBox[
    RowBox[{
     AdjustmentBox["\[VerticalSeparator]",
      BoxBaselineShift->-0.1,
      BoxMargins->{{-0.2, 0}, {0, 0}}], 
     AdjustmentBox[
      TagBox[
       SubscriptBox["q", "2"],
       QuantumAlgebra`QuantumAlgebra`KetArgs,
       BaseStyle->"BraKetArg"],
      BoxBaselineShift->0], "\[RightAngleBracket]"}],
    QuantumAlgebra`QuantumAlgebra`Ket,
    BaseStyle->"KetWrapper"]}], "\[CircleTimes]", 
  RowBox[{
   SubscriptBox[
    OverscriptBox["\[ScriptCapitalR]", "^"], "3"], "\[CenterDot]", 
   TagBox[
    RowBox[{
     AdjustmentBox["\[VerticalSeparator]",
      BoxBaselineShift->-0.1,
      BoxMargins->{{-0.2, 0}, {0, 0}}], 
     AdjustmentBox[
      TagBox[
       SubscriptBox["r", "3"],
       QuantumAlgebra`QuantumAlgebra`KetArgs,
       BaseStyle->"BraKetArg"],
      BoxBaselineShift->0], "\[RightAngleBracket]"}],
    QuantumAlgebra`QuantumAlgebra`Ket,
    BaseStyle->"KetWrapper"]}]}]], "Output",
 CellChangeTimes->{{3.4447511803780003`*^9, 3.444751197224*^9}, {
   3.444752018266*^9, 3.444752045104*^9}, {3.4447693369248*^9, 
   3.4447693504188004`*^9}, 3.4447694139158*^9, 3.4447706463557997`*^9, 
   3.445258610836*^9, 3.599567076563624*^9}]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{
  RowBox[{
   SubscriptBox[
    OverscriptBox["\[ScriptCapitalA]", "^"], "1"], "\[CircleTimes]", 
   SubscriptBox[
    OverscriptBox["\[ScriptCapitalB]", "^"], "2"], "\[CircleTimes]", 
   SubscriptBox[
    OverscriptBox["\[ScriptCapitalC]", "^"], "3"]}], "\[CenterDot]", 
  TagBox[
   RowBox[{
    AdjustmentBox["\[VerticalSeparator]",
     BoxBaselineShift->-0.1,
     BoxMargins->{{-0.2, 0}, {0, 0}}], 
    AdjustmentBox[
     TagBox[
      RowBox[{
       SubscriptBox["p", "1"], ",", 
       SubscriptBox["q", "2"], ",", 
       SubscriptBox["r", "3"]}],
      QuantumAlgebra`QuantumAlgebra`KetArgs,
      BaseStyle->"BraKetArg"],
     BoxBaselineShift->0], "\[RightAngleBracket]"}],
   QuantumAlgebra`QuantumAlgebra`Ket,
   BaseStyle->"KetWrapper"]}]], "Input",
 CellChangeTimes->{{3.4447511674189997`*^9, 3.444751196925*^9}, {
  3.444751438151*^9, 3.4447514412200003`*^9}, {3.4447693603548*^9, 
  3.4447693642088003`*^9}, {3.4447706535788*^9, 3.4447706605158*^9}, {
  3.599567078733748*^9, 3.599567086672529*^9}}],

Cell[BoxData[
 RowBox[{
  RowBox[{"f", "[", "p", "]"}], " ", 
  RowBox[{"g", "[", "q", "]"}], " ", 
  RowBox[{"h", "[", "r", "]"}], " ", 
  TagBox[
   RowBox[{
    AdjustmentBox["\[VerticalSeparator]",
     BoxBaselineShift->-0.1,
     BoxMargins->{{-0.2, 0}, {0, 0}}], 
    AdjustmentBox[
     TagBox[
      RowBox[{
       SubscriptBox["p", "1"], ",", 
       SubscriptBox["q", "2"], ",", 
       SubscriptBox["r", "3"]}],
      QuantumAlgebra`QuantumAlgebra`KetArgs,
      BaseStyle->"BraKetArg"],
     BoxBaselineShift->0], "\[RightAngleBracket]"}],
   QuantumAlgebra`QuantumAlgebra`Ket,
   BaseStyle->"KetWrapper"]}]], "Output",
 CellChangeTimes->{3.4447692814798*^9, 3.4447693662038*^9, 3.4447694151208*^9,
   3.4447706624438*^9, 3.445258618498*^9, 3.599567086923544*^9}]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{
  RowBox[{
   SubscriptBox[
    OverscriptBox["\[ScriptCapitalC]", "^"], "1"], "\[CircleTimes]", 
   SubscriptBox[
    OverscriptBox["\[ScriptCapitalB]", "^"], "2"], "\[CircleTimes]", 
   SubscriptBox[
    OverscriptBox["\[ScriptCapitalC]", "^"], "3"]}], "\[CenterDot]", 
  TagBox[
   RowBox[{
    AdjustmentBox["\[VerticalSeparator]",
     BoxBaselineShift->-0.1,
     BoxMargins->{{-0.2, 0}, {0, 0}}], 
    AdjustmentBox[
     TagBox[
      RowBox[{
       SubscriptBox["p", "1"], ",", 
       SubscriptBox["q", "2"], ",", 
       SubscriptBox["r", "3"]}],
      QuantumAlgebra`QuantumAlgebra`KetArgs,
      BaseStyle->"BraKetArg"],
     BoxBaselineShift->0], "\[RightAngleBracket]"}],
   QuantumAlgebra`QuantumAlgebra`Ket,
   BaseStyle->"KetWrapper"]}]], "Input",
 CellChangeTimes->{{3.4447693847438*^9, 3.4447694438138*^9}, {
  3.4447706663118*^9, 3.4447706704098*^9}, {3.5995670893066797`*^9, 
  3.5995670966171193`*^9}}],

Cell[BoxData[
 RowBox[{
  RowBox[{"g", "[", "q", "]"}], " ", 
  RowBox[{"h", "[", "p", "]"}], " ", 
  RowBox[{"h", "[", "r", "]"}], " ", 
  TagBox[
   RowBox[{
    AdjustmentBox["\[VerticalSeparator]",
     BoxBaselineShift->-0.1,
     BoxMargins->{{-0.2, 0}, {0, 0}}], 
    AdjustmentBox[
     TagBox[
      RowBox[{
       SubscriptBox["p", "1"], ",", 
       SubscriptBox["q", "2"], ",", 
       SubscriptBox["r", "3"]}],
      QuantumAlgebra`QuantumAlgebra`KetArgs,
      BaseStyle->"BraKetArg"],
     BoxBaselineShift->0], "\[RightAngleBracket]"}],
   QuantumAlgebra`QuantumAlgebra`Ket,
   BaseStyle->"KetWrapper"]}]], "Output",
 CellChangeTimes->{{3.4447693904278*^9, 3.4447694443898*^9}, 
   3.4447706711158*^9, 3.445258619924*^9, 3.59956709705392*^9}]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{
  RowBox[{
   SubscriptBox[
    OverscriptBox["\[ScriptCapitalC]", "^"], "3"], "\[CircleTimes]", 
   SubscriptBox[
    OverscriptBox["\[ScriptCapitalB]", "^"], "2"], "\[CircleTimes]", 
   SubscriptBox[
    OverscriptBox["\[ScriptCapitalC]", "^"], "1"]}], "\[CenterDot]", 
  TagBox[
   RowBox[{
    AdjustmentBox["\[VerticalSeparator]",
     BoxBaselineShift->-0.1,
     BoxMargins->{{-0.2, 0}, {0, 0}}], 
    AdjustmentBox[
     TagBox[
      RowBox[{
       SubscriptBox["p", "1"], ",", 
       SubscriptBox["q", "2"], ",", 
       SubscriptBox["r", "3"]}],
      QuantumAlgebra`QuantumAlgebra`KetArgs,
      BaseStyle->"BraKetArg"],
     BoxBaselineShift->0], "\[RightAngleBracket]"}],
   QuantumAlgebra`QuantumAlgebra`Ket,
   BaseStyle->"KetWrapper"]}]], "Input",
 CellChangeTimes->{{3.4447518428859997`*^9, 3.444751850227*^9}, {
  3.4447703817757998`*^9, 3.4447703873868*^9}, {3.4447706808478003`*^9, 
  3.4447706853108*^9}, {3.5995670990861783`*^9, 3.5995671067457914`*^9}}],

Cell[BoxData[
 RowBox[{
  RowBox[{"g", "[", "q", "]"}], " ", 
  RowBox[{"h", "[", "p", "]"}], " ", 
  RowBox[{"h", "[", "r", "]"}], " ", 
  TagBox[
   RowBox[{
    AdjustmentBox["\[VerticalSeparator]",
     BoxBaselineShift->-0.1,
     BoxMargins->{{-0.2, 0}, {0, 0}}], 
    AdjustmentBox[
     TagBox[
      RowBox[{
       SubscriptBox["p", "1"], ",", 
       SubscriptBox["q", "2"], ",", 
       SubscriptBox["r", "3"]}],
      QuantumAlgebra`QuantumAlgebra`KetArgs,
      BaseStyle->"BraKetArg"],
     BoxBaselineShift->0], "\[RightAngleBracket]"}],
   QuantumAlgebra`QuantumAlgebra`Ket,
   BaseStyle->"KetWrapper"]}]], "Output",
 CellChangeTimes->{3.444751851824*^9, 3.4447520647539997`*^9, 
  3.4447692837318*^9, 3.4447694655668*^9, 3.4447703884547997`*^9, 
  3.4447706858778*^9, 3.445258622112*^9, 3.5995671070020046`*^9}]
}, Open  ]],

Cell["\<\
Note that in the last example the tensor direct product is using the \
orderless attribute for pattern matching.\
\>", "Text",
 CellChangeTimes->{{3.4447694728618*^9, 3.4447696545558*^9}, {
  3.4447704445118*^9, 3.4447705430158*^9}, {3.4447705774238*^9, 
  3.4447706057058*^9}, {3.4447707101168003`*^9, 3.4447707795008*^9}, {
  3.5995671287532487`*^9, 3.599567152403958*^9}}],

Cell["\<\
Some examples that don' t work.\
\>", "Text",
 CellChangeTimes->{{3.4447708478157997`*^9, 3.4447708670248003`*^9}, 
   3.5995671628808837`*^9}],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{
  RowBox[{
   SubscriptBox[
    OverscriptBox["\[ScriptCapitalC]", "^"], "1"], "\[CircleTimes]", 
   SubscriptBox[
    OverscriptBox["\[ScriptCapitalB]", "^"], "2"], "\[CircleTimes]", 
   SubscriptBox[
    OverscriptBox["\[ScriptCapitalC]", "^"], "3"]}], "\[CenterDot]", 
  TagBox[
   RowBox[{
    AdjustmentBox["\[VerticalSeparator]",
     BoxBaselineShift->-0.1,
     BoxMargins->{{-0.2, 0}, {0, 0}}], 
    AdjustmentBox[
     TagBox[
      RowBox[{
       SubscriptBox["p", "1"], ",", 
       SubscriptBox["q", "2"], ",", 
       SubscriptBox["r", "3"], ",", 
       SubscriptBox["d", "4"]}],
      QuantumAlgebra`QuantumAlgebra`KetArgs,
      BaseStyle->"BraKetArg"],
     BoxBaselineShift->0], "\[RightAngleBracket]"}],
   QuantumAlgebra`QuantumAlgebra`Ket,
   BaseStyle->"KetWrapper"]}]], "Input",
 CellChangeTimes->{{3.444752310519*^9, 3.444752315355*^9}, 
   3.59956718914006*^9}],

Cell[BoxData[
 RowBox[{
  RowBox[{
   SubscriptBox[
    OverscriptBox["\[ScriptCapitalB]", "^"], "2"], "\[CircleTimes]", 
   SubscriptBox[
    OverscriptBox["\[ScriptCapitalC]", "^"], "1"], "\[CircleTimes]", 
   SubscriptBox[
    OverscriptBox["\[ScriptCapitalC]", "^"], "3"]}], "\[CenterDot]", 
  TagBox[
   RowBox[{
    AdjustmentBox["\[VerticalSeparator]",
     BoxBaselineShift->-0.1,
     BoxMargins->{{-0.2, 0}, {0, 0}}], 
    AdjustmentBox[
     TagBox[
      RowBox[{
       SubscriptBox["p", "1"], ",", 
       SubscriptBox["q", "2"], ",", 
       SubscriptBox["r", "3"], ",", 
       SubscriptBox["d", "4"]}],
      QuantumAlgebra`QuantumAlgebra`KetArgs,
      BaseStyle->"BraKetArg"],
     BoxBaselineShift->0], "\[RightAngleBracket]"}],
   QuantumAlgebra`QuantumAlgebra`Ket,
   BaseStyle->"KetWrapper"]}]], "Output",
 CellChangeTimes->{3.444752318109*^9, 3.445258648274*^9, 
  3.5995671893900747`*^9}]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{
  RowBox[{
   SubscriptBox[
    OverscriptBox["\[ScriptCapitalC]", "^"], "1"], "\[CircleTimes]", 
   SubscriptBox[
    OverscriptBox["\[ScriptCapitalB]", "^"], "2"]}], "\[CenterDot]", 
  TagBox[
   RowBox[{
    AdjustmentBox["\[VerticalSeparator]",
     BoxBaselineShift->-0.1,
     BoxMargins->{{-0.2, 0}, {0, 0}}], 
    AdjustmentBox[
     TagBox[
      RowBox[{
       SubscriptBox["p", "1"], ",", 
       SubscriptBox["q", "2"], ",", 
       SubscriptBox["r", "3"]}],
      QuantumAlgebra`QuantumAlgebra`KetArgs,
      BaseStyle->"BraKetArg"],
     BoxBaselineShift->0], "\[RightAngleBracket]"}],
   QuantumAlgebra`QuantumAlgebra`Ket,
   BaseStyle->"KetWrapper"]}]], "Input",
 CellChangeTimes->{{3.444752333034*^9, 3.444752336818*^9}, {
  3.599567192491252*^9, 3.599567199476651*^9}}],

Cell[BoxData[
 RowBox[{
  RowBox[{
   SubscriptBox[
    OverscriptBox["\[ScriptCapitalB]", "^"], "2"], "\[CircleTimes]", 
   SubscriptBox[
    OverscriptBox["\[ScriptCapitalC]", "^"], "1"]}], "\[CenterDot]", 
  TagBox[
   RowBox[{
    AdjustmentBox["\[VerticalSeparator]",
     BoxBaselineShift->-0.1,
     BoxMargins->{{-0.2, 0}, {0, 0}}], 
    AdjustmentBox[
     TagBox[
      RowBox[{
       SubscriptBox["p", "1"], ",", 
       SubscriptBox["q", "2"], ",", 
       SubscriptBox["r", "3"]}],
      QuantumAlgebra`QuantumAlgebra`KetArgs,
      BaseStyle->"BraKetArg"],
     BoxBaselineShift->0], "\[RightAngleBracket]"}],
   QuantumAlgebra`QuantumAlgebra`Ket,
   BaseStyle->"KetWrapper"]}]], "Output",
 CellChangeTimes->{3.444752337835*^9, 3.445258649126*^9, 
  3.5995671999866805`*^9}]
}, Open  ]],

Cell[TextData[{
 "When we made the tensor product definition, we fixed the length of the \
composite operator and the composite ket. Thus, the solution is to make the \
tensor product definition for variable length of the composite objects.  In \
the tutorial section about ",
 StyleBox[ButtonBox["Setting Several Definitions",
  BaseStyle->"Hyperlink",
  ButtonData->{"Setting Several Definitions.nb", None}],
  FontSlant->"Italic"],
 ", the ",
 StyleBox["QASet",
  FontWeight->"Bold"],
 " command is discussed. This command can handle this definition for you. \
Also, this tool is useful to do more complex definitions, like handling \
operators defined in states spaces with rank greater than one."
}], "Text",
 CellChangeTimes->{{3.4447710234737997`*^9, 3.4447711260278*^9}, {
  3.4447713049667997`*^9, 3.4447716280498*^9}, {3.4447716697538*^9, 
  3.4447717739048*^9}, {3.4447719317468*^9, 3.4447719350938*^9}, {
  3.4447720753218*^9, 3.4447720822448*^9}, {3.4447721148048*^9, 
  3.4447721148138*^9}, {3.4447721753838*^9, 3.4447721753978*^9}, {
  3.4447722263318*^9, 3.4447722263388*^9}, {3.4447722633258*^9, 
  3.4447722663608*^9}, {3.4447724402478*^9, 3.4447724765878*^9}, {
  3.444899192873549*^9, 3.444899195072549*^9}, {3.445258670613*^9, 
  3.445258670679*^9}, {3.5995672441452413`*^9, 3.59956725864507*^9}, {
  3.599567326714815*^9, 3.5995673302029066`*^9}}]
}, Open  ]]
}, Open  ]]
},
AutoGeneratedPackage->None,
WindowSize->{593, 762},
WindowMargins->{{Automatic, 96}, {Automatic, 94}},
DockedCells->Cell[
  BoxData[
   StyleBox[
   "\!\(\*FrameBox[\"\[CapitalPsi]\",\nStripOnInput->False]\)   \
QuantumAlgebra 2.0", FontFamily -> "Helvetica", FontWeight -> "Bold", 
    FontColor -> GrayLevel[1]]], "DockedCell", Background -> 
  RGBColor[0, 0.25098, 0.501961]],
ShowSelection->True,
InputAliases->{"ket" -> TagBox[
    RowBox[{
      AdjustmentBox[
      "\[VerticalSeparator]", BoxMargins -> {{-0.2, 0.}, {0., 0.}}, 
       BoxBaselineShift -> -0.1], 
      AdjustmentBox[
       TagBox[
       "\[SelectionPlaceholder]", QuantumAlgebra`QuantumAlgebra`KetArgs, 
        BaseStyle -> "BraKetArg"], BoxBaselineShift -> 0], 
      "\[RightAngleBracket]"}], QuantumAlgebra`QuantumAlgebra`Ket, BaseStyle -> 
    "KetWrapper"], "bra" -> TagBox[
    RowBox[{"\[LeftAngleBracket]", 
      AdjustmentBox[
       TagBox[
       "\[SelectionPlaceholder]", QuantumAlgebra`QuantumAlgebra`BraArgs, 
        BaseStyle -> "BraKetArg"], BoxBaselineShift -> 0], 
      AdjustmentBox[
      "\[VerticalSeparator]", BoxMargins -> {{0, -0.2}, {0, 0}}, 
       BoxBaselineShift -> -0.1]}], QuantumAlgebra`QuantumAlgebra`Bra, 
    BaseStyle -> "BraWrapper"], "braket" -> TagBox[
    RowBox[{"\[LeftAngleBracket]", 
      AdjustmentBox[
       RowBox[{
         TagBox[
         "\[SelectionPlaceholder]", QuantumAlgebra`QuantumAlgebra`BraKetArgs, 
          BaseStyle -> "BraKetArg"], "\[VerticalSeparator]", 
         TagBox[
         "\[SelectionPlaceholder]", QuantumAlgebra`QuantumAlgebra`BraKetArgs, 
          BaseStyle -> "BraKetArg"]}], BoxBaselineShift -> 0.], 
      "\[RightAngleBracket]"}], QuantumAlgebra`QuantumAlgebra`Braket, 
    BaseStyle -> "BraKetWrapper"], "ketd" -> TagBox[
    SubscriptBox[
     RowBox[{
       AdjustmentBox[
       "\[VerticalSeparator]", BoxMargins -> {{-0.2, 0}, {0, 0}}, 
        BoxBaselineShift -> -0.1], 
       AdjustmentBox[
        TagBox[
        "\[SelectionPlaceholder]", QuantumAlgebra`QuantumAlgebra`KetArgs, 
         BaseStyle -> "BraKetArg"], BoxBaselineShift -> 0], 
       "\[RightAngleBracket]"}], 
     TagBox[
      AdjustmentBox[
       TagBox[
       "\[SelectionPlaceholder]", QuantumAlgebra`QuantumAlgebra`KetArgs, 
        BaseStyle -> "BraKetArg"], BoxBaselineShift -> 0], 
      QuantumAlgebra`QuantumAlgebra`UDScript, BaseStyle -> "RIndex"]], 
    QuantumAlgebra`QuantumAlgebra`Ket, BaseStyle -> "KetWrapper"], "ketu" -> 
  TagBox[
    SuperscriptBox[
     RowBox[{
       AdjustmentBox[
       "\[VerticalSeparator]", BoxMargins -> {{-0.2, 0}, {0, 0}}, 
        BoxBaselineShift -> -0.1], 
       AdjustmentBox[
        TagBox[
        "\[SelectionPlaceholder]", QuantumAlgebra`QuantumAlgebra`KetArgs, 
         BaseStyle -> "BraKetArg"], BoxBaselineShift -> 0], 
       "\[RightAngleBracket]"}], 
     TagBox[
      AdjustmentBox[
       TagBox[
       "\[SelectionPlaceholder]", QuantumAlgebra`QuantumAlgebra`KetArgs, 
        BaseStyle -> "BraKetArg"], BoxBaselineShift -> 0], 
      QuantumAlgebra`QuantumAlgebra`UDScript, BaseStyle -> "RIndex"]], 
    QuantumAlgebra`QuantumAlgebra`Ket, BaseStyle -> "KetWrapper"], "ketdu" -> 
  TagBox[
    SubsuperscriptBox[
     RowBox[{
       AdjustmentBox[
       "\[VerticalSeparator]", BoxMargins -> {{-0.2, 0}, {0, 0}}, 
        BoxBaselineShift -> -0.1], 
       AdjustmentBox[
        TagBox[
        "\[SelectionPlaceholder]", QuantumAlgebra`QuantumAlgebra`KetArgs, 
         BaseStyle -> "BraKetArg"], BoxBaselineShift -> 0], 
       "\[RightAngleBracket]"}], 
     TagBox[
      AdjustmentBox[
       TagBox[
       "\[SelectionPlaceholder]", QuantumAlgebra`QuantumAlgebra`KetArgs, 
        BaseStyle -> "BraKetArg"], BoxBaselineShift -> 0], 
      QuantumAlgebra`QuantumAlgebra`UDScript, BaseStyle -> "RIndex"], 
     TagBox[
      AdjustmentBox[
       TagBox[
       "\[SelectionPlaceholder]", QuantumAlgebra`QuantumAlgebra`KetArgs, 
        BaseStyle -> "BraKetArg"], BoxBaselineShift -> 0], 
      QuantumAlgebra`QuantumAlgebra`UDScript, BaseStyle -> "RIndex"]], 
    QuantumAlgebra`QuantumAlgebra`Ket, BaseStyle -> "KetWrapper"], "dbra" -> 
  TagBox[
    RowBox[{
      SubscriptBox["\[InvisiblePrefixScriptBase]", 
       TagBox[
        AdjustmentBox[
         TagBox[
         "\[SelectionPlaceholder]", QuantumAlgebra`QuantumAlgebra`BraArgs, 
          BaseStyle -> "BraKetArg"], BoxBaselineShift -> 0], 
        QuantumAlgebra`QuantumAlgebra`UDScript, BaseStyle -> "LIndex"]], 
      RowBox[{"\[LeftAngleBracket]", 
        AdjustmentBox[
         TagBox[
         "\[SelectionPlaceholder]", QuantumAlgebra`QuantumAlgebra`BraArgs, 
          BaseStyle -> "BraKetArg"], BoxBaselineShift -> 0], 
        AdjustmentBox[
        "\[VerticalSeparator]", BoxMargins -> {{0, -0.2}, {0, 0}}, 
         BoxBaselineShift -> -0.1]}]}], QuantumAlgebra`QuantumAlgebra`Bra, 
    BaseStyle -> "BraWrapper"], "ubra" -> TagBox[
    RowBox[{
      SuperscriptBox["\[InvisiblePrefixScriptBase]", 
       TagBox[
        AdjustmentBox[
         TagBox[
         "\[SelectionPlaceholder]", QuantumAlgebra`QuantumAlgebra`BraArgs, 
          BaseStyle -> "BraKetArg"], BoxBaselineShift -> 0], 
        QuantumAlgebra`QuantumAlgebra`UDScript, BaseStyle -> "LIndex"]], 
      RowBox[{"\[LeftAngleBracket]", 
        AdjustmentBox[
         TagBox[
         "\[SelectionPlaceholder]", QuantumAlgebra`QuantumAlgebra`BraArgs, 
          BaseStyle -> "BraKetArg"], BoxBaselineShift -> 0], 
        AdjustmentBox[
        "\[VerticalSeparator]", BoxMargins -> {{0, -0.2}, {0, 0}}, 
         BoxBaselineShift -> -0.1]}]}], QuantumAlgebra`QuantumAlgebra`Bra, 
    BaseStyle -> "BraWrapper"], "dubra" -> TagBox[
    RowBox[{
      SubsuperscriptBox["\[InvisiblePrefixScriptBase]", 
       TagBox[
        AdjustmentBox[
         TagBox[
         "\[SelectionPlaceholder]", QuantumAlgebra`QuantumAlgebra`BraArgs, 
          BaseStyle -> "BraKetArg"], BoxBaselineShift -> 0], 
        QuantumAlgebra`QuantumAlgebra`UDScript, BaseStyle -> "LIndex"], 
       TagBox[
        AdjustmentBox[
         TagBox[
         "\[SelectionPlaceholder]", QuantumAlgebra`QuantumAlgebra`BraArgs, 
          BaseStyle -> "BraKetArg"], BoxBaselineShift -> 0], 
        QuantumAlgebra`QuantumAlgebra`UDScript, BaseStyle -> "LIndex"]], 
      RowBox[{"\[LeftAngleBracket]", 
        AdjustmentBox[
         TagBox[
         "\[SelectionPlaceholder]", QuantumAlgebra`QuantumAlgebra`BraArgs, 
          BaseStyle -> "BraKetArg"], BoxBaselineShift -> 0], 
        AdjustmentBox[
        "\[VerticalSeparator]", BoxMargins -> {{0, -0.2}, {0, 0}}, 
         BoxBaselineShift -> -0.1]}]}], QuantumAlgebra`QuantumAlgebra`Bra, 
    BaseStyle -> "BraWrapper"], "braketd" -> TagBox[
    SubscriptBox[
     RowBox[{"\[LeftAngleBracket]", 
       AdjustmentBox[
        RowBox[{
          TagBox[
          "\[SelectionPlaceholder]", QuantumAlgebra`QuantumAlgebra`BraKetArgs,
            BaseStyle -> "BraKetArg"], "\[VerticalSeparator]", 
          TagBox[
          "\[SelectionPlaceholder]", QuantumAlgebra`QuantumAlgebra`BraKetArgs,
            BaseStyle -> "BraKetArg"]}], BoxBaselineShift -> 0], 
       "\[RightAngleBracket]"}], 
     TagBox[
      AdjustmentBox[
       TagBox[
       "\[SelectionPlaceholder]", QuantumAlgebra`QuantumAlgebra`KetArgs, 
        BaseStyle -> "BraKetArg"], BoxBaselineShift -> 0], 
      QuantumAlgebra`QuantumAlgebra`UDScript, BaseStyle -> "RIndex"]], 
    QuantumAlgebra`QuantumAlgebra`Braket, BaseStyle -> "BraKetWrapper"], 
  "braketu" -> TagBox[
    SuperscriptBox[
     RowBox[{"\[LeftAngleBracket]", 
       AdjustmentBox[
        RowBox[{
          TagBox[
          "\[SelectionPlaceholder]", QuantumAlgebra`QuantumAlgebra`BraKetArgs,
            BaseStyle -> "BraKetArg"], "\[VerticalSeparator]", 
          TagBox[
          "\[SelectionPlaceholder]", QuantumAlgebra`QuantumAlgebra`BraKetArgs,
            BaseStyle -> "BraKetArg"]}], BoxBaselineShift -> 0], 
       "\[RightAngleBracket]"}], 
     TagBox[
      AdjustmentBox[
       TagBox[
       "\[SelectionPlaceholder]", QuantumAlgebra`QuantumAlgebra`KetArgs, 
        BaseStyle -> "BraKetArg"], BoxBaselineShift -> 0], 
      QuantumAlgebra`QuantumAlgebra`UDScript, BaseStyle -> "RIndex"]], 
    QuantumAlgebra`QuantumAlgebra`Braket, BaseStyle -> "BraKetWrapper"], 
  "braketdu" -> TagBox[
    SubsuperscriptBox[
     RowBox[{"\[LeftAngleBracket]", 
       AdjustmentBox[
        RowBox[{
          TagBox[
          "\[SelectionPlaceholder]", QuantumAlgebra`QuantumAlgebra`BraKetArgs,
            BaseStyle -> "BraKetArg"], "\[VerticalSeparator]", 
          TagBox[
          "\[SelectionPlaceholder]", QuantumAlgebra`QuantumAlgebra`BraKetArgs,
            BaseStyle -> "BraKetArg"]}], BoxBaselineShift -> 0], 
       "\[RightAngleBracket]"}], 
     TagBox[
      AdjustmentBox[
       TagBox[
       "\[SelectionPlaceholder]", QuantumAlgebra`QuantumAlgebra`KetArgs, 
        BaseStyle -> "BraKetArg"], BoxBaselineShift -> 0], 
      QuantumAlgebra`QuantumAlgebra`UDScript, BaseStyle -> "RIndex"], 
     TagBox[
      AdjustmentBox[
       TagBox[
       "\[SelectionPlaceholder]", QuantumAlgebra`QuantumAlgebra`KetArgs, 
        BaseStyle -> "BraKetArg"], BoxBaselineShift -> 0], 
      QuantumAlgebra`QuantumAlgebra`UDScript, BaseStyle -> "RIndex"]], 
    QuantumAlgebra`QuantumAlgebra`Braket, BaseStyle -> "BraKetWrapper"], 
  "dbraket" -> TagBox[
    RowBox[{
      SubscriptBox["\[InvisiblePrefixScriptBase]", 
       TagBox[
        AdjustmentBox[
         TagBox[
         "\[SelectionPlaceholder]", QuantumAlgebra`QuantumAlgebra`BraArgs, 
          BaseStyle -> "BraKetArg"], BoxBaselineShift -> 0], 
        QuantumAlgebra`QuantumAlgebra`UDScript, BaseStyle -> "LIndex"]], 
      RowBox[{"\[LeftAngleBracket]", 
        AdjustmentBox[
         RowBox[{
           TagBox[
           "\[SelectionPlaceholder]", 
            QuantumAlgebra`QuantumAlgebra`BraKetArgs, BaseStyle -> 
            "BraKetArg"], "\[VerticalSeparator]", 
           TagBox[
           "\[SelectionPlaceholder]", 
            QuantumAlgebra`QuantumAlgebra`BraKetArgs, BaseStyle -> 
            "BraKetArg"]}], BoxBaselineShift -> 0], 
        "\[RightAngleBracket]"}]}], QuantumAlgebra`QuantumAlgebra`Braket, 
    BaseStyle -> "BraKetWrapper"], "ubraket" -> TagBox[
    RowBox[{
      SuperscriptBox["\[InvisiblePrefixScriptBase]", 
       TagBox[
        AdjustmentBox[
         TagBox[
         "\[SelectionPlaceholder]", QuantumAlgebra`QuantumAlgebra`BraArgs, 
          BaseStyle -> "BraKetArg"], BoxBaselineShift -> 0], 
        QuantumAlgebra`QuantumAlgebra`UDScript, BaseStyle -> "LIndex"]], 
      RowBox[{"\[LeftAngleBracket]", 
        AdjustmentBox[
         RowBox[{
           TagBox[
           "\[SelectionPlaceholder]", 
            QuantumAlgebra`QuantumAlgebra`BraKetArgs, BaseStyle -> 
            "BraKetArg"], "\[VerticalSeparator]", 
           TagBox[
           "\[SelectionPlaceholder]", 
            QuantumAlgebra`QuantumAlgebra`BraKetArgs, BaseStyle -> 
            "BraKetArg"]}], BoxBaselineShift -> 0], 
        "\[RightAngleBracket]"}]}], QuantumAlgebra`QuantumAlgebra`Braket, 
    BaseStyle -> "BraKetWrapper"], "dubraket" -> TagBox[
    RowBox[{
      SubsuperscriptBox["\[InvisiblePrefixScriptBase]", 
       TagBox[
        AdjustmentBox[
         TagBox[
         "\[SelectionPlaceholder]", QuantumAlgebra`QuantumAlgebra`BraArgs, 
          BaseStyle -> "BraKetArg"], BoxBaselineShift -> 0], 
        QuantumAlgebra`QuantumAlgebra`UDScript, BaseStyle -> "LIndex"], 
       TagBox[
        AdjustmentBox[
         TagBox[
         "\[SelectionPlaceholder]", QuantumAlgebra`QuantumAlgebra`BraArgs, 
          BaseStyle -> "BraKetArg"], BoxBaselineShift -> 0], 
        QuantumAlgebra`QuantumAlgebra`UDScript, BaseStyle -> "LIndex"]], 
      RowBox[{"\[LeftAngleBracket]", 
        AdjustmentBox[
         RowBox[{
           TagBox[
           "\[SelectionPlaceholder]", 
            QuantumAlgebra`QuantumAlgebra`BraKetArgs, BaseStyle -> 
            "BraKetArg"], "\[VerticalSeparator]", 
           TagBox[
           "\[SelectionPlaceholder]", 
            QuantumAlgebra`QuantumAlgebra`BraKetArgs, BaseStyle -> 
            "BraKetArg"]}], BoxBaselineShift -> 0], 
        "\[RightAngleBracket]"}]}], QuantumAlgebra`QuantumAlgebra`Braket, 
    BaseStyle -> "BraKetWrapper"], "dbraketd" -> TagBox[
    RowBox[{
      SubscriptBox["\[InvisiblePrefixScriptBase]", 
       TagBox[
        AdjustmentBox[
         TagBox[
         "\[SelectionPlaceholder]", QuantumAlgebra`QuantumAlgebra`BraArgs, 
          BaseStyle -> "BraKetArg"], BoxBaselineShift -> 0], 
        QuantumAlgebra`QuantumAlgebra`UDScript, BaseStyle -> "LIndex"]], 
      SubscriptBox[
       RowBox[{"\[LeftAngleBracket]", 
         AdjustmentBox[
          RowBox[{
            TagBox[
            "\[SelectionPlaceholder]", 
             QuantumAlgebra`QuantumAlgebra`BraKetArgs, BaseStyle -> 
             "BraKetArg"], "\[VerticalSeparator]", 
            TagBox[
            "\[SelectionPlaceholder]", 
             QuantumAlgebra`QuantumAlgebra`BraKetArgs, BaseStyle -> 
             "BraKetArg"]}], BoxBaselineShift -> 0], "\[RightAngleBracket]"}], 
       TagBox[
        AdjustmentBox[
         TagBox[
         "\[SelectionPlaceholder]", QuantumAlgebra`QuantumAlgebra`BraArgs, 
          BaseStyle -> "BraKetArg"], BoxBaselineShift -> 0], 
        QuantumAlgebra`QuantumAlgebra`UDScript, BaseStyle -> "RIndex"]]}], 
    QuantumAlgebra`QuantumAlgebra`Braket, BaseStyle -> "BraKetWrapper"], 
  "dbraketu" -> TagBox[
    RowBox[{
      SubscriptBox["\[InvisiblePrefixScriptBase]", 
       TagBox[
        AdjustmentBox[
         TagBox[
         "\[SelectionPlaceholder]", QuantumAlgebra`QuantumAlgebra`BraArgs, 
          BaseStyle -> "BraKetArg"], BoxBaselineShift -> 0], 
        QuantumAlgebra`QuantumAlgebra`UDScript, BaseStyle -> "LIndex"]], 
      SuperscriptBox[
       RowBox[{"\[LeftAngleBracket]", 
         AdjustmentBox[
          RowBox[{
            TagBox[
            "\[SelectionPlaceholder]", 
             QuantumAlgebra`QuantumAlgebra`BraKetArgs, BaseStyle -> 
             "BraKetArg"], "\[VerticalSeparator]", 
            TagBox[
            "\[SelectionPlaceholder]", 
             QuantumAlgebra`QuantumAlgebra`BraKetArgs, BaseStyle -> 
             "BraKetArg"]}], BoxBaselineShift -> 0], "\[RightAngleBracket]"}], 
       TagBox[
        AdjustmentBox[
         TagBox[
         "\[SelectionPlaceholder]", QuantumAlgebra`QuantumAlgebra`BraArgs, 
          BaseStyle -> "BraKetArg"], BoxBaselineShift -> 0], 
        QuantumAlgebra`QuantumAlgebra`UDScript, BaseStyle -> "RIndex"]]}], 
    QuantumAlgebra`QuantumAlgebra`Braket, BaseStyle -> "BraKetWrapper"], 
  "ubraketd" -> TagBox[
    RowBox[{
      SuperscriptBox["\[InvisiblePrefixScriptBase]", 
       TagBox[
        AdjustmentBox[
         TagBox[
         "\[SelectionPlaceholder]", QuantumAlgebra`QuantumAlgebra`BraArgs, 
          BaseStyle -> "BraKetArg"], BoxBaselineShift -> 0], 
        QuantumAlgebra`QuantumAlgebra`UDScript, BaseStyle -> "LIndex"]], 
      SubscriptBox[
       RowBox[{"\[LeftAngleBracket]", 
         AdjustmentBox[
          RowBox[{
            TagBox[
            "\[SelectionPlaceholder]", 
             QuantumAlgebra`QuantumAlgebra`BraKetArgs, BaseStyle -> 
             "BraKetArg"], "\[VerticalSeparator]", 
            TagBox[
            "\[SelectionPlaceholder]", 
             QuantumAlgebra`QuantumAlgebra`BraKetArgs, BaseStyle -> 
             "BraKetArg"]}], BoxBaselineShift -> 0], "\[RightAngleBracket]"}], 
       TagBox[
        AdjustmentBox[
         TagBox[
         "\[SelectionPlaceholder]", QuantumAlgebra`QuantumAlgebra`BraArgs, 
          BaseStyle -> "BraKetArg"], BoxBaselineShift -> 0], 
        QuantumAlgebra`QuantumAlgebra`UDScript, BaseStyle -> "RIndex"]]}], 
    QuantumAlgebra`QuantumAlgebra`Braket, BaseStyle -> "BraKetWrapper"], 
  "ubraketu" -> TagBox[
    RowBox[{
      SuperscriptBox["\[InvisiblePrefixScriptBase]", 
       TagBox[
        AdjustmentBox[
         TagBox[
         "\[SelectionPlaceholder]", QuantumAlgebra`QuantumAlgebra`BraArgs, 
          BaseStyle -> "BraKetArg"], BoxBaselineShift -> 0], 
        QuantumAlgebra`QuantumAlgebra`UDScript, BaseStyle -> "LIndex"]], 
      SuperscriptBox[
       RowBox[{"\[LeftAngleBracket]", 
         AdjustmentBox[
          RowBox[{
            TagBox[
            "\[SelectionPlaceholder]", 
             QuantumAlgebra`QuantumAlgebra`BraKetArgs, BaseStyle -> 
             "BraKetArg"], "\[VerticalSeparator]", 
            TagBox[
            "\[SelectionPlaceholder]", 
             QuantumAlgebra`QuantumAlgebra`BraKetArgs, BaseStyle -> 
             "BraKetArg"]}], BoxBaselineShift -> 0], "\[RightAngleBracket]"}], 
       TagBox[
        AdjustmentBox[
         TagBox[
         "\[SelectionPlaceholder]", QuantumAlgebra`QuantumAlgebra`BraArgs, 
          BaseStyle -> "BraKetArg"], BoxBaselineShift -> 0], 
        QuantumAlgebra`QuantumAlgebra`UDScript, BaseStyle -> "RIndex"]]}], 
    QuantumAlgebra`QuantumAlgebra`Braket, BaseStyle -> "BraKetWrapper"], 
  "dbraketdu" -> TagBox[
    RowBox[{
      SubscriptBox["\[InvisiblePrefixScriptBase]", 
       TagBox[
        AdjustmentBox[
         TagBox[
         "\[SelectionPlaceholder]", QuantumAlgebra`QuantumAlgebra`BraArgs, 
          BaseStyle -> "BraKetArg"], BoxBaselineShift -> 0], 
        QuantumAlgebra`QuantumAlgebra`UDScript, BaseStyle -> "LIndex"]], 
      SubsuperscriptBox[
       RowBox[{"\[LeftAngleBracket]", 
         AdjustmentBox[
          RowBox[{
            TagBox[
            "\[SelectionPlaceholder]", 
             QuantumAlgebra`QuantumAlgebra`BraKetArgs, BaseStyle -> 
             "BraKetArg"], "\[VerticalSeparator]", 
            TagBox[
            "\[SelectionPlaceholder]", 
             QuantumAlgebra`QuantumAlgebra`BraKetArgs, BaseStyle -> 
             "BraKetArg"]}], BoxBaselineShift -> 0], "\[RightAngleBracket]"}], 
       TagBox[
        AdjustmentBox[
         TagBox[
         "\[SelectionPlaceholder]", QuantumAlgebra`QuantumAlgebra`BraArgs, 
          BaseStyle -> "BraKetArg"], BoxBaselineShift -> 0], 
        QuantumAlgebra`QuantumAlgebra`UDScript, BaseStyle -> "RIndex"], 
       TagBox[
        AdjustmentBox[
         TagBox[
         "\[SelectionPlaceholder]", QuantumAlgebra`QuantumAlgebra`BraArgs, 
          BaseStyle -> "BraKetArg"], BoxBaselineShift -> 0], 
        QuantumAlgebra`QuantumAlgebra`UDScript, BaseStyle -> "RIndex"]]}], 
    QuantumAlgebra`QuantumAlgebra`Braket, BaseStyle -> "BraKetWrapper"], 
  "ubraketdu" -> TagBox[
    RowBox[{
      SuperscriptBox["\[InvisiblePrefixScriptBase]", 
       TagBox[
        AdjustmentBox[
         TagBox[
         "\[SelectionPlaceholder]", QuantumAlgebra`QuantumAlgebra`BraArgs, 
          BaseStyle -> "BraKetArg"], BoxBaselineShift -> 0], 
        QuantumAlgebra`QuantumAlgebra`UDScript, BaseStyle -> "LIndex"]], 
      SubsuperscriptBox[
       RowBox[{"\[LeftAngleBracket]", 
         AdjustmentBox[
          RowBox[{
            TagBox[
            "\[SelectionPlaceholder]", 
             QuantumAlgebra`QuantumAlgebra`BraKetArgs, BaseStyle -> 
             "BraKetArg"], "\[VerticalSeparator]", 
            TagBox[
            "\[SelectionPlaceholder]", 
             QuantumAlgebra`QuantumAlgebra`BraKetArgs, BaseStyle -> 
             "BraKetArg"]}], BoxBaselineShift -> 0], "\[RightAngleBracket]"}], 
       TagBox[
        AdjustmentBox[
         TagBox[
         "\[SelectionPlaceholder]", QuantumAlgebra`QuantumAlgebra`BraArgs, 
          BaseStyle -> "BraKetArg"], BoxBaselineShift -> 0], 
        QuantumAlgebra`QuantumAlgebra`UDScript, BaseStyle -> "RIndex"], 
       TagBox[
        AdjustmentBox[
         TagBox[
         "\[SelectionPlaceholder]", QuantumAlgebra`QuantumAlgebra`BraArgs, 
          BaseStyle -> "BraKetArg"], BoxBaselineShift -> 0], 
        QuantumAlgebra`QuantumAlgebra`UDScript, BaseStyle -> "RIndex"]]}], 
    QuantumAlgebra`QuantumAlgebra`Braket, BaseStyle -> "BraKetWrapper"], 
  "dubraketd" -> TagBox[
    RowBox[{
      SubsuperscriptBox["\[InvisiblePrefixScriptBase]", 
       TagBox[
        AdjustmentBox[
         TagBox[
         "\[SelectionPlaceholder]", QuantumAlgebra`QuantumAlgebra`BraArgs, 
          BaseStyle -> "BraKetArg"], BoxBaselineShift -> 0], 
        QuantumAlgebra`QuantumAlgebra`UDScript, BaseStyle -> "LIndex"], 
       TagBox[
        AdjustmentBox[
         TagBox[
         "\[SelectionPlaceholder]", QuantumAlgebra`QuantumAlgebra`BraArgs, 
          BaseStyle -> "BraKetArg"], BoxBaselineShift -> 0], 
        QuantumAlgebra`QuantumAlgebra`UDScript, BaseStyle -> "LIndex"]], 
      SubscriptBox[
       RowBox[{"\[LeftAngleBracket]", 
         AdjustmentBox[
          RowBox[{
            TagBox[
            "\[SelectionPlaceholder]", 
             QuantumAlgebra`QuantumAlgebra`BraKetArgs, BaseStyle -> 
             "BraKetArg"], "\[VerticalSeparator]", 
            TagBox[
            "\[SelectionPlaceholder]", 
             QuantumAlgebra`QuantumAlgebra`BraKetArgs, BaseStyle -> 
             "BraKetArg"]}], BoxBaselineShift -> 0], "\[RightAngleBracket]"}], 
       TagBox[
        AdjustmentBox[
         TagBox[
         "\[SelectionPlaceholder]", QuantumAlgebra`QuantumAlgebra`BraArgs, 
          BaseStyle -> "BraKetArg"], BoxBaselineShift -> 0], 
        QuantumAlgebra`QuantumAlgebra`UDScript, BaseStyle -> "RIndex"]]}], 
    QuantumAlgebra`QuantumAlgebra`Braket, BaseStyle -> "BraKetWrapper"], 
  "dubraketu" -> TagBox[
    RowBox[{
      SubsuperscriptBox["\[InvisiblePrefixScriptBase]", 
       TagBox[
        AdjustmentBox[
         TagBox[
         "\[SelectionPlaceholder]", QuantumAlgebra`QuantumAlgebra`BraArgs, 
          BaseStyle -> "BraKetArg"], BoxBaselineShift -> 0], 
        QuantumAlgebra`QuantumAlgebra`UDScript, BaseStyle -> "LIndex"], 
       TagBox[
        AdjustmentBox[
         TagBox[
         "\[SelectionPlaceholder]", QuantumAlgebra`QuantumAlgebra`BraArgs, 
          BaseStyle -> "BraKetArg"], BoxBaselineShift -> 0], 
        QuantumAlgebra`QuantumAlgebra`UDScript, BaseStyle -> "LIndex"]], 
      SuperscriptBox[
       RowBox[{"\[LeftAngleBracket]", 
         AdjustmentBox[
          RowBox[{
            TagBox[
            "\[SelectionPlaceholder]", 
             QuantumAlgebra`QuantumAlgebra`BraKetArgs, BaseStyle -> 
             "BraKetArg"], "\[VerticalSeparator]", 
            TagBox[
            "\[SelectionPlaceholder]", 
             QuantumAlgebra`QuantumAlgebra`BraKetArgs, BaseStyle -> 
             "BraKetArg"]}], BoxBaselineShift -> 0], "\[RightAngleBracket]"}], 
       TagBox[
        AdjustmentBox[
         TagBox[
         "\[SelectionPlaceholder]", QuantumAlgebra`QuantumAlgebra`BraArgs, 
          BaseStyle -> "BraKetArg"], BoxBaselineShift -> 0], 
        QuantumAlgebra`QuantumAlgebra`UDScript, BaseStyle -> "RIndex"]]}], 
    QuantumAlgebra`QuantumAlgebra`Braket, BaseStyle -> "BraKetWrapper"], 
  "dubraketdu" -> TagBox[
    RowBox[{
      SubsuperscriptBox["\[InvisiblePrefixScriptBase]", 
       TagBox[
        AdjustmentBox[
         TagBox[
         "\[SelectionPlaceholder]", QuantumAlgebra`QuantumAlgebra`BraArgs, 
          BaseStyle -> "BraKetArg"], BoxBaselineShift -> 0.], 
        QuantumAlgebra`QuantumAlgebra`UDScript, BaseStyle -> "LIndex"], 
       TagBox[
        AdjustmentBox[
         TagBox[
         "\[SelectionPlaceholder]", QuantumAlgebra`QuantumAlgebra`BraArgs, 
          BaseStyle -> "BraKetArg"], BoxBaselineShift -> 0.], 
        QuantumAlgebra`QuantumAlgebra`UDScript, BaseStyle -> "LIndex"]], 
      SubsuperscriptBox[
       RowBox[{"\[LeftAngleBracket]", 
         AdjustmentBox[
          RowBox[{
            TagBox[
            "\[SelectionPlaceholder]", 
             QuantumAlgebra`QuantumAlgebra`BraKetArgs, BaseStyle -> 
             "BraKetArg"], "\[VerticalSeparator]", 
            TagBox[
            "\[SelectionPlaceholder]", 
             QuantumAlgebra`QuantumAlgebra`BraKetArgs, BaseStyle -> 
             "BraKetArg"]}], BoxBaselineShift -> 0.], 
         "\[RightAngleBracket]"}], 
       TagBox[
        AdjustmentBox[
         TagBox[
         "\[SelectionPlaceholder]", QuantumAlgebra`QuantumAlgebra`BraArgs, 
          BaseStyle -> "BraKetArg"], BoxBaselineShift -> 0.], 
        QuantumAlgebra`QuantumAlgebra`UDScript, BaseStyle -> "RIndex"], 
       TagBox[
        AdjustmentBox[
         TagBox[
         "\[SelectionPlaceholder]", QuantumAlgebra`QuantumAlgebra`BraArgs, 
          BaseStyle -> "BraKetArg"], BoxBaselineShift -> 0.], 
        QuantumAlgebra`QuantumAlgebra`UDScript, BaseStyle -> "RIndex"]]}], 
    QuantumAlgebra`QuantumAlgebra`Braket, BaseStyle -> "BraKetWrapper"], 
  "com" -> SubscriptBox[
    RowBox[{"[", 
      RowBox[{"\[SelectionPlaceholder]", ",", "\[SelectionPlaceholder]"}], 
      "]"}], "-"], "op" -> OverscriptBox["\[SelectionPlaceholder]", "^"], 
  "opd" -> SubscriptBox[
    OverscriptBox["\[SelectionPlaceholder]", "^"], "\[SelectionPlaceholder]"],
   "opu" -> TagBox[
    SuperscriptBox[
     OverscriptBox["\[SelectionPlaceholder]", "^"], 
     "\[SelectionPlaceholder]"], 
    QuantumAlgebra`QuantumAlgebra`Private`superscript], "opdu" -> TagBox[
    SubsuperscriptBox[
     OverscriptBox["\[SelectionPlaceholder]", "^"], "\[SelectionPlaceholder]",
      "\[SelectionPlaceholder]"], 
    QuantumAlgebra`QuantumAlgebra`Private`superscript], "hop" -> 
  SuperscriptBox[
    OverscriptBox["\[SelectionPlaceholder]", "^"], "\[Dagger]"]},
FrontEndVersion->"9.0 for Microsoft Windows (64-bit) (March 5, 2013)",
StyleDefinitions->Notebook[{
   Cell[
    StyleData[StyleDefinitions -> "QAStyles.nb"]], 
   Cell[
    CellGroupData[{
      Cell["Bra Ket Styles", "Section"], 
      Cell[
      " The cells below define certain styles needed for defining Bras&Kets. \
These styles serve to give the correct structural properties to Bras & Kets ",
        "Text"], 
      Cell[
       StyleData["BraKetArg"], SpanMinSize -> Automatic, StyleMenuListing -> 
       None, AdjustmentBoxOptions -> {BoxMargins -> {{0, 0}, {0, 0}}}, 
       TagBoxOptions -> {Editable -> True, Selectable -> True}], 
      Cell[
       StyleData["BraWrapper"], 
       AutoStyleOptions -> {"HighlightSyntaxErrors" -> False}, 
       ScriptBaselineShifts -> {0.6, 0.9}, SpanMinSize -> 1.5, 
       StyleMenuListing -> None, 
       AdjustmentBoxOptions -> {BoxMargins -> {{0.2, -0.13}, {0, 0}}}, 
       TagBoxOptions -> {Editable -> False}], 
      Cell[
       StyleData["KetWrapper"], 
       AutoStyleOptions -> {"HighlightSyntaxErrors" -> False}, 
       ScriptBaselineShifts -> {0.6, 0.9}, SpanMinSize -> 1.5, 
       StyleMenuListing -> None, 
       AdjustmentBoxOptions -> {BoxMargins -> {{-0.1, 0.2}, {0, 0}}}, 
       TagBoxOptions -> {Editable -> False}], 
      Cell[
       StyleData["BraKetWrapper"], ScriptBaselineShifts -> {0.6, 0.9}, 
       SpanMinSize -> 1.5, StyleMenuListing -> None, 
       AdjustmentBoxOptions -> {BoxMargins -> {{0.25, 0.25}, {0, 0}}}, 
       TagBoxOptions -> {Editable -> False}], 
      Cell[
       StyleData["RIndex"], StyleMenuListing -> None, 
       AdjustmentBoxOptions -> {BoxMargins -> {{-0.16, 0}, {0, 0}}}, 
       TagBoxOptions -> {Editable -> False}], 
      Cell[
       StyleData["LIndex"], StyleMenuListing -> None, 
       AdjustmentBoxOptions -> {BoxMargins -> {{0, -0.1}, {0, 0}}}, 
       TagBoxOptions -> {Editable -> False}]}, Closed]]}, Visible -> False, 
  FrontEndVersion -> "9.0 for Microsoft Windows (64-bit) (March 5, 2013)", 
  StyleDefinitions -> "PrivateStylesheetFormatting.nb"]
]
(* End of Notebook Content *)

(* Internal cache information *)
(*CellTagsOutline
CellTagsIndex->{
 "qa:7.0"->{
  Cell[567, 22, 182, 3, 99, "Section",
   CellTags->"qa:7.0"]},
 "qa:7.1"->{
  Cell[1105, 38, 227, 3, 60, "Subsection",
   CellTags->"qa:7.1"]},
 "b:2.3"->{
  Cell[1335, 43, 489, 9, 77, "Text",
   CellTags->"b:2.3"],
  Cell[1827, 54, 530, 9, 77, "Text",
   CellTags->"b:2.3"],
  Cell[2360, 65, 370, 7, 33, "Text",
   CellTags->"b:2.3"],
  Cell[36768, 1067, 2719, 78, 106, "InputOnly",
   CellTags->"b:2.3"],
  Cell[42136, 1202, 2562, 71, 81, "InputOnly",
   CellTags->"b:2.3"],
  Cell[65773, 1892, 2719, 71, 104, "InputOnly",
   CellTags->"b:2.3"],
  Cell[84925, 2446, 2549, 76, 154, "InputOnly",
   CellTags->"b:2.3"]},
 "qa:7.2"->{
  Cell[39524, 1150, 135, 2, 60, "Subsection",
   CellTags->"qa:7.2"]},
 "qa:7.3"->{
  Cell[87511, 2527, 148, 2, 60, "Subsection",
   CellTags->"qa:7.3"]},
 "qa:7.4"->{
  Cell[151496, 4398, 143, 2, 60, "Subsection",
   CellTags->"qa:7.4"]}
 }
*)
(*CellTagsIndex
CellTagsIndex->{
 {"qa:7.0", 257126, 7361},
 {"qa:7.1", 257203, 7364},
 {"b:2.3", 257283, 7367},
 {"qa:7.2", 257760, 7382},
 {"qa:7.3", 257844, 7385},
 {"qa:7.4", 257928, 7388}
 }
*)
(*NotebookFileOutline
Notebook[{
Cell[CellGroupData[{
Cell[567, 22, 182, 3, 99, "Section",
 CellTags->"qa:7.0"],
Cell[752, 27, 140, 2, 33, "Text"],
Cell[895, 31, 185, 3, 50, "InputOnly"],
Cell[CellGroupData[{
Cell[1105, 38, 227, 3, 60, "Subsection",
 CellTags->"qa:7.1"],
Cell[1335, 43, 489, 9, 77, "Text",
 CellTags->"b:2.3"],
Cell[1827, 54, 530, 9, 77, "Text",
 CellTags->"b:2.3"],
Cell[2360, 65, 370, 7, 33, "Text",
 CellTags->"b:2.3"],
Cell[CellGroupData[{
Cell[2755, 76, 892, 27, 44, "Input"],
Cell[3650, 105, 524, 15, 45, "Output"]
}, Open  ]],
Cell[4189, 123, 969, 16, 55, "Text"],
Cell[5161, 141, 770, 20, 56, "InputOnly"],
Cell[5934, 163, 273, 4, 33, "Text"],
Cell[CellGroupData[{
Cell[6232, 171, 2000, 57, 45, "Input"],
Cell[8235, 230, 424, 8, 41, "Output"]
}, Open  ]],
Cell[CellGroupData[{
Cell[8696, 243, 2560, 78, 44, "Input"],
Cell[11259, 323, 220, 5, 41, "Output"]
}, Open  ]],
Cell[CellGroupData[{
Cell[11516, 333, 2702, 79, 69, "Input"],
Cell[14221, 414, 313, 6, 56, "Output"]
}, Open  ]],
Cell[14549, 423, 648, 10, 77, "Text"],
Cell[CellGroupData[{
Cell[15222, 437, 4217, 120, 94, "Input"],
Cell[19442, 559, 336, 6, 56, "Output"]
}, Open  ]],
Cell[19793, 568, 533, 9, 77, "Text"],
Cell[CellGroupData[{
Cell[20351, 581, 1155, 36, 45, "Input"],
Cell[21509, 619, 1125, 36, 45, "Output"]
}, Open  ]],
Cell[22649, 658, 1309, 32, 99, "Text"],
Cell[23961, 692, 1209, 19, 77, "Text"],
Cell[25173, 713, 253, 8, 55, "Text"],
Cell[25429, 723, 2084, 60, 56, "InputOnly"],
Cell[27516, 785, 295, 5, 55, "Text"],
Cell[CellGroupData[{
Cell[27836, 794, 2339, 72, 45, "Input"],
Cell[30178, 868, 1712, 52, 45, "Output"]
}, Open  ]],
Cell[31905, 923, 458, 8, 55, "Text"],
Cell[32366, 933, 848, 26, 56, "InputOnly"],
Cell[CellGroupData[{
Cell[33239, 963, 2478, 74, 45, "Input"],
Cell[35720, 1039, 394, 10, 41, "Output"]
}, Open  ]],
Cell[36129, 1052, 636, 13, 77, "Text"],
Cell[36768, 1067, 2719, 78, 106, "InputOnly",
 CellTags->"b:2.3"]
}, Open  ]],
Cell[CellGroupData[{
Cell[39524, 1150, 135, 2, 60, "Subsection",
 CellTags->"qa:7.2"],
Cell[39662, 1154, 983, 16, 77, "Text"],
Cell[40648, 1172, 1485, 28, 121, "Text"],
Cell[42136, 1202, 2562, 71, 81, "InputOnly",
 CellTags->"b:2.3"],
Cell[44701, 1275, 926, 15, 77, "Text"],
Cell[CellGroupData[{
Cell[45652, 1294, 2029, 53, 44, "Input"],
Cell[47684, 1349, 2266, 63, 67, "Output"]
}, Open  ]],
Cell[CellGroupData[{
Cell[49987, 1417, 2385, 63, 44, "Input"],
Cell[52375, 1482, 2295, 72, 67, "Output"]
}, Open  ]],
Cell[CellGroupData[{
Cell[54707, 1559, 2349, 64, 44, "Input"],
Cell[57059, 1625, 1774, 52, 69, "Output"]
}, Open  ]],
Cell[58848, 1680, 636, 15, 77, "Text"],
Cell[CellGroupData[{
Cell[59509, 1699, 875, 21, 44, "Input"],
Cell[60387, 1722, 1261, 37, 65, "Output"]
}, Open  ]],
Cell[CellGroupData[{
Cell[61685, 1764, 998, 25, 46, "Input"],
Cell[62686, 1791, 2755, 87, 90, "Output"]
}, Open  ]],
Cell[65456, 1881, 314, 9, 55, "Text"],
Cell[65773, 1892, 2719, 71, 104, "InputOnly",
 CellTags->"b:2.3"],
Cell[68495, 1965, 190, 2, 33, "Text"],
Cell[CellGroupData[{
Cell[68710, 1971, 1622, 46, 47, "Input"],
Cell[70335, 2019, 1724, 51, 51, "Output"]
}, Open  ]],
Cell[72074, 2073, 636, 12, 99, "Text"],
Cell[72713, 2087, 380, 7, 77, "Text"],
Cell[73096, 2096, 1216, 37, 81, "Text"],
Cell[CellGroupData[{
Cell[74337, 2137, 2213, 61, 56, "InputOnly"],
Cell[76553, 2200, 1757, 54, 44, "Output"]
}, Open  ]],
Cell[78325, 2257, 379, 7, 55, "Text"],
Cell[CellGroupData[{
Cell[78729, 2268, 1547, 44, 44, "Input"],
Cell[80279, 2314, 4053, 113, 69, "Output"]
}, Open  ]],
Cell[84347, 2430, 575, 14, 33, "Text"],
Cell[84925, 2446, 2549, 76, 154, "InputOnly",
 CellTags->"b:2.3"]
}, Open  ]],
Cell[CellGroupData[{
Cell[87511, 2527, 148, 2, 60, "Subsection",
 CellTags->"qa:7.3"],
Cell[87662, 2531, 904, 13, 99, "Text"],
Cell[CellGroupData[{
Cell[88591, 2548, 1060, 33, 44, "Input"],
Cell[89654, 2583, 1161, 34, 45, "Output"]
}, Open  ]],
Cell[CellGroupData[{
Cell[90852, 2622, 2910, 91, 45, "Input"],
Cell[93765, 2715, 2212, 68, 45, "Output"]
}, Open  ]],
Cell[95992, 2786, 900, 15, 77, "Text"],
Cell[CellGroupData[{
Cell[96917, 2805, 972, 25, 45, "Input"],
Cell[97892, 2832, 644, 20, 45, "Output"]
}, Open  ]],
Cell[98551, 2855, 1121, 17, 99, "Text"],
Cell[CellGroupData[{
Cell[99697, 2876, 2221, 65, 44, "Input"],
Cell[101921, 2943, 1808, 53, 45, "Output"]
}, Open  ]],
Cell[103744, 2999, 743, 12, 77, "Text"],
Cell[104490, 3013, 1298, 38, 57, "InputOnly"],
Cell[105791, 3053, 248, 3, 33, "Text"],
Cell[CellGroupData[{
Cell[106064, 3060, 3176, 94, 45, "Input"],
Cell[109243, 3156, 438, 10, 41, "Output"]
}, Open  ]],
Cell[109696, 3169, 167, 2, 33, "Text"],
Cell[CellGroupData[{
Cell[109888, 3175, 2903, 91, 45, "Input"],
Cell[112794, 3268, 254, 7, 41, "Output"]
}, Open  ]],
Cell[113063, 3278, 1305, 20, 77, "Text"],
Cell[CellGroupData[{
Cell[114393, 3302, 6599, 191, 69, "Input"],
Cell[120995, 3495, 567, 16, 41, "Output"]
}, Open  ]],
Cell[121577, 3514, 1254, 28, 81, "Text"],
Cell[CellGroupData[{
Cell[122856, 3546, 13386, 377, 96, "Input"],
Cell[136245, 3925, 342, 10, 41, "Output"]
}, Open  ]],
Cell[136602, 3938, 658, 11, 77, "Text"],
Cell[137263, 3951, 721, 20, 59, "InputOnly"],
Cell[CellGroupData[{
Cell[138009, 3975, 3160, 93, 44, "Input"],
Cell[141172, 4070, 475, 14, 41, "Output"]
}, Open  ]],
Cell[CellGroupData[{
Cell[141684, 4089, 2312, 71, 69, "Input"],
Cell[143999, 4162, 405, 13, 41, "Output"]
}, Open  ]],
Cell[CellGroupData[{
Cell[144441, 4180, 4797, 142, 95, "Input"],
Cell[149241, 4324, 378, 10, 41, "Output"]
}, Open  ]],
Cell[149634, 4337, 172, 4, 33, "Text"],
Cell[149809, 4343, 1650, 50, 86, "InputOnly"]
}, Open  ]],
Cell[CellGroupData[{
Cell[151496, 4398, 143, 2, 60, "Subsection",
 CellTags->"qa:7.4"],
Cell[151642, 4402, 1195, 34, 103, "Text"],
Cell[152840, 4438, 1676, 44, 56, "InputOnly"],
Cell[154519, 4484, 159, 3, 33, "Text"],
Cell[CellGroupData[{
Cell[154703, 4491, 1351, 39, 44, "Input"],
Cell[156057, 4532, 3519, 102, 69, "Output"]
}, Open  ]],
Cell[159591, 4637, 556, 9, 77, "Text"],
Cell[CellGroupData[{
Cell[160172, 4650, 1532, 44, 45, "Input"],
Cell[161707, 4696, 2440, 75, 45, "Output"]
}, Open  ]],
Cell[164162, 4774, 503, 8, 77, "Text"],
Cell[CellGroupData[{
Cell[164690, 4786, 1369, 41, 45, "Input"],
Cell[166062, 4829, 2414, 73, 45, "Output"]
}, Open  ]],
Cell[168491, 4905, 899, 16, 101, "Text"],
Cell[CellGroupData[{
Cell[169415, 4925, 3095, 92, 45, "Input"],
Cell[172513, 5019, 3427, 106, 45, "Output"]
}, Open  ]],
Cell[175955, 5128, 510, 8, 77, "Text"],
Cell[176468, 5138, 375, 7, 77, "Text"],
Cell[176846, 5147, 1676, 45, 58, "InputOnly"],
Cell[178525, 5194, 212, 3, 33, "Text"],
Cell[CellGroupData[{
Cell[178762, 5201, 965, 26, 44, "Input"],
Cell[179730, 5229, 1848, 55, 45, "Output"]
}, Open  ]],
Cell[CellGroupData[{
Cell[181615, 5289, 849, 25, 44, "Input"],
Cell[182467, 5316, 1790, 54, 45, "Output"]
}, Open  ]],
Cell[184272, 5373, 305, 5, 77, "Text"],
Cell[184580, 5380, 292, 8, 52, "InputOnly"],
Cell[184875, 5390, 457, 8, 77, "Text"],
Cell[185335, 5400, 845, 14, 121, "Text"],
Cell[CellGroupData[{
Cell[186205, 5418, 2594, 77, 45, "Input"],
Cell[188802, 5497, 2390, 74, 45, "Output"]
}, Open  ]],
Cell[CellGroupData[{
Cell[191229, 5576, 1055, 28, 44, "Input"],
Cell[192287, 5606, 956, 27, 44, "Output"]
}, Open  ]],
Cell[193258, 5636, 374, 7, 77, "Text"],
Cell[CellGroupData[{
Cell[193657, 5647, 2547, 78, 45, "Input"],
Cell[196207, 5727, 2393, 74, 45, "Output"]
}, Open  ]],
Cell[CellGroupData[{
Cell[198637, 5806, 1873, 55, 44, "Input"],
Cell[200513, 5863, 1685, 51, 44, "Output"]
}, Open  ]],
Cell[202213, 5917, 817, 12, 143, "Text"],
Cell[203033, 5931, 575, 9, 77, "Text"],
Cell[203611, 5942, 3455, 102, 110, "InputOnly"],
Cell[207069, 6046, 337, 7, 77, "Text"],
Cell[CellGroupData[{
Cell[207431, 6057, 2307, 69, 44, "Input"],
Cell[209741, 6128, 2120, 65, 44, "Output"]
}, Open  ]],
Cell[211876, 6196, 536, 9, 77, "Text"],
Cell[212415, 6207, 2838, 82, 81, "InputOnly"],
Cell[215256, 6291, 286, 4, 33, "Text"],
Cell[CellGroupData[{
Cell[215567, 6299, 1056, 28, 44, "Input"],
Cell[216626, 6329, 1828, 53, 44, "Output"]
}, Open  ]],
Cell[CellGroupData[{
Cell[218491, 6387, 1043, 28, 44, "Input"],
Cell[219537, 6417, 777, 22, 44, "Output"]
}, Open  ]],
Cell[CellGroupData[{
Cell[220351, 6444, 950, 27, 44, "Input"],
Cell[221304, 6473, 759, 22, 44, "Output"]
}, Open  ]],
Cell[CellGroupData[{
Cell[222100, 6500, 1003, 27, 44, "Input"],
Cell[223106, 6529, 829, 23, 44, "Output"]
}, Open  ]],
Cell[223950, 6555, 385, 7, 55, "Text"],
Cell[224338, 6564, 153, 4, 33, "Text"],
Cell[CellGroupData[{
Cell[224516, 6572, 912, 27, 44, "Input"],
Cell[225431, 6601, 913, 27, 44, "Output"]
}, Open  ]],
Cell[CellGroupData[{
Cell[226381, 6633, 812, 24, 44, "Input"],
Cell[227196, 6659, 789, 24, 44, "Output"]
}, Open  ]],
Cell[228000, 6686, 1369, 25, 165, "Text"]
}, Open  ]]
}, Open  ]]
}
]
*)

(* End of internal cache information *)
